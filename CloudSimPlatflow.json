[{"id":"3f6b092a.4e0e46","type":"tab","label":"IoT - Ecosystem ","disabled":false,"info":"Geographic Area"},{"id":"551be607.5d9aa8","type":"tab","label":"GA - Setup","disabled":false,"info":"Geographic Area"},{"id":"596fa7a0.139bc8","type":"tab","label":"GA - RUi - Setup","disabled":false,"info":"RUi - Setup"},{"id":"fc65fec6.42377","type":"tab","label":"GA - BUk - Setup","disabled":false,"info":""},{"id":"134bc9b.a104536","type":"tab","label":"GA - SCUm - Setup","disabled":false,"info":""},{"id":"ff8a25f8.46f4a8","type":"tab","label":"RUi - C&M","disabled":false,"info":"**Remote:**\n * - Control;\n * - Monitorization"},{"id":"31c084fe.cf76cc","type":"tab","label":"RUi - Alarms ","disabled":false,"info":""},{"id":"35c302a8.60132e","type":"tab","label":"RUi - Smart Metering","disabled":false,"info":""},{"id":"831cc47f.89dad8","type":"tab","label":"IoT RUi TSHA","disabled":false,"info":"Smart/ Home Automation Traffic"},{"id":"51f5d79.b28bf28","type":"tab","label":"IoT RUi TEE","disabled":false,"info":"Energy Efficiency Traffic"},{"id":"4290e92f.0ecb48","type":"tab","label":"IoT RUi TSE","disabled":false,"info":"Security Traffic"},{"id":"43cfaad.69d0254","type":"tab","label":"IoT RUi TSA","disabled":false,"info":"Safety Traffic"},{"id":"d19e86ab.7f7bd8","type":"tab","label":"IoT BUk TSBA","disabled":false,"info":""},{"id":"b008dbc8.7e8528","type":"tab","label":"MQTT ETMP Bridge","disabled":false,"info":""},{"id":"92ee3c55.ae59d","type":"tab","label":"Bridging example","disabled":false,"info":""},{"id":"78619d8c.bb02c4","type":"tab","label":"Door - State Machine","disabled":false,"info":""},{"id":"cd63f7d2.d06058","type":"tab","label":"Garage - State Machine","disabled":false,"info":""},{"id":"e54d56ac.3ac8b8","type":"tab","label":"Control System SM","disabled":false,"info":""},{"id":"8ea7ed95.a52c2","type":"tab","label":"Finite State Machine","disabled":false,"info":""},{"id":"c781321.8c884d","type":"tab","label":"Simple state machine with data object","disabled":false,"info":""},{"id":"44c9342c.afdafc","type":"tab","label":"State machine with feedback flow","disabled":false,"info":""},{"id":"7cc4d802.f58018","type":"tab","label":"State machine with rbe","disabled":false,"info":""},{"id":"ac473a23.827f28","type":"tab","label":"SMXSTATE 1","disabled":false,"info":""},{"id":"ac6c84a4.1181c8","type":"tab","label":"Machine Learning","disabled":false,"info":""},{"id":"f2bea882.29ed28","type":"tab","label":"Light Increment","disabled":false,"info":""},{"id":"39070158.04662e","type":"tab","label":"alarm system","disabled":false,"info":""},{"id":"c6a59983.04f118","type":"tab","label":"operating time","disabled":false,"info":""},{"id":"a62f0ac2.511d88","type":"tab","label":"traffic lights","disabled":false,"info":""},{"id":"4c6af78d.1f6d78","type":"tab","label":"world map 1","disabled":false,"info":""},{"id":"14e6b0a5.2fa43f","type":"tab","label":"world map 2","disabled":false,"info":""},{"id":"4534bb98.fe4de4","type":"tab","label":"WireShark capture","disabled":false,"info":""},{"id":"fa7fbb2c.b9a6e8","type":"tab","label":"GSuite"},{"id":"13f967d7.460f48","type":"tab","label":"Buffer to String","disabled":false,"info":""},{"id":"6e5a5564.0bea8c","type":"tab","label":"Flow 2","disabled":false,"info":""},{"id":"6d115eae.6e232","type":"tab","label":"Flow 6","disabled":false,"info":""},{"id":"e0de38a7.3e37b8","type":"tab","label":"Flow 5","disabled":false,"info":""},{"id":"cf0b8c75.8bb3","type":"tab","label":"Flow 8","disabled":false,"info":""},{"id":"b0341a6e.43f0c8","type":"tab","label":"Form Javascript","disabled":false,"info":""},{"id":"dfcdc1a6.19946","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"f9cd24b0.e484f8","type":"tab","label":"fluxes","disabled":false,"info":""},{"id":"fe161492.f410e8","type":"tab","label":"Flow 10","disabled":false,"info":""},{"id":"31b60bf0.54d7e4","type":"tab","label":"Flow 13","disabled":false,"info":""},{"id":"4e38d7b0.f70e08","type":"tab","label":"Flow 14 - Camera IP","disabled":false,"info":""},{"id":"69ea4f25.65d09","type":"tab","label":"TP-LINK","disabled":false,"info":""},{"id":"38b9bd66.4b2342","type":"tab","label":"Flow 3","disabled":false,"info":""},{"id":"2c19adbe.29cc82","type":"subflow","name":"Settings","info":"Persist settings in a flat file.\n\nIf msg.clearAll is set to true, the settings are truncated.\n\nSending a topic of \"get\" will return the property you've named in the payload.\n\nAny other topic will be treated as a property and the payload will be saved to the settings file.","category":"","in":[{"x":60,"y":280,"wires":[{"id":"fd0da0a3.6d367"}]}],"out":[{"x":400,"y":220,"wires":[{"id":"fd0da0a3.6d367","port":0}]}],"env":[]},{"id":"1d255820.103b18","type":"tls-config","z":"","name":"AWS","cert":"C:\\Users\\SakDev\\Desktop\\Dev\\AWS\\Certs\\MySimulatedDevice\\15a6d5bf2f-certificate.pem.crt","key":"C:\\Users\\SakDev\\Desktop\\Dev\\AWS\\Certs\\MySimulatedDevice\\15a6d5bf2f-private.pem.key","ca":"C:\\Users\\SakDev\\Desktop\\Dev\\AWS\\Certs\\MySimulatedDevice\\rootCA.pem","certname":"","keyname":"","caname":"","verifyservercert":true},{"id":"26753ca0.f56a64","type":"mqtt-broker","z":"","broker":"localhost","port":"1883","clientid":"Test client","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"hello","willTopic":"sensors/sensor1/status","willQos":"0","willRetain":"true","willPayload":"0"},{"id":"163245a0.3e8c7a","type":"mqtt-broker","z":"","name":"BROKER HGW","broker":"192.168.1.84","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"a324f615.8ccc38","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#004d65","baseFont":"Trebuchet MS,Helvetica,sans-serif","edited":false,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"NEW","default":"#4B7930","baseColor":"#5f5f5f","baseFont":"Trebuchet MS,Helvetica,sans-serif","reset":false},"themeState":{"base-color":{"default":"#4B7930","value":"#5f5f5f","edited":true},"page-titlebar-backgroundColor":{"value":"#000000","edited":true},"page-backgroundColor":{"value":"#5f5f5f","edited":true},"page-sidebar-backgroundColor":{"value":"#5f5f5f","edited":true},"group-textColor":{"value":"#ffffff","edited":true},"group-borderColor":{"value":"#8a8a8a","edited":true},"group-backgroundColor":{"value":"#929292","edited":true},"widget-textColor":{"value":"#ffffff","edited":true},"widget-backgroundColor":{"value":"#d1d1d1","edited":true},"widget-borderColor":{"value":"#929292","edited":true},"base-font":{"value":"Trebuchet MS,Helvetica,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"M2M/IoT Ecosystem Traffic Modeling Platform ","hideToolbar":"false","allowSwipe":"true","allowTempTheme":"false","dateFormat":"DD/MM/YYYY","sizes":{"sx":47,"sy":47,"gx":1,"gy":1,"cx":1,"cy":1,"px":0,"py":0},"lockMenu":"true"}},{"id":"badc665b.a834d8","type":"ui_tab","z":"","name":"BUILDING UNIT k","icon":"fa-building","order":4,"disabled":false,"hidden":false},{"id":"1df636cf.ed4589","type":"ui_tab","z":"","name":"SMARTCITY UNIT m","icon":"fa-street-view","order":6,"disabled":false,"hidden":false},{"id":"74214938.2526a8","type":"ui_group","z":"","name":"LIGHTS A","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"fdecc90f.dbad88","type":"ui_group","z":"","name":"LIGHTS B","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"f0457a6a.95a6d8","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"314bf7e6.cfcdf8","type":"ui_group","z":"","name":"MAC APP","tab":"","order":4,"disp":true,"width":"12","collapse":false},{"id":"cf4aa592.c60b88","type":"ui_group","z":"","name":"HGW BROKER","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"4df2a157.a9716","type":"ui_group","z":"","name":"BGW BROKER","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"5695ac77.a688e4","type":"ui_group","z":"","name":"RGW BROKER","tab":"","order":3,"disp":true,"width":"6","collapse":false},{"id":"f3c2beec.52cfd","type":"mqtt-broker","z":"","name":"BROKER - BGW","broker":"192.168.1.86","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"dd645514.5e4048","type":"ui_group","z":"","name":"Function 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"6ed7e5f3.da8acc","type":"ui_group","z":"","name":"Function 2","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"2407e828.704f28","type":"ui_group","z":"","name":"Function 3","tab":"","order":3,"disp":true,"width":"6","collapse":false},{"id":"aa5fa04f.1c2fc","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"3463d2c2.0d6f7e","type":"ui_group","z":"","name":"Input - Parameters","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"58fb51d7.46ed4","type":"ui_group","z":"","name":"Output - Parameters","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"3e683d45.acd522","type":"ui_group","z":"","name":"Report","tab":"","order":2,"disp":true,"width":"18"},{"id":"f6f05aff.d0cef8","type":"ui_group","z":"","name":"Selection","tab":"","order":1,"disp":true,"width":"5"},{"id":"24de497b.98c5e6","type":"ui_group","z":"","name":"Output Database","tab":"","order":3,"disp":true,"width":"11","collapse":false},{"id":"ad2674a5.9ca4d8","type":"ui_group","z":"","name":"Charts","tab":"","order":2,"disp":false,"width":"6"},{"id":"bfbf1ad9.0a87e8","type":"ui_group","z":"","name":"Inputs","tab":"","order":1,"disp":false,"width":"6"},{"id":"42f5a16f.14b96","type":"ui_group","z":"","name":"Group 3","tab":"","order":3,"disp":false,"width":"6"},{"id":"65e8366a.4d8208","type":"ui_group","z":"","name":"STG H Machine","tab":"","order":4,"disp":true,"width":"6"},{"id":"a5d3e97a.a1c238","type":"ui_group","z":"","name":"Numbers","tab":"","order":2,"disp":false,"width":"5"},{"id":"6ee7dbde.f6c904","type":"ui_group","z":"","name":"Chart","tab":"","order":1,"disp":true,"width":"18","collapse":false},{"id":"f723ff09.15c53","type":"ui_group","z":"","name":"Thermostat demo","tab":"","order":2,"disp":true,"width":"6"},{"id":"9f8d865f.7e9bb8","type":"MySQLdatabase","z":"","host":"127.0.0.1","port":"3306","db":"nodered","tz":""},{"id":"20e74dfa.05ee02","type":"ui_group","z":"","name":"MiFlora","tab":"","order":2,"disp":true,"width":"6"},{"id":"f82834fb.177208","type":"ui_group","z":"","name":"Report","tab":"","order":2,"disp":true,"width":"18"},{"id":"d5f8762a.159668","type":"ui_group","z":"","name":"Selection","tab":"","order":1,"disp":true,"width":"5"},{"id":"596b8175.bd225","type":"ui_group","z":"","name":"Group 2","tab":"","order":2,"disp":true,"width":"6"},{"id":"df02ee23.4e8b1","type":"ui_group","z":"","name":"Control","tab":"","disp":true,"width":"4","collapse":false},{"id":"46033b2e.ac6f84","type":"ui_group","z":"","name":"Status","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"72bad933.bc8f68","type":"sqlitedb","z":0,"db":"/tmp/sqlite","mode":"RWC"},{"id":"9f68c81a.e99958","type":"sqlitedb","z":0,"db":"/home/pi/sqlite/nodered"},{"id":"93835667.e67c88","type":"sqlitedb","z":"","db":"/Users/manue/PhD IoT SimulTool/Database/GeographicAreaUsers/GeographicAUsers_DB.db","mode":"RWC"},{"id":"448037d.23f58c8","type":"sqlitedb","z":0,"db":"/home/pi/sqlite/nodered"},{"id":"39c9ea3a.574786","type":"ui_group","z":"","name":"Control Panel","tab":"","order":2,"disp":true,"width":"8"},{"id":"74d0efb1.9fdec","type":"ui_group","name":"Group","tab":"","order":null,"disp":true,"width":6},{"id":"5349c636.d80958","type":"ui_group","z":"","name":"MQTT Feed","tab":"","disp":true,"width":"12","collapse":false},{"id":"b5044544.10f438","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"Certificates.cer","keyname":"Certificates.p12","caname":"","verifyservercert":false},{"id":"e4f7ccae.05141","type":"ui_group","z":"","name":"Accel/Magento/Gyro","tab":"","disp":true,"width":"12","collapse":false},{"id":"328de0c7.d5805","type":"ui_group","z":"","name":"Accel/Magento/Gyro","tab":"","disp":true,"width":"24","collapse":false},{"id":"f3cbed4d.20602","type":"ui_group","z":"","name":"Default","tab":"","disp":false,"width":"10","collapse":false},{"id":"36bbecf8.b46d94","type":"ui_group","z":"","name":"Add an Asset","tab":"","order":1,"disp":true,"width":"6"},{"id":"ee5f4e77.cf68","type":"ui_group","z":"","name":"Select an Asset to Delete","tab":"","order":2,"disp":true,"width":"8"},{"id":"4042e265.d0dc1c","type":"ui_group","z":"","name":"Inventory List","tab":"","order":3,"disp":true,"width":"12"},{"id":"952161c4.8a965","type":"ui_group","z":"","name":"Nest widget","tab":"","order":2,"disp":true,"width":"6"},{"id":"415fb37.4de9b4c","type":"ui_tab","z":"","name":"ECOSYSTEM CHARACTERIZATION","icon":"satellite","order":1,"disabled":false,"hidden":false},{"id":"90ca9e8e.e1328","type":"ui_group","z":"","name":"BUILDING UNITS","tab":"415fb37.4de9b4c","order":23,"disp":true,"width":"18","collapse":true},{"id":"b7119513.02ca48","type":"ui_group","z":"","name":"SMARTCITY UNITS ","tab":"415fb37.4de9b4c","order":24,"disp":true,"width":"18","collapse":true},{"id":"1d9bd49e.0c2aeb","type":"ui_tab","z":"","name":"RESIDENTIAL UNIT i","icon":"fa-lg fa-home","order":2,"disabled":false,"hidden":false},{"id":"e23f8179.e6378","type":"ui_group","z":"","name":"Residential Unit - MDMCi","tab":"1d9bd49e.0c2aeb","order":2,"disp":true,"width":"18","collapse":true},{"id":"70ba33b3.fa191c","type":"ui_group","z":"","name":"Residential Unit - AMCi","tab":"1d9bd49e.0c2aeb","order":3,"disp":true,"width":"18","collapse":true},{"id":"d1227c9b.842d","type":"ui_group","name":"Group","tab":"","order":null,"disp":true,"width":6},{"id":"49f47f03.1fe74","type":"ui_group","z":"","name":"ECOSYSTEM","tab":"415fb37.4de9b4c","order":1,"disp":true,"width":"18","collapse":true},{"id":"b2743b69.be6368","type":"ui_group","z":"","name":"Residential Unit - LMCi","tab":"1d9bd49e.0c2aeb","order":4,"disp":true,"width":"18","collapse":true},{"id":"5f633fbc.12af9","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":18,"width":"18","height":"1"},{"id":"f7f9f864.18d968","type":"ui_group","z":"","name":"MENU A","tab":"badc665b.a834d8","order":1,"disp":true,"width":"18","collapse":false},{"id":"b752d353.4a435","type":"ui_group","z":"","name":"MENU B","tab":"badc665b.a834d8","order":2,"disp":true,"width":"18","collapse":false},{"id":"89f5f128.f29d5","type":"ui_group","z":"","name":"MENU C","tab":"badc665b.a834d8","order":3,"disp":true,"width":"18","collapse":false},{"id":"6de7d659.34b4d8","type":"ui_spacer","name":"spacer","group":"f7f9f864.18d968","order":1,"width":"6","height":"4"},{"id":"265d04f0.656c3c","type":"ui_spacer","name":"spacer","group":"f7f9f864.18d968","order":1,"width":"6","height":"4"},{"id":"e647fe30.e623a","type":"ui_spacer","name":"spacer","group":"f7f9f864.18d968","order":1,"width":"6","height":"4"},{"id":"36c4d46c.2bef8c","type":"ui_spacer","name":"spacer","group":"b752d353.4a435","order":2,"width":"6","height":"4"},{"id":"239a7f71.1bfe5","type":"ui_spacer","name":"spacer","group":"b752d353.4a435","order":2,"width":"6","height":"4"},{"id":"244f3335.d68f0c","type":"ui_spacer","name":"spacer","group":"b752d353.4a435","order":2,"width":"6","height":"4"},{"id":"b9e92171.93f7","type":"ui_spacer","name":"spacer","group":"89f5f128.f29d5","order":3,"width":"6","height":"4"},{"id":"eb014e12.af521","type":"ui_spacer","name":"spacer","group":"89f5f128.f29d5","order":3,"width":"6","height":"4"},{"id":"68feb07b.0ae82","type":"ui_spacer","name":"spacer","group":"89f5f128.f29d5","order":3,"width":"6","height":"4"},{"id":"47b70afc.ae80b4","type":"ui_group","z":"","name":"MENU A","tab":"1df636cf.ed4589","order":1,"disp":true,"width":"18","collapse":false},{"id":"20130ad0.a27306","type":"ui_group","z":"","name":"MENU B","tab":"1df636cf.ed4589","order":2,"disp":true,"width":"18","collapse":false},{"id":"569e6a02.7edd24","type":"ui_group","z":"","name":"MENU C","tab":"1df636cf.ed4589","order":3,"disp":true,"width":"18","collapse":false},{"id":"9ecaa9d1.2dafb8","type":"ui_spacer","name":"spacer","group":"47b70afc.ae80b4","order":1,"width":"6","height":"4"},{"id":"4ada70a1.87f25","type":"ui_spacer","name":"spacer","group":"47b70afc.ae80b4","order":1,"width":"6","height":"4"},{"id":"946e3381.b50a6","type":"ui_spacer","name":"spacer","group":"47b70afc.ae80b4","order":1,"width":"6","height":"4"},{"id":"9b034bcd.e5e098","type":"ui_spacer","name":"spacer","group":"20130ad0.a27306","order":2,"width":"6","height":"4"},{"id":"cab39ddc.fdfdf","type":"ui_spacer","name":"spacer","group":"20130ad0.a27306","order":2,"width":"6","height":"4"},{"id":"daad69bf.c183e8","type":"ui_spacer","name":"spacer","group":"20130ad0.a27306","order":2,"width":"6","height":"4"},{"id":"1c72dde.60e9c22","type":"ui_spacer","name":"spacer","group":"569e6a02.7edd24","order":3,"width":"6","height":"4"},{"id":"465d41d3.b2826","type":"ui_spacer","name":"spacer","group":"569e6a02.7edd24","order":3,"width":"6","height":"4"},{"id":"33a4008b.b6ac7","type":"ui_spacer","name":"spacer","group":"569e6a02.7edd24","order":3,"width":"6","height":"4"},{"id":"5d26cb.b0f30934","type":"ui_tab","z":"","name":"IoT RESIDENTIAL TRAFFIC","icon":"fa-area-chart","order":3,"disabled":false,"hidden":false},{"id":"8386ea53.58c7c8","type":"ui_tab","z":"","name":"IoT BUILDING TRAFFIC","icon":"fa-area-chart","order":5,"disabled":false,"hidden":false},{"id":"1c6b2dbe.2fc042","type":"ui_tab","z":"","name":"IoT SMART CITY TRAFFIC","icon":"fa-area-chart","order":7,"disabled":false,"hidden":false},{"id":"ada9b0e3.ed01f","type":"ui_group","z":"","name":"TSHA - Smart/Home Automation Traffic","tab":"5d26cb.b0f30934","order":1,"disp":true,"width":"18","collapse":false},{"id":"3245b439.612d3c","type":"ui_group","z":"","name":"TEE - Energy Efficiency Traffic","tab":"5d26cb.b0f30934","order":2,"disp":true,"width":"18","collapse":false},{"id":"f467c1ab.4f4fb","type":"ui_group","z":"","name":"TSE - Security Traffic","tab":"5d26cb.b0f30934","order":3,"disp":true,"width":"18","collapse":false},{"id":"a602bbc8.7c1638","type":"ui_group","z":"","name":"TSA - Safety Traffic","tab":"5d26cb.b0f30934","order":4,"disp":true,"width":"18","collapse":false},{"id":"ea2190e6.e9c88","type":"ui_group","z":"","name":"THAS - Health and Aging Traffic","tab":"5d26cb.b0f30934","order":5,"disp":true,"width":"18","collapse":false},{"id":"21c26252.14686e","type":"ui_group","z":"","name":"TSM - Smart Metering Traffic","tab":"5d26cb.b0f30934","order":6,"disp":true,"width":"18","collapse":false},{"id":"ca34e864.358098","type":"ui_group","z":"","name":"Garage","tab":"","order":2,"disp":false,"width":"10"},{"id":"1628d2b7.bbf7ad","type":"ui_group","z":"","name":"Default","tab":"","order":1,"disp":false,"width":"24","collapse":false},{"id":"394e6460.9fb8ac","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"7ba25c20.26e324","type":"ui_group","z":"","name":"Parameters","tab":"","disp":true,"width":"6","collapse":false},{"id":"17582414.3a29ac","type":"ui_group","z":"","name":"test","tab":"","disp":true,"width":"12"},{"id":"c8b4c320.ef9a3","type":"sqlitedb","z":"","db":"/home/pi/sqlite/nodered"},{"id":"7a38ee23.3b9ef","type":"ui_group","z":"","name":"MiFlora","tab":"","order":2,"disp":true,"width":"6"},{"id":"24f3372d.944e28","type":"ui_group","z":"","name":"Report","tab":"","order":2,"disp":true,"width":"18"},{"id":"d69b4cc2.fe6d3","type":"ui_group","z":"","name":"Selection","tab":"","order":1,"disp":true,"width":"5"},{"id":"a8880dc.be6f7f","type":"ui_group","z":"","name":"AC","tab":"","disp":false,"width":"6"},{"id":"eec3ba19.574c98","type":"mqtt-broker","z":"","broker":"192.168.1.17","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"d3590a83.185328","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"12","collapse":false},{"id":"d86b56ee.911ac8","type":"sqlitedb","db":"test.sqlite"},{"id":"4460f804.990b48","type":"sqlitedb","z":"","db":"/opt/node-red/.userdir/db.sqlite"},{"id":"e8098ac0.78f4a8","type":"sqlitedb","db":"test.sqlite"},{"id":"9dc39151.367ac","type":"ui_group","z":"","name":"Insert Data Test","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"13148214.19838e","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6"},{"id":"a1cac069.4fb35","type":"sqlitedb","z":"","db":"sqlite"},{"id":"45dc1b63.cbc4d4","type":"ui_group","z":"","name":"Database","tab":"","disp":true,"width":"10"},{"id":"e9ace67a.60a4c8","type":"ui_group","z":"","name":"Form","tab":"","disp":true,"width":"6","collapse":false},{"id":"e26e5d53.28874","type":"sqlitedb","z":"","db":"sqlite"},{"id":"bbac8fec.880c5","type":"ui_group","z":"","name":"Database","tab":"","disp":true,"width":"10"},{"id":"8f3bb37f.68784","type":"MySQLdatabase","z":"","host":"10.21.11.15","port":"3306","db":"i4inari","tz":""},{"id":"af1e6c40.1d874","type":"sqlitedb","z":"","db":"/home/pi/sqlite/nodered"},{"id":"5c35658e.fc242c","type":"ui_group","z":"","name":"Report","tab":"","order":2,"disp":true,"width":"18"},{"id":"caee20f0.0a7bd","type":"ui_group","z":"","name":"Selection","tab":"","order":1,"disp":true,"width":"5"},{"id":"44f2d13d.90418","type":"ui_group","z":"","name":"Thermostat demo","tab":"","order":2,"disp":true,"width":"6"},{"id":"ea23af43.5701e","type":"MySQLdatabase","z":"","host":"127.0.0.1","port":"3306","db":"nodered","tz":""},{"id":"4802b93e.fdd138","type":"sqlitedb","z":"","db":"C:\\Users\\INSTAR\\.node-red\\db\\mydb.db"},{"id":"bdfc563f.5a1678","type":"ui_group","z":"","name":"Insert Data Test","tab":"","order":1,"disp":true,"width":"6"},{"id":"c88337db.5e3d58","type":"ui_group","z":"","name":"Insert Data Test","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"2c7884e3.99ac9c","type":"MySQLdatabase","z":"","host":"localhost","port":"3306","db":"ram_test","tz":""},{"id":"535e05c2.be78bc","type":"ui_group","z":"","name":"Details information","tab":"","disp":true,"width":"6","collapse":false},{"id":"952cfe7f.5e52f","type":"MySQLdatabase","z":"","host":"10.41.11.142","port":"3306","db":"dtwin","tz":""},{"id":"a2180315.879a3","type":"mongodb2","z":"","uri":"mongodb://USER:PASS@HOST.mlab.com:PORT/COLLECTION","name":"mLab / Heroku","options":"","parallelism":"-1"},{"id":"cd9394b4.4cdee8","type":"ui_group","z":"","name":"MQTT Feed","tab":"","disp":true,"width":"12","collapse":false},{"id":"f9095ae7.039e18","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"Certificates.cer","keyname":"Certificates.p12","caname":"","verifyservercert":false},{"id":"cf06c86c.b6df68","type":"ui_group","z":"","name":"Filters","tab":"","order":2,"disp":true,"width":"24","collapse":false},{"id":"438efe9c.f4753","type":"ui_group","z":"","name":"Weegschaal","tab":"","disp":false,"width":"6","collapse":false},{"id":"bd0fbc2f.0ed6e","type":"ui_group","z":"","name":"Assembly Lines","tab":"","disp":true,"width":"6","collapse":false},{"id":"a7edc980.b24298","type":"sqlitedb","z":"","db":"/var/www/html/database/cube","mode":"RWC"},{"id":"c25b80c1.2c781","type":"sqlitedb","z":"","db":"db_002"},{"id":"5cfd81fc.aea4d","type":"ui_group","name":"Group 1","tab":"","order":1,"disp":true,"width":6},{"id":"f3cf6492.3d6808","type":"mqtt-broker","z":"","broker":"192.168.1.11","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"8fa6fff8.5268e","type":"ui_group","z":"","name":"Temperature","tab":"","order":1,"disp":true,"width":"6"},{"id":"734dc508.6b54cc","type":"ui_group","z":"","name":"Barometric Pressure","tab":"","order":3,"disp":true,"width":"6"},{"id":"dc398219.eff36","type":"ui_group","z":"","name":"Humidity","tab":"","order":2,"disp":true,"width":"6"},{"id":"e3f8b62f.ce1088","type":"mqtt-broker","z":"","broker":"192.168.1.11","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1a04c323.c37a7d","type":"ui_group","z":"","name":"Temperature","tab":"","order":1,"disp":true,"width":"6"},{"id":"4e79a845.4e1008","type":"ui_group","z":"","name":"Barometric Pressure","tab":"","order":3,"disp":true,"width":"6"},{"id":"8094f537.de57f8","type":"ui_group","z":"","name":"Humidity","tab":"","order":2,"disp":true,"width":"6"},{"id":"2caae02e.27754","type":"ui_group","z":"","name":"EXAMPLE - Group 1","tab":"","order":1,"disp":true,"width":"18","collapse":false},{"id":"d2b21b5b.c51c28","type":"ui_group","z":"","name":"EXAMPLE - Group 2","tab":"","order":2,"disp":true,"width":"18","collapse":false},{"id":"cb261943.5bc3e8","type":"ui_group","z":"","name":"EXAMPLE - Group 3","tab":"","order":3,"disp":true,"width":"18","collapse":false},{"id":"c8a8a1b8.cfb5a","type":"ui_group","z":"","name":"EXAMPLE - Group 4","tab":"","order":4,"disp":true,"width":"18","collapse":false},{"id":"e400d5ad.13b248","type":"ui_group","z":"","name":"EXAMPLE - Group 5","tab":"","order":5,"disp":true,"width":"18","collapse":false},{"id":"4302ffc.03f08","type":"ui_group","z":"","name":"EXAMPLE - Group 6","tab":"","order":6,"disp":true,"width":"18","collapse":false},{"id":"55553905.bcf4c8","type":"ui_group","z":"","name":"EXAMPLE - Group 7","tab":"","order":7,"disp":true,"width":"18","collapse":false},{"id":"bc63a835.9763a8","type":"ui_group","z":"","name":"EXAMPLE - Group 8","tab":"","order":8,"disp":true,"width":"18","collapse":false},{"id":"ec52a381.741ba","type":"ui_group","z":"","name":"EXAMPLE - Group 9","tab":"","order":9,"disp":true,"width":"18","collapse":false},{"id":"4c4d355f.07c21c","type":"ui_group","z":"","name":"EXAMPLE - Group 10","tab":"","order":10,"disp":true,"width":"18","collapse":false},{"id":"246a45ef.f3493a","type":"ui_group","z":"","name":"EXAMPLE - Group 11","tab":"","order":11,"disp":true,"width":"18","collapse":false},{"id":"a86d8280.60cdc","type":"ui_group","z":"","name":"EXAMPLE - Group 12","tab":"","order":12,"disp":true,"width":"18","collapse":false},{"id":"cb7c4e4.778afb","type":"mqtt-broker","z":"","name":"ETMP_Broker","broker":"192.168.1.64","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"Connection_ON","birthQos":"0","birthRetain":"false","birthPayload":"\"Succeed\"","closeTopic":"Disconnected","closeQos":"0","closeRetain":"false","closePayload":"\"Succeed\"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"35b167d5.3d5318","type":"ui_spacer","name":"spacer","group":"70ba33b3.fa191c","order":17,"width":"18","height":"1"},{"id":"9bf9842e.da3fe8","type":"ui_group","z":"","name":"Residential Unit - HMCi","tab":"1d9bd49e.0c2aeb","order":5,"disp":true,"width":"18","collapse":true},{"id":"d3e55792.d93848","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":18,"width":"18","height":"1"},{"id":"45e0c91d.beb378","type":"ui_group","z":"","name":"Residential Unit - ELMCi","tab":"1d9bd49e.0c2aeb","order":7,"disp":true,"width":"18","collapse":true},{"id":"286ef18b.3c6f7e","type":"ui_spacer","name":"spacer","group":"45e0c91d.beb378","order":5,"width":"18","height":"4"},{"id":"70717475.c2b51c","type":"ui_group","z":"","name":"Residential Unit - EHMCi","tab":"1d9bd49e.0c2aeb","order":8,"disp":true,"width":"18","collapse":true},{"id":"88ea930a.6005","type":"ui_group","z":"","name":"Residential Unit - ASMCi","tab":"1d9bd49e.0c2aeb","order":10,"disp":true,"width":"18","collapse":true},{"id":"ce40c534.8806f8","type":"ui_spacer","name":"spacer","group":"70717475.c2b51c","order":2,"width":"18","height":"4"},{"id":"e17348c6.d5e278","type":"ui_group","z":"","name":"Residential Unit - IPDi","tab":"1d9bd49e.0c2aeb","order":11,"disp":true,"width":"18","collapse":true},{"id":"ae5bdf92.85322","type":"ui_spacer","name":"spacer","group":"88ea930a.6005","order":18,"width":"18","height":"1"},{"id":"a7024cde.fba2d","type":"ui_spacer","name":"spacer","group":"e17348c6.d5e278","order":10,"width":"18","height":"1"},{"id":"4025e7c8.034e68","type":"ui_group","z":"","name":"Residential Unit - IOWDi","tab":"1d9bd49e.0c2aeb","order":12,"disp":true,"width":"18","collapse":true},{"id":"33153b13.ce4fb4","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":8,"width":"18","height":"1"},{"id":"1448138b.c1b81c","type":"ui_group","z":"","name":"Residential Unit - SFDi","tab":"1d9bd49e.0c2aeb","order":16,"disp":true,"width":"18","collapse":true},{"id":"f539cf36.9e398","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":9,"width":"18","height":"1"},{"id":"f07e3a84.1467a8","type":"ui_group","z":"","name":"Residential Unit - GLDi","tab":"1d9bd49e.0c2aeb","order":17,"disp":true,"width":"18","collapse":true},{"id":"5c315ffb.682f8","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":11,"width":"18","height":"1"},{"id":"a6d576df.b49328","type":"ui_group","z":"","name":"Residential Unit - WLDi","tab":"1d9bd49e.0c2aeb","order":18,"disp":true,"width":"18","collapse":true},{"id":"469fe045.e6fd9","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":8,"width":"18","height":"1"},{"id":"509e9477.20aa7c","type":"ui_group","z":"","name":"HASi - HEALTH AND AGING","tab":"1d9bd49e.0c2aeb","order":21,"disp":true,"width":"18","collapse":true},{"id":"5c5c9a2a.446d24","type":"ui_spacer","name":"spacer","group":"509e9477.20aa7c","order":10,"width":"18","height":"1"},{"id":"49646d32.43bfd4","type":"ui_group","z":"","name":"RUnitDB - Extender FDi","tab":"1d9bd49e.0c2aeb","order":22,"disp":false,"width":"18","collapse":false},{"id":"12f19c07.a0e9a4","type":"ui_spacer","name":"spacer","group":"49646d32.43bfd4","order":11,"width":"18","height":"1"},{"id":"5c5de969.b36f78","type":"ui_group","z":"","name":"RUnitDB - Extender EDAi","tab":"1d9bd49e.0c2aeb","order":23,"disp":false,"width":"18","collapse":false},{"id":"44adc40a.0ff00c","type":"ui_group","z":"","name":"RUnitDB - Extender DRAi","tab":"1d9bd49e.0c2aeb","order":24,"disp":false,"width":"18","collapse":false},{"id":"97127844.e73818","type":"ui_spacer","name":"spacer","group":"5c5de969.b36f78","order":11,"width":"18","height":"1"},{"id":"5029da6c.066574","type":"ui_spacer","name":"spacer","group":"44adc40a.0ff00c","order":14,"width":"18","height":"1"},{"id":"56df0979.e591c8","type":"ui_group","z":"","name":"SMi - SMART METERING","tab":"1d9bd49e.0c2aeb","order":27,"disp":true,"width":"18","collapse":true},{"id":"be7fb3ef.3f063","type":"ui_spacer","name":"spacer","group":"56df0979.e591c8","order":7,"width":"18","height":"1"},{"id":"29bcf7e0.93caf8","type":"ui_group","z":"","name":"RUnitDB - Extender GSMi","tab":"1d9bd49e.0c2aeb","order":30,"disp":false,"width":"18","collapse":false},{"id":"60e4d4cc.92485c","type":"ui_spacer","name":"spacer","group":"29bcf7e0.93caf8","order":6,"width":"18","height":"1"},{"id":"46789fb7.5e156","type":"ui_group","z":"","name":"RUnitDB - Extender WSMi","tab":"1d9bd49e.0c2aeb","order":33,"disp":false,"width":"18","collapse":false},{"id":"6ced56d8.4e4de8","type":"ui_spacer","name":"spacer","group":"46789fb7.5e156","order":6,"width":"18","height":"1"},{"id":"82eb2228.c3b0c","type":"ui_spacer","name":"spacer","group":"e23f8179.e6378","order":19,"width":"18","height":1},{"id":"c552e496.496868","type":"ui_spacer","name":"spacer","group":"e23f8179.e6378","order":15,"width":"7","height":1},{"id":"181edec2.8b5831","type":"ui_spacer","name":"spacer","group":"e23f8179.e6378","order":18,"width":"7","height":1},{"id":"c12eb838.fb3988","type":"ui_spacer","name":"spacer","group":"e23f8179.e6378","order":20,"width":"3","height":1},{"id":"caa79d79.0e11d","type":"ui_spacer","name":"spacer","group":"e23f8179.e6378","order":25,"width":"3","height":1},{"id":"dfef509a.1474c","type":"ui_spacer","name":"spacer","group":"e23f8179.e6378","order":29,"width":"18","height":1},{"id":"5ccb8587.69eccc","type":"ui_spacer","name":"spacer","group":"e23f8179.e6378","order":26,"width":"7","height":1},{"id":"3b1b7f27.2551a","type":"ui_spacer","name":"spacer","group":"70ba33b3.fa191c","order":2,"width":"3","height":1},{"id":"98167a8a.966238","type":"ui_spacer","name":"spacer","group":"70ba33b3.fa191c","order":7,"width":"3","height":1},{"id":"6dc6ec4f.abe4f4","type":"ui_spacer","name":"spacer","group":"70ba33b3.fa191c","order":8,"width":"3","height":1},{"id":"9516ae83.60c0c","type":"ui_spacer","name":"spacer","group":"70ba33b3.fa191c","order":13,"width":"3","height":1},{"id":"499ad911.a765a8","type":"ui_spacer","name":"spacer","group":"70ba33b3.fa191c","order":14,"width":"6","height":1},{"id":"ec69ae55.36c8c","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":2,"width":"3","height":1},{"id":"19d91ade.078e25","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":7,"width":"3","height":1},{"id":"5560783f.fb53a8","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":8,"width":"3","height":1},{"id":"abb4ba21.8dfda8","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":13,"width":"3","height":1},{"id":"7c7ffa9f.5c6734","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":14,"width":"6","height":1},{"id":"e029aa0d.886178","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":19,"width":"3","height":1},{"id":"d61888f4.f5c438","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":24,"width":"3","height":1},{"id":"ff3164e0.ab8ab8","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":25,"width":"3","height":1},{"id":"aa9124ad.b4b2a8","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":30,"width":"3","height":1},{"id":"608af71f.551f78","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":17,"width":"6","height":1},{"id":"1d37d151.fb0ccf","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":34,"width":"18","height":1},{"id":"7d852ef.9844ad","type":"ui_spacer","name":"spacer","group":"b2743b69.be6368","order":31,"width":"6","height":1},{"id":"54aed936.575968","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":2,"width":"3","height":1},{"id":"c6ad173b.4fe5a8","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":7,"width":"3","height":1},{"id":"4d5735d2.e13fcc","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":8,"width":"3","height":1},{"id":"68b445d1.217d0c","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":13,"width":"3","height":1},{"id":"3b1947e.504cbb8","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":14,"width":"6","height":1},{"id":"afac1a11.2ebcc8","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":19,"width":"3","height":1},{"id":"eeeff621.f89688","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":24,"width":"3","height":1},{"id":"152932e6.d54a0d","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":25,"width":"18","height":1},{"id":"39c75cd4.57c164","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":26,"width":"3","height":1},{"id":"95ce871f.92e578","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":31,"width":"3","height":1},{"id":"d3240525.a7bef8","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":32,"width":"6","height":1},{"id":"d3acc404.64f838","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":35,"width":"18","height":1},{"id":"93137a2d.d094f8","type":"ui_spacer","name":"spacer","group":"9bf9842e.da3fe8","order":17,"width":"6","height":1},{"id":"55bcfa3a.7c9f24","type":"ui_spacer","name":"spacer","group":"88ea930a.6005","order":3,"width":"3","height":1},{"id":"b025a804.c60878","type":"ui_spacer","name":"spacer","group":"88ea930a.6005","order":8,"width":"3","height":1},{"id":"c17e80af.8c903","type":"ui_spacer","name":"spacer","group":"88ea930a.6005","order":9,"width":"3","height":1},{"id":"d050966.b077b68","type":"ui_spacer","name":"spacer","group":"88ea930a.6005","order":14,"width":"3","height":1},{"id":"d79bb327.1a495","type":"ui_spacer","name":"spacer","group":"88ea930a.6005","order":15,"width":"6","height":1},{"id":"16b748f9.188687","type":"ui_spacer","name":"spacer","group":"e17348c6.d5e278","order":2,"width":"3","height":1},{"id":"f13ca944.a68698","type":"ui_spacer","name":"spacer","group":"e17348c6.d5e278","order":7,"width":"3","height":1},{"id":"404f4e50.a96de","type":"ui_spacer","name":"spacer","group":"e17348c6.d5e278","order":8,"width":"7","height":1},{"id":"ae6ec573.4d4c08","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":2,"width":"3","height":1},{"id":"68e9cf84.537b5","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":7,"width":"3","height":1},{"id":"eeb0f446.6871b8","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":9,"width":"3","height":1},{"id":"c76e9640.12b828","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":14,"width":"3","height":1},{"id":"b9cb3bf3.dcfc38","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":15,"width":"6","height":1},{"id":"d52bcbe8.1ec938","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":19,"width":"18","height":1},{"id":"1d0595a7.fb392a","type":"ui_spacer","name":"spacer","group":"4025e7c8.034e68","order":18,"width":"6","height":1},{"id":"42b3f241.c6673c","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":3,"width":"3","height":1},{"id":"d2b43c56.f7f76","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":8,"width":"3","height":1},{"id":"c9246480.8560c8","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":10,"width":"3","height":1},{"id":"43fb2e7d.e204e","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":15,"width":"3","height":1},{"id":"c03a861a.a555d8","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":16,"width":"6","height":1},{"id":"bbc45561.8fef38","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":19,"width":"6","height":1},{"id":"e75554c5.7d94c8","type":"ui_spacer","name":"spacer","group":"1448138b.c1b81c","order":20,"width":"18","height":1},{"id":"5c5baf15.ae7a9","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":2,"width":"3","height":1},{"id":"d802da45.520678","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":7,"width":"3","height":1},{"id":"56515c0.4b700a4","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":8,"width":"7","height":1},{"id":"ca9d266.d2a99d8","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":10,"width":"7","height":1},{"id":"2da35eed.3fde32","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":12,"width":"6","height":1},{"id":"5d9a83f2.d6ff4c","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":15,"width":"6","height":1},{"id":"a6b7eab5.77e178","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":16,"width":"6","height":1},{"id":"472f4e5b.e44df","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":19,"width":"6","height":1},{"id":"fc696ef2.af107","type":"ui_spacer","name":"spacer","group":"f07e3a84.1467a8","order":20,"width":"18","height":1},{"id":"7b48a717.c5a108","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":2,"width":"3","height":1},{"id":"fc9a7016.b102","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":7,"width":"3","height":1},{"id":"f5b94a60.b334a8","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":9,"width":"7","height":1},{"id":"c194974.bbf7468","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":11,"width":"7","height":1},{"id":"e5c9c7f0.d7dc68","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":12,"width":"6","height":1},{"id":"b3a50711.34f778","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":15,"width":"6","height":1},{"id":"c99d7184.346cb","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":16,"width":"6","height":1},{"id":"9aafab2a.eb94c8","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":19,"width":"6","height":1},{"id":"936c0487.f6dc38","type":"ui_spacer","name":"spacer","group":"a6d576df.b49328","order":20,"width":"18","height":1},{"id":"8ef76d93.8ad7c","type":"ui_spacer","name":"spacer","group":"49646d32.43bfd4","order":2,"width":"3","height":1},{"id":"3fbe979b.19ee18","type":"ui_spacer","name":"spacer","group":"49646d32.43bfd4","order":7,"width":"3","height":1},{"id":"5cb0384d.af2358","type":"ui_spacer","name":"spacer","group":"49646d32.43bfd4","order":8,"width":"7","height":1},{"id":"d48dacfb.2346f","type":"ui_spacer","name":"spacer","group":"49646d32.43bfd4","order":10,"width":"7","height":1},{"id":"90eeaed4.8e688","type":"ui_spacer","name":"spacer","group":"5c5de969.b36f78","order":2,"width":"3","height":1},{"id":"276dfd53.707b22","type":"ui_spacer","name":"spacer","group":"5c5de969.b36f78","order":7,"width":"3","height":1},{"id":"3f8509de.b11526","type":"ui_spacer","name":"spacer","group":"5c5de969.b36f78","order":8,"width":"7","height":1},{"id":"ef92458c.470768","type":"ui_spacer","name":"spacer","group":"5c5de969.b36f78","order":10,"width":"7","height":1},{"id":"a06ec264.4d62a","type":"ui_spacer","name":"spacer","group":"44adc40a.0ff00c","order":2,"width":"6","height":1},{"id":"23bae640.ef85ca","type":"ui_spacer","name":"spacer","group":"44adc40a.0ff00c","order":5,"width":"6","height":1},{"id":"529d2cda.c69054","type":"ui_spacer","name":"spacer","group":"44adc40a.0ff00c","order":6,"width":"6","height":1},{"id":"8c6ff898.f7fb78","type":"ui_spacer","name":"spacer","group":"44adc40a.0ff00c","order":9,"width":"6","height":1},{"id":"e65c44ec.f69e18","type":"ui_spacer","name":"spacer","group":"44adc40a.0ff00c","order":10,"width":"6","height":1},{"id":"a3b99dac.1c1c5","type":"ui_spacer","name":"spacer","group":"44adc40a.0ff00c","order":13,"width":"6","height":1},{"id":"34d858f3.7e5b98","type":"mqtt-broker","z":"","name":"RUi_Broker","broker":"192.168.1.76","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"ab4131ce.46a0d","type":"ui_group","z":"","name":"RUnitDB - Extender Security AL","tab":"1d9bd49e.0c2aeb","order":13,"disp":false,"width":"18","collapse":false},{"id":"e77aab45.09edb8","type":"ui_group","z":"","name":"Residential Unit - Security Alarm Details","tab":"1d9bd49e.0c2aeb","order":14,"disp":true,"width":"18","collapse":true},{"id":"2493c5de.e6082a","type":"ui_group","z":"","name":"Residential Unit - Safety Alarm Details","tab":"1d9bd49e.0c2aeb","order":19,"disp":false,"width":"18","collapse":false},{"id":"eb3f67d1.16f498","type":"ui_group","z":"","name":"RUnitDB - SA ALARM DETAILS","tab":"1d9bd49e.0c2aeb","order":20,"disp":false,"width":"18","collapse":false},{"id":"b46972b0.cd75b","type":"ui_group","z":"","name":"Teste","tab":"","disp":false,"width":"6","collapse":false},{"id":"57385452.40f6cc","type":"ui_group","z":"","name":"RUnitDB - Extender H&A AL","tab":"1d9bd49e.0c2aeb","order":25,"disp":false,"width":"18","collapse":false},{"id":"f256a15a.2f7ee","type":"ui_group","z":"","name":"RUnitDB - HAS ALARM DETAILS","tab":"1d9bd49e.0c2aeb","order":26,"disp":false,"width":"18","collapse":false},{"id":"73ded116.bdc89","type":"ui_spacer","name":"spacer","group":"56df0979.e591c8","order":4,"width":"7","height":1},{"id":"d5d0f5ec.38f658","type":"ui_spacer","name":"spacer","group":"56df0979.e591c8","order":6,"width":"7","height":1},{"id":"efd6f8d3.51e328","type":"ui_spacer","name":"spacer","group":"29bcf7e0.93caf8","order":3,"width":"7","height":1},{"id":"3229133.5c7ffec","type":"ui_spacer","name":"spacer","group":"29bcf7e0.93caf8","order":5,"width":"7","height":1},{"id":"a3c7b515.43ce68","type":"ui_spacer","name":"spacer","group":"46789fb7.5e156","order":3,"width":"7","height":1},{"id":"4b7d891a.e59a18","type":"ui_spacer","name":"spacer","group":"46789fb7.5e156","order":5,"width":"7","height":1},{"id":"fb87b2f.266f55","type":"ui_group","z":"","name":"RUnitDB - Extender ESM AL","tab":"1d9bd49e.0c2aeb","order":28,"disp":false,"width":"18","collapse":false},{"id":"5af2022e.21a35c","type":"ui_group","z":"","name":"RUnitDB - ESM ALARM DETAILS","tab":"1d9bd49e.0c2aeb","order":29,"disp":false,"width":"18","collapse":false},{"id":"c0c4e8ff.25b618","type":"ui_group","z":"","name":"RUnitDB - Extender GSM AL","tab":"1d9bd49e.0c2aeb","order":31,"disp":false,"width":"18","collapse":false},{"id":"4db71d1c.267e94","type":"ui_group","z":"","name":"RUnitDB - GSM ALARM DETAILS","tab":"1d9bd49e.0c2aeb","order":32,"disp":false,"width":"18","collapse":false},{"id":"13a5d08d.ed0a9f","type":"ui_group","z":"","name":"RUnitDB - Extender WSM AL","tab":"1d9bd49e.0c2aeb","order":34,"disp":false,"width":"18","collapse":false},{"id":"540d12e5.7fb6ec","type":"ui_group","z":"","name":"RUnitDB - WSM ALARM DETAILS","tab":"1d9bd49e.0c2aeb","order":35,"disp":false,"width":"18","collapse":false},{"id":"f5677b78.408908","type":"ui_spacer","name":"spacer","group":"5af2022e.21a35c","order":27,"width":"18","height":1},{"id":"3126d114.3b76de","type":"ui_spacer","name":"spacer","group":"f256a15a.2f7ee","order":10,"width":"18","height":1},{"id":"f3e6f3ae.bb55d","type":"ui_spacer","name":"spacer","group":"540d12e5.7fb6ec","order":31,"width":"18","height":1},{"id":"25019553.5296ba","type":"ui_spacer","name":"spacer","group":"4db71d1c.267e94","order":28,"width":"18","height":1},{"id":"83e38b5.b4a9f78","type":"ui_spacer","name":"spacer","group":"e77aab45.09edb8","order":11,"width":"18","height":1},{"id":"47dcd2d2.00532c","type":"ui_spacer","name":"spacer","group":"f256a15a.2f7ee","order":12,"width":"9","height":1},{"id":"d5705ffe.d0b48","type":"ui_spacer","name":"spacer","group":"f256a15a.2f7ee","order":13,"width":1,"height":1},{"id":"157c0d64.1994f3","type":"ui_spacer","name":"spacer","group":"f256a15a.2f7ee","order":18,"width":1,"height":1},{"id":"40eb3bed.3fc064","type":"ui_spacer","name":"spacer","group":"eb3f67d1.16f498","order":6,"width":"18","height":1},{"id":"fecbd691.dd46f8","type":"ui_spacer","name":"spacer","group":"509e9477.20aa7c","order":7,"width":"7","height":1},{"id":"b4133e7c.a995e","type":"ui_spacer","name":"spacer","group":"509e9477.20aa7c","order":9,"width":"7","height":1},{"id":"d13ae3ee.8b6ac","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"bfffae5.1ffae5","type":"ui_group","z":"","name":"T1","tab":"","disp":true,"width":"6","collapse":false},{"id":"c0cc012d.f2c5d","type":"ui_group","z":"","name":"T1","tab":"","disp":true,"width":"6","collapse":false},{"id":"446b7df1.4adc04","type":"ui_group","z":"","name":"Teste","tab":"","disp":false,"width":"6"},{"id":"619f4722.b3be28","type":"mui_base","z":0,"theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"m-base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"m-page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"m-page-backgroundColor":{"value":"#fafafa","edited":false},"m-page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"m-group-textColor":{"value":"#1bbfff","edited":false},"m-group-borderColor":{"value":"#ffffff","edited":false},"m-group-backgroundColor":{"value":"#ffffff","edited":false},"m-widget-textColor":{"value":"#111111","edited":false},"m-widget-backgroundColor":{"value":"#0094ce","edited":false},"m-widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"66c7844f.ed61fc","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"603b74fb.be3c0c","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"d5877b53.dad608","type":"ui_group","z":"","name":"TSBA - Smart/Home Automation Traffic","tab":"8386ea53.58c7c8","order":1,"disp":true,"width":"18","collapse":false},{"id":"6ca7bc3f.08dfd4","type":"ui_group","name":"Group 2","tab":"8386ea53.58c7c8","order":2,"disp":true,"width":6},{"id":"1e6fe036.e6b3d","type":"ui_group","name":"Group 3","tab":"8386ea53.58c7c8","order":3,"disp":true,"width":6},{"id":"d3ed9356.137f9","type":"ui_group","name":"Group 4","tab":"8386ea53.58c7c8","order":4,"disp":true,"width":6},{"id":"7eaeae90.5890a","type":"ui_spacer","name":"spacer","group":"6ca7bc3f.08dfd4","order":2,"width":"6","height":"4"},{"id":"bbd76f7a.3683c","type":"ui_spacer","name":"spacer","group":"d5877b53.dad608","order":1,"width":"6","height":"4"},{"id":"576d4b19.2e7904","type":"ui_group","z":"","name":"S1","tab":"","disp":false,"width":"6","collapse":false},{"id":"943c6c42.04c4d","type":"ui_group","z":"","name":"Residential Unit - SHA - Header","tab":"1d9bd49e.0c2aeb","order":1,"disp":false,"width":"18","collapse":false},{"id":"d43a72e.e40629","type":"ui_group","z":"","name":"Residential Unit - EE - Header","tab":"1d9bd49e.0c2aeb","order":6,"disp":false,"width":"18","collapse":false},{"id":"d50757f4.0bc228","type":"ui_group","z":"","name":"Residential Unit - SEi - Header","tab":"1d9bd49e.0c2aeb","order":9,"disp":false,"width":"18","collapse":false},{"id":"735fb107.73bb","type":"ui_group","z":"","name":"Residential Unit - SAi - Header","tab":"1d9bd49e.0c2aeb","order":15,"disp":false,"width":"18","collapse":false},{"id":"de5e9377.5a9d3","type":"ui_group","z":"","name":"Charts","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"a72b135f.2ed1e","type":"mqtt-broker","z":"","name":"","broker":"iot.eclipse.org","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"acba659f.99c0a8","type":"mqtt-broker","z":"","name":"","broker":"iot.eclipse.org","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"48313fdb.a396d","type":"ui_group","z":"","name":"Charts","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"73527280.915cdc","type":"mqtt-broker","z":"","name":"","broker":"192.168.0.35","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6d4132a7.c9d80c","type":"ui_group","z":"","name":"Raumklima","tab":"","order":5,"disp":true,"width":"6","collapse":true},{"id":"ef77a4b0.a59578","type":"ui_group","z":"","name":"Insert Data Test","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"c0ea04df.8e4448","type":"ui_group","z":"","name":"Filters","tab":"","order":2,"disp":true,"width":"24","collapse":false},{"id":"8b52127b.4dca9","type":"ui_group","z":"","name":"Signin","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"e0a4446e.86cb28","type":"ui_group","z":"","name":"SensorData","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"90630fa9.a0ecf","type":"ui_group","z":"","name":"History","tab":"","order":3,"disp":true,"width":"6","collapse":false},{"id":"b35af4d7.0f6298","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"6","collapse":false},{"id":"1be326ec.235c09","type":"ui_group","z":"","name":"Filters","tab":"","order":2,"disp":true,"width":"24","collapse":false},{"id":"281b690a.78df86","type":"mqtt-broker","z":"","broker":"localhost","port":"1883","clientid":"Pi2-NRlive-a","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"6e7d65ea.35f54c","type":"mqtt-broker","z":"","name":"local","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"9edd75b0.dff728","type":"ui_group","z":"","name":"GPS","tab":"","disp":true,"width":12,"collapse":false},{"id":"ecc5a7a8.322798","type":"ui_group","z":"","name":"Elments d'entre","tab":"","order":1,"disp":true,"width":"8"},{"id":"76df0bc9.9101a4","type":"ui_group","z":"","name":"Formulaire","tab":"","order":2,"disp":true,"width":"8"},{"id":"3254351.e34d7ca","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"32","collapse":false},{"id":"13bd550e.1d882b","type":"ui_group","z":"","name":"Google Services","tab":"ec4023ec.50c71","order":1,"disp":true,"width":"12"},{"id":"83e769eb.48a6f8","type":"ui_group","z":"","name":"Ping Latency","tab":"ec4023ec.50c71","order":2,"disp":true,"width":"25"},{"id":"ec4023ec.50c71","type":"ui_tab","z":"","name":"G-Suite Latency","icon":"fa-google","order":9},{"id":"34244758.b59378","type":"ui_group","z":"","name":"Group 2","tab":null,"order":2,"disp":true,"width":"6"},{"id":"d7ac243e.a930f8","type":"ui_group","z":"","name":"G1","tab":"d5f90b28.b4fe48","disp":false,"width":"12","collapse":false},{"id":"d5f90b28.b4fe48","type":"ui_tab","z":"","name":"TAB1","icon":"dashboard","order":11},{"id":"c4b08f06.6f347","type":"ui_group","z":"","name":"Logo","tab":"968392f8.f4912","order":1,"disp":false,"width":"4","collapse":false},{"id":"968392f8.f4912","type":"ui_tab","z":"","name":"EVEXIA","icon":"dashboard","order":10,"disabled":false,"hidden":false},{"id":"9d3a5bcf.c33b88","type":"ui_group","name":"Group 13","tab":"","order":13,"disp":true,"width":6},{"id":"c7fb16f2.457fb8","type":"ui_group","z":"","name":"Group 1","tab":"1c6b2dbe.2fc042","order":1,"disp":true,"width":"18","collapse":false},{"id":"c8979d61.b5a87","type":"ui_group","z":"","name":"Group 2","tab":"1c6b2dbe.2fc042","order":2,"disp":true,"width":"18","collapse":false},{"id":"60b1428c.c48dac","type":"ui_spacer","name":"spacer","group":"c7fb16f2.457fb8","order":1,"width":"18","height":1},{"id":"4dd7ffaa.3150f","type":"ui_spacer","name":"spacer","group":"c8979d61.b5a87","order":2,"width":"18","height":1},{"id":"7159c955.2c2ff8","type":"ui_group","z":"","name":"Video Frame","tab":"","disp":true,"width":"11","collapse":false},{"id":"d9e74149.3cee5","type":"ui_group","z":"","name":"Temp","tab":"","order":3,"disp":true,"width":"6","collapse":false},{"id":"44b21a95.fc2f44","type":"ui_group","z":"","name":"Move","tab":"","order":4,"disp":true,"width":"6","collapse":false},{"id":"30f55260.d9dcde","type":"ui_group","z":"","name":"Control","tab":"","order":2,"disp":true,"width":"6","collapse":false},{"id":"349f2be6.9272e4","type":"ui_group","z":"","name":"Fila Change","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"5273a5c1.730c3c","type":"ui_group","z":"","name":"App Settings","tab":"","order":1,"disp":true,"width":"6"},{"id":"ff95471e.3db378","type":"ui_group","z":"","name":"FTP Destinations","tab":"","order":2,"disp":true,"width":"6"},{"id":"c2a2c089.27f5a","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"6","collapse":false},{"id":"e680548c.11e958","type":"ui_group","z":"e0de38a7.3e37b8","name":"Default","tab":"d255a955.2aed28","disp":true,"width":"6"},{"id":"d255a955.2aed28","type":"ui_tab","z":"e0de38a7.3e37b8","name":"tab2","icon":"dashboard","order":12},{"id":"1b4a85bb.77d4aa","type":"mqtt-broker","z":"","name":"MACWest-1","broker":"172.16.5.7","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"4c4a0b72.179fa4","type":"ui_group","z":"","name":"Wheel load","tab":"","order":1,"disp":true,"width":"24","collapse":false},{"id":"6cab2bad.728944","type":"ui_tab","z":"","name":"Feeder test","icon":"dashboard","order":13},{"id":"5bd88f42.a6829","type":"ui_group","z":"","name":"Group 2","tab":"f2bb8123.4acaf","order":2,"disp":true,"width":"6"},{"id":"a083bd7a.dc7be","type":"ui_group","z":"","name":"Grafer","tab":"","order":1,"disp":true,"width":"32","collapse":false},{"id":"1c2e06aa.683be9","type":"ui_group","z":"","name":"Group 1","tab":"","order":1,"disp":true,"width":"32","collapse":false},{"id":"ff2eb4ad.8f0918","type":"ui_group","z":"","name":"RadioStatus","tab":"","order":5,"disp":false,"width":27,"collapse":false},{"id":"c9ed9dc1.359df","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"12","collapse":false},{"id":"69703682.a61dd8","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"12","collapse":false},{"id":"22908fdc.4a354","type":"ui_group","z":"","name":"confronti","tab":"","disp":true,"width":"6","collapse":false},{"id":"18316221.d9f69e","type":"ui_group","z":"","name":"Group 2","tab":"","disp":true,"width":"6","collapse":false},{"id":"e8bf8f8b.9da34","type":"ui_group","z":"","name":"Group 3","tab":"","disp":true,"width":"12","collapse":false},{"id":"c4c40826.b65428","type":"ui_group","z":"","name":"Group 4","tab":"","disp":true,"width":"12","collapse":false},{"id":"9d9ea054.7cac3","type":"ui_group","z":"","name":"Group 1","tab":"","disp":true,"width":"6","collapse":false},{"id":"8996fce9.ff59a","type":"ui_group","z":"","name":"Homeee","tab":"","disp":true,"width":"10","collapse":false},{"id":"9e285b51.9c50d8","type":"ui_group","z":"","name":"Menu","tab":"8c887376.3a004","disp":true,"width":"6","collapse":false},{"id":"2d9c0c43.a900b4","type":"ui_group","z":"","name":"Group 2","tab":"8c887376.3a004","order":3,"disp":true,"width":"6","collapse":false},{"id":"f8d80c1c.0f62b","type":"ui_group","z":"","name":"Group 1","tab":"8c887376.3a004","order":2,"disp":true,"width":"6","collapse":false},{"id":"9341d073.79928","type":"ui_group","z":"","name":"Group 3","tab":"8c887376.3a004","order":4,"disp":true,"width":"6","collapse":false},{"id":"8c887376.3a004","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":14},{"id":"f550cf14.3c4dc","type":"ui_group","z":"","name":"GA - MAP GA","tab":"415fb37.4de9b4c","order":22,"disp":false,"width":"9","collapse":false},{"id":"c31dab00.a5f578","type":"ui_group","z":"","name":"GA_NEW_GA","tab":"415fb37.4de9b4c","order":7,"disp":false,"width":"9","collapse":false},{"id":"1e4c832e.bcef7d","type":"ui_group","z":"","name":"GA_UPDATE_GA","tab":"415fb37.4de9b4c","order":8,"disp":false,"width":"9","collapse":false},{"id":"103f459e.bf2fca","type":"ui_group","z":"","name":"GA_DELETE_GA","tab":"415fb37.4de9b4c","order":9,"disp":false,"width":"9","collapse":false},{"id":"a01ebb60.af42d8","type":"ui_group","z":"","name":"GA_LIST_GA","tab":"415fb37.4de9b4c","order":6,"disp":false,"width":"9","collapse":false},{"id":"6fa8bca9.53a094","type":"ui_group","z":"","name":"Car Data","tab":"","order":3,"disp":true,"width":"12","collapse":false},{"id":"73550e34.2e5ec","type":"ui_group","z":"","name":"HTML Table","tab":"","order":2,"disp":false,"width":"30","collapse":false},{"id":"a052e332.dfb77","type":"ui_group","z":"","name":"Selector","tab":"","order":1,"disp":false,"width":30,"collapse":false},{"id":"64be2aa4.c2c494","type":"websocket-listener","path":"/ws/worldmap","wholemsg":"false"},{"id":"ba167de6.380d6","type":"ui_group","z":"","name":"Map","tab":"","disp":true,"width":"24","collapse":false},{"id":"95a24b60.84f328","type":"ui_group","z":"","name":"Default","tab":"","disp":true,"width":"9","collapse":false},{"id":"bbeb1e87.fe232","type":"ui_group","z":"","name":"Map","tab":"","disp":true,"width":"24","collapse":false},{"id":"f8813872.162c78","type":"sqlitedb","z":"","db":"test"},{"id":"a71ec147.54077","type":"ui_group","z":"","name":"OLD RU","tab":"415fb37.4de9b4c","order":25,"disp":true,"width":"18","collapse":true},{"id":"ffc17b96.9859a8","type":"ui_spacer","name":"spacer","group":"","order":14,"width":"16","height":1},{"id":"ae845518.bf1bb8","type":"ui_group","z":"","name":"GA_NEW_RU","tab":"415fb37.4de9b4c","order":11,"disp":false,"width":"9","collapse":false},{"id":"8b71180d.2fa408","type":"ui_group","z":"","name":"GA_LIST_RU","tab":"415fb37.4de9b4c","order":10,"disp":false,"width":"9","collapse":false},{"id":"988e157b.5e0748","type":"ui_group","z":"","name":"GA_UPDATE_RU","tab":"415fb37.4de9b4c","order":12,"disp":false,"width":"9","collapse":false},{"id":"fc1b2ddf.cc37b","type":"ui_group","z":"","name":"GA_DELETE_RU","tab":"415fb37.4de9b4c","order":13,"disp":false,"width":"9","collapse":false},{"id":"b7ee79f7.7a0c88","type":"ui_spacer","name":"spacer","group":"49f47f03.1fe74","order":1,"width":"1","height":1},{"id":"7b208501.57899c","type":"ui_group","z":"","name":"Group2","tab":"a2093db0.a4307","order":2,"disp":true,"width":"6","collapse":false},{"id":"a2093db0.a4307","type":"ui_tab","z":"","name":"TEMP","icon":"dashboard","order":25},{"id":"63b50d69.88f0d4","type":"ui_spacer","name":"spacer","group":"49f47f03.1fe74","order":9,"width":1,"height":1},{"id":"caedbd05.c4371","type":"ui_group","z":"","name":"WAP","tab":"d2c20bf0.893e18","order":3,"disp":true,"width":"4","collapse":false},{"id":"d2c20bf0.893e18","type":"ui_tab","z":"","name":"Logging","icon":"dashboard","order":3,"disabled":false,"hidden":false},{"id":"a309ba47.df04e8","type":"ui_group","z":"","name":"LED Example","tab":"2d12c9dd.ff8dc6","order":1,"disp":true,"width":"6","collapse":false},{"id":"2d12c9dd.ff8dc6","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"bf3d9c3a.e7128","type":"ui_group","z":"","name":"LED Example","tab":"47de9bd1.83dbe4","order":1,"disp":true,"width":"6","collapse":false},{"id":"47de9bd1.83dbe4","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"bd53d0c1.62c31","type":"ui_group","z":"","name":"Group 6","tab":"c4d5877d.30e0e8","order":6,"disp":false,"width":"4","collapse":false},{"id":"c4d5877d.30e0e8","type":"ui_tab","z":"","name":"Startscherm","icon":"home","order":1,"disabled":false,"hidden":false},{"id":"1bbcc124.d8ae8f","type":"ui_group","z":"","name":"Default","tab":"c7238d9.645bf7","disp":true,"width":"6","collapse":false},{"id":"c7238d9.645bf7","type":"ui_tab","z":"","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"9937be1d.f7198","type":"ui_group","z":"","name":"weather-icons-lite","tab":"5e12b9f1.252008","disp":true,"width":"27","collapse":false},{"id":"5e12b9f1.252008","type":"ui_tab","z":"","name":"Example","icon":"dashboard","order":7,"disabled":false,"hidden":false},{"id":"723bdd3.55caf24","type":"ui_group","z":"","name":"ECO_MENU_GA","tab":"415fb37.4de9b4c","order":2,"disp":false,"width":"18","collapse":false},{"id":"623cc13a.2b101","type":"ui_group","z":"","name":"ECO_MENU_RU","tab":"415fb37.4de9b4c","order":3,"disp":false,"width":"18","collapse":false},{"id":"30a28807.0997f8","type":"ui_group","z":"","name":"ECO_MENU_SCU","tab":"415fb37.4de9b4c","order":5,"disp":false,"width":"18","collapse":false},{"id":"b7370dda.4ff4c","type":"ui_group","z":"","name":"ECO_MENU_BU","tab":"415fb37.4de9b4c","order":4,"disp":false,"width":"18","collapse":false},{"id":"126b20c9.ac08ff","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":3,"width":"13","height":1},{"id":"affa1ff0.c8fdd","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":6,"width":"13","height":1},{"id":"5e90421f.7fcb3c","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":9,"width":"13","height":1},{"id":"58dc6e38.c0501","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":12,"width":"13","height":1},{"id":"e9223f12.7b625","type":"ui_group","z":"","name":"Default","tab":"c4845c8c.d4567","disp":true,"width":"6","collapse":false},{"id":"c4845c8c.d4567","type":"ui_tab","z":"","name":"Start","icon":"dashboard"},{"id":"a07ec643.639a58","type":"ui_group","z":"","name":"Default","tab":"f615866f.f41648","disp":true,"width":"6","collapse":false},{"id":"f615866f.f41648","type":"ui_tab","z":"","name":"Start","icon":"dashboard"},{"id":"81e4ad67.7d1a8","type":"ui_group","z":"","name":"Group 1","tab":"b7b5ab96.e29bc8","order":1,"disp":true,"width":"6","collapse":false},{"id":"b7b5ab96.e29bc8","type":"ui_tab","z":"","name":"Curing","icon":"dashboard"},{"id":"988d9cc5.2de86","type":"ui_group","z":"","name":"Radial Gauges","tab":"404cbf94.2048d","order":2,"disp":true,"width":"6","collapse":false},{"id":"404cbf94.2048d","type":"ui_tab","z":"","name":"Widgets","icon":"dashboard","order":2,"disabled":false,"hidden":true},{"id":"bbe286b2.689498","type":"ui_group","z":"","name":"Default","tab":"e1bea7da.bf6a88","disp":true,"width":"6"},{"id":"e1bea7da.bf6a88","type":"ui_tab","z":"","name":"testing","icon":"dashboard"},{"id":"f5cbb4f0.070ec8","type":"ui_group","z":"","name":"LED Example","tab":"6288f635.427908","order":1,"disp":true,"width":"6","collapse":false},{"id":"6288f635.427908","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"47ea4f9d.468c6","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":1,"width":"5","height":1},{"id":"aaaab96e.2154f8","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":3,"width":"9","height":1},{"id":"d6e293a9.3b98d","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":4,"width":"5","height":1},{"id":"f22a6436.5beb68","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":6,"width":"9","height":1},{"id":"68547894.5f1398","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":7,"width":"5","height":1},{"id":"81923d32.87adc","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":9,"width":"9","height":1},{"id":"bf1221c8.2c9dd","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":10,"width":"5","height":1},{"id":"eda9ad1.4d4235","type":"ui_spacer","name":"spacer","group":"623cc13a.2b101","order":12,"width":"9","height":1},{"id":"9f12af0b.fc42","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":1,"width":"9","height":1},{"id":"bed79689.4c9a68","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":3,"width":"5","height":1},{"id":"49973668.049878","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":4,"width":"9","height":1},{"id":"7d93893d.b1de18","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":6,"width":"5","height":1},{"id":"de48b3a2.fe57c","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":7,"width":"9","height":1},{"id":"b55d37dd.596308","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":9,"width":"5","height":1},{"id":"ed2265ad.2228c8","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":10,"width":"9","height":1},{"id":"528cae7c.e4eeb","type":"ui_spacer","name":"spacer","group":"b7370dda.4ff4c","order":12,"width":"5","height":1},{"id":"b7272c7e.c3fa5","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":1,"width":1,"height":1},{"id":"de46bef2.e3981","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":4,"width":1,"height":1},{"id":"a337ee3d.051bd","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":7,"width":1,"height":1},{"id":"107473d0.0f0dfc","type":"ui_spacer","name":"spacer","group":"723bdd3.55caf24","order":10,"width":1,"height":1},{"id":"b596fa37.2cc848","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":1,"width":"13","height":1},{"id":"a1b13258.e5739","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":4,"width":"13","height":1},{"id":"b1bdc997.c75458","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":6,"width":1,"height":1},{"id":"e3defa5c.ee9ca8","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":3,"width":1,"height":1},{"id":"f34ab733.ca2908","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":7,"width":"13","height":1},{"id":"31a2e887.c39d48","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":9,"width":1,"height":1},{"id":"1698281f.042588","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":10,"width":"13","height":1},{"id":"c7be6790.f49fc8","type":"ui_spacer","name":"spacer","group":"30a28807.0997f8","order":12,"width":1,"height":1},{"id":"237cdb7e.849494","type":"ui_group","z":"","name":"GA_LIST_BU","tab":"415fb37.4de9b4c","order":14,"disp":false,"width":"9","collapse":false},{"id":"ab90e8f7.e57908","type":"ui_group","z":"","name":"GA_NEW_BU","tab":"415fb37.4de9b4c","order":15,"disp":false,"width":"9","collapse":false},{"id":"1954b0a7.6a811f","type":"ui_group","z":"","name":"GA_UPDATE_BU","tab":"415fb37.4de9b4c","order":16,"disp":false,"width":"9","collapse":false},{"id":"f5293b95.631198","type":"ui_group","z":"","name":"GA_DELETE_BU","tab":"415fb37.4de9b4c","order":17,"disp":false,"width":"9","collapse":false},{"id":"279aaefd.44b5b2","type":"ui_group","z":"","name":"GA_LIST_SCU","tab":"415fb37.4de9b4c","order":18,"disp":false,"width":"9","collapse":false},{"id":"cfeeaec7.88b23","type":"ui_group","z":"","name":"GA_NEW_SCU","tab":"415fb37.4de9b4c","order":19,"disp":false,"width":"9","collapse":false},{"id":"63679516.c45aac","type":"ui_group","z":"","name":"GA_UPDATE_SCU","tab":"415fb37.4de9b4c","order":20,"disp":false,"width":"9","collapse":false},{"id":"31518d3c.806fd2","type":"ui_group","z":"","name":"GA_DELETE_SCU","tab":"415fb37.4de9b4c","order":21,"disp":false,"width":"9","collapse":false},{"id":"c0b1eddb.4258d","type":"onvif-config","z":"","xaddress":"192.168.1.174","port":"80","name":"Hikvision"},{"id":"d168db24.228648","type":"onvif-config","z":"","xaddress":"http://192.168.1.94","port":"2020","name":"TP Link"},{"id":"25378a2b.571ad6","type":"ui_spacer","name":"spacer","group":"f550cf14.3c4dc","order":22,"width":1,"height":"9"},{"id":"20eb1e53.9560c2","type":"ui_group","z":"","name":"Map","tab":"e2a7258a.6c9af8","disp":true,"width":"24","collapse":false},{"id":"e2a7258a.6c9af8","type":"ui_tab","z":"","name":"Map","icon":"map","disabled":false,"hidden":false},{"id":"1da5adc6.ec0d22","type":"mqtt-broker","z":"","broker":"io.adafruit.com","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"15","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"f9a95b25.52d788","type":"mqtt-broker","z":"","broker":"Localhost","port":"1883","clientid":"LocalNodeRed","usetls":false,"compatmode":true,"keepalive":"15","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"eebc56dd.db9f28","type":"mqtt-broker","z":"","name":"PPkl_Broker","broker":"192.168.1.76","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"2845d045.110d4","type":"ui_group","z":"","name":"Default","tab":"91fc4b46.442658","disp":true,"width":"6","collapse":false},{"id":"91fc4b46.442658","type":"ui_tab","z":"","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"84b8db2.8fdae28","type":"inject","z":0,"name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":110,"y":134,"wires":[["605ff8b8.5bd8e8"]]},{"id":"605ff8b8.5bd8e8","type":"function","z":0,"name":"add new layer","func":"msg.payload = {};\nmsg.payload.command = {};\n\nvar u = 'http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png';\nvar o = { maxZoom: 19, attribution: '&copy; OpenStreetMap'};\n\nmsg.payload.command.map = {name:\"OSMhot\", url:u, opt:o};\nmsg.payload.command.layer = \"OSMhot\";\n\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":134,"wires":[["33a374f0.d41c1c"]]},{"id":"c27afbf2.149298","type":"function","z":0,"name":"USGS Quake monitor csv re-parse","func":"msg.payload.lat = msg.payload.latitude;\nmsg.payload.lon = msg.payload.longitude;\nmsg.payload.layer = \"earthquake\";\nmsg.payload.name = msg.payload.id;\nmsg.payload.icon = \"globe\";\nmsg.payload.iconColor = \"orange\";\n\ndelete msg.payload.latitude;\ndelete msg.payload.longitude;\t\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":460,"wires":[["33a374f0.d41c1c"]]},{"id":"7f98e5d8.df976c","type":"function","z":0,"name":"move and zoom","func":"msg.payload = { command:{layer:\"Esri Terrain\",lat:0,lon:0,zoom:3} };\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":174,"wires":[["33a374f0.d41c1c"]]},{"id":"c4cf1a34.734a58","type":"csv","z":0,"name":"","sep":",","hdrin":true,"hdrout":"","multi":"one","ret":"\\n","temp":"","skip":0,"strings":true,"x":490,"y":280,"wires":[["c27afbf2.149298"]]},{"id":"6aa3f520.1d33bc","type":"inject","z":0,"name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":110,"y":174,"wires":[["7f98e5d8.df976c"]]},{"id":"ac4bd534.e027c8","type":"http request","z":0,"name":"","method":"GET","url":"http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_day.csv","x":270,"y":280,"wires":[["c4cf1a34.734a58"]]},{"id":"cd71b6b6.509ba8","type":"inject","z":0,"name":"Quakes","topic":"","payload":"","payloadType":"str","repeat":"900","crontab":"","once":false,"onceDelay":"","x":120,"y":214,"wires":[["ac4bd534.e027c8"]]},{"id":"cb3aa76.8af1f58","type":"file in","z":"2c19adbe.29cc82","name":"Load File","filename":"persist/settings.json","format":"utf8","chunk":false,"sendError":true,"x":260,"y":100,"wires":[["d7a33c9e.2c778"]]},{"id":"d7a33c9e.2c778","type":"switch","z":"2c19adbe.29cc82","name":"","property":"error","propertyType":"msg","rules":[{"t":"nnull"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":470,"y":120,"wires":[["c68d0ff7.32423"],["b6978cc9.73da8"]]},{"id":"9f200852.6841f8","type":"file","z":"2c19adbe.29cc82","name":"Create File","filename":"persist/settings.json","appendNewline":false,"createDir":true,"overwriteFile":"false","x":930,"y":80,"wires":[[]]},{"id":"33f48c16.29e694","type":"json","z":"2c19adbe.29cc82","name":"JSON Encode","property":"payload","action":"str","pretty":false,"x":480,"y":320,"wires":[["ef8ddc40.d932b"]]},{"id":"bf4e321e.c5818","type":"inject","z":"2c19adbe.29cc82","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":110,"y":100,"wires":[["cb3aa76.8af1f58"]]},{"id":"85fce5a8.518068","type":"change","z":"2c19adbe.29cc82","name":"","rules":[{"t":"set","p":"persistant_settings","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":180,"wires":[[]]},{"id":"b6978cc9.73da8","type":"json","z":"2c19adbe.29cc82","name":"JSON Decode","property":"payload","action":"","pretty":false,"x":680,"y":180,"wires":[["85fce5a8.518068"]]},{"id":"fd0da0a3.6d367","type":"function","z":"2c19adbe.29cc82","name":"","func":"if(msg.clearAll === true){\n flow.set('persistant_settings', {});\n return [msg, {payload: {}}];\n}\n\nvar settings = flow.get('persistant_settings') || {};\n\nif(msg.topic == 'get'){\n msg.topic = msg.payload;\n msg.payload = typeof settings[msg.payload] == 'undefined' ? null : settings[msg.payload];\n return [msg, null]\n}else{\n settings[msg.topic] = msg.payload;\n flow.set('persistant_settings', settings);\n return [msg, {payload: settings}];\n}","outputs":2,"noerr":0,"x":210,"y":280,"wires":[[],["33f48c16.29e694"]]},{"id":"ef8ddc40.d932b","type":"file","z":"2c19adbe.29cc82","name":"Update File","filename":"persist/settings.json","appendNewline":false,"createDir":true,"overwriteFile":"true","x":730,"y":320,"wires":[[]]},{"id":"c68d0ff7.32423","type":"change","z":"2c19adbe.29cc82","name":"Initialize Settings Object","rules":[{"t":"set","p":"payload","pt":"msg","to":"{}","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":690,"y":80,"wires":[["9f200852.6841f8","b6978cc9.73da8"]]},{"id":"58ef3fae.d36f1","type":"ui_template","z":"831cc47f.89dad8","group":"ada9b0e3.ed01f","name":"MDMC - Motorized Devices Management and Control","order":1,"width":"18","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":340,"y":120,"wires":[[]]},{"id":"49b197f3.421738","type":"ui_template","z":"831cc47f.89dad8","group":"ada9b0e3.ed01f","name":"AMC - Appliances Management and Control","order":2,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":293.1428527832031,"y":833.4285621643066,"wires":[[]]},{"id":"c42bbe6e.7a592","type":"ui_template","z":"831cc47f.89dad8","group":"ada9b0e3.ed01f","name":"LMC - Lighting Management and Control","order":3,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":284.1428527832031,"y":901.4285621643066,"wires":[[]]},{"id":"7209b207.7b83ec","type":"ui_template","z":"831cc47f.89dad8","group":"ada9b0e3.ed01f","name":"HMC - HVAC -  Management and Control","order":4,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":282.1428527832031,"y":974.4285621643066,"wires":[[]]},{"id":"6e7d9fdb.2a008","type":"ui_template","z":"51f5d79.b28bf28","group":"3245b439.612d3c","name":"ELMC - Efficient Lighting Management and Control","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":280,"y":119,"wires":[[]]},{"id":"fd442e4d.d0479","type":"ui_template","z":"51f5d79.b28bf28","group":"3245b439.612d3c","name":"EHMC - Efficient HVAC Management and Control","order":6,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":278,"y":180,"wires":[[]]},{"id":"a663a428.4fd6b8","type":"ui_template","z":"4290e92f.0ecb48","group":"f467c1ab.4f4fb","name":"ASMC - Alarm System Management and Control","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":283,"y":99,"wires":[[]]},{"id":"843d0002.937f8","type":"ui_template","z":"4290e92f.0ecb48","group":"f467c1ab.4f4fb","name":"IPD - Intrusion Presence Detection","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":236,"y":161,"wires":[[]]},{"id":"ed9e0596.0bf6d8","type":"ui_template","z":"4290e92f.0ecb48","group":"f467c1ab.4f4fb","name":"IWDOD - Intrusion Window/Door Open Detection","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":284,"y":226,"wires":[[]]},{"id":"68e2bdaa.124d34","type":"ui_template","z":"43cfaad.69d0254","group":"a602bbc8.7c1638","name":"SFD - Smoke and Fire Detection","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":207,"y":116,"wires":[[]]},{"id":"1e983106.f2d63f","type":"ui_template","z":"43cfaad.69d0254","group":"a602bbc8.7c1638","name":"WLD - Water Leakage Detection","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":206,"y":177,"wires":[[]]},{"id":"e56377f9.fc9e48","type":"ui_template","z":"43cfaad.69d0254","group":"a602bbc8.7c1638","name":"GLD - Gas Leakage Detection","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":205,"y":247,"wires":[[]]},{"id":"493dbe4f.0e1a","type":"ui_template","z":0,"group":"ea2190e6.e9c88","name":"HPM - Health Pattern Monitoring","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":245,"y":97,"wires":[[]]},{"id":"60a57fc5.8903a","type":"ui_template","z":0,"group":"ea2190e6.e9c88","name":"FD - Fall Detection","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":193,"y":160,"wires":[[]]},{"id":"ae3239f8.9ff5d8","type":"ui_template","z":0,"group":"ea2190e6.e9c88","name":"EM - Emergency Alarm","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":209,"y":225,"wires":[[]]},{"id":"2eb55409.71ed8c","type":"ui_template","z":0,"group":"ea2190e6.e9c88","name":"DRC - Door Remote Command","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":231,"y":293,"wires":[[]]},{"id":"81431590.f6f358","type":"ui_template","z":0,"group":"21c26252.14686e","name":"ESM - Electricity Smart Metering","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":247,"y":132,"wires":[[]]},{"id":"483d9409.8ed34c","type":"ui_template","z":0,"group":"21c26252.14686e","name":"GSM - Gas Smart Metering","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":224,"y":192,"wires":[[]]},{"id":"8e8ca4d3.5a0ea8","type":"ui_template","z":0,"group":"21c26252.14686e","name":"WSM - Water Smart Metering","order":5,"width":"6","height":"4","format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":231,"y":261,"wires":[[]]},{"id":"428c2b34.7f1fb4","type":"ui_template","z":"3f6b092a.4e0e46","group":"1628d2b7.bbf7ad","name":"Logo / Clock","order":0,"width":0,"height":0,"format":"<script id=\"clockScript1\" type=\"text/javascript\">\n    var clockInterval;\n    $(function () {\n        if (clockInterval) return;\n\n        //add logo\n        var div1 = $('<div/>');\n        var logo = new Image();\n\n        logo.src = '/logo2_UA.png'\n        logo.height = 45;\n        div1[0].style.margin = '10px auto';\n\n        div1.append(logo);\n\n        //add clock\n        var div2 = $('<div/>');\n        var p = $('<p/>');\n\n        div2.append(p);\n        div2[0].style.margin = '5px';\n\n        function displayTime() {\n            p.text(new Date().toLocaleString());\n        }\n        \n        clockInterval = setInterval(displayTime, 1000);\n\n        //add to toolbar when it's available\n        var addToToolbarTimer;\n        \n        function addToToolbar() {\n            var toolbar = $('.md-toolbar-tools');\n            \n            if(!toolbar.length) return;\n            \n            toolbar.append(div1);\n            toolbar.append(div2);\n            clearInterval(addToToolbarTimer);\n        }\n        addToToolbarTimer = setInterval(addToToolbar, 100);\n    });\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"global","x":250,"y":100,"wires":[[]]},{"id":"8aec55fc.1bb7f8","type":"function","z":"ff8a25f8.46f4a8","name":"F - MDMCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  MDMCi - Motorized Devices Management and Control\" };\nreturn msg1;","outputs":1,"noerr":0,"x":264.86108779907227,"y":143.38888835906982,"wires":[["ae842f30.3dff4"]]},{"id":"364c5dda.7bfd42","type":"function","z":"ff8a25f8.46f4a8","name":"F - LMCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  LMCi - Lighting Management and Control \" };\nreturn msg1;","outputs":1,"noerr":0,"x":282.6389503479004,"y":773.4921989440918,"wires":[["55d1275f.97b0d8"]]},{"id":"ae842f30.3dff4","type":"ui_template","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","name":"MDMCi - Motorized Devices Management and Control","order":2,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":584.2857131958008,"y":145.1785659790039,"wires":[[]]},{"id":"13bfca27.d090e6","type":"link out","z":"3f6b092a.4e0e46","name":"GLOBAL_START","links":["10c36275.8b064e","17896b38.10b385","2b85db18.9bd334","3b24aa81.3d9b26","6d93edcc.5003a4","7d0001b9.cda07","81e6d38a.ba7fb","9afe2626.f7c8b8","9f6d62aa.48b15","b171f1fa.da8f9","b2368dcb.a90f7","e97b6dd3.8333c","f40233e7.e5f98"],"x":515,"y":200,"wires":[]},{"id":"eb83756e.cdb108","type":"inject","z":"3f6b092a.4e0e46","name":"GLOBAL START","topic":"start","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":290,"y":200,"wires":[["13bfca27.d090e6","f17c2cd8.c21ba"]]},{"id":"b171f1fa.da8f9","type":"link in","z":"ff8a25f8.46f4a8","name":"Start_Title_RUi_SHAi","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":126.25000190734863,"y":478.75000762939453,"wires":[["8aec55fc.1bb7f8","8c08949d.d18748","364c5dda.7bfd42","bd9f6922.cd15b8","efe6b28e.eccad"]]},{"id":"8c08949d.d18748","type":"function","z":"ff8a25f8.46f4a8","name":"F - AMCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  AMCi - Appliances Management and Control \" };\nreturn msg1;","outputs":1,"noerr":0,"x":290.3214454650879,"y":475.3571858406067,"wires":[["b61f5ee5.0c72"]]},{"id":"b61f5ee5.0c72","type":"ui_template","z":"ff8a25f8.46f4a8","group":"70ba33b3.fa191c","name":"AMCi - Appliances Management and Control","order":1,"width":0,"height":0,"format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":577.0714569091797,"y":473.1786060333252,"wires":[[]]},{"id":"55d1275f.97b0d8","type":"ui_template","z":"ff8a25f8.46f4a8","group":"b2743b69.be6368","name":"LMCi - Lighting Management and Control","order":1,"width":0,"height":0,"format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":563.0357055664062,"y":771.7857971191406,"wires":[[]]},{"id":"efe6b28e.eccad","type":"function","z":"ff8a25f8.46f4a8","name":"F - HMCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  HMCi - HVAC Management and Control\" };\nreturn msg1;","outputs":1,"noerr":0,"x":254.3214454650879,"y":1046.392837524414,"wires":[["8674eca.c16c51"]]},{"id":"8674eca.c16c51","type":"ui_template","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","name":"HMCi - HVAC Management and Control","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":560.6825256347656,"y":1046.222080230713,"wires":[[]]},{"id":"bd9f6922.cd15b8","type":"function","z":"ff8a25f8.46f4a8","name":"F - SHAi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  SHAi - SMART HOME AUTOMATION (RU \"+ ResIDSel +\")\" };\nreturn msg1;","outputs":1,"noerr":0,"x":252.50000381469727,"y":95.00000190734863,"wires":[["c97b4cb1.5d571"]]},{"id":"c97b4cb1.5d571","type":"ui_template","z":"ff8a25f8.46f4a8","group":"943c6c42.04c4d","name":"SHAi - SMART HOME AUTOMATION","order":1,"width":"18","height":"1","format":"<p style=\"color:lightgreen;font-size:19px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":530.8531951904297,"y":95.93254470825195,"wires":[[]]},{"id":"9afe2626.f7c8b8","type":"link in","z":"ff8a25f8.46f4a8","name":"Start_Title_RUi_EEi","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":140.89287757873535,"y":1392.1429090499878,"wires":[["f676a2ba.d7a7f","b74ba019.5c4cb","ae698cbe.c32d4"]]},{"id":"f676a2ba.d7a7f","type":"function","z":"ff8a25f8.46f4a8","name":"F - EEi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  EEi - ENERGY EFFICIENCY (RU \"+ ResIDSel +\")\" };\nreturn msg1;","outputs":1,"noerr":0,"x":298.57144927978516,"y":1330.7142477035522,"wires":[["4fc60dde.472074"]]},{"id":"4fc60dde.472074","type":"ui_template","z":"ff8a25f8.46f4a8","group":"d43a72e.e40629","name":"EEi - ENERGY EFFICIENCY","order":1,"width":"18","height":"1","format":"<p style=\"color:lightgreen;font-size:19px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":566.2103729248047,"y":1331.825348854065,"wires":[[]]},{"id":"b74ba019.5c4cb","type":"function","z":"ff8a25f8.46f4a8","name":"F - ELMCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  ELMCi - Efficiency Lighting Management and Control \" };\nreturn msg1;","outputs":1,"noerr":0,"x":307.8928680419922,"y":1379.8929443359375,"wires":[["57b71055.950c2"]]},{"id":"57b71055.950c2","type":"ui_template","z":"ff8a25f8.46f4a8","group":"45e0c91d.beb378","name":"ELMCi - Efficiency Lighting Management and Control","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":644.6428909301758,"y":1382.1429653167725,"wires":[[]]},{"id":"ae698cbe.c32d4","type":"function","z":"ff8a25f8.46f4a8","name":"F - EHMCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  EHMCi - Efficiency HVAC Management and Control \" };\nreturn msg1;","outputs":1,"noerr":0,"x":308.39288330078125,"y":1560.3572902679443,"wires":[["8a0d1465.d56798"]]},{"id":"8a0d1465.d56798","type":"ui_template","z":"ff8a25f8.46f4a8","group":"70717475.c2b51c","name":"EHMCi - Efficiency HVAC Management and Control","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":645.8928833007812,"y":1563.3929119110107,"wires":[[]]},{"id":"3b24aa81.3d9b26","type":"link in","z":"ff8a25f8.46f4a8","name":"Start_Title_RUi_SEi","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":136.25000190734863,"y":2153.750027656555,"wires":[["ffefee62.8d764","58ee5ee2.b988d","e5e838ca.bebcb8","a66af5ab.5da158"]]},{"id":"ffefee62.8d764","type":"function","z":"ff8a25f8.46f4a8","name":"F - SEi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  SEi - SECURITY (RU \"+ ResIDSel +\")\" };\nreturn msg1;","outputs":1,"noerr":0,"x":284.5,"y":1805.5,"wires":[["8b6f1f3a.d0864"]]},{"id":"8b6f1f3a.d0864","type":"ui_template","z":"ff8a25f8.46f4a8","group":"d50757f4.0bc228","name":"SEi - SECURITY","order":1,"width":"18","height":"1","format":"<p style=\"color:lightgreen;font-size:19px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":525.888916015625,"y":1805.861083984375,"wires":[[]]},{"id":"58ee5ee2.b988d","type":"function","z":"ff8a25f8.46f4a8","name":"F - ASMCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  ASMCi - Alarm System Management and Control \" };\nreturn msg1;","outputs":1,"noerr":0,"x":301.25000762939453,"y":1868.7500286102295,"wires":[["a7e93747.40a028"]]},{"id":"a7e93747.40a028","type":"ui_template","z":"ff8a25f8.46f4a8","group":"88ea930a.6005","name":"ASMCi - Alarm System Management and Control","order":2,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":632.5000076293945,"y":1871.2500286102295,"wires":[[]]},{"id":"e5e838ca.bebcb8","type":"function","z":"ff8a25f8.46f4a8","name":"F - IPDi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  IPDi - Intrusion Presence Detection  \" };\nreturn msg1;","outputs":1,"noerr":0,"x":287.5000114440918,"y":2151.250030517578,"wires":[["1563083e.6de178"]]},{"id":"1563083e.6de178","type":"ui_template","z":"ff8a25f8.46f4a8","group":"e17348c6.d5e278","name":"IPDi - Intrusion Presence Detection ","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":585.0000152587891,"y":2152.500030517578,"wires":[[]]},{"id":"a66af5ab.5da158","type":"function","z":"ff8a25f8.46f4a8","name":"F - IOWDi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  IOWDi - Intrusion - Opened Window/Door Detection   \" };\nreturn msg1;","outputs":1,"noerr":0,"x":287.5596694946289,"y":2455.357339859009,"wires":[["b2a36b65.d16568"]]},{"id":"b2a36b65.d16568","type":"ui_template","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","name":"WDODi - Intrusion Window/Door Opening Detection ","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":624.1667633056641,"y":2456.607271194458,"wires":[[]]},{"id":"e97b6dd3.8333c","type":"link in","z":"ff8a25f8.46f4a8","name":"Start_Title_RUi_SAi","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":128.75000190734863,"y":3051.25004196167,"wires":[["cb932014.a988a","c61d230f.1af49","2b05c677.d7a76a","d2e087f5.03f6b8"]]},{"id":"c61d230f.1af49","type":"function","z":"ff8a25f8.46f4a8","name":"F - SFDi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  SFDi - Smoke and Fire Detectors   \" };\nreturn msg1;","outputs":1,"noerr":0,"x":276.7857093811035,"y":2841.428508758545,"wires":[["f690bcdf.8383d"]]},{"id":"f690bcdf.8383d","type":"ui_template","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","name":"SFDi - Smoke and Fire Detectors","order":2,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":559.6428909301758,"y":2839.535930842161,"wires":[[]]},{"id":"cb932014.a988a","type":"function","z":"ff8a25f8.46f4a8","name":"F - SAi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  SAi - SAFETY (RU \"+ ResIDSel +\")\" };\nreturn msg1;","outputs":1,"noerr":0,"x":264.0357093811035,"y":2783.9643964767456,"wires":[["e8b0a6b5.13b3e8"]]},{"id":"e8b0a6b5.13b3e8","type":"ui_template","z":"ff8a25f8.46f4a8","group":"735fb107.73bb","name":"SAi - SAFETY","order":1,"width":"18","height":"1","format":"<p style=\"color:lightgreen;font-size:19px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":502.56751251220703,"y":2784.25394821167,"wires":[[]]},{"id":"2b05c677.d7a76a","type":"function","z":"ff8a25f8.46f4a8","name":"F - GLDi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  GLDi - Gas Leakage Detection   \" };\nreturn msg1;","outputs":1,"noerr":0,"x":285.60721588134766,"y":3114.0713357925415,"wires":[["bc43bb67.4e1c78"]]},{"id":"bc43bb67.4e1c78","type":"ui_template","z":"ff8a25f8.46f4a8","group":"f07e3a84.1467a8","name":"GLDi - Gas Leakage Detection","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":564.0000076293945,"y":3114.4285135269165,"wires":[[]]},{"id":"d2e087f5.03f6b8","type":"function","z":"ff8a25f8.46f4a8","name":"F - WLDi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  WLDi - Water Leakage Detection    \" };\nreturn msg1;","outputs":1,"noerr":0,"x":287.3929328918457,"y":3370.6426286697388,"wires":[["e10cf27c.5b189"]]},{"id":"e10cf27c.5b189","type":"ui_template","z":"ff8a25f8.46f4a8","group":"a6d576df.b49328","name":"WLDi - Water Leakage Detection ","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":571.8571853637695,"y":3371.3572282791138,"wires":[[]]},{"id":"17896b38.10b385","type":"link in","z":"ff8a25f8.46f4a8","name":"Start_Title_RUi_HASi","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":150.22622108459473,"y":4470.559168815613,"wires":[["ed6e70e1.53ad1","de73683d.014c58","4a644aa8.b96b64","f8c15791.1210d8","5948bae6.552b24"]]},{"id":"ed6e70e1.53ad1","type":"function","z":"ff8a25f8.46f4a8","name":"F - HASi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  HASi - HEALTH AND AGING (RU \"+ ResIDSel +\")\" };\nreturn msg1;","outputs":1,"noerr":0,"x":301.19047927856445,"y":3645.3692046254873,"wires":[["3b6d3e47.39f232"]]},{"id":"3b6d3e47.39f232","type":"ui_template","z":"ff8a25f8.46f4a8","group":"509e9477.20aa7c","name":"HASi - HEALTH AND AGING","order":1,"width":"18","height":"1","format":"<p style=\"color:lightgreen;font-size:19px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":572.4960784912109,"y":3643.9088373184204,"wires":[[]]},{"id":"de73683d.014c58","type":"function","z":"ff8a25f8.46f4a8","name":"F - HPMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  HPMi - Health Pattern Monitoring  \" };\nreturn msg1;","outputs":1,"noerr":0,"x":298.0238151550293,"y":3698.5357917547226,"wires":[["c0a14603.082138"]]},{"id":"c0a14603.082138","type":"ui_template","z":"ff8a25f8.46f4a8","group":"509e9477.20aa7c","name":"HPMi - Health Pattern Monitoring","order":2,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":590.8809585571289,"y":3708.7145027071238,"wires":[[]]},{"id":"4a644aa8.b96b64","type":"function","z":"ff8a25f8.46f4a8","name":"F - FDi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  FDi - Fall Detection    \" };\nreturn msg1;","outputs":1,"noerr":0,"x":294.08336639404297,"y":4284.987636566162,"wires":[["8e82c9e3.90bf78"]]},{"id":"8e82c9e3.90bf78","type":"ui_template","z":"ff8a25f8.46f4a8","group":"49646d32.43bfd4","name":"FDi - Fall Detection ","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":519.6190795898438,"y":4286.058833122253,"wires":[[]]},{"id":"f8c15791.1210d8","type":"function","z":"ff8a25f8.46f4a8","name":"F - EDAi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  EDAi - Emergency Detection Activity    \" };\nreturn msg1;","outputs":1,"noerr":0,"x":287.04759979248047,"y":4492.2737674713135,"wires":[["61f40b6a.c994a4"]]},{"id":"61f40b6a.c994a4","type":"ui_template","z":"ff8a25f8.46f4a8","group":"5c5de969.b36f78","name":"EAi - Emergency Detection Activity","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":555.1547775268555,"y":4492.4876346588135,"wires":[[]]},{"id":"5948bae6.552b24","type":"function","z":"ff8a25f8.46f4a8","name":"F - DRCi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  DRCi - Door Remote Activity    \" };\nreturn msg1;","outputs":1,"noerr":0,"x":293.9405174255371,"y":4731.523558616638,"wires":[["3927ed28.575ba2"]]},{"id":"3927ed28.575ba2","type":"ui_template","z":"ff8a25f8.46f4a8","group":"44adc40a.0ff00c","name":"DRCi - Door Remote Activity","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":540.7263259887695,"y":4731.059208869934,"wires":[[]]},{"id":"e8a1e1d1.8b60c","type":"ui_button","z":"ff8a25f8.46f4a8","name":"WB - Status","group":"e23f8179.e6378","order":16,"width":"2","height":"1","passthru":false,"label":"WB - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"WB - Status","x":258.92866134643555,"y":200.3569679260254,"wires":[["4682e4a3.4eedcc"]]},{"id":"3c52fd97.e45f62","type":"ui_button","z":"ff8a25f8.46f4a8","name":"WB - Command","group":"e23f8179.e6378","order":17,"width":"2","height":"1","passthru":false,"label":"WB - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"WB - Command","x":250.17873764038086,"y":245.8928565979004,"wires":[["915ae6ba.7a85e8"]]},{"id":"6898c87d.011ac8","type":"ui_button","z":"ff8a25f8.46f4a8","name":"MD - Status","group":"e23f8179.e6378","order":27,"width":"2","height":"1","passthru":false,"label":"MD - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"MD - Status","x":2008.571689605713,"y":236.07162857055664,"wires":[["15a0f5e8.e782aa"]]},{"id":"d5ebbd5c.f209a","type":"ui_button","z":"ff8a25f8.46f4a8","name":"MD - Command","group":"e23f8179.e6378","order":28,"width":"2","height":"1","passthru":false,"label":"MD - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"MD - Command","x":2017.1431159973145,"y":301.78579330444336,"wires":[["1702e22.de1c11e"]]},{"id":"afdb449d.2a9e48","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sWBi1","label":"sWBi1","tooltip":"","group":"e23f8179.e6378","order":9,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1577.6072273254395,"y":178.57145023345947,"wires":[["f75b123.db4edf"]]},{"id":"89646150.8be27","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sWBi2","label":"sWBi2","tooltip":"","group":"e23f8179.e6378","order":10,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1581.8929328918457,"y":225.71430683135986,"wires":[["ec4a8607.d06a38"]]},{"id":"28173448.33e5fc","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sWBi3","label":"sWBi3","tooltip":"","group":"e23f8179.e6378","order":11,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1580.46435546875,"y":277.14285945892334,"wires":[["897af9ec.df5ed8"]]},{"id":"496d1163.416b9","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sWBi4","label":"sWBi4","tooltip":"","group":"e23f8179.e6378","order":12,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1577.6071853637695,"y":332.85714626312256,"wires":[["a86e03da.c13b4"]]},{"id":"4485f79f.fc2b38","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sWBi5","label":"sWBi5","tooltip":"","group":"e23f8179.e6378","order":13,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"0","onvalueType":"str","onicon":"","oncolor":"","offvalue":"1","offvalueType":"str","officon":"","offcolor":"","x":1581.8928909301758,"y":380.00000286102295,"wires":[["f7e3c1fc.45bb7"]]},{"id":"b7f28199.0d72d","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sWBi6","label":"sWBi6","tooltip":"","group":"e23f8179.e6378","order":14,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1580.46431350708,"y":431.4285554885864,"wires":[["744cd923.9f3368"]]},{"id":"25d9f9bc.2c9786","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sMDi1","label":"sMDi1","tooltip":"","group":"e23f8179.e6378","order":22,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":3383.5716247558594,"y":170.53575325012207,"wires":[["758c40d8.dc8d8"]]},{"id":"203c6350.1026bc","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sMDi2","label":"sMDi2","tooltip":"","group":"e23f8179.e6378","order":24,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":3379.1074714660645,"y":222.67862510681152,"wires":[["5240f915.c4d4d8"]]},{"id":"dba1e730.207898","type":"ui_button","z":"ff8a25f8.46f4a8","name":"APPi - Status","group":"70ba33b3.fa191c","order":15,"width":"3","height":"1","passthru":false,"label":"APPi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":277.4286117553711,"y":534.0000085830688,"wires":[["4cdccb11.b08124"]]},{"id":"d505a568.012dc8","type":"ui_button","z":"ff8a25f8.46f4a8","name":"APPi - Command","group":"70ba33b3.fa191c","order":16,"width":"3","height":"1","passthru":false,"label":"APPi - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":268.9286193847656,"y":578.3571863174438,"wires":[["f0d85225.ea38b"]]},{"id":"12d585e1.d2a9aa","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAPPi1","label":"sAPPi1","tooltip":"","group":"70ba33b3.fa191c","order":9,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1591.4287338256836,"y":558.392804145813,"wires":[["c47806ac.daac68"]]},{"id":"26753c.ef5f2ac4","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAPPi2","label":"sAPPi2","tooltip":"","group":"70ba33b3.fa191c","order":10,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1591.4286460876465,"y":601.2499885559082,"wires":[["a3cc1f05.fbf22"]]},{"id":"f90f78c8.5a44d8","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAPPi3","label":"sAPPi3","tooltip":"","group":"70ba33b3.fa191c","order":11,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1590.000057220459,"y":645.5357036590576,"wires":[["54225474.7253cc"]]},{"id":"5a0b1256.42730c","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAPPi4","label":"sAPPi4","tooltip":"","group":"70ba33b3.fa191c","order":12,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1588.571434020996,"y":694.10715675354,"wires":[["31b0002f.3df05"]]},{"id":"f4889bbb.bb7808","type":"ui_button","z":"ff8a25f8.46f4a8","name":"LT1i - Status","group":"b2743b69.be6368","order":15,"width":"3","height":"1","passthru":false,"label":"LT1i - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":274.5357131958008,"y":827.9643068313599,"wires":[["3bad6281.61e69e"]]},{"id":"3ffe1af0.7b4646","type":"ui_button","z":"ff8a25f8.46f4a8","name":"LT1i - Command","group":"b2743b69.be6368","order":16,"width":"3","height":"1","passthru":false,"label":"LT1i - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":255.85718536376953,"y":881.0357189178467,"wires":[["bd4c72c0.b314"]]},{"id":"edf3c154.76a69","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sLT1i1","label":"sLT1i1","tooltip":"","group":"b2743b69.be6368","order":9,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1592.571575164795,"y":831.7143135070801,"wires":[["282d72f7.89d10e"]]},{"id":"33726c08.4a2684","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sLT1i2","label":"sLT1i2","tooltip":"","group":"b2743b69.be6368","order":10,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1591.1430130004883,"y":875.9999904632568,"wires":[["f3e1853.0634578"]]},{"id":"f8f8ee36.cdd68","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sLT1i3","label":"sLT1i3","tooltip":"","group":"b2743b69.be6368","order":11,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1594.000114440918,"y":918.8571338653564,"wires":[["69526d5d.df46b4"]]},{"id":"cddb1afa.fdde18","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sLT1i4","label":"sLT1i4","tooltip":"","group":"b2743b69.be6368","order":12,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1591.1430130004883,"y":960.2856960296631,"wires":[["4154290b.bdf4c8"]]},{"id":"358424ca.7d2b0c","type":"ui_button","z":"ff8a25f8.46f4a8","name":"LT2i - Status","group":"b2743b69.be6368","order":32,"width":"3","height":"1","passthru":false,"label":"LT12 - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":2000.5714054107666,"y":837.142822265625,"wires":[["c3ea2dbc.72344"]]},{"id":"e8ebf21b.4572b","type":"ui_button","z":"ff8a25f8.46f4a8","name":"LT2i - Command","group":"b2743b69.be6368","order":33,"width":"3","height":"1","passthru":false,"label":"LT2i - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":2019.1429386138916,"y":883.392822265625,"wires":[["2297ad93.7b6f42"]]},{"id":"1c2f44e2.cf0bdb","type":"ui_gauge","z":"ff8a25f8.46f4a8","name":"LT2i1","group":"b2743b69.be6368","order":20,"width":"3","height":"1","gtype":"gage","title":"LT2i1","label":"units","format":"{{value}} %","min":0,"max":"100","colors":["#fffddd","#e6e600","#d58400"],"seg1":"","seg2":"","x":3256.285629272461,"y":807.7143564224243,"wires":[]},{"id":"66e66a24.d13fd4","type":"ui_gauge","z":"ff8a25f8.46f4a8","name":"LT2i2","group":"b2743b69.be6368","order":21,"width":"3","height":"1","gtype":"gage","title":"LT2i2","label":"units","format":"{{value}} %","min":0,"max":"100","colors":["#fffddd","#e6e600","#d58400"],"seg1":"","seg2":"","x":3257.7143898010254,"y":854.8572044372559,"wires":[]},{"id":"d782d65f.e21af8","type":"ui_gauge","z":"ff8a25f8.46f4a8","name":"LT2i3","group":"b2743b69.be6368","order":22,"width":"3","height":"1","gtype":"gage","title":"LT2i3","label":"units","format":"{{value}} %","min":0,"max":"100","colors":["#fffddd","#e6e600","#d58400"],"seg1":"","seg2":"","x":3254.857246398926,"y":902.0000524520874,"wires":[]},{"id":"bd0e7aa0.5fb5b8","type":"ui_gauge","z":"ff8a25f8.46f4a8","name":"LT2i4","group":"b2743b69.be6368","order":23,"width":"3","height":"1","gtype":"gage","title":"LT2i4","label":"units","format":"{{value}} %","min":0,"max":"100","colors":["#fffddd","#e6e600","#d58400"],"seg1":"","seg2":"","x":3256.2858543395996,"y":944.8572025299072,"wires":[]},{"id":"358c7c4d.7f3d74","type":"ui_slider","z":"ff8a25f8.46f4a8","name":"sLT2i1","label":"sLT2i1","tooltip":"","group":"b2743b69.be6368","order":26,"width":"3","height":"1","passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":"5","x":3380.000244140625,"y":809.7144165039062,"wires":[["2ce9d7a1.38e948"]]},{"id":"a6b0e5b6.5bf0f8","type":"ui_slider","z":"ff8a25f8.46f4a8","name":"sLT2i2","label":"sLT2i2","tooltip":"","group":"b2743b69.be6368","order":27,"width":"3","height":"1","passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":"5","x":3381.4287452697754,"y":849.7143812179565,"wires":[["7063f655.98df98"]]},{"id":"8da6b484.e09d98","type":"ui_slider","z":"ff8a25f8.46f4a8","name":"sLT2i3","label":"sLT2i3","tooltip":"","group":"b2743b69.be6368","order":28,"width":"3","height":"1","passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":"5","x":3380.000068664551,"y":892.5714880824089,"wires":[["934f98ce.060858"]]},{"id":"2ff0d65b.1b9a7a","type":"ui_slider","z":"ff8a25f8.46f4a8","name":"sLT2i4","label":"sLT2i4","tooltip":"","group":"b2743b69.be6368","order":29,"width":"3","height":"1","passthru":true,"outs":"all","topic":"","min":0,"max":"100","step":"5","x":3380,"y":938.2857990264893,"wires":[["f7a97486.3d9268"]]},{"id":"62d20460.98062c","type":"ui_button","z":"ff8a25f8.46f4a8","name":"HVACi - Status","group":"9bf9842e.da3fe8","order":15,"width":"3","height":"1","passthru":false,"label":"HVACi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":260.46431732177734,"y":1092.1428394317627,"wires":[["45417ed8.2d782"]]},{"id":"86b73fec.9a2b8","type":"ui_button","z":"ff8a25f8.46f4a8","name":"HVACi - Command","group":"9bf9842e.da3fe8","order":16,"width":"3","height":"1","passthru":false,"label":"HVACi - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":250.5357666015625,"y":1138.9642505645752,"wires":[["ee9dbf7b.cbbc9"]]},{"id":"f9e531c8.4eb8d","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sHVACi1","label":"sHVACi1","tooltip":"","group":"9bf9842e.da3fe8","order":9,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1616.285774230957,"y":1078.857141494751,"wires":[["9567175.484dae8"]]},{"id":"6d6dd786.3b0448","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sHVACi2","label":"sHVACi2","tooltip":"","group":"9bf9842e.da3fe8","order":10,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1616.285774230957,"y":1121.7141971588135,"wires":[["524a7c95.8eaff4"]]},{"id":"523b46ce.93b328","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sHVACi3","label":"sHVACi3","tooltip":"","group":"9bf9842e.da3fe8","order":11,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1614.8571853637695,"y":1160.2857303619385,"wires":[["70ac18eb.fdaa98"]]},{"id":"2b6e10eb.831c5","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sHVACi4","label":"sHVACi4","tooltip":"","group":"9bf9842e.da3fe8","order":12,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1614.8571853637695,"y":1200.2857303619385,"wires":[["d5d84209.0f0ce"]]},{"id":"ff992319.ac0a4","type":"ui_button","z":"ff8a25f8.46f4a8","name":"HVACCi - Status","group":"9bf9842e.da3fe8","order":33,"width":"3","height":"1","passthru":false,"label":"HVACCi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":2017.571273803711,"y":1081.6429080963135,"wires":[["1a354ab0.80e025"]]},{"id":"5be4db6c.1f5244","type":"ui_button","z":"ff8a25f8.46f4a8","name":"HVACHi - Status","group":"9bf9842e.da3fe8","order":34,"width":"3","height":"1","passthru":false,"label":"HVACHi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":3610.999969482422,"y":1071.9285712242126,"wires":[["6cdc6fe8.b398c"]]},{"id":"cf49de36.edf52","type":"ui_button","z":"ff8a25f8.46f4a8","name":"ASSi - Status","group":"88ea930a.6005","order":16,"width":"3","height":"1","passthru":false,"label":"ASSi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":330.28572845458984,"y":1918.5714645385742,"wires":[["4a0eb8e4.652338"]]},{"id":"b7c6eccd.8db04","type":"ui_button","z":"ff8a25f8.46f4a8","name":"ASSi - Command","group":"88ea930a.6005","order":17,"width":"3","height":"1","passthru":false,"label":"ASSi - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"WB - Command","x":319.3214569091797,"y":1963.7144784927368,"wires":[["f802e866.9b8988"]]},{"id":"c7300acd.0ba2b8","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAASi1","label":"sAASi1","tooltip":"","group":"88ea930a.6005","order":10,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1603.142864227295,"y":1783.7142372131348,"wires":[["bfb4032e.6ee37"]]},{"id":"33fe0647.6529ca","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAASi2","label":"sAASi2","tooltip":"","group":"88ea930a.6005","order":11,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1598.8570289611816,"y":1880.5714826583862,"wires":[["e348aa6d.ce1878"]]},{"id":"d7c867de.0494e8","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAASi3","label":"sAASi3","tooltip":"","group":"88ea930a.6005","order":12,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1603.1427764892578,"y":1966.285662651062,"wires":[["c7eab9e8.b115d8"]]},{"id":"8a5345d0.67eac8","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sAASi4","label":"sAASi4","tooltip":"","group":"88ea930a.6005","order":13,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1603.1429710388184,"y":2056.2856435775757,"wires":[["1e072cf2.c180e3"]]},{"id":"c2bb10e4.3b722","type":"ui_button","z":"ff8a25f8.46f4a8","name":"PDSi - Status","group":"e17348c6.d5e278","order":9,"width":"4","height":"1","passthru":false,"label":"PDSi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":320.857177734375,"y":2207.142822265625,"wires":[["288b09a6.a30106"]]},{"id":"553de46a.4be5ec","type":"ui_button","z":"ff8a25f8.46f4a8","name":"OWDi - Status","group":"4025e7c8.034e68","order":16,"width":"3","height":"1","passthru":false,"label":"OWDi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":328.91675567626953,"y":2508.178774833679,"wires":[["bd01e17.b02dc2"]]},{"id":"4c7c5f6.43672a","type":"ui_button","z":"ff8a25f8.46f4a8","name":"ODDi - Status","group":"4025e7c8.034e68","order":17,"width":"3","height":"1","passthru":false,"label":"ODDi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":2046.0358276367188,"y":2485.3929233551025,"wires":[["1a6dcdaa.35b162"]]},{"id":"805cec6c.bf6a8","type":"ui_button","z":"ff8a25f8.46f4a8","name":"SDSi - Status","group":"1448138b.c1b81c","order":17,"width":"3","height":"1","passthru":false,"label":"SDSi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":297.1428527832031,"y":2906.2500896453857,"wires":[["db48ce33.dcaf7"]]},{"id":"81bba535.67cfa8","type":"ui_button","z":"ff8a25f8.46f4a8","name":"TDSi - Status","group":"1448138b.c1b81c","order":18,"width":"3","height":"1","passthru":false,"label":"TDSi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":1958.464584350586,"y":2913.5722303390503,"wires":[["aad379c6.f548a8"]]},{"id":"badfe83f.d563a8","type":"ui_button","z":"ff8a25f8.46f4a8","name":"GLDi - Status","group":"f07e3a84.1467a8","order":9,"width":"4","height":"1","passthru":false,"label":"GLDi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":295.3214340209961,"y":3173.321580886841,"wires":[["2e79482f.c9ff78"]]},{"id":"9849b1b9.fbc11","type":"ui_button","z":"ff8a25f8.46f4a8","name":"GEVCi - Status","group":"f07e3a84.1467a8","order":17,"width":"3","height":"1","passthru":false,"label":"GEVCi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":1977.7860107421875,"y":3188.785987854004,"wires":[["98739db2.895ff"]]},{"id":"f7a5e461.e8f968","type":"ui_button","z":"ff8a25f8.46f4a8","name":"GEVCi - Command","group":"f07e3a84.1467a8","order":18,"width":"3","height":"1","passthru":false,"label":"GEVCi - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":1970.357421875,"y":3226.5000495910645,"wires":[["5e4f9437.361f9c"]]},{"id":"78598eeb.619f6","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sGEVSi","label":"sGEVSi","tooltip":"","group":"f07e3a84.1467a8","order":14,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":3251.142677307129,"y":3277.1429405212402,"wires":[["5aee461d.ac7238"]]},{"id":"4f8859ee.6f2028","type":"ui_button","z":"ff8a25f8.46f4a8","name":"WLDi - Status","group":"a6d576df.b49328","order":10,"width":"4","height":"1","passthru":false,"label":"WLDi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":300.2858352661133,"y":3415.321584701538,"wires":[["6c34583f.3eb4d8"]]},{"id":"bb80d261.42d28","type":"ui_button","z":"ff8a25f8.46f4a8","name":"WEVCi - Status","group":"a6d576df.b49328","order":17,"width":"3","height":"1","passthru":false,"label":"WEVCi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":1974.3573684692383,"y":3416.785671234131,"wires":[["15248d42.2e0953"]]},{"id":"f9790ecd.ed07b","type":"ui_button","z":"ff8a25f8.46f4a8","name":"WEVCi - Command","group":"a6d576df.b49328","order":18,"width":"3","height":"1","passthru":false,"label":"WEVCi - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":1963.428825378418,"y":3463.7497844696045,"wires":[["c56cb5ec.c7c568"]]},{"id":"dcac074.19005f8","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sWEVSi","label":"sWEVSi","tooltip":"","group":"a6d576df.b49328","order":14,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":3255.4287910461426,"y":3512.856782913208,"wires":[["c6cf51fe.ac1d1"]]},{"id":"7a7a0c7f.184904","type":"ui_button","z":"ff8a25f8.46f4a8","name":"FDi - Status","group":"49646d32.43bfd4","order":9,"width":"4","height":"1","passthru":false,"label":"FDi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":309.8334426879883,"y":4329.844571113586,"wires":[["10abe259.1c47ae"]]},{"id":"2405222d.1480de","type":"ui_button","z":"ff8a25f8.46f4a8","name":"EAi - Status","group":"5c5de969.b36f78","order":9,"width":"4","height":"1","passthru":false,"label":"EAi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":291.04761505126953,"y":4535.702479362488,"wires":[["79288c14.c518b4"]]},{"id":"6f6dcb85.f0a714","type":"ui_button","z":"ff8a25f8.46f4a8","name":"RDi - Status","group":"44adc40a.0ff00c","order":11,"width":"3","height":"1","passthru":false,"label":"RDi - Status","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":320.44053649902344,"y":4775.594849586487,"wires":[["8bc607a9.6b2ed8"]]},{"id":"4f658531.4b21dc","type":"ui_button","z":"ff8a25f8.46f4a8","name":"RDi - Command","group":"44adc40a.0ff00c","order":12,"width":"3","height":"1","passthru":false,"label":"RDi - Command","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":310.2619323730469,"y":4822.058716773987,"wires":[["2fc4d423.bf3fec"]]},{"id":"9f5b91b6.a2c05","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sRDi1","label":"sRDi1","tooltip":"","group":"44adc40a.0ff00c","order":7,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1606.6905784606934,"y":4822.587041854858,"wires":[["6e7b37dd.d5e6a8"]]},{"id":"fb17b090.1f1e7","type":"ui_switch","z":"ff8a25f8.46f4a8","name":"sRDi2","label":"sRDi2","tooltip":"","group":"44adc40a.0ff00c","order":8,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"","oncolor":"","offvalue":"0","offvalueType":"str","officon":"","offcolor":"","x":1608.1192512512207,"y":4914.015332221985,"wires":[["a684f466.ffe3d8"]]},{"id":"76cf698b.6b2118","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WB - MQTT Command to ETMP","topic":"ETMP/RUi/SmartHome/WindowBlinds/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":852.5000076293945,"y":203.75,"wires":[]},{"id":"4682e4a3.4eedcc","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request WBStatus","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_WBStatus\";\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":521.2500152587891,"y":201.25000381469727,"wires":[["76cf698b.6b2118","a861306e.ad1ec"]]},{"id":"915ae6ba.7a85e8","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change WBStatus","func":"var Mqtt_Command_CWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nvar JSonPayload = { \n\n};\n\nMqtt_Command_CWBStatus.RU_ID = RU_ID;\nMqtt_Command_CWBStatus.COMMAND= \"Change_WBStatus\";\n\nMqtt_Command_CWBStatus.WBlinds = [];\n\nMqtt_Command_CWBStatus.WBlinds.push({});\nMqtt_Command_CWBStatus.WBlinds[0]['WB'] = 1;\nMqtt_Command_CWBStatus.WBlinds[0]['STATUS'] = global.get('sWBi1');\nMqtt_Command_CWBStatus.WBlinds[0]['DATE'] = msg2.Date;\nMqtt_Command_CWBStatus.WBlinds[0]['TIME'] = msg2.Time;\nMqtt_Command_CWBStatus.WBlinds[0]['ACTIVE'] = 1;\n\nMqtt_Command_CWBStatus.WBlinds.push({});\nMqtt_Command_CWBStatus.WBlinds[1]['WB'] = 2;\nMqtt_Command_CWBStatus.WBlinds[1]['STATUS'] = global.get('sWBi2');\nMqtt_Command_CWBStatus.WBlinds[1]['DATE'] = msg2.Date;\nMqtt_Command_CWBStatus.WBlinds[1]['TIME'] = msg2.Time;\nMqtt_Command_CWBStatus.WBlinds[1]['ACTIVE'] = 1;\n\nMqtt_Command_CWBStatus.WBlinds.push({});\nMqtt_Command_CWBStatus.WBlinds[2]['WB'] = 3;\nMqtt_Command_CWBStatus.WBlinds[2]['STATUS'] = global.get('sWBi3');\nMqtt_Command_CWBStatus.WBlinds[2]['DATE'] = msg2.Date;\nMqtt_Command_CWBStatus.WBlinds[2]['TIME'] = msg2.Time;\nMqtt_Command_CWBStatus.WBlinds[2]['ACTIVE'] = 1;\n\nMqtt_Command_CWBStatus.WBlinds.push({});\nMqtt_Command_CWBStatus.WBlinds[3]['WB'] = 4;\nMqtt_Command_CWBStatus.WBlinds[3]['STATUS'] = global.get('sWBi4');\nMqtt_Command_CWBStatus.WBlinds[3]['DATE'] = msg2.Date;\nMqtt_Command_CWBStatus.WBlinds[3]['TIME'] = msg2.Time;\nMqtt_Command_CWBStatus.WBlinds[3]['ACTIVE'] = 1;\n\n\nMqtt_Command_CWBStatus={payload:Mqtt_Command_CWBStatus};\n\nreturn Mqtt_Command_CWBStatus;\n","outputs":1,"noerr":0,"x":513.7500457763672,"y":242.50000381469727,"wires":[["76cf698b.6b2118","cf5a32d.57a63d"]]},{"id":"dbeaff92.266e9","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WB - MQTT Monitor","topic":"ETMP/RUi/SmartHome/WindowBlinds/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":826.2500076293945,"y":262.5000014305115,"wires":[["2afc054b.be8fba","a9582a6c.ea45f8"]]},{"id":"2afc054b.be8fba","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive WBStatus","func":"var wb_mqtt_monitor = msg.payload;\nvar WBS1;\nvar WBS2;\nvar WBS3;\nvar WBS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sWBi1',wb_mqtt_monitor.WBlinds[0].STATUS.toString());\nif (wb_mqtt_monitor.WBlinds[0].ACTIVE==1)\n   WBS1={payload:wb_mqtt_monitor.WBlinds[0].STATUS.toString()};\nelse\n   WBS1={payload:\"-1\"};\n\nglobal.set('sWBi2',wb_mqtt_monitor.WBlinds[1].STATUS.toString());\nif (wb_mqtt_monitor.WBlinds[1].ACTIVE==1)\n        WBS2={payload:wb_mqtt_monitor.WBlinds[1].STATUS.toString()};\nelse\n   WBS2={payload:\"-1\"};\n   \nglobal.set('sWBi3',wb_mqtt_monitor.WBlinds[2].STATUS.toString());\nif (wb_mqtt_monitor.WBlinds[2].ACTIVE==1)\n    WBS3={payload:wb_mqtt_monitor.WBlinds[2].STATUS.toString()};\nelse\n   WBS3={payload:\"-1\"};\n   \nglobal.set('sWBi4',wb_mqtt_monitor.WBlinds[3].STATUS.toString());\nif (wb_mqtt_monitor.WBlinds[3].ACTIVE==1)\n    WBS4={payload:wb_mqtt_monitor.WBlinds[3].STATUS.toString()};\nelse\n   WBS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [WBS1,WBS2,WBS3,WBS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1181.0357666015625,"y":163.78570556640625,"wires":[["8f8762c.3286ca","74138eca.6815c","afdb449d.2a9e48"],["108ef884.7bc827","516eeff0.a09ed","89646150.8be27"],["f0a92597.adbd58","5d0cc329.c9aedc","28173448.33e5fc"],["3f709f3b.0a061","7b8b381f.20f848","496d1163.416b9"],[],[]]},{"id":"15a0f5e8.e782aa","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request MDStatus","func":"var Mqtt_Command_RMDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RMDStatus.RU_ID = RU_ID;\nMqtt_Command_RMDStatus.COMMAND= \"Request_MDStatus\";\nMqtt_Command_RMDStatus.DATE = msg2.Date;\nMqtt_Command_RMDStatus.TIME = msg2.Time;\n\nMqtt_Command_RMDStatus={payload:Mqtt_Command_RMDStatus};\n\nreturn Mqtt_Command_RMDStatus;","outputs":1,"noerr":0,"x":2277.5000381469727,"y":235.00000381469727,"wires":[["460838a4.6e4c98","2d3826b0.5aa8ea"]]},{"id":"f75b123.db4edf","type":"change","z":"ff8a25f8.46f4a8","name":"global. sWBi1","rules":[{"t":"set","p":"sWBi1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1746,"y":179.10715198516846,"wires":[[]]},{"id":"ec4a8607.d06a38","type":"change","z":"ff8a25f8.46f4a8","name":"global. sWBi2","rules":[{"t":"set","p":"sWBi2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1748.4999771118164,"y":225.3571481704712,"wires":[[]]},{"id":"897af9ec.df5ed8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sWBi3","rules":[{"t":"set","p":"sWBi3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1748.5000038146973,"y":277.8571529388428,"wires":[[]]},{"id":"a86e03da.c13b4","type":"change","z":"ff8a25f8.46f4a8","name":"global. sWBi4","rules":[{"t":"set","p":"sWBi4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1748.5000038146973,"y":332.8571538925171,"wires":[[]]},{"id":"f7e3c1fc.45bb7","type":"change","z":"ff8a25f8.46f4a8","name":"global. sWBi5","rules":[{"t":"set","p":"sWBi5","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1749.75,"y":379.1071538925171,"wires":[[]]},{"id":"744cd923.9f3368","type":"change","z":"ff8a25f8.46f4a8","name":"global. sWBi6","rules":[{"t":"set","p":"sWBi6","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1748.5000076293945,"y":431.6071557998657,"wires":[[]]},{"id":"758c40d8.dc8d8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sMDi1","rules":[{"t":"set","p":"sMDi1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3561.2500534057617,"y":172.50000381469727,"wires":[[]]},{"id":"5240f915.c4d4d8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sMDi2","rules":[{"t":"set","p":"sMDi2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3561.2500534057617,"y":221.25000381469727,"wires":[[]]},{"id":"460838a4.6e4c98","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"MD - MQTT Command","topic":"ETMP/RUi/SmartHome/MainDoors/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2581.250045776367,"y":235.00000381469727,"wires":[]},{"id":"1702e22.de1c11e","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change MDStatus","func":"var Mqtt_Command_CMDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nvar JSonPayload = { \n\n};\n\nMqtt_Command_CMDStatus.RU_ID = RU_ID;\nMqtt_Command_CMDStatus.COMMAND= \"Change_MDStatus\";\n\nMqtt_Command_CMDStatus.MDoors = [];\n\nMqtt_Command_CMDStatus.MDoors.push({});\nMqtt_Command_CMDStatus.MDoors[0]['WB'] = 1;\nMqtt_Command_CMDStatus.MDoors[0]['STATUS'] = global.get('sMDi1');\nMqtt_Command_CMDStatus.MDoors[0]['DATE'] = msg2.Date;\nMqtt_Command_CMDStatus.MDoors[0]['TIME'] = msg2.Time;\nMqtt_Command_CMDStatus.MDoors[0]['ACTIVE'] = 1;\n\nMqtt_Command_CMDStatus.MDoors.push({});\nMqtt_Command_CMDStatus.MDoors[1]['WB'] = 2;\nMqtt_Command_CMDStatus.MDoors[1]['STATUS'] = global.get('sMDi2');\nMqtt_Command_CMDStatus.MDoors[1]['DATE'] = msg2.Date;\nMqtt_Command_CMDStatus.MDoors[1]['TIME'] = msg2.Time;\nMqtt_Command_CMDStatus.MDoors[1]['ACTIVE'] = 1;\n\nMqtt_Command_CMDStatus={payload:Mqtt_Command_CMDStatus};\n\nreturn Mqtt_Command_CMDStatus;\n","outputs":1,"noerr":0,"x":2268.7500381469727,"y":301.2500047683716,"wires":[["460838a4.6e4c98","9e62be14.c815d"]]},{"id":"12e430ff.8ca48f","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"MD - MQTT Monitor","topic":"ETMP/RUi/SmartHome/MainDoors/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2561.2500076293945,"y":301.2499990463257,"wires":[["28f24773.697f08","4e40ce03.e4481"]]},{"id":"28f24773.697f08","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive MDStatus","func":"var md_mqtt_monitor = msg.payload;\n\nvar MDS1;\nvar MDS2;\n\nvar Req_Monitor=0;\n\n\nglobal.set('sMDi1',md_mqtt_monitor.MDoors[0].STATUS.toString());\nif (md_mqtt_monitor.MDoors[0].ACTIVE==1)\n        MDS1={payload:md_mqtt_monitor.MDoors[0].STATUS.toString()};\nelse\n   MDS1={payload:\"-1\"};\n\nglobal.set('sMDi1',md_mqtt_monitor.MDoors[1].STATUS.toString());\nif (md_mqtt_monitor.MDoors[1].ACTIVE==1)\n        MDS2={payload:md_mqtt_monitor.MDoors[1].STATUS.toString()};\nelse\n   MDS2={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [MDS1,MDS2,Req_Monitor, null];","outputs":4,"noerr":0,"x":2887.500045776367,"y":186.25000381469727,"wires":[["2a84c5d6.86ed2a","d5a40690.307218"],["5990e99e.ebd9e8","2e8f832c.76171c"],[],[]]},{"id":"9055dba0.26f1d8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WB - MQTT Command To RUi","topic":"RUi/SmartHome/WindowBlinds/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":861.2500076293945,"y":331.2500014305115,"wires":[]},{"id":"ca9a4864.c41568","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WB - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/WindowBlinds/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":521.2500076293945,"y":331.2500014305115,"wires":[["9055dba0.26f1d8"]]},{"id":"d817cc0.2557138","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WB - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/WindowBlinds/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":501.24999237060547,"y":387.4999957084656,"wires":[["2fba519c.99abce"]]},{"id":"2fba519c.99abce","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WB - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/WindowBlinds/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":893.7500076293945,"y":386.2500033378601,"wires":[]},{"id":"7dd3b9c7.0f5148","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"MD - MQTT Command To RUi","topic":"RUi/SmartHome/MainDoors/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":2732.5000076293945,"y":361.2499990463257,"wires":[]},{"id":"7ba3286b.9e6968","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"MD - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/MainDoors/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2392.5000076293945,"y":361.2499990463257,"wires":[["7dd3b9c7.0f5148"]]},{"id":"14c74615.b78d3a","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"MD - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/MainDoors/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":2372.4999923706055,"y":417.4999933242798,"wires":[["3027e7a5.94a6b8"]]},{"id":"3027e7a5.94a6b8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"MD - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/MainDoors/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2765.0000076293945,"y":416.2500009536743,"wires":[]},{"id":"cf5a32d.57a63d","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":513.7500038146973,"y":296.2500014305115,"wires":[]},{"id":"a9582a6c.ea45f8","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1143.8571090698242,"y":300.1428370475769,"wires":[]},{"id":"8f8762c.3286ca","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1453.142807006836,"y":20,"wires":[]},{"id":"108ef884.7bc827","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1451.7142333984375,"y":55.71428680419922,"wires":[]},{"id":"f0a92597.adbd58","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1457.4286079406738,"y":94.2857027053833,"wires":[]},{"id":"3f709f3b.0a061","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1463.1427536010742,"y":131.42857217788696,"wires":[]},{"id":"9e62be14.c815d","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2117.5,"y":366.25,"wires":[]},{"id":"c47806ac.daac68","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAPPi1","rules":[{"t":"set","p":"sAPPi1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1770.1787338256836,"y":558.5713930130005,"wires":[[]]},{"id":"a3cc1f05.fbf22","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAPPi2","rules":[{"t":"set","p":"sAPPi2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1770.1787109375,"y":603.5713834762573,"wires":[[]]},{"id":"54225474.7253cc","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAPPi3","rules":[{"t":"set","p":"sAPPi3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1766.4287109375,"y":649.8213834762573,"wires":[[]]},{"id":"31b0002f.3df05","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAPPi4","rules":[{"t":"set","p":"sAPPi4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1766.4287109375,"y":696.0713834762573,"wires":[[]]},{"id":"282d72f7.89d10e","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT1i1","rules":[{"t":"set","p":"sLT1i1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1766.4286308288574,"y":829.1071357727051,"wires":[[]]},{"id":"f3e1853.0634578","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT1i2","rules":[{"t":"set","p":"sLT1i2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1765.1786308288574,"y":876.6071357727051,"wires":[[]]},{"id":"69526d5d.df46b4","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT1i3","rules":[{"t":"set","p":"sLT1i3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1767.678653717041,"y":916.6071510314941,"wires":[[]]},{"id":"4154290b.bdf4c8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT1i4","rules":[{"t":"set","p":"sLT1i4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1768.9286308288574,"y":957.8571357727051,"wires":[[]]},{"id":"2ce9d7a1.38e948","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT2i1","rules":[{"t":"set","p":"sLT2i1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3552.66650390625,"y":809.9999389648438,"wires":[[]]},{"id":"7063f655.98df98","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT2i2","rules":[{"t":"set","p":"sLT2i2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3553.777587890625,"y":848.8888549804688,"wires":[[]]},{"id":"934f98ce.060858","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT2i3","rules":[{"t":"set","p":"sLT2i3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3553.777542114258,"y":894.4443912506104,"wires":[[]]},{"id":"f7a97486.3d9268","type":"change","z":"ff8a25f8.46f4a8","name":"global. sLT2i4","rules":[{"t":"set","p":"sLT2i4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3555.999755859375,"y":936.6666259765625,"wires":[[]]},{"id":"9567175.484dae8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sHVACi1","rules":[{"t":"set","p":"sHVACi1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1801.5872421264648,"y":1079.6824779510498,"wires":[[]]},{"id":"524a7c95.8eaff4","type":"change","z":"ff8a25f8.46f4a8","name":"global. sHVACi2","rules":[{"t":"set","p":"sHVACi2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1799.3650741577148,"y":1121.9046459197998,"wires":[[]]},{"id":"70ac18eb.fdaa98","type":"change","z":"ff8a25f8.46f4a8","name":"global. sHVACi3","rules":[{"t":"set","p":"sHVACi3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1799.3650741577148,"y":1160.7935619354248,"wires":[[]]},{"id":"d5d84209.0f0ce","type":"change","z":"ff8a25f8.46f4a8","name":"global. sHVACi4","rules":[{"t":"set","p":"sHVACi4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1799.3650741577148,"y":1200.7935619354248,"wires":[[]]},{"id":"bfb4032e.6ee37","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAASi1","rules":[{"t":"set","p":"sAASi1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1825.3173370361328,"y":1912.0633087158203,"wires":[[]]},{"id":"e348aa6d.ce1878","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAASi2","rules":[{"t":"set","p":"sAASi2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1821.9839630126953,"y":1953.1743927001953,"wires":[[]]},{"id":"c7eab9e8.b115d8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAASi3","rules":[{"t":"set","p":"sAASi3","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1823.0950469970703,"y":1995.3966827392578,"wires":[[]]},{"id":"1e072cf2.c180e3","type":"change","z":"ff8a25f8.46f4a8","name":"global. sAASi4","rules":[{"t":"set","p":"sAASi4","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1818.6505889892578,"y":2038.7299346923828,"wires":[[]]},{"id":"5aee461d.ac7238","type":"change","z":"ff8a25f8.46f4a8","name":"global. sGEVSi","rules":[{"t":"set","p":"sGEVSi","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3448.888671875,"y":3276.3173828125,"wires":[[]]},{"id":"c6cf51fe.ac1d1","type":"change","z":"ff8a25f8.46f4a8","name":"global. sWEVSi","rules":[{"t":"set","p":"sWEVSi","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3456.380962371826,"y":3512.253637313843,"wires":[[]]},{"id":"6e7b37dd.d5e6a8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sRDi1","rules":[{"t":"set","p":"sRDi1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1846.3095207214355,"y":4822.776913642883,"wires":[[]]},{"id":"a684f466.ffe3d8","type":"change","z":"ff8a25f8.46f4a8","name":"global. sRDi2","rules":[{"t":"set","p":"sRDi2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1844.563461303711,"y":4912.459529876709,"wires":[[]]},{"id":"4cdccb11.b08124","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request APPStatus","func":"var Mqtt_Command_RAPPStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RAPPStatus.RU_ID = RU_ID;\nMqtt_Command_RAPPStatus.COMMAND= \"Request_APPStatus\";\nMqtt_Command_RAPPStatus.DATE = msg2.Date;\nMqtt_Command_RAPPStatus.TIME = msg2.Time;\n\nMqtt_Command_RAPPStatus={payload:Mqtt_Command_RAPPStatus};\n\nreturn Mqtt_Command_RAPPStatus;","outputs":1,"noerr":0,"x":557.5000152587891,"y":535.0000076293945,"wires":[["8caf587d.0c39a8"]]},{"id":"f0d85225.ea38b","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change APPStatus","func":"var Mqtt_Command_CAPPStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CAPPStatus.RU_ID = RU_ID;\nMqtt_Command_CAPPStatus.COMMAND= \"Change_APPStatus\";\n\nMqtt_Command_CAPPStatus.APPliances = [];\n\nMqtt_Command_CAPPStatus.APPliances.push({});\nMqtt_Command_CAPPStatus.APPliances[0]['APP'] = 1;\nMqtt_Command_CAPPStatus.APPliances[0]['STATUS'] = global.get('sAPPi1');\nMqtt_Command_CAPPStatus.APPliances[0]['DATE'] = msg2.Date;\nMqtt_Command_CAPPStatus.APPliances[0]['TIME'] = msg2.Time;\nMqtt_Command_CAPPStatus.APPliances[0]['ACTIVE'] = 1;\n\nMqtt_Command_CAPPStatus.APPliances.push({});\nMqtt_Command_CAPPStatus.APPliances[1]['APP'] = 2;\nMqtt_Command_CAPPStatus.APPliances[1]['STATUS'] = global.get('sAPPi2');\nMqtt_Command_CAPPStatus.APPliances[1]['DATE'] = msg2.Date;\nMqtt_Command_CAPPStatus.APPliances[1]['TIME'] = msg2.Time;\nMqtt_Command_CAPPStatus.APPliances[1]['ACTIVE'] = 1;\n\nMqtt_Command_CAPPStatus.APPliances.push({});\nMqtt_Command_CAPPStatus.APPliances[2]['APP'] = 3;\nMqtt_Command_CAPPStatus.APPliances[2]['STATUS'] = global.get('sAPPi3');\nMqtt_Command_CAPPStatus.APPliances[2]['DATE'] = msg2.Date;\nMqtt_Command_CAPPStatus.APPliances[2]['TIME'] = msg2.Time;\nMqtt_Command_CAPPStatus.APPliances[2]['ACTIVE'] = 1;\n\nMqtt_Command_CAPPStatus.APPliances.push({});\nMqtt_Command_CAPPStatus.APPliances[3]['APP'] = 4;\nMqtt_Command_CAPPStatus.APPliances[3]['STATUS'] = global.get('sAPPi4');\nMqtt_Command_CAPPStatus.APPliances[3]['DATE'] = msg2.Date;\nMqtt_Command_CAPPStatus.APPliances[3]['TIME'] = msg2.Time;\nMqtt_Command_CAPPStatus.APPliances[3]['ACTIVE'] = 1;\n\n\nMqtt_Command_CAPPStatus={payload:Mqtt_Command_CAPPStatus};\n\nreturn Mqtt_Command_CAPPStatus;\n","outputs":1,"noerr":0,"x":560.0000381469727,"y":578.7500085830688,"wires":[["8caf587d.0c39a8","3f10913b.bb5cee"]]},{"id":"3bad6281.61e69e","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request LT1iStatus","func":"var Mqtt_Command_RLT1iStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RLT1iStatus.RU_ID = RU_ID;\nMqtt_Command_RLT1iStatus.COMMAND= \"Request_LT1iStatus\";\nMqtt_Command_RLT1iStatus.DATE = msg2.Date;\nMqtt_Command_RLT1iStatus.TIME = msg2.Time;\n\nMqtt_Command_RLT1iStatus={payload:Mqtt_Command_RLT1iStatus};\n\nreturn Mqtt_Command_RLT1iStatus;","outputs":1,"noerr":0,"x":543.75,"y":827.5,"wires":[["18c2892b.6475c7"]]},{"id":"bd4c72c0.b314","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change LT1iStatus","func":"var Mqtt_Command_CLT1iStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CLT1iStatus.RU_ID = RU_ID;\nMqtt_Command_CLT1iStatus.COMMAND= \"Change_LT1iStatus\";\n\nMqtt_Command_CLT1iStatus.LT1lights = [];\n\nMqtt_Command_CLT1iStatus.LT1lights.push({});\nMqtt_Command_CLT1iStatus.LT1lights[0]['LT1'] = 1;\nMqtt_Command_CLT1iStatus.LT1lights[0]['STATUS'] = global.get('sLT1i1');\nMqtt_Command_CLT1iStatus.LT1lights[0]['DATE'] = msg2.Date;\nMqtt_Command_CLT1iStatus.LT1lights[0]['TIME'] = msg2.Time;\nMqtt_Command_CLT1iStatus.LT1lights[0]['ACTIVE'] = 1;\n\nMqtt_Command_CLT1iStatus.LT1lights.push({});\nMqtt_Command_CLT1iStatus.LT1lights[1]['LT1'] = 2;\nMqtt_Command_CLT1iStatus.LT1lights[1]['STATUS'] = global.get('sLT1i2');\nMqtt_Command_CLT1iStatus.LT1lights[1]['DATE'] = msg2.Date;\nMqtt_Command_CLT1iStatus.LT1lights[1]['TIME'] = msg2.Time;\nMqtt_Command_CLT1iStatus.LT1lights[1]['ACTIVE'] = 1;\n\nMqtt_Command_CLT1iStatus.LT1lights.push({});\nMqtt_Command_CLT1iStatus.LT1lights[2]['LT1'] = 3;\nMqtt_Command_CLT1iStatus.LT1lights[2]['STATUS'] = global.get('sLT1i3');\nMqtt_Command_CLT1iStatus.LT1lights[2]['DATE'] = msg2.Date;\nMqtt_Command_CLT1iStatus.LT1lights[2]['TIME'] = msg2.Time;\nMqtt_Command_CLT1iStatus.LT1lights[2]['ACTIVE'] = 1;\n\nMqtt_Command_CLT1iStatus.LT1lights.push({});\nMqtt_Command_CLT1iStatus.LT1lights[3]['LT1'] = 4;\nMqtt_Command_CLT1iStatus.LT1lights[3]['STATUS'] = global.get('sLT1i4');\nMqtt_Command_CLT1iStatus.LT1lights[3]['DATE'] = msg2.Date;\nMqtt_Command_CLT1iStatus.LT1lights[3]['TIME'] = msg2.Time;\nMqtt_Command_CLT1iStatus.LT1lights[3]['ACTIVE'] = 1;\n\n\nMqtt_Command_CLT1iStatus={payload:Mqtt_Command_CLT1iStatus};\n\nreturn Mqtt_Command_CLT1iStatus;\n","outputs":1,"noerr":0,"x":545,"y":881.25,"wires":[["18c2892b.6475c7","5e5111d.42c1ff"]]},{"id":"c3ea2dbc.72344","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request LT1iStatus","func":"var Mqtt_Command_RLT2iStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RLT2iStatus.RU_ID = RU_ID;\nMqtt_Command_RLT2iStatus.COMMAND= \"Request_LT2iStatus\";\nMqtt_Command_RLT2iStatus.DATE = msg2.Date;\nMqtt_Command_RLT2iStatus.TIME = msg2.Time;\n\nMqtt_Command_RLT2iStatus={payload:Mqtt_Command_RLT2iStatus};\n\nreturn Mqtt_Command_RLT2iStatus;","outputs":1,"noerr":0,"x":2327.75,"y":836.9642333984375,"wires":[["2bdc35d1.9b800a"]]},{"id":"2297ad93.7b6f42","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change LT2iStatus","func":"var Mqtt_Command_CLT2iStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CLT2iStatus.RU_ID = RU_ID;\nMqtt_Command_CLT2iStatus.COMMAND= \"Change_LT2iStatus\";\n\nMqtt_Command_CLT2iStatus.LT2lights = [];\n\nMqtt_Command_CLT2iStatus.LT2lights.push({});\nMqtt_Command_CLT2iStatus.LT2lights[0]['LT2'] = 1;\nMqtt_Command_CLT2iStatus.LT2lights[0]['STATUS'] = global.get('sLT2i1');\nMqtt_Command_CLT2iStatus.LT2lights[0]['DATE'] = msg2.Date;\nMqtt_Command_CLT2iStatus.LT2lights[0]['TIME'] = msg2.Time;\nMqtt_Command_CLT2iStatus.LT2lights[0]['ACTIVE'] = 1;\n\nMqtt_Command_CLT2iStatus.LT2lights.push({});\nMqtt_Command_CLT2iStatus.LT2lights[1]['LT2'] = 2;\nMqtt_Command_CLT2iStatus.LT2lights[1]['STATUS'] = global.get('sLT2i2');\nMqtt_Command_CLT2iStatus.LT2lights[1]['DATE'] = msg2.Date;\nMqtt_Command_CLT2iStatus.LT2lights[1]['TIME'] = msg2.Time;\nMqtt_Command_CLT2iStatus.LT2lights[1]['ACTIVE'] = 1;\n\nMqtt_Command_CLT2iStatus.LT2lights.push({});\nMqtt_Command_CLT2iStatus.LT2lights[2]['LT2'] = 3;\nMqtt_Command_CLT2iStatus.LT2lights[2]['STATUS'] = global.get('sLT2i3');\nMqtt_Command_CLT2iStatus.LT2lights[2]['DATE'] = msg2.Date;\nMqtt_Command_CLT2iStatus.LT2lights[2]['TIME'] = msg2.Time;\nMqtt_Command_CLT2iStatus.LT2lights[2]['ACTIVE'] = 1;\n\nMqtt_Command_CLT2iStatus.LT2lights.push({});\nMqtt_Command_CLT2iStatus.LT2lights[3]['LT2'] = 4;\nMqtt_Command_CLT2iStatus.LT2lights[3]['STATUS'] = global.get('sLT2i4');\nMqtt_Command_CLT2iStatus.LT2lights[3]['DATE'] = msg2.Date;\nMqtt_Command_CLT2iStatus.LT2lights[3]['TIME'] = msg2.Time;\nMqtt_Command_CLT2iStatus.LT2lights[3]['ACTIVE'] = 1;\n\n\nMqtt_Command_CLT2iStatus={payload:Mqtt_Command_CLT2iStatus};\n\nreturn Mqtt_Command_CLT2iStatus;\n","outputs":1,"noerr":0,"x":2328.9999980926514,"y":883.2142333984375,"wires":[["2bdc35d1.9b800a"]]},{"id":"45417ed8.2d782","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request HVACStatus","func":"var Mqtt_Command_RHVACStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RHVACStatus.RU_ID = RU_ID;\nMqtt_Command_RHVACStatus.COMMAND= \"Request_HVACStatus\";\nMqtt_Command_RHVACStatus.DATE = msg2.Date;\nMqtt_Command_RHVACStatus.TIME = msg2.Time;\n\nMqtt_Command_RHVACStatus={payload:Mqtt_Command_RHVACStatus};\n\nreturn Mqtt_Command_RHVACStatus;","outputs":1,"noerr":0,"x":541.25,"y":1092.5,"wires":[["ee084b98.abc558"]]},{"id":"ee9dbf7b.cbbc9","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change HVACStatus","func":"var Mqtt_Command_CHVACStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CHVACStatus.RU_ID = RU_ID;\nMqtt_Command_CHVACStatus.COMMAND= \"Change_HVACStatus\";\n\nMqtt_Command_CHVACStatus.HVAC = [];\n\nMqtt_Command_CHVACStatus.HVAC.push({});\nMqtt_Command_CHVACStatus.HVAC[0]['HVAC'] = 1;\nMqtt_Command_CHVACStatus.HVAC[0]['STATUS'] = global.get('sHVACi1');\nMqtt_Command_CHVACStatus.HVAC[0]['DATE'] = msg2.Date;\nMqtt_Command_CHVACStatus.HVAC[0]['TIME'] = msg2.Time;\nMqtt_Command_CHVACStatus.HVAC[0]['ACTIVE'] = 1;\n\nMqtt_Command_CHVACStatus.HVAC.push({});\nMqtt_Command_CHVACStatus.HVAC[1]['HVAC'] = 2;\nMqtt_Command_CHVACStatus.HVAC[1]['STATUS'] = global.get('sHVACi2');\nMqtt_Command_CHVACStatus.HVAC[1]['DATE'] = msg2.Date;\nMqtt_Command_CHVACStatus.HVAC[1]['TIME'] = msg2.Time;\nMqtt_Command_CHVACStatus.HVAC[1]['ACTIVE'] = 1;\n\nMqtt_Command_CHVACStatus.HVAC.push({});\nMqtt_Command_CHVACStatus.HVAC[2]['HVAC'] = 3;\nMqtt_Command_CHVACStatus.HVAC[2]['STATUS'] = global.get('sHVACi3');\nMqtt_Command_CHVACStatus.HVAC[2]['DATE'] = msg2.Date;\nMqtt_Command_CHVACStatus.HVAC[2]['TIME'] = msg2.Time;\nMqtt_Command_CHVACStatus.HVAC[2]['ACTIVE'] = 1;\n\nMqtt_Command_CHVACStatus.HVAC.push({});\nMqtt_Command_CHVACStatus.HVAC[3]['HVAC'] = 4;\nMqtt_Command_CHVACStatus.HVAC[3]['STATUS'] = global.get('sHVACi4');\nMqtt_Command_CHVACStatus.HVAC[3]['DATE'] = msg2.Date;\nMqtt_Command_CHVACStatus.HVAC[3]['TIME'] = msg2.Time;\nMqtt_Command_CHVACStatus.HVAC[3]['ACTIVE'] = 1;\n\n\nMqtt_Command_CHVACStatus={payload:Mqtt_Command_CHVACStatus};\n\nreturn Mqtt_Command_CHVACStatus;\n","outputs":1,"noerr":0,"x":541.2500076293945,"y":1138.7500171661377,"wires":[["ee084b98.abc558"]]},{"id":"1a354ab0.80e025","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request HVACCStatus","func":"var Mqtt_Command_RHVACCStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RHVACCStatus.RU_ID = RU_ID;\nMqtt_Command_RHVACCStatus.COMMAND= \"Request_HVACCStatus\";\nMqtt_Command_RHVACCStatus.DATE = msg2.Date;\nMqtt_Command_RHVACCStatus.TIME = msg2.Time;\n\nMqtt_Command_RHVACCStatus={payload:Mqtt_Command_RHVACCStatus};\n\nreturn Mqtt_Command_RHVACCStatus;","outputs":1,"noerr":0,"x":2322.928466796875,"y":1081.25,"wires":[["39cb8150.bcdcee","d8ed35c8.bcc728"]]},{"id":"6cdc6fe8.b398c","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request HVACHStatus","func":"var Mqtt_Command_RHVACHStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RHVACHStatus.RU_ID = RU_ID;\nMqtt_Command_RHVACHStatus.COMMAND= \"Request_HVACHStatus\";\nMqtt_Command_RHVACHStatus.DATE = msg2.Date;\nMqtt_Command_RHVACHStatus.TIME = msg2.Time;\n\nMqtt_Command_RHVACHStatus={payload:Mqtt_Command_RHVACHStatus};\n\nreturn Mqtt_Command_RHVACHStatus;","outputs":1,"noerr":0,"x":3924.9287109375,"y":1071.0001220703125,"wires":[["fe5b28fa.4e3908"]]},{"id":"4a0eb8e4.652338","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request ASSStatus","func":"var Mqtt_Command_RASSStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RASSStatus.RU_ID = RU_ID;\nMqtt_Command_RASSStatus.COMMAND= \"Request_ASSStatus\";\nMqtt_Command_RASSStatus.DATE = msg2.Date;\nMqtt_Command_RASSStatus.TIME = msg2.Time;\n\nMqtt_Command_RASSStatus={payload:Mqtt_Command_RASSStatus};\n\nreturn Mqtt_Command_RASSStatus;","outputs":1,"noerr":0,"x":630.178581237793,"y":1920.5357341766357,"wires":[["60ef53f7.79d29c"]]},{"id":"f802e866.9b8988","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change ASSStatus","func":"var Mqtt_Command_CASSStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CASSStatus.RU_ID = RU_ID;\nMqtt_Command_CASSStatus.COMMAND= \"Change_ASSStatus\";\n\nMqtt_Command_CASSStatus.AAC = [];\n\nMqtt_Command_CASSStatus.AAC.push({});\nMqtt_Command_CASSStatus.AAC[0]['AAC'] = 1;\nMqtt_Command_CASSStatus.AAC[0]['STATUS'] = global.get('sAASi1');\nMqtt_Command_CASSStatus.AAC[0]['DATE'] = msg2.Date;\nMqtt_Command_CASSStatus.AAC[0]['TIME'] = msg2.Time;\nMqtt_Command_CASSStatus.AAC[0]['ACTIVE'] = 1;\n\nMqtt_Command_CASSStatus.AAC.push({});\nMqtt_Command_CASSStatus.AAC[1]['AAC'] = 2;\nMqtt_Command_CASSStatus.AAC[1]['STATUS'] = global.get('sAASi2');\nMqtt_Command_CASSStatus.AAC[1]['DATE'] = msg2.Date;\nMqtt_Command_CASSStatus.AAC[1]['TIME'] = msg2.Time;\nMqtt_Command_CASSStatus.AAC[1]['ACTIVE'] = 1;\n\nMqtt_Command_CASSStatus.AAC.push({});\nMqtt_Command_CASSStatus.AAC[2]['AAC'] = 3;\nMqtt_Command_CASSStatus.AAC[2]['STATUS'] = global.get('sAASi3');\nMqtt_Command_CASSStatus.AAC[2]['DATE'] = msg2.Date;\nMqtt_Command_CASSStatus.AAC[2]['TIME'] = msg2.Time;\nMqtt_Command_CASSStatus.AAC[2]['ACTIVE'] = 1;\n\nMqtt_Command_CASSStatus.AAC.push({});\nMqtt_Command_CASSStatus.AAC[3]['AAC'] = 4;\nMqtt_Command_CASSStatus.AAC[3]['STATUS'] = global.get('sAASi4');\nMqtt_Command_CASSStatus.AAC[3]['DATE'] = msg2.Date;\nMqtt_Command_CASSStatus.AAC[3]['TIME'] = msg2.Time;\nMqtt_Command_CASSStatus.AAC[3]['ACTIVE'] = 1;\n\n\nMqtt_Command_CASSStatus={payload:Mqtt_Command_CASSStatus};\n\nreturn Mqtt_Command_CASSStatus;\n","outputs":1,"noerr":0,"x":628.7499847412109,"y":1964.642840385437,"wires":[["60ef53f7.79d29c"]]},{"id":"288b09a6.a30106","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request PDSStatus","func":"var Mqtt_Command_RPDSStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RPDSStatus.RU_ID = RU_ID;\nMqtt_Command_RPDSStatus.COMMAND= \"Request_PDSStatus\";\nMqtt_Command_RPDSStatus.DATE = msg2.Date;\nMqtt_Command_RPDSStatus.TIME = msg2.Time;\n\nMqtt_Command_RPDSStatus={payload:Mqtt_Command_RPDSStatus};\n\nreturn Mqtt_Command_RPDSStatus;","outputs":1,"noerr":0,"x":603.3928833007812,"y":2206.2498922348022,"wires":[["77ac36fa.fbfde8"]]},{"id":"bd01e17.b02dc2","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request OWDStatus","func":"var Mqtt_Command_ROWDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_ROWDStatus.RU_ID = RU_ID;\nMqtt_Command_ROWDStatus.COMMAND= \"Request_OWDStatus\";\nMqtt_Command_ROWDStatus.DATE = msg2.Date;\nMqtt_Command_ROWDStatus.TIME = msg2.Time;\n\nMqtt_Command_ROWDStatus={payload:Mqtt_Command_ROWDStatus};\n\nreturn Mqtt_Command_ROWDStatus;","outputs":1,"noerr":0,"x":583.0953369140625,"y":2508.57156085968,"wires":[["4c6f70e.e4af79"]]},{"id":"1a6dcdaa.35b162","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request ODDStatus","func":"var Mqtt_Command_RODDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RODDStatus.RU_ID = RU_ID;\nMqtt_Command_RODDStatus.COMMAND= \"Request_ODDStatus\";\nMqtt_Command_RODDStatus.DATE = msg2.Date;\nMqtt_Command_RODDStatus.TIME = msg2.Time;\n\nMqtt_Command_RODDStatus={payload:Mqtt_Command_RODDStatus};\n\nreturn Mqtt_Command_RODDStatus;","outputs":1,"noerr":0,"x":2305.7143173217773,"y":2485.714419364929,"wires":[["d7de2349.40cad"]]},{"id":"db48ce33.dcaf7","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request SDSStatus","func":"var Mqtt_Command_RSDSStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RSDSStatus.RU_ID = RU_ID;\nMqtt_Command_RSDSStatus.COMMAND= \"Request_SDSStatus\";\nMqtt_Command_RSDSStatus.DATE = msg2.Date;\nMqtt_Command_RSDSStatus.TIME = msg2.Time;\n\nMqtt_Command_RSDSStatus={payload:Mqtt_Command_RSDSStatus};\n\nreturn Mqtt_Command_RSDSStatus;","outputs":1,"noerr":0,"x":563.9285888671875,"y":2905.8928775787354,"wires":[["9cdbead8.1d92b8"]]},{"id":"aad379c6.f548a8","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request TDSStatus","func":"var Mqtt_Command_RTDSStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RTDSStatus.RU_ID = RU_ID;\nMqtt_Command_RTDSStatus.COMMAND= \"Request_TDSStatus\";\nMqtt_Command_RTDSStatus.DATE = msg2.Date;\nMqtt_Command_RTDSStatus.TIME = msg2.Time;\n\nMqtt_Command_RTDSStatus={payload:Mqtt_Command_RTDSStatus};\n\nreturn Mqtt_Command_RTDSStatus;","outputs":1,"noerr":0,"x":2224.321533203125,"y":2913.21484375,"wires":[["f78e0397.0fae8"]]},{"id":"2e79482f.c9ff78","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request GLDStatus","func":"var Mqtt_Command_RGLDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RGLDStatus.RU_ID = RU_ID;\nMqtt_Command_RGLDStatus.COMMAND= \"Request_GLDStatus\";\nMqtt_Command_RGLDStatus.DATE = msg2.Date;\nMqtt_Command_RGLDStatus.TIME = msg2.Time;\n\nMqtt_Command_RGLDStatus={payload:Mqtt_Command_RGLDStatus};\n\nreturn Mqtt_Command_RGLDStatus;","outputs":1,"noerr":0,"x":573.214241027832,"y":3171.250047683716,"wires":[["89bed870.f95128"]]},{"id":"98739db2.895ff","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request GEVCStatus","func":"var Mqtt_Command_RGEVCStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RGEVCStatus.RU_ID = RU_ID;\nMqtt_Command_RGEVCStatus.COMMAND= \"Request_GEVCStatus\";\nMqtt_Command_RGEVCStatus.DATE = msg2.Date;\nMqtt_Command_RGEVCStatus.TIME = msg2.Time;\n\nMqtt_Command_RGEVCStatus={payload:Mqtt_Command_RGEVCStatus};\n\nreturn Mqtt_Command_RGEVCStatus;","outputs":1,"noerr":0,"x":2234.678825378418,"y":3188.7500495910645,"wires":[["8f4785e5.fbb908"]]},{"id":"5e4f9437.361f9c","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change GEVCStatus","func":"var Mqtt_Command_CGEVCStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CGEVCStatus.RU_ID = RU_ID;\nMqtt_Command_CGEVCStatus.COMMAND= \"Change_GEVCStatus\";\n\nMqtt_Command_CGEVCStatus.GEV = [];\n\nMqtt_Command_CGEVCStatus.GEV.push({});\nMqtt_Command_CGEVCStatus.GEV[0]['GEV'] = 1;\nMqtt_Command_CGEVCStatus.GEV[0]['STATUS'] = global.get('sGEVSi');\nMqtt_Command_CGEVCStatus.GEV[0]['DATE'] = msg2.Date;\nMqtt_Command_CGEVCStatus.GEV[0]['TIME'] = msg2.Time;\nMqtt_Command_CGEVCStatus.GEV[0]['ACTIVE'] = 1;\n\nMqtt_Command_CGEVCStatus={payload:Mqtt_Command_CGEVCStatus};\n\nreturn Mqtt_Command_CGEVCStatus;\n","outputs":1,"noerr":0,"x":2239.500442504883,"y":3227.8572273254395,"wires":[["8f4785e5.fbb908"]]},{"id":"6c34583f.3eb4d8","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request WLDStatus","func":"var Mqtt_Command_RWLDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWLDStatus.RU_ID = RU_ID;\nMqtt_Command_RWLDStatus.COMMAND= \"Request_WLDStatus\";\nMqtt_Command_RWLDStatus.DATE = msg2.Date;\nMqtt_Command_RWLDStatus.TIME = msg2.Time;\n\nMqtt_Command_RWLDStatus={payload:Mqtt_Command_RWLDStatus};\n\nreturn Mqtt_Command_RWLDStatus;","outputs":1,"noerr":0,"x":573.392951965332,"y":3414.821584701538,"wires":[["c2bef72d.d26b58"]]},{"id":"15248d42.2e0953","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request WEVCStatus","func":"var Mqtt_Command_RWEVCStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWEVCStatus.RU_ID = RU_ID;\nMqtt_Command_RWEVCStatus.COMMAND= \"Request_WEVCStatus\";\nMqtt_Command_RWEVCStatus.DATE = msg2.Date;\nMqtt_Command_RWEVCStatus.TIME = msg2.Time;\n\nMqtt_Command_RWEVCStatus={payload:Mqtt_Command_RWEVCStatus};\n\nreturn Mqtt_Command_RWEVCStatus;","outputs":1,"noerr":0,"x":2242.357322692871,"y":3416.249782562256,"wires":[["1de14ca0.cce763"]]},{"id":"c56cb5ec.c7c568","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change WEVCStatus","func":"var Mqtt_Command_CWEVCStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CWEVCStatus.RU_ID = RU_ID;\nMqtt_Command_CWEVCStatus.COMMAND= \"Change_WEVCStatus\";\n\nMqtt_Command_CWEVCStatus.WEV = [];\n\nMqtt_Command_CWEVCStatus.WEV.push({});\nMqtt_Command_CWEVCStatus.WEV[0]['WEV'] = 1;\nMqtt_Command_CWEVCStatus.WEV[0]['STATUS'] = global.get('sWEVSi');\nMqtt_Command_CWEVCStatus.WEV[0]['DATE'] = msg2.Date;\nMqtt_Command_CWEVCStatus.WEV[0]['TIME'] = msg2.Time;\nMqtt_Command_CWEVCStatus.WEV[0]['ACTIVE'] = 1;\n\nMqtt_Command_CWEVCStatus={payload:Mqtt_Command_CWEVCStatus};\n\nreturn Mqtt_Command_CWEVCStatus;\n","outputs":1,"noerr":0,"x":2243.607353210449,"y":3462.49978351593,"wires":[["1de14ca0.cce763"]]},{"id":"10abe259.1c47ae","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request FDStatus","func":"var Mqtt_Command_RFDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RFDStatus.RU_ID = RU_ID;\nMqtt_Command_RFDStatus.COMMAND= \"Request_FDStatus\";\nMqtt_Command_RFDStatus.DATE = msg2.Date;\nMqtt_Command_RFDStatus.TIME = msg2.Time;\n\nMqtt_Command_RFDStatus={payload:Mqtt_Command_RFDStatus};\n\nreturn Mqtt_Command_RFDStatus;","outputs":1,"noerr":0,"x":569.5833854675293,"y":4328.987637519836,"wires":[["e2aa2573.5aa6c8"]]},{"id":"79288c14.c518b4","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request EAStatus","func":"var Mqtt_Command_REAStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_REAStatus.RU_ID = RU_ID;\nMqtt_Command_REAStatus.COMMAND= \"Request_EAStatus\";\nMqtt_Command_REAStatus.DATE = msg2.Date;\nMqtt_Command_REAStatus.TIME = msg2.Time;\n\nMqtt_Command_REAStatus={payload:Mqtt_Command_REAStatus};\n\nreturn Mqtt_Command_REAStatus;","outputs":1,"noerr":0,"x":562.7976379394531,"y":4537.023768424988,"wires":[["236e74a1.8802fc"]]},{"id":"8bc607a9.6b2ed8","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request RDStatus","func":"var Mqtt_Command_RRDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RRDStatus.RU_ID = RU_ID;\nMqtt_Command_RRDStatus.COMMAND= \"Request_RDStatus\";\nMqtt_Command_RRDStatus.DATE = msg2.Date;\nMqtt_Command_RRDStatus.TIME = msg2.Time;\n\nMqtt_Command_RRDStatus={payload:Mqtt_Command_RRDStatus};\n\nreturn Mqtt_Command_RRDStatus;","outputs":1,"noerr":0,"x":572.4405136108398,"y":4775.773493766785,"wires":[["84c08455.cfd1d8"]]},{"id":"2fc4d423.bf3fec","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Change RDStatus","func":"var Mqtt_Command_CRDStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_CRDStatus.RU_ID = RU_ID;\nMqtt_Command_CRDStatus.COMMAND= \"Change_RDStatus\";\n\nMqtt_Command_CRDStatus.RDoor = [];\n\nMqtt_Command_CRDStatus.RDoor.push({});\nMqtt_Command_CRDStatus.RDoor[0]['RD'] = 1;\nMqtt_Command_CRDStatus.RDoor[0]['STATUS'] = global.get('sRDi1');\nMqtt_Command_CRDStatus.RDoor[0]['DATE'] = msg2.Date;\nMqtt_Command_CRDStatus.RDoor[0]['TIME'] = msg2.Time;\nMqtt_Command_CRDStatus.RDoor[0]['ACTIVE'] = 1;\n\nMqtt_Command_CRDStatus.RDoor.push({});\nMqtt_Command_CRDStatus.RDoor[1]['RD'] = 1;\nMqtt_Command_CRDStatus.RDoor[1]['STATUS'] = global.get('sRDi2');\nMqtt_Command_CRDStatus.RDoor[1]['DATE'] = msg2.Date;\nMqtt_Command_CRDStatus.RDoor[1]['TIME'] = msg2.Time;\nMqtt_Command_CRDStatus.RDoor[1]['ACTIVE'] = 1;\nMqtt_Command_CRDStatus={payload:Mqtt_Command_CRDStatus};\n\nreturn Mqtt_Command_CRDStatus;\n","outputs":1,"noerr":0,"x":572.4405136108398,"y":4822.023493766785,"wires":[["84c08455.cfd1d8"]]},{"id":"8caf587d.0c39a8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"APP - MQTT Command to ETMP","topic":"ETMP/RUi/SmartHome/Appliances/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":890.0000152587891,"y":536.2500076293945,"wires":[]},{"id":"2f479386.f6015c","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"APP - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/Appliances/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":552.5,"y":623.75,"wires":[["e2b54d07.8d3af"]]},{"id":"e2b54d07.8d3af","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"APP - MQTT Command To RUi","topic":"RUi/SmartHome/Appliances/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":880,"y":622.5,"wires":[]},{"id":"f35d3b06.1e74f8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"APP - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/Appliances/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":571.25,"y":673.75,"wires":[["89f1f927.5df418"]]},{"id":"89f1f927.5df418","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"APP - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/Appliances/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":907.5,"y":673.75,"wires":[]},{"id":"10ef3153.43cfdf","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"APP - MQTT Monitor","topic":"ETMP/RUi/SmartHome/Appliances/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":930.0000152587891,"y":580.0000095367432,"wires":[["ed07e16e.381a2","a18aa59b.c9bb68"]]},{"id":"18c2892b.6475c7","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"LT1 - MQTT Command to ETMP","topic":"ETMP/RUi/SmartHome/Lights/Type1/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":870,"y":826.25,"wires":[]},{"id":"6e272fdb.209f1","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"LT1 - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/Lights/Type1/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":535,"y":927.5,"wires":[["a8000b1.94b6af8"]]},{"id":"a8000b1.94b6af8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"LT1 - MQTT Command To RUi","topic":"RUi/SmartHome/Lights/Type1/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":868.7500152587891,"y":927.5000133514404,"wires":[]},{"id":"b162c473.288ca8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"LT1 - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/Lights/Type1/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":551.25,"y":972.5,"wires":[["d94b5de.674b1a"]]},{"id":"d94b5de.674b1a","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"LT1 - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/Lights/Type1/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":897.5,"y":972.5,"wires":[]},{"id":"26ad6864.3d7298","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"LT1 - MQTT Monitor","topic":"ETMP/RUi/SmartHome/Lights/Type1/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":960.3571624755859,"y":871.2500286102295,"wires":[["5540156f.d575bc","ab690643.8f5c28"]]},{"id":"2bdc35d1.9b800a","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"LT2 - MQTT Command","topic":"ETMP/RUi/SmartHome/Lights/Type2/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2648.2857055664062,"y":828.5714287757874,"wires":[]},{"id":"5477b3c2.7d6ffc","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"LT2 - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/Lights/Type2/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2316.8573150634766,"y":932.8571500778198,"wires":[["20192019.0c638"]]},{"id":"20192019.0c638","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"LT2 - MQTT Command To RUi","topic":"RUi/SmartHome/Lights/Type2/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":2679.71431350708,"y":931.4285354614258,"wires":[]},{"id":"a9c85fff.0af33","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"LT2 - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/Lights/Type2/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":2336.857147216797,"y":981.4285516738892,"wires":[["8799c03c.7cdcc"]]},{"id":"8799c03c.7cdcc","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"LT2 - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/Lights/Type2/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2716.8572387695312,"y":980.0000057220459,"wires":[]},{"id":"da905abd.1df368","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"LT2 - MQTT Monitor","topic":"ETMP/RUi/SmartHome/Lights/Type2/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2678.285743713379,"y":874.2857055664062,"wires":[["7c1326fc.f0e138"]]},{"id":"ee084b98.abc558","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVAC - MQTT Command to ETMP","topic":"ETMP/RUi/SmartHome/HVAC/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":874.2857055664062,"y":1092.857177734375,"wires":[]},{"id":"753ddcaf.c29824","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVAC - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/HVAC/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":525.7142944335938,"y":1182.857174873352,"wires":[["d85a56ae.b1e7b8"]]},{"id":"d85a56ae.b1e7b8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVAC - MQTT Command To RUi","topic":"RUi/SmartHome/HVAC/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":872.857177734375,"y":1181.4285888671875,"wires":[]},{"id":"b655a75e.e8d7e8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVAC - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/HVAC/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":545.7143249511719,"y":1227.1428537368774,"wires":[["b5004f85.5c028"]]},{"id":"b5004f85.5c028","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVAC - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/HVAC/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":901.4285888671875,"y":1225.71435546875,"wires":[]},{"id":"b31397ee.9b7858","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVAC - MQTT Monitor","topic":"ETMP/RUi/SmartHome/HVAC/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":955.7142944335938,"y":1131.4285888671875,"wires":[["e076e314.803cd"]]},{"id":"39cb8150.bcdcee","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVACC - MQTT Command","topic":"ETMP/RUi/SmartHome/HVAC/Cooler/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2685.4282150268555,"y":1080.0001220703125,"wires":[]},{"id":"9d68d79d.fedf68","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVACC - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/HVAC/Cooler/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2323.9998779296875,"y":1177.1428694725037,"wires":[["8c31dc78.518dc"]]},{"id":"fe5b28fa.4e3908","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVACH - MQTT Command","topic":"ETMP/RUi/SmartHome/HVAC/Heater/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":4270.285858154297,"y":1067.4286122322083,"wires":[]},{"id":"8c31dc78.518dc","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVACC - MQTT Command To RUi","topic":"RUi/SmartHome/HVAC/Cooler/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":2691.1427459716797,"y":1177.1428198814392,"wires":[]},{"id":"ac01bd5.1d6c84","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVACH - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/HVAC/Heater/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":3916.000030517578,"y":1167.4285521507263,"wires":[["3e421953.1e5ea6"]]},{"id":"3e421953.1e5ea6","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVACH - MQTT Command To RUi","topic":"RUi/SmartHome/HVAC/Heater/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":4286.000030517578,"y":1167.4285521507263,"wires":[]},{"id":"4149bb47.77e6a4","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVACC - MQTT Monitor","topic":"ETMP/RUi/SmartHome/HVAC/Cooler/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2788.2855339050293,"y":1128.5713748931885,"wires":[["e21ae809.88bee8","b3329ba4.7ad0b8"]]},{"id":"d306e0fc.67f6e","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVACH - MQTT Monitor","topic":"ETMP/RUi/SmartHome/HVAC/Heater/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":4367.428810119629,"y":1114.5714106559753,"wires":[["f2a8b046.67287"]]},{"id":"474b833c.f952bc","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVACC - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/HVAC/Cooler/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":2342.571487426758,"y":1224.2857594490051,"wires":[["f4f40545.0c98a8"]]},{"id":"f4f40545.0c98a8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVACC - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/HVAC/Cooler/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2718.2855682373047,"y":1225.7143530845642,"wires":[]},{"id":"50b61e3c.7b278","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVACH - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/HVAC/Heater/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":3934.571563720703,"y":1214.5713744163513,"wires":[["bb615ed1.1856a"]]},{"id":"bb615ed1.1856a","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVACH - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/HVAC/Heater/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":4317.428497314453,"y":1213.1429076194763,"wires":[]},{"id":"60ef53f7.79d29c","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"ASS - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Security/Zone/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":985.7142944335938,"y":1920,"wires":[]},{"id":"7b6368e2.8a6208","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"ASS - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Security/Zone/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":604.2857055664062,"y":2015.71435546875,"wires":[["1bcd460b.6fdcfa"]]},{"id":"1bcd460b.6fdcfa","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"ASS - MQTT Command To RUi","topic":"RUi/AlarmSystem/Security/Zone/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":951.4285888671875,"y":2014.2857694625854,"wires":[]},{"id":"2ddc6e30.1888a2","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"ASS - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Security/Zone/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":624.2857055664062,"y":2061.4287452697754,"wires":[["b2ced80.3497428"]]},{"id":"b2ced80.3497428","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"ASS - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Security/Zone/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":978.5714340209961,"y":2061.428780555725,"wires":[]},{"id":"c2121185.2ea88","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"ASS - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Security/Zone/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1052.857177734375,"y":1961.4285888671875,"wires":[["756bffb8.e29a4","65cdb5ca.b4f9ac"]]},{"id":"77ac36fa.fbfde8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"PDS - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/Presence/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":964.2857437133789,"y":2205.7140045166016,"wires":[]},{"id":"f064374e.54ee08","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"PDS - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/Presence/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":598.5714263916016,"y":2297.1427841186523,"wires":[["f9afdbbc.cef1d8"]]},{"id":"f9afdbbc.cef1d8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"PDS - MQTT Command To RUi","topic":"RUi/AlarmSystem/Security/Intrusion/Presence/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":974.2857513427734,"y":2298.5713539123535,"wires":[]},{"id":"746fb670.10e298","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"PDS - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Security/Intrusion/Presence/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":618.5714721679688,"y":2345.714141845703,"wires":[["c03d4740.728648"]]},{"id":"c03d4740.728648","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"PDS - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/Presence/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":999.9999694824219,"y":2345.7148036956787,"wires":[]},{"id":"9b7ed71f.6f0508","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"PDS - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/Presence/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1045.7143898010254,"y":2250.000310897827,"wires":[["94a7bb4.2a30a48"]]},{"id":"4c6f70e.e4af79","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"OWD - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenWindow/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":991.6667938232422,"y":2508.571485519409,"wires":[]},{"id":"d7de2349.40cad","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"ODD - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenDoor/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2707.321487426758,"y":2440.0001678466797,"wires":[]},{"id":"5593de3a.2d016","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"OWD - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenWindow/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":564.5238494873047,"y":2610.000196456909,"wires":[["a10a2eac.25bb6"]]},{"id":"a10a2eac.25bb6","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"OWD - MQTT Command To RUi","topic":"RUi/AlarmSystem/Security/Intrusion/OpenWindow/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":955.9524383544922,"y":2610.000196456909,"wires":[]},{"id":"70615b84.407984","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"ODD - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenDoor/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2294.4643325805664,"y":2534.2859258651733,"wires":[["1e74946a.4e2e9c"]]},{"id":"1e74946a.4e2e9c","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"ODD - MQTT Command To RUi","topic":"RUi/AlarmSystem/Security/Intrusion/OpenDoor/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":2698.7500228881836,"y":2534.2859506607056,"wires":[]},{"id":"72a08431.0dff4c","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"OWD - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Security/Intrusion/OpenWindow/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":580.2381286621094,"y":2655.7142639160156,"wires":[["1a559078.af628"]]},{"id":"1a559078.af628","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"OWD - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenWindow/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":995.9524383544922,"y":2655.714307785034,"wires":[]},{"id":"41e8ccb5.084174","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"ODD - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Security/Intrusion/OpenDoor/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":2315.7143173217773,"y":2587.143132209778,"wires":[["74683bd6.ac1b84"]]},{"id":"74683bd6.ac1b84","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"ODD - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenDoor/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2731.428680419922,"y":2587.143132209778,"wires":[]},{"id":"1bb9ec3e.b44824","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"OWD - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenWindow/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1040.2381286621094,"y":2551.428699493408,"wires":[["8009e48f.1f0948","86baf87f.ce4c48"]]},{"id":"d440c019.cca8b","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"ODD - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Security/Intrusion/OpenDoor/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2766.071506500244,"y":2483.571597099304,"wires":[["a2fdb63e.2c7a98","9a51f8f9.2a7f68"]]},{"id":"9cdbead8.1d92b8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"SDS - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/SmokeDetect/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":989.107177734375,"y":2905.3571281433105,"wires":[]},{"id":"f78e0397.0fae8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"TDS - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/ThermDetect/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2653.4287719726562,"y":2914.28599357605,"wires":[]},{"id":"efd7b161.c4402","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"SDS - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/SmokeDetect/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":561.2500762939453,"y":2988.928755760193,"wires":[["cad20352.3d222"]]},{"id":"cad20352.3d222","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"SDS - MQTT Command To RUi","topic":"RUi/AlarmSystem/Safety/Fire/SmokeDetect/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":988.5714263916016,"y":2989.642622947693,"wires":[]},{"id":"abac03cf.e6568","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"TDS - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/ThermDetect/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2227.0000610351562,"y":3001.2507305145264,"wires":[["8a5ddc3e.68073"]]},{"id":"8a5ddc3e.68073","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"TDS - MQTT Command To RUi","topic":"RUi/AlarmSystem/Safety/Fire/ThermDetect/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":2646.4645919799805,"y":3001.9646320343018,"wires":[]},{"id":"4bd6fb8.5258f04","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"SDS - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Safety/Fire/SmokeDetect/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":583.7499542236328,"y":3036.785446166992,"wires":[["5e795b35.ab0574"]]},{"id":"5e795b35.ab0574","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"SDS - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/SmokeDetect/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1022.5001373291016,"y":3039.464400291443,"wires":[]},{"id":"bd42b387.73863","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"SDS - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/SmokeDetect/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1058.3929595947266,"y":2943.7497997283936,"wires":[["d76d864f.fb29b8"]]},{"id":"b87c5977.d1a478","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"TDS - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Safety/Fire/ThermDetect/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":2243.0716400146484,"y":3048.929126739502,"wires":[["a2fd4afd.0d7ce8"]]},{"id":"a2fd4afd.0d7ce8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"TDS - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/ThermDetect/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2678.4286346435547,"y":3049.821704864502,"wires":[]},{"id":"b208f86f.d86e58","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"TDS - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Safety/Fire/ThermDetect/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2720.393054962158,"y":2955.3575954437256,"wires":[["4365ad85.2befb4"]]},{"id":"89bed870.f95128","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"GLD - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/Leakage/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":987.1428985595703,"y":3169.285692214966,"wires":[]},{"id":"8f4785e5.fbb908","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"GEV - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/ElecValve/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2664.6787338256836,"y":3187.5000495910645,"wires":[]},{"id":"d1484469.f4d718","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"GLD - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/Leakage/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":560.1786041259766,"y":3264.28569316864,"wires":[["6dccdcdb.01a334"]]},{"id":"6dccdcdb.01a334","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"GLD - MQTT Command To RUi","topic":"RUi/AlarmSystem/Safety/Gas/Leakage/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":972.5000152587891,"y":3266.2500495910645,"wires":[]},{"id":"ca14e7c1.a15178","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"GLD - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Safety/Gas/Leakage/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":575.0000381469727,"y":3312.5000495910645,"wires":[["13c3e4a5.d7adab"]]},{"id":"13c3e4a5.d7adab","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"GLD - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/Leakage/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1002.5000114440918,"y":3315.0000495910645,"wires":[]},{"id":"699ac7e5.872c08","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"GLD - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/Leakage/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1061.250015258789,"y":3216.250047683716,"wires":[["571c461a.79d558"]]},{"id":"c2bef72d.d26b58","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WLD - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Safety/Water/Leakage/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":990.0000152587891,"y":3415.000051498413,"wires":[]},{"id":"6a5da856.1810a8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WLD - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Safety/Water/Leakage/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":556.2500457763672,"y":3518.750051498413,"wires":[["444918a5.80cdc8"]]},{"id":"444918a5.80cdc8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WLD - MQTT Command To RUi","topic":"RUi/AlarmSystem/Safety/Water/Leakage/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":975.0000152587891,"y":3518.750051498413,"wires":[]},{"id":"b123f729.7b3db8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WLD - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Safety/Water/Leakage/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":570.0000076293945,"y":3568.7500534057617,"wires":[["bfaf06ad.b29b18"]]},{"id":"bfaf06ad.b29b18","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WLD - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Safety/Water/Leakage/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1003.7500114440918,"y":3568.7500534057617,"wires":[]},{"id":"fa1a0f77.8a324","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WLD - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Safety/Water/Leakage/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1075,"y":3460,"wires":[["8a443d93.a6b84"]]},{"id":"94507ff4.0d118","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"FD - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/HealthAging/Aging/Fall/Inhabitant/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":544.5834045410156,"y":4391.666344642639,"wires":[["556d8528.4c7e3c"]]},{"id":"e2aa2573.5aa6c8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"FD - MQTT Command to ETMP","topic":"ETMP/RUi/HealthAging/Aging/Fall/Inhabitant/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":959.5833740234375,"y":4305.416343688965,"wires":[]},{"id":"556d8528.4c7e3c","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"FD - MQTT Command To RUi","topic":"RUi/HealthAging/Aging/Fall/Inhabitant/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":960.8333740234375,"y":4392.916344642639,"wires":[]},{"id":"b15c2bdf.66a618","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"FD - MQTT Monitor (From RUi)","topic":"RUi/HealthAging/Aging/Fall/Inhabitant/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":562.0833740234375,"y":4439.1663455963135,"wires":[["ae723437.486118"]]},{"id":"ae723437.486118","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"FD - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/HealthAging/Aging/Fall/Inhabitant/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":987.0833740234375,"y":4440.4163455963135,"wires":[]},{"id":"eaa2ccba.0e333","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"LD - MQTT Monitor","topic":"ETMP/RUi/HealthAging/Aging/Fall/Inhabitant/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1044.5833740234375,"y":4345.416344642639,"wires":[["81afc4a9.5a90e8"]]},{"id":"236e74a1.8802fc","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"EA - MQTT Command to ETMP","topic":"ETMP/RUi/HealthAging/eHealth/Emergency/Inhabitant/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":955.8333587646484,"y":4536.6662855148315,"wires":[]},{"id":"9efb9d1f.2c1c3","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"EA - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/HealthAging/eHealth/Emergency/Inhabitant/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":545.8333587646484,"y":4631.6662855148315,"wires":[["c7a3c85.6e96c38"]]},{"id":"c7a3c85.6e96c38","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"EA - MQTT Command To RUi","topic":"RUi/HealthAging/eHealth/Emergency/Inhabitant/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":957.0833587646484,"y":4630.4162855148315,"wires":[]},{"id":"df0bf826.9b46e8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"EA - MQTT Monitor (From RUi)","topic":"RUi/HealthAging/eHealth/Emergency/Inhabitant/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":565.8333587646484,"y":4676.6662855148315,"wires":[["4ea9adf6.517c24"]]},{"id":"4ea9adf6.517c24","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"EA - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/HealthAging/eHealth/Emergency/Inhabitant/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":987.0833587646484,"y":4677.9162855148315,"wires":[]},{"id":"da4cd00f.764ec","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"EA - MQTT Monitor","topic":"ETMP/RUi/HealthAging/eHealth/Emergency/Inhabitant/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1039.5833587646484,"y":4582.9162855148315,"wires":[["2c88c66.742573a"]]},{"id":"84c08455.cfd1d8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"RD - MQTT Command to ETMP","topic":"ETMP/RUi/SmartHome/MainDoors2/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":952.0833587646484,"y":4774.1662855148315,"wires":[]},{"id":"a2e33e41.b2802","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"RD - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartHome/MainDoors2/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":549.5833587646484,"y":4870.4162855148315,"wires":[["6cd242a5.0b13dc"]]},{"id":"6cd242a5.0b13dc","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"RD - MQTT Command To RUi","topic":"RUi/SmartHome/MainDoors2/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":948.3333587646484,"y":4869.1662855148315,"wires":[]},{"id":"6ef3c982.379308","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"RD - MQTT Monitor (From RUi)","topic":"RUi/SmartHome/MainDoors2/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":570.8333587646484,"y":4921.6662855148315,"wires":[["d394b459.86b038"]]},{"id":"d394b459.86b038","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"RD - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/SmartHome/MainDoors2/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":978.3333702087402,"y":4920.416352272034,"wires":[]},{"id":"1ef71a8f.bc4f95","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"RD - MQTT Monitor","topic":"ETMP/RUi/SmartHome/MainDoors2/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1033.3333587646484,"y":4819.1662855148315,"wires":[["d38813c4.cb2b4","cd37d960.fd1588"]]},{"id":"1de14ca0.cce763","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WEV - MQTT Command to ETMP","topic":"ETMP/RUi/AlarmSystem/Safety/Water/ElecValve/Command","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2659.142822265625,"y":3414.2858352661133,"wires":[]},{"id":"bb6c11aa.dadba","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"GEV - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/ElecValve/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2221.999885559082,"y":3302.8570308685303,"wires":[["c7e3e0f9.f91b8"]]},{"id":"c7e3e0f9.f91b8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"GEV - MQTT Command To RUi","topic":"RUi/AlarmSystem/Safety/Gas/ElecValve/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":2651.999885559082,"y":3304.2857418060303,"wires":[]},{"id":"670d294c.16fa78","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"GEV - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Safety/Gas/ElecValve/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":2241.999885559082,"y":3350.0000972747803,"wires":[["24c64b3e.8973c4"]]},{"id":"24c64b3e.8973c4","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"GEV - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/ElecValve/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2680.571174621582,"y":3348.5713863372803,"wires":[]},{"id":"d6130954.4bdcd8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"GEV - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Safety/Gas/ElecValve/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2736.28564453125,"y":3252.8571243286133,"wires":[["68efac34.8c8164"]]},{"id":"939fd1e1.d9b51","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WEV - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/AlarmSystem/Safety/Water/ElecValve/Command","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2234.857177734375,"y":3534.2858352661133,"wires":[["32529aab.71c646"]]},{"id":"32529aab.71c646","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WEV - MQTT Command To RUi","topic":"RUi/AlarmSystem/Safety/Water/ElecValve/Command","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":2664.857177734375,"y":3535.7145462036133,"wires":[]},{"id":"900fa0a7.f673f","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WEV - MQTT Monitor (From RUi)","topic":"RUi/AlarmSystem/Safety/Water/ElecValve/Monitor","property":"","qos":"2","broker":"34d858f3.7e5b98","x":2254.857177734375,"y":3581.4289016723633,"wires":[["2cd56811.8af7b8"]]},{"id":"2cd56811.8af7b8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"WEV - MQTT Monitor (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Safety/Water/ElecValve/Monitor","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":2693.428466796875,"y":3580.0001907348633,"wires":[]},{"id":"ec29888e.8da128","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"WEV - MQTT Monitor","topic":"ETMP/RUi/AlarmSystem/Safety/Water/ElecValve/Monitor","property":"","qos":"2","broker":"cb7c4e4.778afb","x":2729.142822265625,"y":3472.8571243286133,"wires":[["4a60ff97.575cb"]]},{"id":"d5a40690.307218","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":3112.8571428571427,"y":99.99999999999999,"wires":[]},{"id":"2e8f832c.76171c","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":3127.142857142857,"y":301.4285714285714,"wires":[]},{"id":"2d3826b0.5aa8ea","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2340,"y":119.99999999999999,"wires":[]},{"id":"a861306e.ad1ec","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":902.8571428571428,"y":119.99999999999999,"wires":[]},{"id":"4e40ce03.e4481","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2837.142857142857,"y":297.1428571428571,"wires":[]},{"id":"ed07e16e.381a2","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive APPStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sAPPi1',app_mqtt_monitor.APPliances[0].STATUS.toString());\nif (app_mqtt_monitor.APPliances[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.APPliances[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sAPPi2',app_mqtt_monitor.APPliances[1].STATUS.toString());\nif (app_mqtt_monitor.APPliances[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.APPliances[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nglobal.set('sAPPi3',app_mqtt_monitor.APPliances[2].STATUS.toString());\nif (app_mqtt_monitor.APPliances[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.APPliances[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nglobal.set('sAPPi4',app_mqtt_monitor.APPliances[3].STATUS.toString());\nif (app_mqtt_monitor.APPliances[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.APPliances[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1212.8570709228516,"y":582.8571586608887,"wires":[["3eb8939.a30bf6c","12d585e1.d2a9aa"],["dc582b9b.a81d38","26753c.ef5f2ac4"],["7041b409.5fff4c","f90f78c8.5a44d8"],["ade46c5a.797b5","5a0b1256.42730c"],[],[]]},{"id":"a18aa59b.c9bb68","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1180,"y":677.1428571428571,"wires":[]},{"id":"3f10913b.bb5cee","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":884.2857142857142,"y":484.2857142857142,"wires":[]},{"id":"5540156f.d575bc","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive LT1Status","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sLT1i1',app_mqtt_monitor.LT1lights[0].STATUS.toString());\nif (app_mqtt_monitor.LT1lights[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.LT1lights[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sLT1i2',app_mqtt_monitor.LT1lights[1].STATUS.toString());\nif (app_mqtt_monitor.LT1lights[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.LT1lights[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nglobal.set('sLT1i3',app_mqtt_monitor.LT1lights[2].STATUS.toString());\nif (app_mqtt_monitor.LT1lights[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.LT1lights[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nglobal.set('sLT1i4',app_mqtt_monitor.LT1lights[3].STATUS.toString());\nif (app_mqtt_monitor.LT1lights[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.LT1lights[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1218.5715103149414,"y":871.4285736083984,"wires":[["40c687c2.b33cc8","edf3c154.76a69"],["e2204d8f.3aad","33726c08.4a2684"],["7442ebb5.79ce54","f8f8ee36.cdd68"],["d8a6f951.806218","cddb1afa.fdde18"],[],[]]},{"id":"ab690643.8f5c28","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1178.5714285714284,"y":964.2857142857142,"wires":[]},{"id":"5e5111d.42c1ff","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":842.8571428571428,"y":771.4285714285713,"wires":[]},{"id":"7c1326fc.f0e138","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive LT2Status","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sLT2i1',app_mqtt_monitor.LT2lights[0].STATUS.toString());\nif (app_mqtt_monitor.LT2lights[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.LT2lights[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sLT2i2',app_mqtt_monitor.LT2lights[1].STATUS.toString());\nif (app_mqtt_monitor.LT2lights[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.LT2lights[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nglobal.set('sLT2i3',app_mqtt_monitor.LT2lights[2].STATUS.toString());\nif (app_mqtt_monitor.LT2lights[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.LT2lights[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nglobal.set('sLT2i4',app_mqtt_monitor.LT2lights[3].STATUS.toString());\nif (app_mqtt_monitor.LT2lights[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.LT2lights[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":3009.7144165039062,"y":841.4286060333252,"wires":[["1c2f44e2.cf0bdb","358c7c4d.7f3d74"],["66e66a24.d13fd4","a6b0e5b6.5bf0f8"],["d782d65f.e21af8","8da6b484.e09d98"],["bd0e7aa0.5fb5b8","2ff0d65b.1b9a7a"],[],[]]},{"id":"e076e314.803cd","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive HVACStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sHVACi1',app_mqtt_monitor.HVAC[0].STATUS.toString());\nif (app_mqtt_monitor.HVAC[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.HVAC[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sHVACi2',app_mqtt_monitor.HVAC[1].STATUS.toString());\nif (app_mqtt_monitor.HVAC[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.HVAC[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nglobal.set('sHVACi3',app_mqtt_monitor.HVAC[2].STATUS.toString());\nif (app_mqtt_monitor.HVAC[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.HVAC[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nglobal.set('sHVACi4',app_mqtt_monitor.HVAC[3].STATUS.toString());\nif (app_mqtt_monitor.HVAC[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.HVAC[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1220,"y":1110,"wires":[["ccfff620.7cb368","f9e531c8.4eb8d"],["a7035418.4e29d8","6d6dd786.3b0448"],["895c06f5.023f88","523b46ce.93b328"],["d2ef5188.1f3f9","2b6e10eb.831c5"],[],[]]},{"id":"e21ae809.88bee8","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive HVACCStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.HVACC[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.HVACC[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.HVACC[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.HVACC[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.HVACC[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.HVACC[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.HVACC[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.HVACC[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":3108.571533203125,"y":1120,"wires":[["c963b36c.cd696"],["bf344156.4c418"],["c03f6ccd.f8e68"],["5ac86dcb.5dc2c4"],[],[]]},{"id":"b3329ba4.7ad0b8","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":3018.5714285714284,"y":1221.4285714285713,"wires":[]},{"id":"d8ed35c8.bcc728","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2591.428571428571,"y":1034.2857142857142,"wires":[]},{"id":"f2a8b046.67287","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive HVACHStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.HVACH[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.HVACH[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.HVACH[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.HVACH[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.HVACH[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.HVACH[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.HVACH[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.HVACH[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":4662.857345581055,"y":1094.285800933838,"wires":[["7bfc9300.94817c"],["4153f707.083588"],["496aa015.11a8d"],["f280978c.ad9f98"],[],[]]},{"id":"756bffb8.e29a4","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive AASStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sAASi1',app_mqtt_monitor.fields[0].STATUS.toString());\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sAASi2',app_mqtt_monitor.fields[1].STATUS.toString());\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nglobal.set('sAASi3',app_mqtt_monitor.fields[2].STATUS.toString());\nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nglobal.set('sAASi4',app_mqtt_monitor.fields[3].STATUS.toString());\nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1324.2857666015625,"y":1958.5714111328125,"wires":[["b97e9e70.7673b","c7300acd.0ba2b8"],["90024d25.fbcff","33fe0647.6529ca"],["f9a28977.3737c8","d7c867de.0494e8"],["de261b6e.2a7c88","8a5345d0.67eac8"],[],[]]},{"id":"65cdb5ca.b4f9ac","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1305.7142857142856,"y":1837.1428571428569,"wires":[]},{"id":"94a7bb4.2a30a48","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive PDSStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1332.8571395874023,"y":2245.7143516540527,"wires":[["ace50ecd.8a44e"],["5e2b19c.601fae8"],["f04ceffe.b5e35"],["40b7e4b1.14d88c"],[],[]]},{"id":"8009e48f.1f0948","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive OWDStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1323.0953063964844,"y":2547.142921447754,"wires":[["51479646.a3a858"],["b3dfefca.afdf6"],["3a19919.8260a6e"],["6b7650ef.09e59"],[],[]]},{"id":"a2fdb63e.2c7a98","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive ODDStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sAASi1',app_mqtt_monitor.fields[0].STATUS.toString());\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sAASi2',app_mqtt_monitor.fields[1].STATUS.toString());\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nglobal.set('sAASi3',app_mqtt_monitor.fields[2].STATUS.toString());\nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nglobal.set('sAASi4',app_mqtt_monitor.fields[3].STATUS.toString());\nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":3115.714195251465,"y":2470.000026702881,"wires":[["fb405d05.da54c"],["153f8b48.1882d5"],["5cb49fbe.c5f76"],["20e5c79c.73f1b8"],[],[]]},{"id":"d76d864f.fb29b8","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive SDSStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1351.4285888671875,"y":2938.571533203125,"wires":[["25fb0d93.7fb4e2"],["3a4b5947.420146"],["e3e2cbb6.365958"],["47be4ae7.5610a4"],[],[]]},{"id":"571c461a.79d558","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive GLDStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1352.857177734375,"y":3207.142822265625,"wires":[["66441bd0.07d874"],["ba9de38f.f6902"],["6ee30748.72d7e8"],["86c6ff7.966ee"],[],[]]},{"id":"8a443d93.a6b84","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive WLDStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1359.9999771118164,"y":3454.285655975342,"wires":[["29779ed3.166c42"],["2843e84e.01ab58"],["67723e81.733db"],["e984118a.5c7ee"],[],[]]},{"id":"4365ad85.2befb4","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive TDSStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nglobal.set('sAASi1',app_mqtt_monitor.fields[0].STATUS.toString());\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sAASi2',app_mqtt_monitor.fields[1].STATUS.toString());\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nglobal.set('sAASi3',app_mqtt_monitor.fields[2].STATUS.toString());\nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nglobal.set('sAASi4',app_mqtt_monitor.fields[3].STATUS.toString());\nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":3008.571533203125,"y":2942.857177734375,"wires":[["795d248.7e9dcdc"],["4ae7b0f3.7a657"],["8d761db2.ebc12"],["d03c380d.451818"],[],[]]},{"id":"68efac34.8c8164","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive GEVStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\n\nvar Req_Monitor=0;\n\n\nglobal.set('sGEVSi',app_mqtt_monitor.fields[0].STATUS.toString());\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,Req_Monitor, null];","outputs":3,"noerr":0,"x":3010,"y":3251.4287109375,"wires":[["f65e0e2e.bd8db","78598eeb.619f6"],[],[]]},{"id":"4a60ff97.575cb","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive WEVStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\n\nvar Req_Monitor=0;\n\n\nglobal.set('sWEVSi',app_mqtt_monitor.fields[0].STATUS.toString());\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,Req_Monitor, null];","outputs":3,"noerr":0,"x":3010,"y":3472.857177734375,"wires":[["3b9c00f7.cb6df","dcac074.19005f8"],[],[]]},{"id":"81afc4a9.5a90e8","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive FDStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1353.3333587646484,"y":4345.2378187179565,"wires":[["16f6f98b.1792b6"],["353f1e36.964bc2"],["db72f33f.3a928"],["bf47e970.f22158"],[],[]]},{"id":"2c88c66.742573a","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive EAStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\nvar APPS3;\nvar APPS4;\nvar Req_Monitor=0;\n\n\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[2].ACTIVE==1)\n    APPS3={payload:app_mqtt_monitor.fields[2].STATUS.toString()};\nelse\n   APPS3={payload:\"-1\"};\n   \nif (app_mqtt_monitor.fields[3].ACTIVE==1)\n    APPS4={payload:app_mqtt_monitor.fields[3].STATUS.toString()};\nelse\n   APPS4={payload:\"-1\"};\n   \nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,APPS3,APPS4,Req_Monitor, null];","outputs":6,"noerr":0,"x":1347.619125366211,"y":4583.8093519210815,"wires":[["4993d00a.a6983"],["4094e2b7.9b731c"],["eb3d099b.02db28"],["4a792a4a.ed7b64"],[],[]]},{"id":"d38813c4.cb2b4","type":"function","z":"ff8a25f8.46f4a8","name":"F Monitor: Receive RDStatus","func":"var app_mqtt_monitor = msg.payload;\nvar APPS1;\nvar APPS2;\n\nvar Req_Monitor=0;\n\n\nglobal.set('sRDi1',app_mqtt_monitor.fields[0].STATUS.toString());\nif (app_mqtt_monitor.fields[0].ACTIVE==1)\n   APPS1={payload:app_mqtt_monitor.fields[0].STATUS.toString()};\nelse\n   APPS1={payload:\"-1\"};\n\nglobal.set('sRDi2',app_mqtt_monitor.fields[1].STATUS.toString());\nif (app_mqtt_monitor.fields[1].ACTIVE==1)\n    APPS2={payload:app_mqtt_monitor.fields[1].STATUS.toString()};\nelse\n   APPS2={payload:\"-1\"};\n   \n\nReq_Monitor={payload:1};\n\nreturn [APPS1,APPS2,Req_Monitor, null];","outputs":4,"noerr":0,"x":1336.190528869629,"y":4822.380984306335,"wires":[["a99de7c8.99abf8","9f5b91b6.a2c05"],["346fa80c.0da778","fb17b090.1f1e7"],[],[]]},{"id":"86baf87f.ce4c48","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1248.809574672154,"y":2452.8572420392716,"wires":[]},{"id":"9a51f8f9.2a7f68","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2969.9999999999995,"y":2378.5714285714284,"wires":[]},{"id":"cd37d960.fd1588","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1311.9047873360769,"y":4950.951999800545,"wires":[]},{"id":"9f6d62aa.48b15","type":"link in","z":"31c084fe.cf76cc","name":"Start_Title_RUi_SEi_Alarms","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":134.44438648223877,"y":236.1111078262329,"wires":[["6157d14e.a7fc1","15d9f25a.bf30ce"]]},{"id":"6157d14e.a7fc1","type":"function","z":"31c084fe.cf76cc","name":"F - SEi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  SECURITY - ALARMS RECEIVED\" };\nreturn msg1;","outputs":1,"noerr":0,"x":316.11102294921875,"y":238.88887786865234,"wires":[["291150e8.6542f"]]},{"id":"291150e8.6542f","type":"ui_template","z":"31c084fe.cf76cc","group":"ab4131ce.46a0d","name":"SEi - SECURITY","order":1,"width":"18","height":"1","format":"<p style=\"color:LightPink;font-size:19px;\">&nbsp;&nbsp;{{msg.payload}}</p>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":647.4999656677246,"y":234.80551433563232,"wires":[[]]},{"id":"15d9f25a.bf30ce","type":"function","z":"31c084fe.cf76cc","name":"F - SECURITY","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  DETAILS\" };\nreturn msg1;","outputs":1,"noerr":0,"x":338.8888244628906,"y":317.2221927642822,"wires":[["59865f89.69487"]]},{"id":"59865f89.69487","type":"ui_template","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","name":"SECURITY ALARMS","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":667.2023620605469,"y":315.6785430908203,"wires":[[]]},{"id":"70bca2aa.60f58c","type":"mqtt-json","z":"31c084fe.cf76cc","name":"SECURIY - MQTT Alarm  (From RUi)","topic":"RUi/AlarmSystem/Security/Alarm","property":"","qos":"2","broker":"34d858f3.7e5b98","x":396.6666564941406,"y":386.6666564941406,"wires":[["57ff6681.6a57a8"]]},{"id":"57ff6681.6a57a8","type":"mqtt out","z":"31c084fe.cf76cc","name":"SECURITY - MQTT Alarm  (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Security/Alarm","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":840,"y":380,"wires":[]},{"id":"31b742ce.22dfee","type":"mqtt-json","z":"31c084fe.cf76cc","name":"SECURITY - MQTT Alarm ","topic":"ETMP/RUi/AlarmSystem/Security/Alarm","property":"","qos":"2","broker":"cb7c4e4.778afb","x":358.3333206176758,"y":519.4444351196289,"wires":[["1d8e76d4.0f37b9","3c0d4512.e78d8a"]]},{"id":"1d8e76d4.0f37b9","type":"function","z":"31c084fe.cf76cc","name":"F  Receive Alarm: Security","func":"var Mqtt_Alarm = msg.payload;\n\nvar RU_ID=Mqtt_Alarm.RU_ID;\nRU_ID={payload:RU_ID};\n\nvar COMMAND=Mqtt_Alarm.COMMAND;\nCOMMAND={payload:COMMAND};\n\nvar TYPE=Mqtt_Alarm.TYPE;\nTYPE={payload:TYPE};\n\nvar DATE=Mqtt_Alarm.DATE;\nDATE={payload:DATE};\nvar TIME=Mqtt_Alarm.TIME;\nTIME={payload:TIME};\n\nvar IPDi=Mqtt_Alarm.IPDi;\nif (IPDi==1)\n    IPDi={payload:\"Active\"};\nelse\n    IPDi={payload:\"Inactive\"};\n\nvar IPDiZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.IPDiZones[i-1]==1)\n    {\n        IPDiZones=IPDiZones + i.toString();\n        if (i<4)\n           IPDiZones=IPDiZones + \", \";\n    }\n}\nIPDiZones={payload:IPDiZones};\n\nvar OWDi=Mqtt_Alarm.OWDi;\nif (OWDi==1)\n    OWDi={payload:\"Active\"};\nelse\n    OWDi={payload:\"Inactive\"};\n\nvar OWDiZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.OWDiZones[i-1]==1)\n    {\n        OWDiZones=OWDiZones + i.toString();\n        if (i<4)\n           OWDiZones=OWDiZones + \", \";\n    }\n}\nOWDiZones={payload:OWDiZones};\n\nvar ODDi=Mqtt_Alarm.ODDi;\nif (ODDi==1)\n    ODDi={payload:\"Active\"};\nelse\n    ODDi={payload:\"Inactive\"};\n\nvar ODDiZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.ODDiZones[i-1]==1)\n    {\n        ODDiZones=ODDiZones + i.toString();\n        if (i<4)\n           ODDiZones=ODDiZones + \", \";\n    }\n}\nODDiZones={payload:ODDiZones};\n\n\nreturn [DATE,TIME,TYPE,RU_ID,IPDi,IPDiZones,OWDi,OWDiZones,ODDi,ODDiZones,COMMAND];\n","outputs":11,"noerr":0,"x":754.7221908569336,"y":518.3333282470703,"wires":[["c0168eaa.5789b"],["4aeb5f07.4c857"],["346a0986.e35f06"],["3d9ec795.75a788"],["99c18772.fc1fb8"],["cf60c83d.d7e0e8"],["5d296466.182cac"],["2d09ac36.5d5494"],["1803b5d3.82f48a"],["c8b72968.588888"],["5696be6a.07ebd"]]},{"id":"3d9ec795.75a788","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":10,"width":"9","height":"1","name":"From RU: ","label":"<font color = black> From RU: </font>","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1238.8095741271973,"y":553.09521484375,"wires":[]},{"id":"346a0986.e35f06","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":8,"width":"9","height":"1","name":"Alarm Type: ","label":"<font color = black>Alarm Type: </font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1133.8095779418945,"y":519.3452129364014,"wires":[]},{"id":"c0168eaa.5789b","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":3,"width":"9","height":"1","name":"Date: ","label":"<font color = black>Date:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1121.3095703125,"y":453.09521293640137,"wires":[]},{"id":"4aeb5f07.4c857","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":5,"width":"9","height":"1","name":"Time: ","label":"<font color = black>Time:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1237.5595741271973,"y":479.34521293640137,"wires":[]},{"id":"99c18772.fc1fb8","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":13,"width":"9","height":"1","name":"Presence Detection: ","label":"Presence Detection: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1165.0595626831055,"y":601.8452053070068,"wires":[]},{"id":"cf60c83d.d7e0e8","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":15,"width":"9","height":"1","name":"Zones P: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1250.416763305664,"y":643.0951662063599,"wires":[]},{"id":"5d296466.182cac","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":18,"width":"9","height":"1","name":"Opened Windows:","label":"Opened Windows:","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1157.5595626831055,"y":681.8452053070068,"wires":[]},{"id":"2d09ac36.5d5494","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":20,"width":"9","height":"1","name":"Zones W: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1248.8095626831055,"y":721.8452053070068,"wires":[]},{"id":"1803b5d3.82f48a","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":23,"width":"9","height":"1","name":"Opened Doors:","label":"Opened Doors:","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1150.0595626831055,"y":761.8452053070068,"wires":[]},{"id":"c8b72968.588888","type":"ui_text","z":"31c084fe.cf76cc","group":"e77aab45.09edb8","order":25,"width":"9","height":"1","name":"Zones D: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1253.8095626831055,"y":796.8452053070068,"wires":[]},{"id":"5696be6a.07ebd","type":"debug","z":"31c084fe.cf76cc","name":"COMMAND","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":489.99999618530273,"y":792.2222557067871,"wires":[]},{"id":"3c0d4512.e78d8a","type":"debug","z":"31c084fe.cf76cc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":381.2698669433594,"y":586.0317630767822,"wires":[]},{"id":"2b85db18.9bd334","type":"link in","z":"31c084fe.cf76cc","name":"Start_Title_RUi_SAi_Alarms","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":139.99998092651367,"y":1084.9998397827148,"wires":[["f975cb9e.e38658","6c777739.c592c8"]]},{"id":"f975cb9e.e38658","type":"function","z":"31c084fe.cf76cc","name":"F - SAi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  SAFETY ALARM RECEIVED\" };\nreturn msg1;","outputs":1,"noerr":0,"x":323.33327865600586,"y":1086.111005783081,"wires":[["3b94a2ee.9766ee"]]},{"id":"3b94a2ee.9766ee","type":"ui_template","z":"31c084fe.cf76cc","group":"2493c5de.e6082a","name":"SAi - SAFETY","order":1,"width":"18","height":"1","format":"<p style=\"color:LightPink;font-size:19px;font-weight:bold;\">&nbsp;&nbsp;{{msg.payload}}</p>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":786.3888921737671,"y":1087.0276584625244,"wires":[[]]},{"id":"6c777739.c592c8","type":"function","z":"31c084fe.cf76cc","name":"F - SAFETY","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  Residential Unit - Safety Alarm Details\" };\nreturn msg1;","outputs":1,"noerr":0,"x":339.4444160461426,"y":1162.7776336669922,"wires":[["946c8c57.d91e9"]]},{"id":"946c8c57.d91e9","type":"ui_template","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","name":"SAFETY ALARMS","order":1,"width":"18","height":"1","format":"<p style=\"color:white;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":796.0912885665894,"y":1167.9006872177124,"wires":[[]]},{"id":"c327111e.5234d","type":"mqtt-json","z":"31c084fe.cf76cc","name":"SAFETY - MQTT Alarm  (From RUi)","topic":"RUi/AlarmSystem/Safety/Alarm","property":"","qos":"2","broker":"34d858f3.7e5b98","x":406.66664123535156,"y":1236.6667594909668,"wires":[["5a50f401.ee72bc"]]},{"id":"5a50f401.ee72bc","type":"mqtt out","z":"31c084fe.cf76cc","name":"SAFETY - MQTT Alarm  (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/Safety/Alarm","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":826.5277099609375,"y":1235.5556507110596,"wires":[]},{"id":"8207f0a.ce18a1","type":"mqtt-json","z":"31c084fe.cf76cc","name":"SAFETY - MQTT Alarm ","topic":"ETMP/RUi/AlarmSystem/Safety/Alarm","property":"","qos":"2","broker":"cb7c4e4.778afb","x":370,"y":1419.4446668624878,"wires":[["ad8c6e8c.14dab","2e654398.8d4c0c"]]},{"id":"ad8c6e8c.14dab","type":"debug","z":"31c084fe.cf76cc","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":356.6666793823242,"y":1485.0001316070557,"wires":[]},{"id":"2e654398.8d4c0c","type":"function","z":"31c084fe.cf76cc","name":"F  Receive Alarm: Safety","func":"var Mqtt_Alarm = msg.payload;\n\nvar RU_ID=Mqtt_Alarm.RU_ID;\nRU_ID={payload:RU_ID};\n\nvar COMMAND=Mqtt_Alarm.COMMAND;\nCOMMAND={payload:COMMAND};\n\nvar TYPE=Mqtt_Alarm.TYPE;\nTYPE={payload:TYPE};\n\nvar DATE=Mqtt_Alarm.DATE;\nDATE={payload:DATE};\nvar TIME=Mqtt_Alarm.TIME;\nTIME={payload:TIME};\n\nvar AlarmA=Mqtt_Alarm.A;\nif (AlarmA==1)\n    AlarmA={payload:\"Active\"};\nelse\n    AlarmA={payload:\"Inactive\"};\n\nvar ALAZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.AZones[i-1]==1)\n    {\n        ALAZones=ALAZones + i;\n        if (i<4)\n           ALAZones=ALAZones + \", \";\n    }\n}\nALAZones={payload:ALAZones};\n\nvar AlarmB=Mqtt_Alarm.B;\nif (AlarmB==1)\n    AlarmB={payload:\"Active\"};\nelse\n    AlarmB={payload:\"Inactive\"};\n\nvar ALBZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.BZones[i-1]==1)\n    {\n        ALBZones=ALBZones + i;\n        if (i<4)\n           ALBZones=ALBZones + \", \";\n    }\n}\nALBZones={payload:ALBZones};\n\nvar AlarmC=Mqtt_Alarm.C;\nif (AlarmC==1)\n    AlarmC={payload:\"Active\"};\nelse\n    AlarmC={payload:\"Inactive\"};\n\nvar ALCZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.CZones[i-1]==1)\n    {\n        ALCZones=ALCZones + i;\n        if (i<4)\n           ALCZones=ALCZones + \", \";\n    }\n}\nALCZones={payload:ALCZones};\n\nvar AlarmD=Mqtt_Alarm.D;\nif (AlarmD==1)\n    AlarmD={payload:\"Active\"};\nelse\n    AlarmD={payload:\"Inactive\"};\n\nvar ALDZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.DZones[i-1]==1)\n    {\n        ALDZones=ALDZones + i;\n        if (i<4)\n           ALDZones=ALDZones + \", \";\n    }\n}\nALDZones={payload:ALDZones};\n\n\nreturn [DATE,TIME,TYPE,RU_ID,AlarmA,ALAZones,AlarmB,ALBZones,AlarmD,ALCZones,AlarmC,ALDZones,COMMAND];\n","outputs":13,"noerr":0,"x":763.3333435058594,"y":1419.9999694824219,"wires":[["f67614f9.5d6488"],["854c4a52.51a9a8"],["68f58c76.de6664"],["c994a6fd.06aaa8"],["e290170.bd980e8"],["36d96d52.9005c2"],["2e1c287.30605d8"],["1d88b5ac.fe747a"],["528f4821.20c1c8"],["2d0e5da6.59de22"],["e53b33ad.29441"],["a5b388ee.84c608"],["b3712208.53cdd"]]},{"id":"c994a6fd.06aaa8","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":5,"width":"9","height":"1","name":"From RU: ","label":"<font color = black> From RU: </font>","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1262.8570919036865,"y":1439.7618732452393,"wires":[]},{"id":"68f58c76.de6664","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":4,"width":"9","height":"1","name":"Alarm Type: ","label":"<font color = black>Alarm Type: </font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1157.8570957183838,"y":1406.0118713378906,"wires":[]},{"id":"f67614f9.5d6488","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":2,"width":"9","height":"1","name":"Date: ","label":"<font color = black>Date:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1145.3570880889893,"y":1339.7618713378906,"wires":[]},{"id":"854c4a52.51a9a8","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":3,"width":"9","height":"1","name":"Time: ","label":"<font color = black>Time:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1261.6070919036865,"y":1366.0118713378906,"wires":[]},{"id":"e290170.bd980e8","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":7,"width":"9","height":"1","name":"Smoke Detection: ","label":"Smoke Detection: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1179.1070804595947,"y":1488.511863708496,"wires":[]},{"id":"36d96d52.9005c2","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":8,"width":"9","height":"1","name":"Zones S: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1271.6070804595947,"y":1529.761863708496,"wires":[]},{"id":"2e1c287.30605d8","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":9,"width":"9","height":"1","name":"Fire Detection:","label":"Fire Detection:","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1171.6070804595947,"y":1568.511863708496,"wires":[]},{"id":"1d88b5ac.fe747a","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":10,"width":"9","height":"1","name":"Zones F: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1272.8570804595947,"y":1608.511863708496,"wires":[]},{"id":"528f4821.20c1c8","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":11,"width":"9","height":"1","name":"Gas Leakage:","label":"Gas Leakage:","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1174.1070804595947,"y":1648.511863708496,"wires":[]},{"id":"2d0e5da6.59de22","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":12,"width":"9","height":"1","name":"Zones G: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1277.8570804595947,"y":1683.511863708496,"wires":[]},{"id":"e53b33ad.29441","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":13,"width":"9","height":"1","name":"Water Leakage:","label":"Water Leakage:","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1176.1903438568115,"y":1736.4284992218018,"wires":[]},{"id":"a5b388ee.84c608","type":"ui_text","z":"31c084fe.cf76cc","group":"eb3f67d1.16f498","order":14,"width":"9","height":"1","name":"Zones WT: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1289.9403438568115,"y":1771.4284992218018,"wires":[]},{"id":"b3712208.53cdd","type":"debug","z":"31c084fe.cf76cc","name":"COMMAND","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":662.857177734375,"y":1594.2857666015625,"wires":[]},{"id":"7d0001b9.cda07","type":"link in","z":"31c084fe.cf76cc","name":"Start_Title_RUi_HASi_Alarms","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":166.00001525878906,"y":1900.0000400543213,"wires":[["c7c75196.7ad44","7815de0a.53d17"]]},{"id":"c7c75196.7ad44","type":"function","z":"31c084fe.cf76cc","name":"F - HAS","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  HEALTH AND AGING ALARM RECEIVED\" };\nreturn msg1;","outputs":1,"noerr":0,"x":359.33331298828125,"y":1901.1112060546875,"wires":[["2cbc402a.24d11"]]},{"id":"2cbc402a.24d11","type":"ui_template","z":"31c084fe.cf76cc","group":"57385452.40f6cc","name":"HASi - HEALTH AND AGING","order":1,"width":"18","height":"1","format":"<p style=\"color:LightPink;font-size:19px;font-weight:bold;\">&nbsp;&nbsp;{{msg.payload}}</p>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":852.3889265060425,"y":1902.0278587341309,"wires":[[]]},{"id":"7815de0a.53d17","type":"function","z":"31c084fe.cf76cc","name":"F - HEALTH AND AGING","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  DETAILS\" };\nreturn msg1;","outputs":1,"noerr":0,"x":405.44445037841797,"y":1977.7778339385986,"wires":[["1f4d2ba0.ae41a4"]]},{"id":"1f4d2ba0.ae41a4","type":"ui_template","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","name":"HEALTH AND AGING ALARMS","order":1,"width":"18","height":"1","format":"<p style=\"color:white;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":862.0913228988647,"y":1982.9008874893188,"wires":[[]]},{"id":"9bd3effe.3219c","type":"mqtt-json","z":"31c084fe.cf76cc","name":"HEALTH AND AGING - MQTT Alarm  (From RUi)","topic":"RUi/AlarmSystem/HealthAging/Alarm","property":"","qos":"2","broker":"34d858f3.7e5b98","x":472.66667556762695,"y":2051.6669597625732,"wires":[["af758fc0.9057e"]]},{"id":"af758fc0.9057e","type":"mqtt out","z":"31c084fe.cf76cc","name":"HEALTH AND AGING - MQTT Alarm (From RUi to ETMP)","topic":"ETMP/RUi/AlarmSystem/HealthAging/Alarm","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":940.8135070800781,"y":2045.4130859375,"wires":[]},{"id":"f5bba08.7196e6","type":"mqtt-json","z":"31c084fe.cf76cc","name":"HEALTH AND AGING - MQTT Alarm","topic":"ETMP/RUi/AlarmSystem/HealthAging/Alarm","property":"","qos":"2","broker":"cb7c4e4.778afb","x":430.57142639160156,"y":2323.7143154144287,"wires":[["40e259a0.eaed98","30b3eba3.0b4e34"]]},{"id":"40e259a0.eaed98","type":"debug","z":"31c084fe.cf76cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":560,"y":2540,"wires":[]},{"id":"30b3eba3.0b4e34","type":"function","z":"31c084fe.cf76cc","name":"F  Receive Alarm: Health and Aging","func":"var Mqtt_Alarm = msg.payload;\n\nvar RU_ID=Mqtt_Alarm.RU_ID;\nRU_ID={payload:RU_ID};\n\nvar COMMAND=Mqtt_Alarm.COMMAND;\nCOMMAND={payload:COMMAND};\n\nvar TYPE=Mqtt_Alarm.TYPE;\nTYPE={payload:TYPE};\n\nvar DATE=Mqtt_Alarm.DATE;\nDATE={payload:DATE};\nvar TIME=Mqtt_Alarm.TIME;\nTIME={payload:TIME};\n\nvar AlarmA=Mqtt_Alarm.A;\nif (AlarmA==1)\n    AlarmA={payload:\"Active\"};\nelse\n    AlarmA={payload:\"Inactive\"};\n\nvar ALAZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.AZones[i-1]==1)\n    {\n        ALAZones=ALAZones + i;\n        if (i<4)\n           ALAZones=ALAZones + \", \";\n    }\n}\nALAZones={payload:ALAZones};\n\n\nvar AlarmB=Mqtt_Alarm.B;\nif (AlarmB==1)\n    AlarmB={payload:\"Active\"};\nelse\n    AlarmB={payload:\"Inactive\"};\n\nvar ALBZones=\"\";\nfor(i=1;i<=4;i++)\n{\n    if (Mqtt_Alarm.BZones[i-1]==1)\n    {\n        ALBZones=ALBZones + i;\n        if (i<4)\n           ALBZones=ALBZones + \", \";\n    }\n}\nALBZones={payload:ALBZones};\n\n\nvar AlarmC=Mqtt_Alarm.C;\nvar HVA11=\"OK\";\nvar HVA12=\"OK\";\nvar HVA21=\"OK\";\nvar HVA22=\"OK\";\n\nif (AlarmC==1)\n{\n    AlarmC={payload:\"Active\"};\n    \n    if (Mqtt_Alarm.CZones[0]==\"1\")\n        HVA11=\"NOK\";\n    else\n        HAVA11=\"OK\";\n    HVA11={payload:HVA11};\n       \n    if (Mqtt_Alarm.CZones[1]==\"1\")\n        HVA12=\"NOK\";\n    else\n        HVA12=\"OK\";\n    HVA12={payload:HVA12};\n        \n    if (Mqtt_Alarm.CZones[2]==\"1\")\n        HVA21=\"NOK\";\n    else\n        HVA21=\"OK\";\n    HVA21={payload:HVA21};\n    \n    if (Mqtt_Alarm.CZones[3]==\"1\")\n        HVA22=\"NOK\";\n    else\n        HVA22=\"OK\";\n    HVA22={payload:HVA22};  \n}\nelse\n    AlarmC={payload:\"Inactive\"};\nreturn [DATE,TIME,TYPE,RU_ID,AlarmA,ALAZones,AlarmB,ALBZones,AlarmC,HVA11,HVA12,HVA21,HVA22,COMMAND];\n\n\n","outputs":14,"noerr":0,"x":858.5714416503906,"y":2324.5713539123535,"wires":[["371fe7ec.f4f688"],["cf0ee377.c94dc"],["c20132b6.2256c"],["bf112f93.9f38f"],["c57ae88c.fc4908"],["f0126e76.6cacf"],["63fab437.2d5ddc"],["b2d80b99.990fa8"],["dcafc07.e37494"],["ba333a37.9cb0e8","d00bf0b3.5c0cd"],["aafc1a67.0fdf18"],["93a33f26.97aa5"],["d3bcab84.1f29f8"],["b1d4a2d6.c6e0c"]]},{"id":"bf112f93.9f38f","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":5,"width":"9","height":"1","name":"From RU: ","label":"<font color = black> From RU: </font>","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1303.2381534576416,"y":2375.190493583679,"wires":[]},{"id":"c20132b6.2256c","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":4,"width":"9","height":"1","name":"Alarm Type: ","label":"<font color = black>Alarm Type: </font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1306.809425354004,"y":2338.5835609436035,"wires":[]},{"id":"371fe7ec.f4f688","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":2,"width":"9","height":"1","name":"Date: ","label":"<font color = black>Date:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1290.0236930847168,"y":2260.9049215316772,"wires":[]},{"id":"cf0ee377.c94dc","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":3,"width":"9","height":"1","name":"Time: ","label":"<font color = black>Time:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1290.5595474243164,"y":2298.583212852478,"wires":[]},{"id":"c57ae88c.fc4908","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":6,"width":"9","height":"1","name":"Fall Detection: ","label":"Fall Detection: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1320.9165687561035,"y":2416.7974967956543,"wires":[]},{"id":"f0126e76.6cacf","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":7,"width":"9","height":"1","name":"Zones P: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1304.845157623291,"y":2453.762095451355,"wires":[]},{"id":"63fab437.2d5ddc","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":8,"width":"9","height":"1","name":"Emergency Detection:","label":"Emergency Detection:","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1346.2737369537354,"y":2492.511894226074,"wires":[]},{"id":"b2d80b99.990fa8","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":9,"width":"9","height":"1","name":"Zones W: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1310.3808364868164,"y":2531.0832090377808,"wires":[]},{"id":"b1d4a2d6.c6e0c","type":"debug","z":"31c084fe.cf76cc","name":"COMMAND","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":808.9523544311523,"y":2465.428665161133,"wires":[]},{"id":"10c36275.8b064e","type":"link in","z":"35c302a8.60132e","name":"Start_Title_RUi_SMi","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":310,"y":206.66665649414062,"wires":[["d6afd536.411fe8","87af32d8.65bd2","16a2e43e.0ac9bc","d1c7fcd4.55362","4227f9fc.a9fee8","e8e67be1.f54a98"]]},{"id":"d6afd536.411fe8","type":"function","z":"35c302a8.60132e","name":"F - SMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  SMi - SMART METERING (RU \"+ ResIDSel +\")\" };\nreturn msg1;","outputs":1,"noerr":0,"x":482.8929271697998,"y":111.98788261413574,"wires":[["fbee2e9f.5af3a"]]},{"id":"fbee2e9f.5af3a","type":"ui_template","z":"35c302a8.60132e","group":"56df0979.e591c8","name":"SMi - SMART METERING","order":1,"width":"18","height":"1","format":"<p style=\"color:lightgreen;font-size:19px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":695.1747035980225,"y":108.77700901031494,"wires":[[]]},{"id":"87af32d8.65bd2","type":"function","z":"35c302a8.60132e","name":"F - ESMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  ESMi - Electricity Smart Metering  \" };\nreturn msg1;","outputs":1,"noerr":0,"x":481.48816299438477,"y":160.71427631378174,"wires":[["15f305d6.6b9f3a"]]},{"id":"15f305d6.6b9f3a","type":"ui_template","z":"35c302a8.60132e","group":"56df0979.e591c8","name":"ESMi - Electricity Smart Metering","order":2,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":721.3096008300781,"y":157.67834568023682,"wires":[[]]},{"id":"16a2e43e.0ac9bc","type":"function","z":"35c302a8.60132e","name":"F - GSMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  GSMi - Gas Smart Metering  \" };\nreturn msg1;","outputs":1,"noerr":0,"x":468.33333587646484,"y":526.1901168823242,"wires":[["9a31807.cef378"]]},{"id":"9a31807.cef378","type":"ui_template","z":"35c302a8.60132e","group":"29bcf7e0.93caf8","name":"GSMi - Gas Smart Metering","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":683.8690490722656,"y":524.5829658508301,"wires":[[]]},{"id":"d1c7fcd4.55362","type":"function","z":"35c302a8.60132e","name":"F - WSMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  WSMi - Water Smart Metering  \" };\nreturn msg1;","outputs":1,"noerr":0,"x":446.3095397949219,"y":992.0240173339844,"wires":[["c440692d.1282e8"]]},{"id":"c440692d.1282e8","type":"ui_template","z":"35c302a8.60132e","group":"46789fb7.5e156","name":"WSMi - Water Smart Metering","order":1,"width":"18","height":"1","format":"<p style=\"color:black;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":696.2500343322754,"y":994.5833978652954,"wires":[[]]},{"id":"c3aab0e.afd335","type":"function","z":"35c302a8.60132e","name":"F Generate Smart Metering Bar Graph (Last N Readings)","func":"var SmartMeteringBarGraph = {\n    \"series\":[\"RU30\"],\n    \"data\":[[5,3,6,8,9, 10, 15, 20]],\n    \"labels\":[\"10:00\",\"10:15\",\"10:30\", \"10:45\", \"11:00\", \"11:15\", \"11:30\", \"11:45\"]\n};\n\nreturn {payload:[SmartMeteringBarGraph]};\n","outputs":1,"noerr":0,"x":589.6190185546875,"y":1715.6190099716187,"wires":[["557c5547.d5b4ac"]]},{"id":"dbc3c320.5161b","type":"ui_chart","z":"35c302a8.60132e","name":"","group":"56df0979.e591c8","order":3,"width":"18","height":"5","label":"Main - Electricity Smart Metering","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2249.7621459960938,"y":476.1904811859131,"wires":[[]]},{"id":"557c5547.d5b4ac","type":"debug","z":"35c302a8.60132e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":926.7619934082031,"y":1717.761911392212,"wires":[]},{"id":"cda28081.f2437","type":"ui_button","z":"35c302a8.60132e","name":"EMRR - Request","group":"56df0979.e591c8","order":5,"width":"4","height":"1","passthru":false,"label":"EMRR - Request","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":547.1428833007812,"y":364.2857246398926,"wires":[["4227f9fc.a9fee8"]]},{"id":"4227f9fc.a9fee8","type":"function","z":"35c302a8.60132e","name":"F Command: Request Electricity Reading","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_Electricity_Readings\";\nMqtt_Command_RWBStatus.PERIODICITY = 15;\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":878.5714721679688,"y":362.8571262359619,"wires":[["b5e6e592.361b68","919afe07.fc98f"]]},{"id":"b5e6e592.361b68","type":"mqtt out","z":"35c302a8.60132e","name":"EMRR - MQTT Command to ETMP","topic":"ETMP/RUi/SmartMetering/Electricity/RemoteRequest","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1252.857177734375,"y":360.00000953674316,"wires":[]},{"id":"7876bb38.a25244","type":"mqtt out","z":"35c302a8.60132e","name":"EMRR - MQTT Command To RUi","topic":"RUi/SmartMetering/Electricity/RemoteRequest","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":1602.857177734375,"y":422.8571472167969,"wires":[]},{"id":"f5efd42a.d9a288","type":"mqtt-json","z":"35c302a8.60132e","name":"EMRR - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartMetering/Electricity/RemoteRequest","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1262.857177734375,"y":422.8571472167969,"wires":[["7876bb38.a25244"]]},{"id":"1f5b5b7b.d55ac5","type":"mqtt-json","z":"35c302a8.60132e","name":"EMRD - MQTT Readings (From RUi)","topic":"RUi/SmartMetering/Electricity/RemoteReadings","property":"","qos":"2","broker":"34d858f3.7e5b98","x":1242.857177734375,"y":475.71429443359375,"wires":[["4725359.c9532cc"]]},{"id":"4725359.c9532cc","type":"mqtt out","z":"35c302a8.60132e","name":"EMRD - MQTT Readings (From RUi to ETMP)","topic":"ETMP/RUi/SmartMetering/Electricity/RemoteReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1631.4285888671875,"y":477.1428527832031,"wires":[]},{"id":"2c32a483.2a385c","type":"mqtt-json","z":"35c302a8.60132e","name":"EMRD - MQTT Readings","topic":"ETMP/RUi/SmartMetering/Electricity/RemoteReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1944.2858657836914,"y":478.5714044570923,"wires":[["dbc3c320.5161b","992e9586.cccba8"]]},{"id":"992e9586.cccba8","type":"debug","z":"35c302a8.60132e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2178.571617126465,"y":432.8571274280548,"wires":[]},{"id":"919afe07.fc98f","type":"debug","z":"35c302a8.60132e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1005.7143440246582,"y":319.9999771118164,"wires":[]},{"id":"a46c60e6.3ddea","type":"ui_button","z":"35c302a8.60132e","name":"GMRR - Request","group":"29bcf7e0.93caf8","order":4,"width":"4","height":"1","passthru":false,"label":"GMRR - Request","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":551.4286575317383,"y":719.9999713897705,"wires":[["e8e67be1.f54a98"]]},{"id":"17174307.550ecd","type":"ui_chart","z":"35c302a8.60132e","name":"","group":"29bcf7e0.93caf8","order":2,"width":"18","height":"5","label":"Main - Gas Smart Metering","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2232.8570709228516,"y":834.2856826782227,"wires":[[]]},{"id":"e8e67be1.f54a98","type":"function","z":"35c302a8.60132e","name":"F Command: Request Gas Reading","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_Gas_Readings\";\nMqtt_Command_RWBStatus.PERIODICITY = 15;\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":868.5714721679688,"y":718.5714111328125,"wires":[["57a856fc.cdc018"]]},{"id":"57a856fc.cdc018","type":"mqtt out","z":"35c302a8.60132e","name":"GMRR - MQTT Command to ETMP","topic":"ETMP/RUi/SmartMetering/Gas/RemoteRequest","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1248.5714111328125,"y":717.1428833007812,"wires":[]},{"id":"677723be.73a6ac","type":"mqtt out","z":"35c302a8.60132e","name":"GMRR - MQTT Command To RUi","topic":"RUi/SmartMetering/Gas/RemoteRequest","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":1598.5714111328125,"y":780.000020980835,"wires":[]},{"id":"8e914e45.b69ae","type":"mqtt-json","z":"35c302a8.60132e","name":"GMRR - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartMetering/Gas/RemoteRequest","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1258.5714111328125,"y":780.000020980835,"wires":[["677723be.73a6ac"]]},{"id":"5834ac7.48b1554","type":"mqtt-json","z":"35c302a8.60132e","name":"GMRD - MQTT Readings (From RUi)","topic":"RUi/SmartMetering/Gas/RemoteReadings","property":"","qos":"2","broker":"34d858f3.7e5b98","x":1238.5714111328125,"y":832.8571681976318,"wires":[["43e1b5fc.980f8c"]]},{"id":"43e1b5fc.980f8c","type":"mqtt out","z":"35c302a8.60132e","name":"GMRD - MQTT Readings (From RUi to ETMP)","topic":"ETMP/RUi/SmartMetering/Gas/RemoteReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1637.142822265625,"y":834.2857265472412,"wires":[]},{"id":"54eade3f.b43bf","type":"mqtt-json","z":"35c302a8.60132e","name":"GMRD - MQTT Readings","topic":"ETMP/RUi/SmartMetering/Gas/RemoteReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1940.000099182129,"y":835.7142782211304,"wires":[["17174307.550ecd","13aa055f.16f8cb"]]},{"id":"13aa055f.16f8cb","type":"debug","z":"35c302a8.60132e","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2184.28572845459,"y":789.9999523162842,"wires":[]},{"id":"e3e086c3.04e028","type":"ui_button","z":"35c302a8.60132e","name":"WMRR - Request","group":"46789fb7.5e156","order":4,"width":"4","height":"1","passthru":false,"label":"WMRR - Request","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":538.5714111328125,"y":1178.5714111328125,"wires":[["df846783.8de638"]]},{"id":"df846783.8de638","type":"function","z":"35c302a8.60132e","name":"F Command: Request Water Reading","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_Water_Readings\";\nMqtt_Command_RWBStatus.PERIODICITY = 15;\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":862,"y":1178,"wires":[["5fd4dc26.a92384"]]},{"id":"5fd4dc26.a92384","type":"mqtt out","z":"35c302a8.60132e","name":"WMRR - MQTT Command to ETMP","topic":"ETMP/RUi/SmartMetering/Water/RemoteRequest","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1241.9999389648438,"y":1176.5714721679688,"wires":[]},{"id":"c38ac55e.99a2c8","type":"mqtt out","z":"35c302a8.60132e","name":"WMRR - MQTT Command To RUi","topic":"RUi/SmartMetering/Water/RemoteRequest","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":1581.9999389648438,"y":1239.4286098480225,"wires":[]},{"id":"54fac18d.5022a","type":"mqtt-json","z":"35c302a8.60132e","name":"WMRR - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/SmartMetering/Water/RemoteRequest","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1241.9999389648438,"y":1239.4286098480225,"wires":[["c38ac55e.99a2c8"]]},{"id":"44512310.93f33c","type":"mqtt-json","z":"35c302a8.60132e","name":"WMRD - MQTT Readings (From RUi)","topic":"RUi/SmartMetering/Water/RemoteReadings","property":"","qos":"2","broker":"34d858f3.7e5b98","x":1221.9999389648438,"y":1292.2857570648193,"wires":[["a890bd98.79b15"]]},{"id":"a890bd98.79b15","type":"mqtt out","z":"35c302a8.60132e","name":"WMRD - MQTT Readings (From RUi to ETMP)","topic":"ETMP/RUi/SmartMetering/Water/RemoteReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1620.5713500976562,"y":1293.7143154144287,"wires":[]},{"id":"f21d860c.0bb838","type":"ui_chart","z":"35c302a8.60132e","name":"","group":"46789fb7.5e156","order":2,"width":"18","height":"5","label":"Main - Water Smart Metering","chartType":"bar","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2216,"y":1292,"wires":[[]]},{"id":"9c312bc6.f2a418","type":"mqtt-json","z":"35c302a8.60132e","name":"WMRD - MQTT Readings","topic":"ETMP/RUi/SmartMetering/Water/RemoteReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1923.1430282592773,"y":1293.4285955429077,"wires":[["f21d860c.0bb838","af22fa57.3a1d98"]]},{"id":"af22fa57.3a1d98","type":"debug","z":"35c302a8.60132e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2167.4286575317383,"y":1247.7142696380615,"wires":[]},{"id":"f40233e7.e5f98","type":"link in","z":"31c084fe.cf76cc","name":"Start_Title_RUi_SMi_Alarms","links":["560f810d.90017","13bfca27.d090e6","48ff0d1.af2e1f4"],"x":141.99999237060547,"y":2872.0000381469727,"wires":[["2f5d72e2.53db4e","88eb952b.753858","e4129a23.69eab8","ac1b750e.b99748","d166511d.ff27c","35f33a8a.ad1756"]]},{"id":"2f5d72e2.53db4e","type":"function","z":"31c084fe.cf76cc","name":"F - ESMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  ELECTRICITY SMART METER ALARM RECEIVED\" };\nreturn msg1;","outputs":1,"noerr":0,"x":335.33329010009766,"y":2873.111204147339,"wires":[["6bfdf051.fc805"]]},{"id":"6bfdf051.fc805","type":"ui_template","z":"31c084fe.cf76cc","group":"fb87b2f.266f55","name":"ESMii - ELECTRICITY SMART METERING","order":1,"width":"18","height":"1","format":"<p style=\"color:LightPink;font-size:19px;font-weight:bold;\">&nbsp;&nbsp;{{msg.payload}}</p>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":868.3889036178589,"y":2874.027856826782,"wires":[[]]},{"id":"88eb952b.753858","type":"function","z":"31c084fe.cf76cc","name":"F - ELECT SMART METERING","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  DETAILS\" };\nreturn msg1;","outputs":1,"noerr":0,"x":401.4444274902344,"y":2949.77783203125,"wires":[["405ba25.206e25c"]]},{"id":"405ba25.206e25c","type":"ui_template","z":"31c084fe.cf76cc","group":"5af2022e.21a35c","name":"ELECTRICITY SMART METERING ALARMS","order":1,"width":"18","height":"1","format":"<p style=\"color:white;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":878.0913000106812,"y":2954.90088558197,"wires":[[]]},{"id":"ed9ad804.e47148","type":"mqtt-json","z":"31c084fe.cf76cc","name":"ESMAi - MQTT Alarm  (From RUi)","topic":"RUi/SmartMetering/Electricity/RemoteAlarm","property":"","qos":"2","broker":"34d858f3.7e5b98","x":398.66665267944336,"y":3023.6669578552246,"wires":[["f7e1274d.eb4e88"]]},{"id":"f7e1274d.eb4e88","type":"mqtt out","z":"31c084fe.cf76cc","name":"ESMAi - MQTT Alarm Alarm (From RUi to ETMP)","topic":"ETMP/RUi/SmartMetering/Electricity/RemoteAlarm","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":883.9563674926758,"y":3023.127040863037,"wires":[]},{"id":"694eb31.ab1724c","type":"mqtt-json","z":"31c084fe.cf76cc","name":"ESMAi - MQTT Alarm","topic":"ETMP/RUi/SmartMetering/Electricity/RemoteAlarm","property":"","qos":"2","broker":"cb7c4e4.778afb","x":365.71429443359375,"y":3121.4287109375,"wires":[["b458d9dd.f74348"]]},{"id":"b458d9dd.f74348","type":"function","z":"31c084fe.cf76cc","name":"F  Receive Alarm: ESMAi","func":"var Mqtt_Alarm = msg.payload;\n\nvar RU_ID=Mqtt_Alarm.RU_ID;\nRU_ID={payload:RU_ID};\n\nvar COMMAND=Mqtt_Alarm.COMMAND;\nCOMMAND={payload:COMMAND};\n\nvar TYPE=Mqtt_Alarm.TYPE;\nTYPE={payload:TYPE};\n\nvar DATE=Mqtt_Alarm.DATE;\nDATE={payload:DATE};\nvar TIME=Mqtt_Alarm.TIME;\nTIME={payload:TIME};\n\nvar AlarmA=Mqtt_Alarm.A;\nif (AlarmA==1)\n    AlarmA={payload:\"Active\"};\nelse\n    AlarmA={payload:\"Inactive\"};\n\nvar ALAZones=Mqtt_Alarm.AZones[0];\nALAZones={payload:ALAZones};\n\nreturn [DATE,TIME,TYPE,RU_ID,AlarmA,ALAZones,COMMAND];\n","outputs":7,"noerr":0,"x":803.7142944335938,"y":3119.4287109375,"wires":[["fa4de963.c03348"],["30a55a8f.f34a16"],["32a3a920.1ba606"],["3420b62.d21b34a"],["e718efb0.8e437"],["773a509e.4f525"],[]]},{"id":"3420b62.d21b34a","type":"ui_text","z":"31c084fe.cf76cc","group":"5af2022e.21a35c","order":10,"width":"9","height":"1","name":"From RU: ","label":"<font color = black> From RU: </font>","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1292.857177734375,"y":3182.857177734375,"wires":[]},{"id":"32a3a920.1ba606","type":"ui_text","z":"31c084fe.cf76cc","group":"5af2022e.21a35c","order":8,"width":"9","height":"1","name":"Alarm Type: ","label":"<font color = black>Alarm Type: </font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1187.8571815490723,"y":3149.1071758270264,"wires":[]},{"id":"fa4de963.c03348","type":"ui_text","z":"31c084fe.cf76cc","group":"5af2022e.21a35c","order":3,"width":"9","height":"1","name":"Date: ","label":"<font color = black>Date:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1175.3571739196777,"y":3082.8571758270264,"wires":[]},{"id":"30a55a8f.f34a16","type":"ui_text","z":"31c084fe.cf76cc","group":"5af2022e.21a35c","order":5,"width":"9","height":"1","name":"Time: ","label":"<font color = black>Time:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1291.607177734375,"y":3109.1071758270264,"wires":[]},{"id":"e718efb0.8e437","type":"ui_text","z":"31c084fe.cf76cc","group":"5af2022e.21a35c","order":13,"width":"9","height":"1","name":"Alarm Detection: ","label":"Alarm Detection: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1209.1071662902832,"y":3231.607168197632,"wires":[]},{"id":"773a509e.4f525","type":"ui_text","z":"31c084fe.cf76cc","group":"5af2022e.21a35c","order":15,"width":"9","height":"1","name":"Zones P: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1301.6071662902832,"y":3272.857168197632,"wires":[]},{"id":"e4129a23.69eab8","type":"function","z":"31c084fe.cf76cc","name":"F - GSMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  GAS SMART METER ALARM RECEIVED\" };\nreturn msg1;","outputs":1,"noerr":0,"x":347.6190185546875,"y":3411.111166000366,"wires":[["a044c0ef.67547"]]},{"id":"a044c0ef.67547","type":"ui_template","z":"31c084fe.cf76cc","group":"c0c4e8ff.25b618","name":"GSMii - GAS SMART METERING","order":1,"width":"18","height":"1","format":"<p style=\"color:LightPink;font-size:19px;font-weight:bold;\">&nbsp;&nbsp;{{msg.payload}}</p>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":860.6746320724487,"y":3412.0278186798096,"wires":[[]]},{"id":"ac1b750e.b99748","type":"function","z":"31c084fe.cf76cc","name":"F - GAS SMART METERING","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  DETAILS\" };\nreturn msg1;","outputs":1,"noerr":0,"x":403.7301559448242,"y":3487.7777938842773,"wires":[["c6464532.0becf8"]]},{"id":"c6464532.0becf8","type":"ui_template","z":"31c084fe.cf76cc","group":"4db71d1c.267e94","name":"GAS SMART METERING ALARMS","order":1,"width":"18","height":"1","format":"<p style=\"color:white;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":860.377028465271,"y":3492.9008474349976,"wires":[[]]},{"id":"946a0cca.cd4f8","type":"mqtt-json","z":"31c084fe.cf76cc","name":"GSMAi - MQTT Alarm  (From RUi)","topic":"RUi/SmartMetering/Gas/RemoteAlarm","property":"","qos":"2","broker":"34d858f3.7e5b98","x":410.9523811340332,"y":3561.666919708252,"wires":[["172ec707.1e5f69"]]},{"id":"172ec707.1e5f69","type":"mqtt out","z":"31c084fe.cf76cc","name":"GSMAi - MQTT Alarm Alarm (From RUi to ETMP)","topic":"ETMP/RUi/SmartMetering/Gas/RemoteAlarm","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":906.2420959472656,"y":3561.1270027160645,"wires":[]},{"id":"ee18910d.871f","type":"mqtt-json","z":"31c084fe.cf76cc","name":"GSMAi - MQTT Alarm","topic":"ETMP/RUi/SmartMetering/Gas/RemoteAlarm","property":"","qos":"2","broker":"cb7c4e4.778afb","x":378.0000228881836,"y":3659.4286727905273,"wires":[["550174fe.2bb44c"]]},{"id":"550174fe.2bb44c","type":"function","z":"31c084fe.cf76cc","name":"F  Receive Alarm: GSMAi","func":"var Mqtt_Alarm = msg.payload;\n\nvar RU_ID=Mqtt_Alarm.RU_ID;\nRU_ID={payload:RU_ID};\n\nvar COMMAND=Mqtt_Alarm.COMMAND;\nCOMMAND={payload:COMMAND};\n\nvar TYPE=Mqtt_Alarm.TYPE;\nTYPE={payload:TYPE};\n\nvar DATE=Mqtt_Alarm.DATE;\nDATE={payload:DATE};\nvar TIME=Mqtt_Alarm.TIME;\nTIME={payload:TIME};\n\nvar AlarmA=Mqtt_Alarm.A;\nif (AlarmA==1)\n    AlarmA={payload:\"Active\"};\nelse\n    AlarmA={payload:\"Inactive\"};\n\nvar ALAZones=Mqtt_Alarm.AZones[0];\nALAZones={payload:ALAZones};\n\nreturn [DATE,TIME,TYPE,RU_ID,AlarmA,ALAZones,COMMAND];\n","outputs":7,"noerr":0,"x":816.0000228881836,"y":3657.4286727905273,"wires":[["1d12d20a.7a963e"],["9b8bbf9e.75406"],["e3966fc2.accb4"],["e3819a49.c27e48"],["849cfd75.66f63"],["1b3a79c4.73f186"],[]]},{"id":"e3819a49.c27e48","type":"ui_text","z":"31c084fe.cf76cc","group":"4db71d1c.267e94","order":10,"width":"9","height":"1","name":"From RU: ","label":"<font color = black> From RU: </font>","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1305.1429061889648,"y":3720.8571395874023,"wires":[]},{"id":"e3966fc2.accb4","type":"ui_text","z":"31c084fe.cf76cc","group":"4db71d1c.267e94","order":8,"width":"9","height":"1","name":"Alarm Type: ","label":"<font color = black>Alarm Type: </font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1200.142910003662,"y":3687.1071376800537,"wires":[]},{"id":"1d12d20a.7a963e","type":"ui_text","z":"31c084fe.cf76cc","group":"4db71d1c.267e94","order":3,"width":"9","height":"1","name":"Date: ","label":"<font color = black>Date:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1187.6429023742676,"y":3620.8571376800537,"wires":[]},{"id":"9b8bbf9e.75406","type":"ui_text","z":"31c084fe.cf76cc","group":"4db71d1c.267e94","order":5,"width":"9","height":"1","name":"Time: ","label":"<font color = black>Time:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1303.8929061889648,"y":3647.1071376800537,"wires":[]},{"id":"849cfd75.66f63","type":"ui_text","z":"31c084fe.cf76cc","group":"4db71d1c.267e94","order":13,"width":"9","height":"1","name":"Alarm Detection: ","label":"Alarm Detection: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1221.392894744873,"y":3769.607130050659,"wires":[]},{"id":"1b3a79c4.73f186","type":"ui_text","z":"31c084fe.cf76cc","group":"4db71d1c.267e94","order":15,"width":"9","height":"1","name":"Zones P: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1313.892894744873,"y":3810.857130050659,"wires":[]},{"id":"d166511d.ff27c","type":"function","z":"31c084fe.cf76cc","name":"F - WSMi","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  WATER SMART METER ALARM RECEIVED\" };\nreturn msg1;","outputs":1,"noerr":0,"x":348.33331298828125,"y":3958.333251953125,"wires":[["57cb2efd.b608b"]]},{"id":"57cb2efd.b608b","type":"ui_template","z":"31c084fe.cf76cc","group":"13a5d08d.ed0a9f","name":"WSMii - WATER SMART METERING","order":1,"width":"18","height":"1","format":"<p style=\"color:LightPink;font-size:19px;font-weight:bold;\">&nbsp;&nbsp;{{msg.payload}}</p>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":871.3889265060425,"y":3959.2499046325684,"wires":[[]]},{"id":"35f33a8a.ad1756","type":"function","z":"31c084fe.cf76cc","name":"F - GAS SMART METERING","func":"var ResIDSel =global.get('ResIDSel');\nvar msg1 = {payload:\"  DETAILS\" };\nreturn msg1;","outputs":1,"noerr":0,"x":404.44445037841797,"y":4034.999879837036,"wires":[["5b276586.17bb6c"]]},{"id":"5b276586.17bb6c","type":"ui_template","z":"31c084fe.cf76cc","group":"540d12e5.7fb6ec","name":"WATER SMART METERING ALARMS","order":1,"width":"18","height":"1","format":"<p style=\"color:white;font-size:18px;\">&nbsp;&nbsp;{{msg.payload}}</p>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":871.0913228988647,"y":4040.1229333877563,"wires":[[]]},{"id":"64050557.728fac","type":"mqtt-json","z":"31c084fe.cf76cc","name":"WSMAi - MQTT Alarm  (From RUi)","topic":"RUi/SmartMetering/Water/RemoteAlarm","property":"","qos":"2","broker":"34d858f3.7e5b98","x":411.66667556762695,"y":4108.889005661011,"wires":[["c475e0d5.a476b"]]},{"id":"c475e0d5.a476b","type":"mqtt out","z":"31c084fe.cf76cc","name":"WSMAi - MQTT Alarm Alarm (From RUi to ETMP)","topic":"ETMP/RUi/SmartMetering/Water/RemoteAlarm","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":906.9563903808594,"y":4108.349088668823,"wires":[]},{"id":"2df56a35.424956","type":"mqtt-json","z":"31c084fe.cf76cc","name":"WSMAi - MQTT Alarm","topic":"ETMP/RUi/SmartMetering/Water/RemoteAlarm","property":"","qos":"2","broker":"cb7c4e4.778afb","x":378.71431732177734,"y":4206.650758743286,"wires":[["15c003c3.e7021c"]]},{"id":"15c003c3.e7021c","type":"function","z":"31c084fe.cf76cc","name":"F  Receive Alarm: WSMAi","func":"var Mqtt_Alarm = msg.payload;\n\nvar RU_ID=Mqtt_Alarm.RU_ID;\nRU_ID={payload:RU_ID};\n\nvar COMMAND=Mqtt_Alarm.COMMAND;\nCOMMAND={payload:COMMAND};\n\nvar TYPE=Mqtt_Alarm.TYPE;\nTYPE={payload:TYPE};\n\nvar DATE=Mqtt_Alarm.DATE;\nDATE={payload:DATE};\nvar TIME=Mqtt_Alarm.TIME;\nTIME={payload:TIME};\n\nvar AlarmA=Mqtt_Alarm.A;\nif (AlarmA==1)\n    AlarmA={payload:\"Active\"};\nelse\n    AlarmA={payload:\"Inactive\"};\n\nvar ALAZones=Mqtt_Alarm.AZones[0];\nALAZones={payload:ALAZones};\n\nreturn [DATE,TIME,TYPE,RU_ID,AlarmA,ALAZones,COMMAND];\n","outputs":7,"noerr":0,"x":816.7143173217773,"y":4204.650758743286,"wires":[["a1c0e350.4f741"],["704ae693.803948"],["a73e790c.5da178"],["dde2f4a7.52d1e8"],["45152f52.62eb8"],["fb4161.6f2efea"],[]]},{"id":"dde2f4a7.52d1e8","type":"ui_text","z":"31c084fe.cf76cc","group":"540d12e5.7fb6ec","order":10,"width":"9","height":"1","name":"From RU: ","label":"<font color = black> From RU: </font>","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1305.8572006225586,"y":4268.079225540161,"wires":[]},{"id":"a73e790c.5da178","type":"ui_text","z":"31c084fe.cf76cc","group":"540d12e5.7fb6ec","order":8,"width":"9","height":"1","name":"Alarm Type: ","label":"<font color = black>Alarm Type: </font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1200.8572044372559,"y":4234.3292236328125,"wires":[]},{"id":"a1c0e350.4f741","type":"ui_text","z":"31c084fe.cf76cc","group":"540d12e5.7fb6ec","order":3,"width":"9","height":"1","name":"Date: ","label":"<font color = black>Date:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1188.3571968078613,"y":4168.0792236328125,"wires":[]},{"id":"704ae693.803948","type":"ui_text","z":"31c084fe.cf76cc","group":"540d12e5.7fb6ec","order":5,"width":"9","height":"1","name":"Time: ","label":"<font color = black>Time:</font> ","format":"<font color = lightgreen>{{msg.payload}}</font>","layout":"row-spread","x":1304.6072006225586,"y":4194.3292236328125,"wires":[]},{"id":"45152f52.62eb8","type":"ui_text","z":"31c084fe.cf76cc","group":"540d12e5.7fb6ec","order":13,"width":"9","height":"1","name":"Alarm Detection: ","label":"Alarm Detection: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1222.1071891784668,"y":4316.829216003418,"wires":[]},{"id":"fb4161.6f2efea","type":"ui_text","z":"31c084fe.cf76cc","group":"540d12e5.7fb6ec","order":15,"width":"9","height":"1","name":"Zones P: ","label":"Active zones: ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1314.6071891784668,"y":4358.079216003418,"wires":[]},{"id":"dcafc07.e37494","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":11,"width":"9","height":"1","name":"Health Pattern Alarm:","label":"Health Danger Pattern Detection:","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1352.8569793701172,"y":2571.4284229278564,"wires":[]},{"id":"ba333a37.9cb0e8","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":14,"width":"4","height":"1","name":"HVP (1,1): ","label":"HVP (1,1): ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1317.142936706543,"y":2614.285669326782,"wires":[]},{"id":"aafc1a67.0fdf18","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":15,"width":"4","height":"1","name":"HVP (1,2): ","label":"HVP (1,2): ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1317.1428833007812,"y":2655.7143449783325,"wires":[]},{"id":"93a33f26.97aa5","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":16,"width":"4","height":"1","name":"HVP (2,1): ","label":"HVP (2,1): ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1318.5714378356934,"y":2705.714379310608,"wires":[]},{"id":"d3bcab84.1f29f8","type":"ui_text","z":"31c084fe.cf76cc","group":"f256a15a.2f7ee","order":17,"width":"4","height":"1","name":"HVP (2,2): ","label":"HVP (2,2): ","format":"<font color = saloman>{{msg.payload}}</font>","layout":"row-spread","x":1315.7142639160156,"y":2750.000126838684,"wires":[]},{"id":"d00bf0b3.5c0cd","type":"debug","z":"31c084fe.cf76cc","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":941.6666666666665,"y":2658.333333333333,"wires":[]},{"id":"b98af49a.398438","type":"ui_chart","z":"ff8a25f8.46f4a8","name":"Health Variable 1 - Inhabitant 1","group":"509e9477.20aa7c","order":3,"width":"9","height":"5","label":"Health Variable 1 - Inhabitant 1","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"step","nodata":"HV (1,1) No Values","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#98df8a","#d62728","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2281.786060333252,"y":3797.2623023986816,"wires":[[]]},{"id":"9e86f57c.af34e8","type":"ui_chart","z":"ff8a25f8.46f4a8","name":"Health Variable 2 - Inhabitant 1","group":"509e9477.20aa7c","order":4,"width":"9","height":"5","label":"Health Variable 2 - Inhabitant 1","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"step","nodata":"HV (1,2) No Values","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#fec700","#d62728","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2284.6431045532227,"y":3912.202693939209,"wires":[[]]},{"id":"55159655.e57a58","type":"ui_chart","z":"ff8a25f8.46f4a8","name":"","group":"509e9477.20aa7c","order":5,"width":"9","height":"5","label":"Health Variable 1 - Inhabitant 2","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"step","nodata":"HV (2,1) No Values","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#fffc40","#d62728","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2284.6431045532227,"y":4018.0359497070312,"wires":[[]]},{"id":"72e085cd.c2b98c","type":"ui_chart","z":"ff8a25f8.46f4a8","name":"","group":"509e9477.20aa7c","order":6,"width":"9","height":"5","label":"Health Variable 2 - Inhabitant 2","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"step","nodata":"HV (2,2) No Values","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#aec7e8","#d62728","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":2283.3931064605713,"y":4120.953186035156,"wires":[[]]},{"id":"45856751.e49308","type":"ui_button","z":"ff8a25f8.46f4a8","name":"HVVi - Request","group":"509e9477.20aa7c","order":8,"width":"4","height":"1","passthru":false,"label":"HVVi - Request","tooltip":"","color":"black","bgcolor":"lightgreen","icon":"","payload":"OK","payloadType":"str","topic":"","x":316.07142639160156,"y":3760.000105857849,"wires":[["7910bafd.9f7494","1acce9ab.0bee46","1616812a.1c979f","844852b7.d604c"]]},{"id":"7910bafd.9f7494","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request HVV11 Readings","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_HVV11_Readings\";\nMqtt_Command_RWBStatus.PERIODICITY = 60;\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":588.5713958740234,"y":3761.4280347824097,"wires":[["9cd3ed25.4800d"]]},{"id":"9cd3ed25.4800d","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV11R - MQTT Command to ETMP","topic":"ETMP/RUi/HealthAging/eHealth/HVV11/RequestReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":933.5714950561523,"y":3758.9282779693604,"wires":[]},{"id":"9f4c25c9.7089c8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV11R - MQTT Command To RUi","topic":"RUi/HealthAging/eHealth/HVV11/RequestReadings","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":1600.7141418457031,"y":3758.928346633911,"wires":[]},{"id":"93106a35.3634f8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV11R  - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/HealthAging/eHealth/HVV11/RequestReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1259.285545349121,"y":3758.9282779693604,"wires":[["9f4c25c9.7089c8"]]},{"id":"f03359c1.f670a8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV11S - MQTT Readings (From RUi)","topic":"RUi/HealthAging/eHealth/HVV11/RemoteReadings","property":"","qos":"2","broker":"34d858f3.7e5b98","x":1252.1427383422852,"y":3803.2139558792114,"wires":[["413027d3.fa1f48"]]},{"id":"413027d3.fa1f48","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV11S - MQTT Readings (From RUi to ETMP)","topic":"ETMP/RUi/HealthAging/eHealth/HVV11/RemoteReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1642.142692565918,"y":3801.785523414612,"wires":[]},{"id":"e4fe688f.16caf8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV11S - MQTT Readings","topic":"ETMP/RUi/HealthAging/eHealth/HVV11/RemoteReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1965.3572158813477,"y":3795.3572340011597,"wires":[["b98af49a.398438","9688ec40.49bff"]]},{"id":"9688ec40.49bff","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2221.071392059326,"y":3753.928629875183,"wires":[]},{"id":"1acce9ab.0bee46","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request HVV12 Readings","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_HVV12_Readings\";\nMqtt_Command_RWBStatus.PERIODICITY = 60;\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":587.4999694824219,"y":3869.165732383728,"wires":[["a0324bbc.1573d8"]]},{"id":"a0324bbc.1573d8","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV12R - MQTT Command to ETMP","topic":"ETMP/RUi/HealthAging/eHealth/HVV12/RequestReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":932.5000686645508,"y":3866.6659755706787,"wires":[]},{"id":"2f0ee994.ad9966","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV12R - MQTT Command To RUi","topic":"RUi/HealthAging/eHealth/HVV12/RequestReadings","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":1599.6427154541016,"y":3866.6660442352295,"wires":[]},{"id":"2e6dd2a7.97879e","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV12R  - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/HealthAging/eHealth/HVV12/RequestReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1258.2141189575195,"y":3866.6659755706787,"wires":[["2f0ee994.ad9966"]]},{"id":"94e0a0bd.2f472","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV12S - MQTT Readings (From RUi)","topic":"RUi/HealthAging/eHealth/HVV12/RemoteReadings","property":"","qos":"2","broker":"34d858f3.7e5b98","x":1251.0713119506836,"y":3910.95165348053,"wires":[["b7310505.dad948"]]},{"id":"b7310505.dad948","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV12S - MQTT Readings (From RUi to ETMP)","topic":"ETMP/RUi/HealthAging/eHealth/HVV12/RemoteReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1641.0712661743164,"y":3909.52322101593,"wires":[]},{"id":"3de91342.860cec","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV12S - MQTT Readings","topic":"ETMP/RUi/HealthAging/eHealth/HVV12/RemoteReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1964.285789489746,"y":3903.094931602478,"wires":[["fd9151b7.92a6e","9e86f57c.af34e8"]]},{"id":"fd9151b7.92a6e","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2219.9999656677246,"y":3861.6663274765015,"wires":[]},{"id":"1616812a.1c979f","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request HVV21 Readings","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_HVV21_Readings\";\nMqtt_Command_RWBStatus.PERIODICITY = 15;\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":587.4999694824219,"y":3981.665732383728,"wires":[["f1ded1b7.fa065"]]},{"id":"f1ded1b7.fa065","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV21R - MQTT Command to ETMP","topic":"ETMP/RUi/HealthAging/eHealth/HVV21/RequestReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":932.5000686645508,"y":3979.1659755706787,"wires":[]},{"id":"327ecd32.2a0212","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV21R - MQTT Command To RUi","topic":"RUi/HealthAging/eHealth/HVV21/RequestReadings","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":1599.6427154541016,"y":3979.1660442352295,"wires":[]},{"id":"5dbd1703.240948","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV21R  - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/HealthAging/eHealth/HVV21/RequestReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1258.2141189575195,"y":3979.1659755706787,"wires":[["327ecd32.2a0212"]]},{"id":"ccb41231.14376","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV21S - MQTT Readings (From RUi)","topic":"RUi/HealthAging/eHealth/HVV21/RemoteReadings","property":"","qos":"2","broker":"34d858f3.7e5b98","x":1251.0713119506836,"y":4023.45165348053,"wires":[["eccaa4df.9d7208"]]},{"id":"eccaa4df.9d7208","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV21S - MQTT Readings (From RUi to ETMP)","topic":"ETMP/RUi/HealthAging/eHealth/HVV21/RemoteReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1641.0712661743164,"y":4022.02322101593,"wires":[]},{"id":"2b6529f8.952936","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV21S - MQTT Readings","topic":"ETMP/RUi/HealthAging/eHealth/HVV21/RemoteReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1964.285789489746,"y":4015.594931602478,"wires":[["ad0ad8a3.73d248","55159655.e57a58"]]},{"id":"ad0ad8a3.73d248","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2219.9999656677246,"y":3974.1663274765015,"wires":[]},{"id":"844852b7.d604c","type":"function","z":"ff8a25f8.46f4a8","name":"F Command: Request HVV22 Readings","func":"var Mqtt_Command_RWBStatus = {};\n\nvar msg2={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.Date=year+'.'+month+'.'+day;\nmsg2.Time=hour+':'+minute+':'+second;\n\nvar RU_ID=global.get('ResIDSel');\n\nMqtt_Command_RWBStatus.RU_ID = RU_ID;\nMqtt_Command_RWBStatus.COMMAND= \"Request_HVV22_Readings\";\nMqtt_Command_RWBStatus.PERIODICITY = 15;\nMqtt_Command_RWBStatus.DATE = msg2.Date;\nMqtt_Command_RWBStatus.TIME = msg2.Time;\n\nMqtt_Command_RWBStatus={payload:Mqtt_Command_RWBStatus};\n\nreturn Mqtt_Command_RWBStatus;\n","outputs":1,"noerr":0,"x":589.9999694824219,"y":4079.165732383728,"wires":[["804cfc49.f646f"]]},{"id":"804cfc49.f646f","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV22R - MQTT Command to ETMP","topic":"ETMP/RUi/HealthAging/eHealth/HVV22/RequestReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":935.0000686645508,"y":4076.6659755706787,"wires":[]},{"id":"9fba43db.f56d2","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV22R - MQTT Command To RUi","topic":"RUi/HealthAging/eHealth/HVV22/RequestReadings","qos":"2","retain":"true","broker":"34d858f3.7e5b98","x":1602.1427154541016,"y":4076.6660442352295,"wires":[]},{"id":"3a722799.e65b08","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV22R  - MQTT Command (ETMP To RUi)","topic":"ETMP/RUi/HealthAging/eHealth/HVV22/RequestReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1260.7141189575195,"y":4076.6659755706787,"wires":[["9fba43db.f56d2"]]},{"id":"44ab694d.0ce4a8","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV22S - MQTT Readings (From RUi)","topic":"RUi/HealthAging/eHealth/HVV22/RemoteReadings","property":"","qos":"2","broker":"34d858f3.7e5b98","x":1253.5713119506836,"y":4120.95165348053,"wires":[["d7b46bf7.fb9758"]]},{"id":"d7b46bf7.fb9758","type":"mqtt out","z":"ff8a25f8.46f4a8","name":"HVV22S - MQTT Readings (From RUi to ETMP)","topic":"ETMP/RUi/HealthAging/eHealth/HVV22/RemoteReadings","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":1643.5712661743164,"y":4119.52322101593,"wires":[]},{"id":"703ecc34.6a7374","type":"mqtt-json","z":"ff8a25f8.46f4a8","name":"HVV22S - MQTT Readings","topic":"ETMP/RUi/HealthAging/eHealth/HVV22/RemoteReadings","property":"","qos":"2","broker":"cb7c4e4.778afb","x":1966.785789489746,"y":4113.094931602478,"wires":[["9c3e73de.8493f","72e085cd.c2b98c"]]},{"id":"9c3e73de.8493f","type":"debug","z":"ff8a25f8.46f4a8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2222.4999656677246,"y":4071.6663274765015,"wires":[]},{"id":"54be1bd8.6c6604","type":"inject","z":"35c302a8.60132e","name":"GSMi - Request Rate","topic":"","payload":"","payloadType":"date","repeat":"1800","crontab":"","once":true,"onceDelay":"10","x":221.66666666666663,"y":716.6666666666665,"wires":[["a46c60e6.3ddea"]]},{"id":"a20e8254.1e22a","type":"inject","z":"35c302a8.60132e","name":"ESMi - Request Rate","topic":"","payload":"","payloadType":"date","repeat":"1800","crontab":"","once":true,"onceDelay":"20","x":224.99999237060547,"y":366.6666603088379,"wires":[["cda28081.f2437"]]},{"id":"98dbdea2.31b75","type":"inject","z":"35c302a8.60132e","name":"WSMi - Request Rate","topic":"","payload":"","payloadType":"date","repeat":"1800","crontab":"","once":true,"onceDelay":"40","x":234.99999999999997,"y":1174.9999999999998,"wires":[["e3e086c3.04e028"]]},{"id":"585332ca.49791c","type":"pythonshell in","z":0,"name":"","pyfile":"/Users/namtrang/main.py","virtualenv":"","continuous":false,"x":341.5,"y":154,"wires":[["d02ebdaf.9e74"]]},{"id":"ad4f4ad7.1d4e88","type":"inject","z":0,"name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":"","x":140.5,"y":76,"wires":[["585332ca.49791c"]]},{"id":"d02ebdaf.9e74","type":"debug","z":0,"name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":537.5,"y":233,"wires":[]},{"id":"74138eca.6815c","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":3,"width":"3","height":"1","label":"WBi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"","valueType":"str"}],"name":"WBi1","x":1443.4999923706055,"y":176.25002002716064,"wires":[]},{"id":"5d0cc329.c9aedc","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":5,"width":"3","height":"1","label":"WBi3","labelPlacement":"left","labelAlignment":"right","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"grey","value":"-1","valueType":"str"}],"name":"WBi3","x":1442.0714302062988,"y":280.5357437133789,"wires":[]},{"id":"516eeff0.a09ed","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":4,"width":"3","height":"1","label":"WBi2","labelPlacement":"left","labelAlignment":"right","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"grey","value":"","valueType":"str"}],"name":"WBi2","x":1442.0715065002441,"y":227.67862033843994,"wires":[]},{"id":"7b8b381f.20f848","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":6,"width":"3","height":"1","label":"WBi4","labelPlacement":"left","labelAlignment":"right","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"grey","value":"-1","valueType":"str"}],"name":"WBi4","x":1440.6428298950195,"y":329.10718154907227,"wires":[]},{"id":"3508cd6b.66d162","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":7,"width":"3","height":"1","label":"WBi5","labelPlacement":"left","labelAlignment":"right","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"grey","value":"d","valueType":"str"}],"name":"WBi5","x":1444.928581237793,"y":384.8214645385742,"wires":[]},{"id":"a8a6132e.5bda2","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":8,"width":"3","height":"1","label":"WBi6","labelPlacement":"left","labelAlignment":"right","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"grey","value":"d","valueType":"str"}],"name":"WBi6","x":1443.4999923706055,"y":434.8214645385742,"wires":[]},{"id":"2a84c5d6.86ed2a","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":21,"width":"3","height":"1","label":"MDi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"","valueType":"str"}],"name":"MDi1","x":3190.714401245117,"y":168.21429824829102,"wires":[]},{"id":"5990e99e.ebd9e8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e23f8179.e6378","order":23,"width":"3","height":"1","label":"MDi2","labelPlacement":"left","labelAlignment":"right","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"grey","value":"","valueType":"str"}],"name":"MDi2","x":3189.285915374756,"y":219.6428985595703,"wires":[]},{"id":"3eb8939.a30bf6c","type":"ui_led","z":"ff8a25f8.46f4a8","group":"70ba33b3.fa191c","order":3,"width":"3","height":"1","label":"APPi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"APPi1","x":1449.1071281433105,"y":558.5714797973633,"wires":[]},{"id":"dc582b9b.a81d38","type":"ui_led","z":"ff8a25f8.46f4a8","group":"70ba33b3.fa191c","order":4,"width":"3","height":"1","label":"APPi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"APPi2","x":1447.6785888671875,"y":604.2857913970947,"wires":[]},{"id":"7041b409.5fff4c","type":"ui_led","z":"ff8a25f8.46f4a8","group":"70ba33b3.fa191c","order":5,"width":"3","height":"1","label":"APPi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"APPi3","x":1449.1071281433105,"y":655.7143096923828,"wires":[]},{"id":"ade46c5a.797b5","type":"ui_led","z":"ff8a25f8.46f4a8","group":"70ba33b3.fa191c","order":6,"width":"3","height":"1","label":"APPi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"APPi4","x":1450.5358200073242,"y":701.4286217689514,"wires":[]},{"id":"40c687c2.b33cc8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"b2743b69.be6368","order":3,"width":"3","height":"1","label":"LT1i1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"yellow","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"LT1i1","x":1460.0001411437988,"y":834.2857189178467,"wires":[]},{"id":"e2204d8f.3aad","type":"ui_led","z":"ff8a25f8.46f4a8","group":"b2743b69.be6368","order":4,"width":"3","height":"1","label":"LT1i2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"yellow","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"LT1i2","x":1458.5715522766113,"y":874.2857189178467,"wires":[]},{"id":"7442ebb5.79ce54","type":"ui_led","z":"ff8a25f8.46f4a8","group":"b2743b69.be6368","order":5,"width":"3","height":"1","label":"LT1i3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"yellow","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"LT1i3","x":1458.5715522766113,"y":918.5714244842529,"wires":[]},{"id":"d8a6f951.806218","type":"ui_led","z":"ff8a25f8.46f4a8","group":"b2743b69.be6368","order":6,"width":"3","height":"1","label":"LT1i4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"yellow","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"LT1i4","x":1458.5715522766113,"y":958.5714244842529,"wires":[]},{"id":"ccfff620.7cb368","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":3,"width":"3","height":"1","label":"HVACi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACi1","x":1467.428554534912,"y":1083.1428060531616,"wires":[]},{"id":"a7035418.4e29d8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":4,"width":"3","height":"1","label":"HVACi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACi2","x":1467.428554534912,"y":1123.1428060531616,"wires":[]},{"id":"895c06f5.023f88","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":5,"width":"3","height":"1","label":"HVACi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACi3","x":1467.4285697937012,"y":1163.1427869796753,"wires":[]},{"id":"d2ef5188.1f3f9","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":6,"width":"3","height":"1","label":"HVACi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACi4","x":1467.428554534912,"y":1203.1428060531616,"wires":[]},{"id":"c963b36c.cd696","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":20,"width":"3","height":"1","label":"HVACCi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACCi1","x":3385.999755859375,"y":1086.8570556640625,"wires":[]},{"id":"bf344156.4c418","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":21,"width":"3","height":"1","label":"HVACCi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACCi2","x":3384.571044921875,"y":1128.2855224609375,"wires":[]},{"id":"c03f6ccd.f8e68","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":22,"width":"3","height":"1","label":"HVACCi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACCi3","x":3384.571044921875,"y":1172.5712890625,"wires":[]},{"id":"5ac86dcb.5dc2c4","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":23,"width":"3","height":"1","label":"HVACCi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACCi4","x":3384.571044921875,"y":1213.9998779296875,"wires":[]},{"id":"7bfc9300.94817c","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":27,"width":"3","height":"1","label":"HVACHi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACHi1","x":4916.571830749512,"y":1063.4285707473755,"wires":[]},{"id":"4153f707.083588","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":28,"width":"3","height":"1","label":"HVACHi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACHi2","x":4915.143260955811,"y":1106.28573513031,"wires":[]},{"id":"496aa015.11a8d","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":29,"width":"3","height":"1","label":"HVACHi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACHi3","x":4913.714550018311,"y":1149.142912864685,"wires":[]},{"id":"f280978c.ad9f98","type":"ui_led","z":"ff8a25f8.46f4a8","group":"9bf9842e.da3fe8","order":30,"width":"3","height":"1","label":"HVACHi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"HVACHi4","x":4912.286083221436,"y":1192.00009059906,"wires":[]},{"id":"b97e9e70.7673b","type":"ui_led","z":"ff8a25f8.46f4a8","group":"88ea930a.6005","order":4,"width":"3","height":"1","label":"AASi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"AASi1","x":1595.4285430908203,"y":1826.5713968276978,"wires":[]},{"id":"90024d25.fbcff","type":"ui_led","z":"ff8a25f8.46f4a8","group":"88ea930a.6005","order":5,"width":"3","height":"1","label":"AASi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"AASi2","x":1590.8570823669434,"y":1924.857213973999,"wires":[]},{"id":"f9a28977.3737c8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"88ea930a.6005","order":6,"width":"3","height":"1","label":"AASi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"AASi3","x":1590.2855110168457,"y":2014.8570909500122,"wires":[]},{"id":"de261b6e.2a7c88","type":"ui_led","z":"ff8a25f8.46f4a8","group":"88ea930a.6005","order":7,"width":"3","height":"1","label":"AASi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"AASi4","x":1594.571418762207,"y":2105.4286737442017,"wires":[]},{"id":"ace50ecd.8a44e","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e17348c6.d5e278","order":3,"width":"3","height":"1","label":"PDSi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"PDSi1","x":1598.85746383667,"y":2216.0002756118774,"wires":[]},{"id":"5e2b19c.601fae8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e17348c6.d5e278","order":4,"width":"3","height":"1","label":"PDSi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"PDSi2","x":1598.85746383667,"y":2256.0002756118774,"wires":[]},{"id":"f04ceffe.b5e35","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e17348c6.d5e278","order":5,"width":"3","height":"1","label":"PDSi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"PDSi3","x":1597.4288749694824,"y":2297.4287424087524,"wires":[]},{"id":"40b7e4b1.14d88c","type":"ui_led","z":"ff8a25f8.46f4a8","group":"e17348c6.d5e278","order":6,"width":"3","height":"1","label":"PDSi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"PDSi4","x":1597.4288749694824,"y":2338.8572092056274,"wires":[]},{"id":"51479646.a3a858","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":3,"width":"3","height":"1","label":"iOWDi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iOWDi1","x":1577.380859375,"y":2513.9998111724854,"wires":[]},{"id":"b3dfefca.afdf6","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":4,"width":"3","height":"1","label":"iOWDi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iOWDi2","x":1575.9522705078125,"y":2558.2854557037354,"wires":[]},{"id":"3a19919.8260a6e","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":5,"width":"3","height":"1","label":"iOWDi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iOWDi3","x":1574.5237426757812,"y":2601.1426334381104,"wires":[]},{"id":"6b7650ef.09e59","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":6,"width":"3","height":"1","label":"iOWDi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iOWDi4","x":1573.0951538085938,"y":2645.4282779693604,"wires":[]},{"id":"fb405d05.da54c","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":10,"width":"3","height":"1","label":"iODDi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iODDi1","x":3376.357223510742,"y":2442.857135772705,"wires":[]},{"id":"153f8b48.1882d5","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":11,"width":"3","height":"1","label":"iODDi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iODDi2","x":3374.9286346435547,"y":2488.57124710083,"wires":[]},{"id":"5cb49fbe.c5f76","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":12,"width":"3","height":"1","label":"iODDi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iODDi3","x":3372.071578979492,"y":2535.71431350708,"wires":[]},{"id":"20e5c79c.73f1b8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"4025e7c8.034e68","order":13,"width":"3","height":"1","label":"iODDi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"iODDi4","x":3370.6429901123047,"y":2578.57124710083,"wires":[]},{"id":"25fb0d93.7fb4e2","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":4,"width":"3","height":"1","label":"SDSi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"SDSi1","x":1600.1786651611328,"y":2909.57155418396,"wires":[]},{"id":"3a4b5947.420146","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":5,"width":"3","height":"1","label":"SDSi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"SDSi2","x":1598.7499961853027,"y":2950.9998807907104,"wires":[]},{"id":"e3e2cbb6.365958","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":6,"width":"3","height":"1","label":"SDSi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"SDSi3","x":1597.321460723877,"y":2995.285749435425,"wires":[]},{"id":"47be4ae7.5610a4","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":7,"width":"3","height":"1","label":"SDSi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"SDSi4","x":1598.7499885559082,"y":3035.285749435425,"wires":[]},{"id":"795d248.7e9dcdc","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":11,"width":"3","height":"1","label":"TDSi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"TDSi1","x":3234.5712890625,"y":2924,"wires":[]},{"id":"4ae7b0f3.7a657","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":12,"width":"3","height":"1","label":"TDSi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"TDSi2","x":3235.9998779296875,"y":2968.285888671875,"wires":[]},{"id":"8d761db2.ebc12","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":13,"width":"3","height":"1","label":"TDSi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"TDSi3","x":3233.1427307128906,"y":3009.714479446411,"wires":[]},{"id":"d03c380d.451818","type":"ui_led","z":"ff8a25f8.46f4a8","group":"1448138b.c1b81c","order":14,"width":"3","height":"1","label":"TDSi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"TDSi4","x":3233.856964111328,"y":3048.642868041992,"wires":[]},{"id":"66441bd0.07d874","type":"ui_led","z":"ff8a25f8.46f4a8","group":"f07e3a84.1467a8","order":3,"width":"3","height":"1","label":"GLSi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"GLSi1","x":1602.5714530944824,"y":3182.8922805786133,"wires":[]},{"id":"ba9de38f.f6902","type":"ui_led","z":"ff8a25f8.46f4a8","group":"f07e3a84.1467a8","order":4,"width":"3","height":"1","label":"GLSi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"GLSi2","x":1599.7143173217773,"y":3227.1779794692993,"wires":[]},{"id":"6ee30748.72d7e8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"f07e3a84.1467a8","order":5,"width":"3","height":"1","label":"GLSi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"GLSi3","x":1599.7143173217773,"y":3268.6066904067993,"wires":[]},{"id":"86c6ff7.966ee","type":"ui_led","z":"ff8a25f8.46f4a8","group":"f07e3a84.1467a8","order":6,"width":"3","height":"1","label":"GLSi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"GLSi4","x":1601.142951965332,"y":3311.4639167785645,"wires":[]},{"id":"f65e0e2e.bd8db","type":"ui_led","z":"ff8a25f8.46f4a8","group":"f07e3a84.1467a8","order":13,"width":"3","height":"1","label":"GEVSi","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"GEVSi","x":3241.142578125,"y":3217.14306640625,"wires":[]},{"id":"29779ed3.166c42","type":"ui_led","z":"ff8a25f8.46f4a8","group":"a6d576df.b49328","order":3,"width":"3","height":"1","label":"WLSi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"WLSi1","x":1607.5358963012695,"y":3407.678966522217,"wires":[]},{"id":"2843e84e.01ab58","type":"ui_led","z":"ff8a25f8.46f4a8","group":"a6d576df.b49328","order":4,"width":"3","height":"1","label":"WLSi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"WLSi2","x":1604.6787605285645,"y":3451.964665412903,"wires":[]},{"id":"67723e81.733db","type":"ui_led","z":"ff8a25f8.46f4a8","group":"a6d576df.b49328","order":5,"width":"3","height":"1","label":"WLSi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"WLSi3","x":1604.6787605285645,"y":3493.393376350403,"wires":[]},{"id":"e984118a.5c7ee","type":"ui_led","z":"ff8a25f8.46f4a8","group":"a6d576df.b49328","order":6,"width":"3","height":"1","label":"WLSi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"WLSi4","x":1606.1073951721191,"y":3536.250602722168,"wires":[]},{"id":"3b9c00f7.cb6df","type":"ui_led","z":"ff8a25f8.46f4a8","group":"a6d576df.b49328","order":13,"width":"3","height":"1","label":"WEVSi","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"WEVSi","x":3245.4286918640137,"y":3452.856908798218,"wires":[]},{"id":"16f6f98b.1792b6","type":"ui_led","z":"ff8a25f8.46f4a8","group":"49646d32.43bfd4","order":3,"width":"3","height":"1","label":"FDi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"FDi1","x":1618.9762916564941,"y":4300.916742324829,"wires":[]},{"id":"353f1e36.964bc2","type":"ui_led","z":"ff8a25f8.46f4a8","group":"49646d32.43bfd4","order":4,"width":"3","height":"1","label":"FDi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"FDi2","x":1618.9762916564941,"y":4340.916742324829,"wires":[]},{"id":"db72f33f.3a928","type":"ui_led","z":"ff8a25f8.46f4a8","group":"49646d32.43bfd4","order":5,"width":"3","height":"1","label":"FDi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"FDi3","x":1617.5477027893066,"y":4382.345209121704,"wires":[]},{"id":"bf47e970.f22158","type":"ui_led","z":"ff8a25f8.46f4a8","group":"49646d32.43bfd4","order":6,"width":"3","height":"1","label":"FDi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"FDi4","x":1617.5477027893066,"y":4423.773675918579,"wires":[]},{"id":"4993d00a.a6983","type":"ui_led","z":"ff8a25f8.46f4a8","group":"5c5de969.b36f78","order":3,"width":"3","height":"1","label":"EAi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"EAi1","x":1616.2620429992676,"y":4542.559910774231,"wires":[]},{"id":"4094e2b7.9b731c","type":"ui_led","z":"ff8a25f8.46f4a8","group":"5c5de969.b36f78","order":4,"width":"3","height":"1","label":"EAi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"EAi2","x":1616.2620429992676,"y":4582.559910774231,"wires":[]},{"id":"eb3d099b.02db28","type":"ui_led","z":"ff8a25f8.46f4a8","group":"5c5de969.b36f78","order":5,"width":"3","height":"1","label":"EAi3","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"EAi3","x":1614.83345413208,"y":4623.988377571106,"wires":[]},{"id":"4a792a4a.ed7b64","type":"ui_led","z":"ff8a25f8.46f4a8","group":"5c5de969.b36f78","order":6,"width":"3","height":"1","label":"EAi4","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"red","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"EAi4","x":1614.83345413208,"y":4665.416844367981,"wires":[]},{"id":"a99de7c8.99abf8","type":"ui_led","z":"ff8a25f8.46f4a8","group":"44adc40a.0ff00c","order":3,"width":"3","height":"1","label":"RDi1","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"RDi1","x":1603.5833854675293,"y":4784.130707740784,"wires":[]},{"id":"346fa80c.0da778","type":"ui_led","z":"ff8a25f8.46f4a8","group":"44adc40a.0ff00c","order":4,"width":"3","height":"1","label":"RDi2","labelPlacement":"left","labelAlignment":"center","colorForValue":[{"color":"black","value":"0","valueType":"str"},{"color":"green","value":"1","valueType":"str"},{"color":"gray","value":"d","valueType":"str"}],"name":"RDi2","x":1605.3690452575684,"y":4878.594504356384,"wires":[]},{"id":"33a374f0.d41c1c","type":"worldmap","z":0,"name":"","lat":"","lon":"","zoom":"","layer":"Esri Topography","cluster":"","maxage":"","hiderightclick":"false","coords":"deg","path":"","x":1010,"y":180,"wires":[]},{"id":"58cce4a6.f416cc","type":"debug","z":"78619d8c.bb02c4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":510,"y":220,"wires":[]},{"id":"8492d636.a2ccc8","type":"inject","z":"78619d8c.bb02c4","name":"open","topic":"open","payload":"your open payload","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":180,"wires":[["9e1c2d7c.aab6c"]]},{"id":"473b8fb.f9e827","type":"inject","z":"78619d8c.bb02c4","name":"close","topic":"close","payload":"your close payload","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":220,"wires":[["9e1c2d7c.aab6c"]]},{"id":"9e1c2d7c.aab6c","type":"dsm","z":"78619d8c.bb02c4","name":"door","sm_config":"{\n    \"currentState\": \"closed\",\n    \"states\": {\n        \"opened\": {\n            \"close\": \"closed\",\n            \"stop\": \"stopped\"\n        },\n        \"closed\": {\n            \"open\": \"opened\",\n            \"stop\": \"stopped\"\n        },\n        \"stopped\": {\n            \"open\": \"opened\",\n            \"close\": \"closed\"\n        }\n    }\n}","x":340,"y":220,"wires":[["58cce4a6.f416cc"]]},{"id":"16f1f044.6f90a","type":"inject","z":"78619d8c.bb02c4","name":"stop","topic":"stop","payload":"your stop payload","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":260,"wires":[["9e1c2d7c.aab6c"]]},{"id":"1cc426a6.778c49","type":"dsm","z":"cd63f7d2.d06058","name":"garage door","sm_config":"{\n    \"stateOutput\": \"payload\",\n    \"globalOutput\": \"garage_door_state\",\n    \"currentState\": \"closed\",\n    \"states\": {\n        \"opened\": {\n            \"click\": \"closing\"\n        },\n        \"closed\": {\n            \"click\": \"opening\"\n        },\n        \"opening\": {\n            \"limit_switch\": \"opened\",\n            \"click\": \"opening_stopped\"\n        },\n        \"closing\": {\n            \"limit_switch\": \"closed\",\n            \"click\": \"closing_stopped\"\n        },\n        \"opening_stopped\": {\n            \"click\": \"closing\"\n        },\n        \"closing_stopped\": {\n            \"click\": \"opening\"\n        }\n    }\n}","x":380,"y":180,"wires":[["9f4635d1.d43e68","38f8c6ad.6ee1ca"]]},{"id":"318b206f.a6eb1","type":"inject","z":"cd63f7d2.d06058","name":"click","topic":"click","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":180,"wires":[["1cc426a6.778c49"]]},{"id":"65272df6.813834","type":"link in","z":"cd63f7d2.d06058","name":"to timer","links":["eb98a008.56dd"],"x":235,"y":220,"wires":[["1cc426a6.778c49"]]},{"id":"eb98a008.56dd","type":"link out","z":"cd63f7d2.d06058","name":"from dsm","links":["65272df6.813834"],"x":655,"y":280,"wires":[]},{"id":"8ac14f6a.8450b","type":"comment","z":"cd63f7d2.d06058","name":"motor simulation","info":"","x":560,"y":140,"wires":[]},{"id":"9f4635d1.d43e68","type":"change","z":"cd63f7d2.d06058","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload = \"opening\" or payload = \"closing\" ? payload : \"reset\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":180,"wires":[["573888c5.741ad8"]]},{"id":"573888c5.741ad8","type":"trigger","z":"cd63f7d2.d06058","op1":"","op2":"limit_switch","op1type":"nul","op2type":"str","duration":"3","extend":false,"units":"s","reset":"reset","bytopic":"topic","name":"","x":440,"y":280,"wires":[["c36d5bef.de1fa8"]]},{"id":"c36d5bef.de1fa8","type":"change","z":"cd63f7d2.d06058","name":"topic","rules":[{"t":"set","p":"topic","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":280,"wires":[["eb98a008.56dd"]]},{"id":"38f8c6ad.6ee1ca","type":"debug","z":"cd63f7d2.d06058","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":60,"wires":[]},{"id":"3db6d9a0.2e67a6","type":"finite-state-machine","z":"8ea7ed95.a52c2","name":"","fsmDefinition":"{\"state\":{\"status\":\"IDLE\",\"data\":{\"x\":99}},\"transitions\":{\"IDLE\":{\"run\":{\"status\":\"RUNNING\",\"data\":{\"x\":42}}},\"RUNNING\":{\"stop\":{\"status\":\"IDLE\",\"data\":{\"x\":0}},\"set\":\"RUNNING\"}}}","sendInitialState":false,"sendStateWithoutChange":false,"showTransitionErrors":true,"x":270,"y":340,"wires":[["f04a4966.c13da8"]]},{"id":"f04a4966.c13da8","type":"debug","z":"8ea7ed95.a52c2","name":"","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":510,"y":240,"wires":[]},{"id":"fcbce84a.f42ed8","type":"inject","z":"8ea7ed95.a52c2","name":"","topic":"toggleState","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":240,"wires":[["3db6d9a0.2e67a6"]]},{"id":"5e12d890.ac1d68","type":"comment","z":"8ea7ed95.a52c2","name":"sending topic \"toggleState\" toggles between the two states","info":"","x":340,"y":180,"wires":[]},{"id":"b9b2c33a.243a2","type":"finite-state-machine","z":"c781321.8c884d","name":"","fsmDefinition":"{\"state\":{\"status\":\"IDLE\",\"data\":{\"x\":99}},\"transitions\":{\"IDLE\":{\"run\":{\"status\":\"RUNNING\",\"data\":{\"x\":42}}},\"RUNNING\":{\"stop\":{\"status\":\"IDLE\",\"data\":{\"x\":0}},\"set\":\"RUNNING\"}}}","sendInitialState":false,"sendStateWithoutChange":false,"showTransitionErrors":true,"x":510,"y":260,"wires":[["1b4bd1c0.14595e","8e70f62b.5807b8"]]},{"id":"1bfd05cb.038c8a","type":"inject","z":"c781321.8c884d","name":"","topic":"reset","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":120,"wires":[["b9b2c33a.243a2"]]},{"id":"316f7cd.ba2e584","type":"comment","z":"c781321.8c884d","name":"sending topic \"reset\" will set the state machine to its initial state","info":"","x":380,"y":80,"wires":[]},{"id":"6b1fc3.329d603c","type":"inject","z":"c781321.8c884d","name":"","topic":"run","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":240,"wires":[["b9b2c33a.243a2"]]},{"id":"18767e82.0e0411","type":"inject","z":"c781321.8c884d","name":"","topic":"set","payload":"{\"x\" : 2, \"name\" : \"peter\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":290,"y":400,"wires":[["b9b2c33a.243a2"]]},{"id":"fb36e862.285b98","type":"inject","z":"c781321.8c884d","name":"","topic":"set","payload":"{\"y\" : 3}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":230,"y":440,"wires":[["b9b2c33a.243a2"]]},{"id":"a3bf5a02.a63b18","type":"comment","z":"c781321.8c884d","name":"any other topic will trigger a transition","info":"","x":290,"y":200,"wires":[]},{"id":"3760f182.df1fce","type":"inject","z":"c781321.8c884d","name":"","topic":"stop","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":280,"wires":[["b9b2c33a.243a2"]]},{"id":"92a4d3f9.2fc4","type":"comment","z":"c781321.8c884d","name":"by sending a JSON object as payload you can add data to the state","info":"","x":380,"y":360,"wires":[]},{"id":"1b4bd1c0.14595e","type":"debug","z":"c781321.8c884d","name":"","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload.status","targetType":"msg","x":730,"y":140,"wires":[]},{"id":"8e70f62b.5807b8","type":"debug","z":"c781321.8c884d","name":"","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload.data","targetType":"msg","x":730,"y":200,"wires":[]},{"id":"331260fe.227d4","type":"finite-state-machine","z":"44c9342c.afdafc","name":"","fsmDefinition":"{\"state\":{\"status\":\"IDLE\",\"data\":{\"x\":5}},\"transitions\":{\"IDLE\":{\"run\":\"RUNNING\"},\"RUNNING\":{\"stop\":\"IDLE\",\"set\":\"RUNNING\"}}}","sendInitialState":false,"sendStateWithoutChange":false,"showTransitionErrors":true,"x":480,"y":160,"wires":[["597c02ec.c0cfcc","1c4fe52a.126d5b"]]},{"id":"1d4eb6.dd23b14a","type":"inject","z":"44c9342c.afdafc","name":"","topic":"run","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":160,"wires":[["331260fe.227d4"]]},{"id":"597c02ec.c0cfcc","type":"switch","z":"44c9342c.afdafc","name":"onRUNNING","property":"payload.status","propertyType":"msg","rules":[{"t":"eq","v":"RUNNING","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":690,"y":160,"wires":[["931ec05a.dffd3"]]},{"id":"931ec05a.dffd3","type":"delay","z":"44c9342c.afdafc","name":"delay 5s","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":760,"y":300,"wires":[["21fc04e4.94a53c"]]},{"id":"21fc04e4.94a53c","type":"change","z":"44c9342c.afdafc","name":"set msg.topic to stop","rules":[{"t":"set","p":"topic","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":300,"wires":[["331260fe.227d4"]]},{"id":"a3a8218c.27a9e","type":"comment","z":"44c9342c.afdafc","name":"sending topic \"run\" will trigger the machine which is stopped 5 seconds later","info":"","x":390,"y":100,"wires":[]},{"id":"1c4fe52a.126d5b","type":"debug","z":"44c9342c.afdafc","name":"","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload.status","targetType":"msg","x":770,"y":100,"wires":[]},{"id":"d06e2d9b.a76ed","type":"finite-state-machine","z":"7cc4d802.f58018","name":"","fsmDefinition":"{\"state\":{\"status\":\"IDLE\",\"data\":{\"x\":5}},\"transitions\":{\"IDLE\":{\"toggle\":\"RUNNING\",\"set\":\"IDLE\"},\"RUNNING\":{\"toggle\":\"IDLE\"}}}","sendInitialState":true,"sendStateWithoutChange":true,"showTransitionErrors":true,"x":370,"y":320,"wires":[["8b11745a.a54628","84bbecec.f0fb9","a35c2b76.4d6e18","871cbcbf.63616"]]},{"id":"4fb66b10.ff1444","type":"inject","z":"7cc4d802.f58018","name":"","topic":"set","payload":"{ \"x\" :6 }","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":340,"wires":[["d06e2d9b.a76ed"]]},{"id":"365fed43.31e122","type":"inject","z":"7cc4d802.f58018","name":"","topic":"set","payload":"{ \"x\" :7 }","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":380,"wires":[["d06e2d9b.a76ed"]]},{"id":"70770ec8.ccb8","type":"inject","z":"7cc4d802.f58018","name":"","topic":"toggle","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":300,"wires":[["d06e2d9b.a76ed"]]},{"id":"9aa468f3.7c9f78","type":"debug","z":"7cc4d802.f58018","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload.data","targetType":"msg","x":710,"y":220,"wires":[]},{"id":"8b11745a.a54628","type":"rbe","z":"7cc4d802.f58018","name":"dataChanged","func":"rbei","gap":"","start":"","inout":"out","property":"payload.data","x":620,"y":280,"wires":[["9aa468f3.7c9f78"]]},{"id":"84bbecec.f0fb9","type":"rbe","z":"7cc4d802.f58018","name":"stateChanged","func":"rbei","gap":"","start":"","inout":"out","property":"payload.status","x":620,"y":380,"wires":[["e66f4619.efd538"]]},{"id":"e66f4619.efd538","type":"debug","z":"7cc4d802.f58018","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload.status","targetType":"msg","x":710,"y":320,"wires":[]},{"id":"f28da75a.d53748","type":"inject","z":"7cc4d802.f58018","name":"","topic":"set","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":260,"wires":[["d06e2d9b.a76ed"]]},{"id":"a35c2b76.4d6e18","type":"debug","z":"7cc4d802.f58018","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload.status","targetType":"msg","x":510,"y":100,"wires":[]},{"id":"871cbcbf.63616","type":"debug","z":"7cc4d802.f58018","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload.data","targetType":"msg","x":510,"y":40,"wires":[]},{"id":"5ccaaf5f.571b8","type":"smxstate","z":"ac473a23.827f28","name":"sm-cat","xstateDefinition":"// Available variables/objects/functions:\n// xstate\n// - .Machine\n// - .interpret\n// - .assign\n// - .send\n// - .sendParent\n// - .spawn\n// - .raise\n// - .actions\n//\n// Common\n// - setInterval, setTimeout, clearInterval, clearTimeout\n// - node.send, node.warn, node.log, node.error\n// - context.get, context.set\n// - flow.get, flow.set\n// - env.get\n// - util\n\nconst { assign } = xstate;\n\n// First define names guards, actions, ...\n\n/**\n * Guards\n */\nconst maxValueReached = (context, event) => {\n  return context.counter >= 10;\n};\n\n/**\n * Actions\n */\nconst incrementCounter = assign({\n  counter: (context, event) => context.counter + 1\n});\n\nconst resetCounter = assign({\n  counter: (context, event) => {\n    // Can send log messages via\n    //  - node.log\n    //  - node.warn\n    //  - node.error\n    //node.warn(\"RESET\");\n\n    // Can send messages to the second outport\n    // Specify an array to send multiple messages\n    // at once\n    //  - node.send(msg)\n    node.send({ payload: \"resetCounter\" });\n    \n    return 0;\n  }\n});\n\n/**\n * Activities\n */\nconst doStuff = () => {\n  // See https://xstate.js.org/docs/guides/activities.html\n  const interval = setInterval(() => {\n    node.send({ payload: 'BEEP' });\n  }, 1000);\n  return () => clearInterval(interval);\n};\n\n/***************************\n * Main machine definition * \n ***************************/\n\n// First define names guards, actions, ...\n\n/**\n * Guards\n */\nconst bellyFull = (context, event) => {\n  return context.belly >= 100;\n};\n\nconst bellyEmpty = (context, event) => {\n    return context.belly <= 0;\n}\n\nconst bellyNotEmpty = (context, event) => {\n    return context.belly > 0;\n}\n\n/**\n * Actions\n */\nconst updateBelly = assign({\n    belly: (context, ev) => Math.max(\n        Math.min(\n            context.belly+ev.value,100\n        ), 0)\n});\n\n/**\n * Activities\n */\nconst meow = () => {\n  const interval = setInterval(() => node.send({payload: \"MEOW!\"}), 2000);\n  return () => clearInterval(interval);\n};\n\n/**\n * Services\n * see https://xstate.js.org/docs/guides/communication.html#invoking-callbacks\n */\nconst eat = (ctx, ev) => (cb) => {\n    const id = setInterval(() => cb({\n      type: 'eaten',\n      value: 5\n    }),500);\n    return () => clearInterval(id);\n};\n\nconst digest = (ctx, ev) => (cb) => {\n    const id = setInterval(() => cb({\n      type: 'digested',\n      value: -5\n    }),500);\n    return () => clearInterval(id);\n}\n\n/***************************\n * Main machine definition * \n ***************************/\n return {\n  machine: {\n    context: {\n        belly: 0    // Belly state, 100 means full, 0 means empty\n    },\n    initial: 'sleep',\n    states: {\n      sleep: {\n          on: {\n              'wake up': 'meow',\n          }\n      },\n      meow: {\n          invoke: { src: 'digest' },\n          on: {\n              'given toy': { target: 'play', cond: 'belly not empty' },\n              'given food': 'eat',\n              'digested': { actions: 'updateBelly' }\n          },\n          activities: ['meow']\n      },\n      play: {\n          invoke: { src: 'digest' },\n          on: {\n              tired: 'sleep',\n              bored: 'sleep',\n              'digested': { actions: 'updateBelly' },\n              '': { target: 'meow', cond: 'belly empty' }\n          },\n          after: {\n              5000: 'sleep',\n          }\n      },\n      eat: {\n          invoke: { src: 'eat' },\n          on: {\n              '': { target: 'sleep', cond: 'belly full' },\n              'no more food': { target: 'meow' },\n              'eaten': { actions: 'updateBelly' }\n          }\n      }\n    }\n  },\n  // Configuration containing guards, actions, activities, ...\n  // see above\n  config: {\n      guards: { \"belly full\": bellyFull, \"belly not empty\": bellyNotEmpty, \"belly empty\": bellyEmpty },\n      activities: { meow },\n      actions: { updateBelly },\n      services: { eat, digest }\n  }\n}","noerr":0,"x":390,"y":180,"wires":[["67b2a8fe.f83508"],["f1eb10ea.3c29d"]]},{"id":"67b2a8fe.f83508","type":"debug","z":"ac473a23.827f28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.state","targetType":"msg","x":550,"y":80,"wires":[]},{"id":"f1eb10ea.3c29d","type":"debug","z":"ac473a23.827f28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.Cat output","targetType":"msg","x":570,"y":280,"wires":[]},{"id":"4e91f70a.83d248","type":"inject","z":"ac473a23.827f28","name":"","topic":"wake-up","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":60,"wires":[["5ccaaf5f.571b8"]]},{"id":"d61bf8cc.1b3a08","type":"inject","z":"ac473a23.827f28","name":"","topic":"given food","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":300,"wires":[["5ccaaf5f.571b8"]]},{"id":"93a4b579.e98318","type":"create dataset","z":"ac6c84a4.1181c8","name":"","path":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/iris.data","saveFolder":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/datasets","saveName":"iris","input":"0,1,2,3","output":"4","trainingPartition":"","shuffle":true,"seed":"","x":280,"y":140,"wires":[["df3ce979.7b87e8"]]},{"id":"3b8add8e.a663c2","type":"load dataset","z":"ac6c84a4.1181c8","name":"","datasetFolder":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/datasets","datasetName":"iris","partition":"train.csv","input":true,"output":true,"x":270,"y":260,"wires":[["eb2dfd45.e6ada"],["6bbe7055.1ad82"]]},{"id":"650fe48e.eea20c","type":"inject","z":"ac6c84a4.1181c8","name":"start","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":140,"wires":[["93a4b579.e98318"]]},{"id":"f169a002.4f76c","type":"inject","z":"ac6c84a4.1181c8","name":"start","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":260,"wires":[["3b8add8e.a663c2"]]},{"id":"d2eb53c4.bff1d","type":"inject","z":"ac6c84a4.1181c8","name":"start","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":500,"wires":[["b20e821b.f7609","65b2f91b.9fc7f8"]]},{"id":"df3ce979.7b87e8","type":"debug","z":"ac6c84a4.1181c8","name":"print","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":550,"y":140,"wires":[]},{"id":"6bbe7055.1ad82","type":"debug","z":"ac6c84a4.1181c8","name":"error","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":750,"y":300,"wires":[]},{"id":"cb7d136c.ccb44","type":"debug","z":"ac6c84a4.1181c8","name":"print","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":750,"y":200,"wires":[]},{"id":"8ed3259a.a38f08","type":"predictor","z":"ac6c84a4.1181c8","name":"decision tree classifier predictor","modelPath":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/models","modelName":"dtc.b","x":490,"y":520,"wires":[["69a452b9.2fb53c"],["a09832f4.6b6df"]]},{"id":"eb2dfd45.e6ada","type":"decision tree classifier","z":"ac6c84a4.1181c8","name":"decision tree classifier trainer","savePath":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/models","saveName":"dtc.b","maxDepth":"","criterion":"entropy","splitter":"best","x":520,"y":220,"wires":[["cb7d136c.ccb44"],["6bbe7055.1ad82"]]},{"id":"69a452b9.2fb53c","type":"assessment","z":"ac6c84a4.1181c8","name":"","score":"precision_score","x":570,"y":400,"wires":[["ac6286b8.02dc78"],["a09832f4.6b6df"]]},{"id":"b20e821b.f7609","type":"load dataset","z":"ac6c84a4.1181c8","name":"","datasetFolder":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/datasets","datasetName":"iris","partition":"test.csv","input":false,"output":true,"x":270,"y":400,"wires":[["69a452b9.2fb53c"],["a09832f4.6b6df"]]},{"id":"65b2f91b.9fc7f8","type":"load dataset","z":"ac6c84a4.1181c8","name":"","datasetFolder":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/datasets","datasetName":"iris","partition":"test.csv","input":true,"output":false,"x":270,"y":560,"wires":[["8ed3259a.a38f08"],["a09832f4.6b6df"]]},{"id":"a09832f4.6b6df","type":"debug","z":"ac6c84a4.1181c8","name":"error","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":850,"y":580,"wires":[]},{"id":"ac6286b8.02dc78","type":"debug","z":"ac6c84a4.1181c8","name":"print","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":870,"y":400,"wires":[]},{"id":"88969e62.27bae","type":"predictor","z":"ac6c84a4.1181c8","name":"decision tree classifier predictor","modelPath":"C:\\Users\\manue\\node_modules\\node-red-contrib-machine-learning/test/models","modelName":"dtc.b","x":430,"y":780,"wires":[["3a850171.88388e","133a5669.75c4ca"],["94bbf92.4b8d708"]]},{"id":"3a850171.88388e","type":"mqtt out","z":"ac6c84a4.1181c8","name":"","topic":"predictions","qos":"","retain":"","broker":"f0457a6a.95a6d8","x":750,"y":660,"wires":[]},{"id":"94bbf92.4b8d708","type":"debug","z":"ac6c84a4.1181c8","name":"error","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":730,"y":720,"wires":[]},{"id":"2610940.a16c66c","type":"mqtt in","z":"ac6c84a4.1181c8","name":"","topic":"classification","qos":"2","datatype":"auto","broker":"f0457a6a.95a6d8","x":110,"y":640,"wires":[["88969e62.27bae"]]},{"id":"133a5669.75c4ca","type":"debug","z":"ac6c84a4.1181c8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":760,"y":820,"wires":[]},{"id":"a43b7422.b6c188","type":"dsm","z":"e54d56ac.3ac8b8","name":"control system","sm_config":"{\n    \"currentState\": \"running\",\n    \"states\": {\n        \"stopped\": {\n            \"on\": \"running\"\n        },\n        \"running\": {\n            \"off\": \"stopped\"\n        }\n    },\n    \"data\": {\n        \"hot\": 28,\n        \"cool\": 26,\n        \"min\": 0,\n        \"max\": 100\n    },\n    \"methods\": {\n        \"on\": [\n            \"sm.fill = 'green';\",\n            \"sm.text = 'on';\",\n            \"output = false;\"\n        ],\n        \"off\": [\n            \"sm.fill = 'grey';\",\n            \"sm.text = 'off';\",\n            \"output = false;\"\n        ],\n        \"setHot\": [\n            \"sm.data.hot = msg.payload;\",\n            \"sm.fill = 'grey';\",\n            \"sm.text = 'hot = '+sm.data.hot;\"            \n        ],\n        \"setCool\": [\n            \"sm.data.cool = msg.payload;\",\n            \"sm.fill = 'grey';\",\n            \"sm.text = 'cool = '+sm.data.cool;\"            \n        ],\n        \"default\": [\n            \"if(sm.currentState === 'running') {\",\n            \"   sm.temp = Math.round(msg.payload*10)/10;\",\n            \"   if(msg.payload > sm.data.hot) {\",\n            \"       msg.payload = sm.data.max;\",\n            \"       sm.fill = 'yellow';\",\n            \"   } else if (msg.payload < sm.data.cool) {\",\n            \"       msg.payload = sm.data.min;\",\n            \"       sm.fill = 'blue';\",\n            \"   } else {\",\n            \"       sm.inr = sm.data.hot - sm.data.cool;\",\n            \"       sm.outr = sm.data.max - sm.data.min;\",\n            \"       sm.rel = msg.payload - sm.data.cool;\",\n            \"       msg.payload = Math.round(sm.rel * sm.outr / sm.inr);\",\n            \"       if (msg.payload < 30) msg.payload = 0;\",\n            \"       sm.fill = 'green';\",\n            \"   }\",\n            \"   sm.text = 'temp '+sm.temp+' [ '+sm.data.cool+'-'+sm.data.hot+' ] pwm '+msg.payload;\",\n            \"   output = true;\",\n            \"} else {\",\n            \"   sm.fill = 'grey';\",\n            \"   sm.text = 'off';\",\n            \"   output = false\",\n            \"}\"\n        ],\n        \"status\": {\n            \"fill\": {\n                \"get\": \"sm.fill\"\n            },\n            \"shape\": \"dot\",\n            \"text\": {\n                \"get\": \"sm.text;\"\n            }\n        }\n    }\n}","x":490,"y":240,"wires":[["54dd08c.eb5edf8","6012fa30.619804"]]},{"id":"44b6d0d.7a1973","type":"inject","z":"e54d56ac.3ac8b8","name":"","topic":"","payload":"temp","payloadType":"str","repeat":"2","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":180,"wires":[["cc06d213.5a4ad"]]},{"id":"c333e5e4.1deec8","type":"ui_chart","z":"e54d56ac.3ac8b8","name":"","group":"48313fdb.a396d","order":1,"width":0,"height":0,"label":"temp","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"2","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#ff9300","#ff9300","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":490,"y":120,"wires":[[]]},{"id":"54dd08c.eb5edf8","type":"ui_chart","z":"e54d56ac.3ac8b8","name":"","group":"48313fdb.a396d","order":2,"width":0,"height":0,"label":"pwm","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":"2","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#929292","#1f77b4","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":690,"y":180,"wires":[[],[]]},{"id":"4f9fbe5c.a0176","type":"inject","z":"e54d56ac.3ac8b8","name":"on","topic":"on","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":250,"y":300,"wires":[["a43b7422.b6c188"]]},{"id":"63a094fe.f4979c","type":"inject","z":"e54d56ac.3ac8b8","name":"off","topic":"off","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":250,"y":340,"wires":[["a43b7422.b6c188"]]},{"id":"e15a2d3d.6212a","type":"inject","z":"e54d56ac.3ac8b8","name":"","topic":"setHot","payload":"28","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":260,"y":380,"wires":[["a43b7422.b6c188"]]},{"id":"cae556.19627aa8","type":"inject","z":"e54d56ac.3ac8b8","name":"","topic":"setCool","payload":"24","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":260,"y":420,"wires":[["a43b7422.b6c188"]]},{"id":"6012fa30.619804","type":"debug","z":"e54d56ac.3ac8b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":780,"y":260,"wires":[]},{"id":"a6ff34.9ad7a0d","type":"debug","z":"e54d56ac.3ac8b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":390,"y":60,"wires":[]},{"id":"cc06d213.5a4ad","type":"function","z":"e54d56ac.3ac8b8","name":"Temperature","func":"msg.payload=Math.round(Math.random()*50);\nreturn msg;\n","outputs":1,"noerr":0,"x":290,"y":180,"wires":[["c333e5e4.1deec8","a6ff34.9ad7a0d","a43b7422.b6c188"]]},{"id":"fa5587b3.fcac98","type":"inject","z":"f2bea882.29ed28","name":"","topic":"start","payload":"{\"brightness\": 0}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":240,"wires":[["eacbc6e0.97e318"]]},{"id":"c83e2f67.44407","type":"debug","z":"f2bea882.29ed28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","x":690,"y":240,"wires":[]},{"id":"eacbc6e0.97e318","type":"dsm","z":"f2bea882.29ed28","name":"increment","sm_config":"{\n    \"currentState\": \"stopped\",\n    \"states\": {\n        \"stopped\": {\n            \"start\": \"started\"\n        },\n        \"started\": {\n            \"run\": \"running\",\n            \"end\": \"stopped\"\n        },\n        \"running\": {\n            \"run\": \"running\",\n            \"end\": \"stopped\"\n        }\n    },\n    \"data\": {\n      \"step\": 10\n    },\n    \"methods\": {\n        \"start\":  [\n            \"if (sm.currentState === 'started') {\",\n            \"   node.send(msg);\",\n            \"   resume('run', msg);\",\n            \"}\"\n        ],\n        \"run\": [\n            \"if (msg.payload.brightness < 100) {\",\n            \"   msg.payload.brightness = msg.payload.brightness + sm.data.step;\",\n            \"   if (msg.payload.brightness > 100) msg.payload.brightness=100;\",\n            \"   sm.tr = 'run';\",\n            \"} else {\",\n            \"   sm.tr = 'end';\",\n            \"}\",\n            \"timeout.interval = setTimeout(function() {\",\n            \"   if (sm.tr === 'run') node.send(msg);\",\n            \"   resume(sm.tr, msg);\",\n            \"}, 1000);\"\n        ],\n        \"onAfterTransition\": \"output=false;\",\n        \"status\": {\n            \"fill\": {\n                \"get\": \"sm.currentState === 'running' ? 'green' : 'grey'\"\n            },\n            \"shape\": \"dot\",\n            \"text\": {\n                \"get\": \"sm.currentState\"\n            }\n        }\n    }\n}","x":470,"y":240,"wires":[["c83e2f67.44407"]]},{"id":"45b8be24.8f1d1","type":"dsm","z":"39070158.04662e","name":"security_system","sm_config":"","x":370,"y":520,"wires":[[]]},{"id":"5c1c704d.21d3b","type":"inject","z":"39070158.04662e","name":"set","topic":"set","payload":"{\"triggerInput\":\"topic\",\"stateOutput\":\"topic\",\"currentState\":\"disarmed\",\"states\":{\"disarmed\":{\"arm\":\"armed\"},\"armed\":{\"disarm\":\"disarmed\",\"alarm_triggered\":\"master_alarm\"},\"master_alarm\":{\"disarm\":\"disarmed\",\"reset\":\"armed\"}}}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":180,"y":480,"wires":[["45b8be24.8f1d1"]]},{"id":"34908f9.8854a7","type":"link in","z":"39070158.04662e","name":"to open alarm","links":["938d015b.30c0a","ddd3a0db.e5a48","cb0f11aa.d8f6a","f9dcd17e.74096"],"x":225,"y":320,"wires":[["18baac08.121b64"]]},{"id":"69566eb9.4e3e4","type":"inject","z":"39070158.04662e","name":"disarm","topic":"disarm","payload":"{\"name\":\"security_system\",\"characteristic\":\"On\",\"value\":false}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":180,"wires":[["f9dcd17e.74096"]]},{"id":"e6d8538d.31d42","type":"inject","z":"39070158.04662e","name":"arm","topic":"arm","payload":"{\"name\":\"security_system\",\"characteristic\":\"On\",\"value\":true}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":120,"wires":[["2ae283a2.169f9c"]]},{"id":"18baac08.121b64","type":"dsm","z":"39070158.04662e","name":"open alarm","x":360,"y":320,"wires":[["a92476bf.9bfe98","f18ef54b.845108"]]},{"id":"d890d2d2.e32af","type":"inject","z":"39070158.04662e","name":"set","topic":"set","payload":"{\"triggerInput\":\"topic\",\"stateOutput\":\"topic\",\"currentState\":\"disarmed\",\"states\":{\"disarmed\":{\"arm\":\"armed\"},\"armed\":{\"disarm\":\"disarmed\",\"open\":\"alarm_triggered\"},\"alarm_triggered\":{\"disarm\":\"disarmed\",\"reset\":\"armed\"}}}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":180,"y":280,"wires":[["18baac08.121b64"]]},{"id":"a92476bf.9bfe98","type":"debug","z":"39070158.04662e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":580,"y":320,"wires":[]},{"id":"fcfaabd4.5f8e78","type":"link in","z":"39070158.04662e","name":"to click alarm","links":["938d015b.30c0a","ddd3a0db.e5a48","f9dcd17e.74096","48b6aee4.0e4db"],"x":225,"y":420,"wires":[["f91f698f.4d43e8"]]},{"id":"f91f698f.4d43e8","type":"dsm","z":"39070158.04662e","name":"click alarm","sm_config":"","x":360,"y":420,"wires":[["e1e4100a.7ffd1","37f00bf4.a245d4"]]},{"id":"e6ac3fbd.2acb1","type":"inject","z":"39070158.04662e","name":"set","topic":"set","payload":"{\"triggerInput\":\"topic\",\"stateOutput\":\"topic\",\"currentState\":\"disarmed\",\"states\":{\"disarmed\":{\"arm\":\"armed\"},\"armed\":{\"disarm\":\"disarmed\",\"click\":\"alarm_triggered\"},\"alarm_triggered\":{\"disarm\":\"disarmed\",\"reset\":\"armed\"}}}","payloadType":"json","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":180,"y":380,"wires":[["f91f698f.4d43e8"]]},{"id":"e1e4100a.7ffd1","type":"debug","z":"39070158.04662e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":580,"y":420,"wires":[]},{"id":"ddd3a0db.e5a48","type":"link out","z":"39070158.04662e","name":"from arm","links":["34908f9.8854a7","fcfaabd4.5f8e78","abd81eaf.64e93"],"x":385,"y":120,"wires":[]},{"id":"f9dcd17e.74096","type":"link out","z":"39070158.04662e","name":"from disarm","links":["34908f9.8854a7","fcfaabd4.5f8e78","abd81eaf.64e93"],"x":225,"y":180,"wires":[]},{"id":"abd81eaf.64e93","type":"link in","z":"39070158.04662e","name":"to security system","links":["ddd3a0db.e5a48","f9dcd17e.74096","938d015b.30c0a","f18ef54b.845108","37f00bf4.a245d4"],"x":225,"y":520,"wires":[["45b8be24.8f1d1"]]},{"id":"f20da72d.8de668","type":"inject","z":"39070158.04662e","name":"reset","topic":"reset","payload":"{\"name\":\"security_system\",\"characteristic\":\"On\",\"value\":\"reset\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":220,"wires":[["938d015b.30c0a"]]},{"id":"938d015b.30c0a","type":"link out","z":"39070158.04662e","name":"from reset","links":["abd81eaf.64e93","34908f9.8854a7","fcfaabd4.5f8e78"],"x":225,"y":220,"wires":[]},{"id":"2ae283a2.169f9c","type":"delay","z":"39070158.04662e","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":270,"y":120,"wires":[["ddd3a0db.e5a48"]]},{"id":"4b2fdf20.c5894","type":"comment","z":"39070158.04662e","name":"Security System _____________________________________________________________","info":"","x":350,"y":80,"wires":[]},{"id":"f18ef54b.845108","type":"link out","z":"39070158.04662e","name":"from open alarm","links":["abd81eaf.64e93"],"x":525,"y":360,"wires":[]},{"id":"37f00bf4.a245d4","type":"link out","z":"39070158.04662e","name":"fromc lick alarm","links":["abd81eaf.64e93"],"x":525,"y":460,"wires":[]},{"id":"f40229ca.51eb18","type":"comment","z":"39070158.04662e","name":"send a notification e.g to pushover","info":"","x":710,"y":360,"wires":[]},{"id":"bfcf43dc.83b96","type":"inject","z":"39070158.04662e","name":"button click","topic":"click","payload":"{\"name\":\"button\",\"characteristic\":\"On\",\"value\":\"click\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":540,"y":220,"wires":[["48b6aee4.0e4db"]]},{"id":"ee7a92a3.5afe4","type":"comment","z":"39070158.04662e","name":"Sensor input simulation","info":"","x":550,"y":140,"wires":[]},{"id":"48b6aee4.0e4db","type":"link out","z":"39070158.04662e","name":"from button click","links":["fcfaabd4.5f8e78"],"x":685,"y":220,"wires":[]},{"id":"a3a1fb77.957c58","type":"inject","z":"39070158.04662e","name":"magnet contact","topic":"open","payload":"{\"name\":\"garden door\",\"characteristic\":\"ContactSensorState\",\"value\":\"open\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":180,"wires":[["cb0f11aa.d8f6a"]]},{"id":"cb0f11aa.d8f6a","type":"link out","z":"39070158.04662e","name":"from magnet contact","links":["34908f9.8854a7"],"x":685,"y":180,"wires":[]},{"id":"4ce29496.24883c","type":"comment","z":"39070158.04662e","name":"send a notification e.g to pushover","info":"","x":710,"y":460,"wires":[]},{"id":"616e60e6.58818","type":"inject","z":"c6a59983.04f118","name":"on","topic":"on","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":200,"wires":[["e3c7ef77.75eb8"]]},{"id":"37ad4c05.615a64","type":"inject","z":"c6a59983.04f118","name":"off","topic":"off","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":240,"wires":[["e3c7ef77.75eb8"]]},{"id":"445d553b.d9985c","type":"inject","z":"c6a59983.04f118","name":"reset","topic":"reset","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":280,"wires":[["e3c7ef77.75eb8"]]},{"id":"983e72d.6ff239","type":"debug","z":"c6a59983.04f118","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":630,"y":240,"wires":[]},{"id":"e3c7ef77.75eb8","type":"dsm","z":"c6a59983.04f118","name":"operating time","sm_config":"{\n    \"currentState\": \"stopped\",\n    \"states\": {\n        \"stopped\": {\n            \"on\": \"started\"\n        },\n        \"started\": {\n            \"inc\": \"counting\",\n            \"off\": \"stopped\"\n        },\n        \"counting\": {\n            \"inc\": \"counting\",\n            \"off\": \"stopped\"\n        }\n    },\n    \"data\": {\n        \"prev_time\": null,\n        \"time\": 0,\n        \"seconds\": 0,\n        \"interval\": 1,\n        \"interval_output\": true,\n        \"hms_format\": true\n    },\n    \"methods\": {\n        \"init\": [\n            \"sm.calc_time = function() {\",\n            \"   var now = Date.now();\",\n            \"   sm.data.time += now - sm.data.prev_time;\",\n            \"   sm.data.prev_time = now;\",\n            \"   sm.data.seconds = Math.round(sm.data.time / 1000);\",\n            \"};\",\n            \"sm.sec2hhmmss = function(sec) {\",\n                \"var t = {};\",\n                \"t.h = pad(Math.floor(sec / 3600));\",\n                \"sec %= 3600;\",\n                \"t.m = pad(Math.floor(sec / 60));\",\n                \"t.s = pad(sec % 60);\",\n                \"return t.h+':'+t.m+':'+t.s;\",\n            \"};\"\n        ],\n        \"on\": [\n            \"if (sm.currentState === 'started') {\",\n            \"   sm.data.prev_time = Date.now();\",\n            \"   resume('inc', msg);\",\n            \"}\",\n            \"output = false;\"\n        ],\n        \"inc\": [\n            \"timeout.interval = setTimeout(function() {\",\n            \"   sm.calc_time();\",\n            \"   msg.data = sm.data;\",\n            \"   if (sm.data.interval_output) {\",\n            \"       msg.payload = sm.data.hms_format ? sm.sec2hhmmss(sm.data.seconds): sm.data.seconds;\",\n            \"       node.send(msg);\",\n            \"   }\",\n            \"   resume('inc', msg);\",\n            \"}, sm.data.interval*1000);\",\n            \"output = false;\"\n        ],\n        \"off\": [\n            \"clearTimeout(timeout.interval);\",\n            \"sm.calc_time();\",\n            \"msg.payload = sm.data.hms_format ? sm.sec2hhmmss(sm.data.seconds): sm.data.seconds;\"\n        ],\n        \"reset\": [\n            \"sm.data.time = 0;\",\n            \"sm.data.seconds = 0;\"\n        ],\n        \"status\": {\n            \"fill\": {\n                \"get\": \"sm.currentState === 'counting' ? 'green' : 'grey';\"\n            },\n            \"shape\": \"dot\",\n            \"text\": {\n                \"get\": \"'time ' + (sm.data.hms_format ? sm.sec2hhmmss(sm.data.seconds): sm.data.seconds);\"\n            }\n        }\n    }\n}\n","x":450,"y":240,"wires":[["983e72d.6ff239"]]},{"id":"9a45683f.182ba8","type":"dsm","z":"a62f0ac2.511d88","name":"traffic lights","sm_config":"{\n    \"stateOutput\": \"payload\",\n    \"currentState\": \"off\",\n    \"states\": {\n        \"off\": {\n            \"tick\": \"red\"\n        },\n        \"red\": {\n            \"tick\": \"red-yellow\"\n        },\n        \"red-yellow\": {\n            \"tick\": \"green\"\n        },\n        \"green\": {\n            \"tick\": \"yellow\"\n        },\n        \"yellow\": {\n            \"tick\": \"red\"\n        }\n    }\n}","x":380,"y":300,"wires":[["12bcbeb3.6b45b1","ad0bc346.a6e8b","4724821d.2102ac"]]},{"id":"4d105a5b.b4a264","type":"inject","z":"a62f0ac2.511d88","name":"Trigger","topic":"tick","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"onceDelay":0.1,"x":220,"y":300,"wires":[["9a45683f.182ba8"]]},{"id":"14c0519f.6f036e","type":"debug","z":"a62f0ac2.511d88","name":"red","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","x":670,"y":240,"wires":[]},{"id":"b874d631.8f8728","type":"debug","z":"a62f0ac2.511d88","name":"yellow","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","x":670,"y":300,"wires":[]},{"id":"efa5693b.dfc868","type":"debug","z":"a62f0ac2.511d88","name":"green","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","x":670,"y":360,"wires":[]},{"id":"61988001.a4ad1","type":"comment","z":"a62f0ac2.511d88","name":"Traffic lights _______________________________________","info":"","x":350,"y":180,"wires":[]},{"id":"12bcbeb3.6b45b1","type":"dsm","z":"a62f0ac2.511d88","name":"","sm_config":"{\n    \"methods\": {\n        \"onTransition\": \"output=true;if(msg.payload==='red'||msg.payload==='red-yellow') {msg.payload=1;sta.fill='red';} else {msg.payload=0;sta.fill='grey';}\",\n        \"status\": {\n            \"shape\": \"dot\",\n            \"text\": {\n                \"get\": \"msg.payload\"\n            }\n        }\n    }\n}","x":550,"y":240,"wires":[["14c0519f.6f036e"]]},{"id":"ad0bc346.a6e8b","type":"dsm","z":"a62f0ac2.511d88","name":"","sm_config":"{\n    \"methods\": {\n        \"onTransition\": \"output=true;if(msg.payload==='yellow'||msg.payload==='red-yellow') {msg.payload=1;sta.fill='yellow';} else {msg.payload=0;sta.fill='grey';}\",\n        \"status\": {\n            \"shape\": \"dot\",\n            \"text\": {\n                \"get\": \"msg.payload\"\n            }\n        }\n    }\n}","x":550,"y":300,"wires":[["b874d631.8f8728"]]},{"id":"4724821d.2102ac","type":"dsm","z":"a62f0ac2.511d88","name":"","sm_config":"{\n    \"methods\": {\n        \"onTransition\": \"output=true;if(msg.payload==='green') {msg.payload=1;sta.fill='green';} else {msg.payload=0;sta.fill='grey';}\",\n        \"status\": {\n            \"shape\": \"dot\",\n            \"text\": {\n                \"get\": \"msg.payload\"\n            }\n        }\n    }\n}","x":550,"y":360,"wires":[["efa5693b.dfc868"]]},{"id":"986478a2.c79b58","type":"comment","z":"551be607.5d9aa8","name":"GA -  MAP REPRESENTATION AND SETUP OF GA ","info":"This example shows how to embed the Worldmap \ninto a template node within the `node-red-dashboard`\n\nThe first flow creates a dashboard button that \ngenerates a randon position, with the required \nicon, and passes that to the worldmap. The\nmap is configured to automatically pan to the\nposition of any point that arrives.\n\nThe second flow initialise the dashboard template\nwith the initial map and sets it to a more square shape\nby adjusting the height.","x":450,"y":120,"wires":[]},{"id":"dcd9010a.74a21","type":"debug","z":"551be607.5d9aa8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1030,"y":2180,"wires":[]},{"id":"4b51f2a.bc0d30c","type":"ui_list","z":"596fa7a0.139bc8","group":"a71ec147.54077","name":"List of Residential Units","order":1,"width":6,"height":7,"lineType":"three","actionType":"click","allowHTML":false,"outputs":1,"topic":"","x":3850,"y":1520,"wires":[["b4e1a967.52a0e8","2a5a274f.dcaf48","d22aef7e.995b4","48ff0d1.af2e1f4","b4f140d5.96358"]]},{"id":"3d0694dc.d27c5c","type":"function","z":"596fa7a0.139bc8","name":"F Fill ListBoxRUi","func":"var ReadAllRUiDB=msg.payload;\nvar Fields=[];\n\nvar i;\nfor (i = 0; i < msg.payload.length; i++) {\n    \n    // do something with msg.payload[i]\n    Fields.push({});\n    Fields[i]['title'] = 'Residential Unit ' +msg.payload[i].ID;\n    //Fields[i]['description'] = 'Category ' + msg.payload[i].Category;\n    //Fields[i]['icon'] = null;\n}\n\nFields={payload:Fields};\nReadAllRUiDB={payload:ReadAllRUiDB};\nreturn [Fields,ReadAllRUiDB];","outputs":2,"noerr":0,"x":3520,"y":1500,"wires":[["4b51f2a.bc0d30c"],[]]},{"id":"b4e1a967.52a0e8","type":"function","z":"596fa7a0.139bc8","name":"F ResID Selected","func":"var output = msg.payload.title.split(\" \");\nvar ResIDSel=global.get('ResIDSel')||0;\nglobal.set('ResIDSel',output[2]);\nResIDSel={payload:ResIDSel};\nreturn ResIDSel;\n","outputs":1,"noerr":0,"x":4179.527671813965,"y":1477.2500791549683,"wires":[[]]},{"id":"2a5a274f.dcaf48","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":2,"width":12,"height":1,"name":"Residential Unit","label":"","format":"<font color= {{msg.color}} > {{msg.payload.title}} </font>","layout":"row-left","x":4309.527671813965,"y":1517.2500791549683,"wires":[]},{"id":"afee4a7a.aaeab8","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":3870,"y":1420,"wires":[["5e6f66da.683998","3d0694dc.d27c5c"]]},{"id":"c1a26374.3c6a3","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RUnitDB SELECT ALL","func":"var SQLSELECTALL={\"topic\" : \"SELECT * FROM RUnit_DB\"};\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":3610,"y":1420,"wires":[["afee4a7a.aaeab8"]]},{"id":"5e6f66da.683998","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4359.527671813965,"y":1397.2500791549683,"wires":[]},{"id":"d22aef7e.995b4","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RUnitDB SELECT (RefResidentialID)","func":"var output = msg.payload.title.split(\" \");\n\nvar SQLSELECT={\"topic\" : \"SELECT * FROM RUnit_DB WHERE ID=\" + output[2]    \n};\n\nreturn SQLSELECT;","outputs":1,"noerr":0,"x":3590,"y":1620,"wires":[["e393d1d6.abb64"]]},{"id":"e393d1d6.abb64","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":3570,"y":1720,"wires":[["557d427c.8ac0bc","38e7412a.62d5ce"]]},{"id":"557d427c.8ac0bc","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":3868.2180709838867,"y":1652.3691396713257,"wires":[]},{"id":"38e7412a.62d5ce","type":"function","z":"596fa7a0.139bc8","name":"F Fill GeoA RUiDB Interface","func":"var gRUiDB= global.get('gRUiDB')||[];\n\nglobal.set('gRUiDB',msg.payload[0]);\n\ngRUiDB=global.get('gRUiDB');\ngRUiDB={payload:gRUiDB};\n\nreturn gRUiDB;","outputs":1,"noerr":0,"x":3918.51570892334,"y":1714.035834312439,"wires":[["1be4996b.5ba277","8fdd31e6.f01"]]},{"id":"1be4996b.5ba277","type":"function","z":"596fa7a0.139bc8","name":"F Global gRUiDB Interface P2-1","func":"var Global;\nGlobal=global.get('gRUiDB');\n\nvar Category=Global.Category;\nCategory={payload:Category};\n\nvar Description=Global.Description;\nDescription={payload:Description};\n\nvar Location=Global.Location;\nLocation={payload:Location};\n\nvar Address=Global.Address;\nAddress={payload:Address};\n\nvar Topology=Global.Topology;\nTopology={payload:Topology};\n\nvar MapURL=Global.MapURL;\nMapURL={payload:MapURL};\n\nreturn [Category,Description,Location,Address,Topology, MapURL]; ","outputs":6,"noerr":0,"x":4250,"y":1700,"wires":[["945c85a9.e8c248"],["2a0ceeda.78f8a2","b17f0fa.68a3df","a77abdbf.e0881"],["e2cbe407.151418","4b296e9d.bf0c9"],["e56718d.33a22e8","f6204154.150a6"],["724b468b.a51118","b5e772d2.8c418"],["50626764.8862d8","582cd27.ca9c02c"]]},{"id":"8fdd31e6.f01","type":"function","z":"596fa7a0.139bc8","name":"F Global gRUiDB Interface P2-2","func":"var Global;\nGlobal=global.get('gRUiDB');\n\nvar Inhabitant_1_ID=Global.Inhabitant_1_ID;\nInhabitant_1_ID={payload:Inhabitant_1_ID};\n\nvar Inhabitant_2_ID=Global.Inhabitant_2_ID;\nInhabitant_2_ID={payload:Inhabitant_2_ID};\n\nvar Inhabitant_3_ID=Global.Inhabitant_3_ID;\nInhabitant_3_ID={payload:Inhabitant_3_ID};\n\nvar Inhabitant_4_ID=Global.Inhabitant_4_ID;\nInhabitant_4_ID={payload:Inhabitant_4_ID};\n\nvar Inhabitant_5_ID=Global.Inhabitant_5_ID;\nInhabitant_5_ID={payload:Inhabitant_5_ID};\n\nvar Inhabitant_6_ID=Global.Inhabitant_6_ID;\nInhabitant_6_ID={payload:Inhabitant_6_ID};\n\nreturn [Inhabitant_1_ID,Inhabitant_2_ID,Inhabitant_3_ID,Inhabitant_4_ID,Inhabitant_5_ID,Inhabitant_6_ID]; ","outputs":6,"noerr":0,"x":4250,"y":1920,"wires":[["32fab35b.86d0dc","6e7cdc0b.ae08b4"],["de10f7cd.b2a4e8","aeec1c78.eb54d"],["3e8d7088.67827","367e539d.e850fc"],["f6b25143.4c847","c8215851.fad808"],["74b9ed97.a01c74","1dbbccc1.ec6c43"],["dfe56814.fcab18","6d8a08e6.b51578"]]},{"id":"a77abdbf.e0881","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":5,"width":6,"height":1,"name":"Category","label":"<font color= {{msg.color}} > Category</font>","format":"<font color= {{msg.strongcolor}} > {{msg.payload}} </font>","layout":"row-spread","x":4880,"y":1340,"wires":[]},{"id":"2a0ceeda.78f8a2","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":3,"width":6,"height":1,"name":"Description","label":"<font color= {{msg.color}} > Description</font>","format":"<font color= {{msg.strongcolor}} > {{msg.payload}} </font>","layout":"row-spread","x":4890,"y":1420,"wires":[]},{"id":"e2cbe407.151418","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":4,"width":6,"height":1,"name":"Location","label":"<font color= {{msg.color}} > Location</font>","format":"{{msg.payload}}","layout":"row-spread","x":4880,"y":1500,"wires":[]},{"id":"e56718d.33a22e8","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":7,"width":6,"height":1,"name":"Address","label":"<font color= {{msg.color}} > Address</font>","format":"{{msg.payload}}","layout":"row-spread","x":4880,"y":1580,"wires":[]},{"id":"32fab35b.86d0dc","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":9,"width":6,"height":1,"name":"Inhabitant_1_ID","label":"<font color= {{msg.color}} > Inhabitant 1</font>","format":"{{msg.payload}}","layout":"row-spread","x":4900,"y":1920,"wires":[]},{"id":"de10f7cd.b2a4e8","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":10,"width":6,"height":1,"name":"Inhabitant_2_ID","label":"<font color= {{msg.color}} > Inhabitant 2</font>","format":"{{msg.payload}}","layout":"row-spread","x":4900,"y":2000,"wires":[]},{"id":"3e8d7088.67827","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":12,"width":6,"height":1,"name":"Inhabitant_3_ID","label":"<font color= {{msg.color}} > Inhabitant 3</font>","format":"{{msg.payload}}","layout":"row-spread","x":4900,"y":2080,"wires":[]},{"id":"f6b25143.4c847","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":11,"width":6,"height":1,"name":"Inhabitant_4_ID","label":"<font color= {{msg.color}} > Inhabitant 4</font>","format":"{{msg.payload}}","layout":"row-spread","x":4900,"y":2160,"wires":[]},{"id":"74b9ed97.a01c74","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":13,"width":6,"height":1,"name":"Inhabitant_5_ID","label":"<font color= {{msg.color}} > Inhabitant 5</font>","format":"{{msg.payload}}","layout":"row-spread","x":4900,"y":2240,"wires":[]},{"id":"dfe56814.fcab18","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":14,"width":6,"height":1,"name":"Inhabitant_6_ID","label":"<font color= {{msg.color}} > Inhabitant 6</font>","format":"{{msg.payload}}","layout":"row-spread","x":4900,"y":2320,"wires":[]},{"id":"19847bca.7656c4","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RUnitDB DELETE ALL","func":"var SQLDELETEALL={\"topic\" : \"DELETE FROM RUnitDB\"};\n\nreturn SQLDELETEALL","outputs":1,"noerr":0,"x":3870,"y":3360,"wires":[[]]},{"id":"28222fe2.d1d95","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RUnitDB INSERT ","func":"var nRUiDB= global.get('nRUiDB')||[];\n\nglobal.set('nRUiDB',msg.payload[0]);\nnRUiDB=global.get('nRUiDB');\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RUnitDB(ID,Category,Description,DateCreated,DateModified,\" +\n    \"Topology,Location,Address,Inhabitant_1_ID,Inhabitant_2_ID,Inhabitant_3_ID,\" +\n    \"Inhabitant_4_ID,Inhabitant_5_ID,Inhabitant_6_ID,MapURL) VALUES (\" + \n    nRUiDB.ID + \", \" + \n    \"\\\"\" + nRUiDB.Category + \"\\\"\" + \", \" +  \n    \"\\\"\" + nRUiDB.Description + \"\\\"\" + \", \" + \n    \"\\\"\" + nRUiDB.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + nRUiDB.DateModified + \"\\\"\" + \", \" + \n    \"\\\"\" + nRUiDB.Topology + \"\\\"\" + \", \" + \n    \"\\\"\" + nRUiDB.Location + \"\\\"\"  + \", \" + \n    \"\\\"\" + nRUiDB.Address + \"\\\"\" + \", \" + \n    nRUiDB.Inhabitant_1_ID + \", \" +\n    nRUiDB.Inhabitant_2_ID + \", \" +\n    nRUiDB.Inhabitant_3_ID + \", \" + \n    nRUiDB.Inhabitant_4_ID + \", \" + \n    nRUiDB.Inhabitant_5_ID + \", \" +\n    nRUiDB.Inhabitant_6_ID + \", \" + \n    \"\\\"\" + nRUiDB.MapURL + \"\\\"\" + \")\"\n}\n\nnRUiDB={payload:nRUiDB};\n\nreturn [SQLInsert,nRUiDB];","outputs":2,"noerr":0,"x":3790,"y":2380,"wires":[["37352290.eda4be","219966e4.013f3a"],["11c2cdbd.96c422"]]},{"id":"37352290.eda4be","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":3760,"y":2300,"wires":[]},{"id":"219966e4.013f3a","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4101.2063064575195,"y":2372.91650390625,"wires":[["a2060d26.8c01e","c42ad45c.cff218"]]},{"id":"a2060d26.8c01e","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4090,"y":2300,"wires":[]},{"id":"11c2cdbd.96c422","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":3753.40869140625,"y":2418.4522094726562,"wires":[]},{"id":"c42ad45c.cff218","type":"function","z":"596fa7a0.139bc8","name":"F SELECT LAST RESID","func":"var SQLSELECTLAST={\"topic\" : \"SELECT * FROM RUnitDB WHERE ID = ( SELECT MAX( ID ) FROM RUnitDB )\"};\nreturn SQLSELECTLAST;","outputs":1,"noerr":0,"x":3750,"y":2500,"wires":[["d2d9c152.48aad"]]},{"id":"d2d9c152.48aad","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4100.1350173950195,"y":2491.726137161255,"wires":[["3f129750.7cf728","4fd98c9b.561334","3cda4443.233eec","cbf1bd80.c7cba","972eb5da.fb43a8","ff12c529.383968","ccf69c9b.c75e3","e9878c76.eb43b"]]},{"id":"3f129750.7cf728","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4345.1350173950195,"y":2493.154725074768,"wires":[]},{"id":"44f6ce44.5c8fe","type":"mqtt in","z":"596fa7a0.139bc8","name":"InsertNewRUi","topic":"ETMP/InsertNewRUi","qos":"2","datatype":"auto","broker":"cb7c4e4.778afb","x":3330,"y":2380,"wires":[["ee67164d.715068"]]},{"id":"ee67164d.715068","type":"json","z":"596fa7a0.139bc8","name":"","property":"payload","action":"","pretty":false,"x":3549.956310272217,"y":2378.928373336792,"wires":[["c90d715e.9a986","28222fe2.d1d95"]]},{"id":"c90d715e.9a986","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":3549.0634727478027,"y":2303.035520553589,"wires":[]},{"id":"3682706c.eda6a","type":"comment","z":"596fa7a0.139bc8","name":"Show all RUi registered","info":"","x":3520,"y":1340,"wires":[]},{"id":"4fd98c9b.561334","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RU_OrchDB INSERT","func":"var msg1=msg.payload[0];\n\nvar msg2={};\n\nvar now     = new Date(); \n\nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nmsg2.DateCreated=year+'.'+month+'.'+day;\nmsg2.DateModified=year+'.'+month+'.'+day;  \n\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RU_OrchDB(ID,RefResidentialID,DateCreated,DateModified) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + msg1.ID+ \"\\\"\" + \", \" + \n    \"\\\"\" + msg2.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + msg2.DateModified + \"\\\"\" + \")\"\n}\nreturn SQLInsert;","outputs":1,"noerr":0,"x":3777.2183227539062,"y":2569.404604911804,"wires":[["cb57227a.63cb"]]},{"id":"cb57227a.63cb","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4102.2182693481445,"y":2568.15460395813,"wires":[["c17e9f84.e7f51"]]},{"id":"c17e9f84.e7f51","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4344.7182693481445,"y":2568.1546058654785,"wires":[]},{"id":"3cda4443.233eec","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RU_HAOperationsDB","func":"var msg1=msg.payload[0];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RU_HAOperationsDB(ID,RefResidentialID,DateCreated,DateModified) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + msg1.ID + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateModified + \"\\\"\" + \")\"\n}\nreturn SQLInsert;","outputs":1,"noerr":0,"x":3785.96826171875,"y":2636.9046058654785,"wires":[["3b7b779c.d9caa8"]]},{"id":"3b7b779c.d9caa8","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4104.7182540893555,"y":2635.654586791992,"wires":[["daf0d53f.dce868"]]},{"id":"daf0d53f.dce868","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4342.2182540893555,"y":2634.404586791992,"wires":[]},{"id":"cbf1bd80.c7cba","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RU_EEOperationsDB INSERT","func":"var msg1=msg.payload[0];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RU_EEOperationsDB(ID,RefResidentialID,DateCreated,DateModified) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + msg1.ID + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateModified + \"\\\"\" + \")\"\n}\nreturn SQLInsert;","outputs":1,"noerr":0,"x":3802.218292236328,"y":2701.9046058654785,"wires":[["bb6bcab.230b838"]]},{"id":"bb6bcab.230b838","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4105.9682540893555,"y":2700.654586791992,"wires":[["fdb27362.46509"]]},{"id":"fdb27362.46509","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4340.9682540893555,"y":2698.154586791992,"wires":[]},{"id":"972eb5da.fb43a8","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RU_SEOperationsDB INSERT","func":"var msg1=msg.payload[0];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RU_SEOperationsDB(ID,RefResidentialID,DateCreated,DateModified) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + msg1.ID + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateModified + \"\\\"\" + \")\"\n}\nreturn SQLInsert;","outputs":1,"noerr":0,"x":3808.46826171875,"y":2765.654607772827,"wires":[["c72e0ae8.f47788"]]},{"id":"c72e0ae8.f47788","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4104.7182540893555,"y":2765.654586791992,"wires":[["3fa83ae8.966986"]]},{"id":"3fa83ae8.966986","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4343.4682540893555,"y":2763.154586791992,"wires":[]},{"id":"ff12c529.383968","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RU_SAOperationsDB INSERT","func":"var msg1=msg.payload[0];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RU_SAOperationsDB(ID,RefResidentialID,DateCreated,DateModified) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + msg1.ID + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateModified + \"\\\"\" + \")\"\n}\nreturn SQLInsert;","outputs":1,"noerr":0,"x":3808.46826171875,"y":2830.6546087265015,"wires":[["45b1f914.8e1738"]]},{"id":"45b1f914.8e1738","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4100.9682540893555,"y":2830.654586791992,"wires":[["9dccee35.45687"]]},{"id":"9dccee35.45687","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4342.2182540893555,"y":2829.404586791992,"wires":[]},{"id":"ccf69c9b.c75e3","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RU_HASOperationsDB INSERT","func":"var msg1=msg.payload[0];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RU_HASOperationsDB(ID,RefResidentialID,DateCreated,DateModified) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + msg1.ID + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateModified + \"\\\"\" + \")\"\n}\nreturn SQLInsert;","outputs":1,"noerr":0,"x":3815.96826171875,"y":2896.904609680176,"wires":[["d5a912d0.79578"]]},{"id":"d5a912d0.79578","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4105.9682540893555,"y":2898.154586791992,"wires":[["57e9872d.aa3e08"]]},{"id":"57e9872d.aa3e08","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4342.2182540893555,"y":2898.154586791992,"wires":[]},{"id":"e9878c76.eb43b","type":"function","z":"596fa7a0.139bc8","name":"F GeoA RU_SMOperationsDB INSERT","func":"var msg1=msg.payload[0];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RU_SMOperationsDB(ID,RefResidentialID,DateCreated,DateModified) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + msg1.ID + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateCreated + \"\\\"\" + \", \" + \n    \"\\\"\" + msg1.DateModified + \"\\\"\" + \")\"\n}\nreturn SQLInsert;","outputs":1,"noerr":0,"x":3802.21826171875,"y":2964.4046115875244,"wires":[["669fade.2c8a954"]]},{"id":"669fade.2c8a954","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GeographicA_DB","x":4100.9682540893555,"y":2965.654586791992,"wires":[["dfa4ece1.878df"]]},{"id":"dfa4ece1.878df","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":4338.4682540893555,"y":2964.404586791992,"wires":[]},{"id":"6d93edcc.5003a4","type":"link in","z":"596fa7a0.139bc8","name":"Start_Fill_RUis","links":["13bfca27.d090e6"],"x":3395,"y":1420,"wires":[["c1a26374.3c6a3"]]},{"id":"48ff0d1.af2e1f4","type":"link out","z":"596fa7a0.139bc8","name":"SELECT_RUi","links":["10c36275.8b064e","17896b38.10b385","2b85db18.9bd334","3b24aa81.3d9b26","7d0001b9.cda07","9afe2626.f7c8b8","9f6d62aa.48b15","b171f1fa.da8f9","e97b6dd3.8333c","f40233e7.e5f98"],"x":4019.527671813965,"y":1587.2500791549683,"wires":[]},{"id":"b4f140d5.96358","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"lightgreen","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4149.527671813965,"y":1517.2500791549683,"wires":[["2a5a274f.dcaf48"]]},{"id":"4b296e9d.bf0c9","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"orange","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1460,"wires":[["e2cbe407.151418"]]},{"id":"b17f0fa.68a3df","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"orange","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1380,"wires":[["2a0ceeda.78f8a2"]]},{"id":"945c85a9.e8c248","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"orange","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"},{"t":"set","p":"font","pt":"msg","to":"arial","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1300,"wires":[["a77abdbf.e0881"]]},{"id":"f6204154.150a6","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"orange","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1540,"wires":[["e56718d.33a22e8"]]},{"id":"724b468b.a51118","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"orange","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1620,"wires":[["b5e772d2.8c418"]]},{"id":"b5e772d2.8c418","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":6,"width":6,"height":1,"name":"Topology","label":"<font color= {{msg.color}} > Topology</font>","format":"{{msg.payload}}","layout":"row-spread","x":4880,"y":1660,"wires":[]},{"id":"50626764.8862d8","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"orange","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1700,"wires":[["582cd27.ca9c02c"]]},{"id":"582cd27.ca9c02c","type":"ui_text","z":"596fa7a0.139bc8","group":"a71ec147.54077","order":8,"width":6,"height":1,"name":"MapURL","label":"<font color= {{msg.color}} > MapURL</font>","format":"{{msg.payload}}","layout":"row-spread","x":4880,"y":1740,"wires":[]},{"id":"6e7cdc0b.ae08b4","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"black","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1880,"wires":[["32fab35b.86d0dc"]]},{"id":"aeec1c78.eb54d","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"black","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":1960,"wires":[["de10f7cd.b2a4e8"]]},{"id":"367e539d.e850fc","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"black","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":2040,"wires":[["3e8d7088.67827"]]},{"id":"c8215851.fad808","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"black","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":2120,"wires":[["f6b25143.4c847"]]},{"id":"1dbbccc1.ec6c43","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"black","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":2200,"wires":[["74b9ed97.a01c74"]]},{"id":"6d8a08e6.b51578","type":"change","z":"596fa7a0.139bc8","name":"Set colors","rules":[{"t":"set","p":"color","pt":"msg","to":"black","tot":"str"},{"t":"set","p":"strongcolor","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4880,"y":2280,"wires":[["dfe56814.fcab18"]]},{"id":"4c8d6f30.d4c1e","type":"function","z":"551be607.5d9aa8","name":"Function Setup - GEO Map","func":"\nvar BuildingUnits = {\n\"type\": \"FeatureCollection\",\n\"features\": [\n  { \n    \"type\": \"Feature\", \n    \"properties\": { \n                    \"category\": 33, \n                    \"name\": \"Hospital 1\", \n                    \"alt_name\": \"\", \n                    \"aerialway\": \"\", \n                    \"aeroway\": \"\", \n                    \"amenity\": \"hospital\", \n                    \"barrier\": \"\", \n                    \"boundary\": \"\", \n                    \"building\": \"\", \n                    \"craft\": \"\", \n                    \"emergency\": \"yes\",\n                    \"geological\": \"\",\n                    \"highway\": \"\", \n                    \"historic\": \"\", \n                    \"landuse\": \"\", \n                    \"leisure\": \"\", \n                    \"man_made\": \"\", \n                    \"military\": \"\", \n                    \"natural\": \"\", \n                    \"office\": \"\", \n                    \"place\": \"\", \n                    \"power\": \"\", \n                    \"public_transport\": \"\", \n                    \"railway\": \"\", \n                    \"route\": \"\", \n                    \"shop\": \"\", \n                    \"sport\": \"\", \n                    \"telecom\": \"\", \n                    \"tourism\": \"\", \n                    \"waterway\": \"\",\n                },\n    \"geometry\": { \n                    \"type\": \"Point\", \n                    \"coordinates\": [ -8.6234, 41.1664 ]\n                } \n    },\n      \n    {\n    \"type\": \"Feature\",\n    \"properties\":{\n                    \"height\": 8.8,\n                    \"color\": \"#e3e1c8\",\n                    \"roofColor\": \"#b4c9b3\",\n                    \"roofShape\": \"gabled\",\n                    \"roofHeight\": 1.3,\n                    \"roofDirection\": 237.9\n                 },\n     \"geometry\": {\n                    \"type\": \"Polygon\",\n                    \"coordinates\": [\n                                        [\n                                            [-8.623488, 41.169056],\n                                            [-8.623496, 41.169059],\n                                            [-8.623499, 41.169060],\n                                            [-8.623534, 41.169026],\n                                            [-8.623532, 41.169025],\n                                            [-8.623524, 41.169023],\n                                            [-8.623488, 41.169056]\n                                        ]\n                                    ]\n                 }\n    },\n    \n    { \n    \"type\": \"Feature\", \n    \"properties\": { \n                    \"category\": 33, \n                    \"name\": \"Hospital 2\", \n                    \"alt_name\": \"\", \n                    \"aerialway\": \"\", \n                    \"aeroway\": \"\", \n                    \"amenity\": \"hospital\", \n                    \"barrier\": \"\", \n                    \"boundary\": \"\", \n                    \"building\": \"\", \n                    \"craft\": \"\", \n                    \"emergency\": \"yes\",\n                    \"geological\": \"\",\n                    \"highway\": \"\", \n                    \"historic\": \"\", \n                    \"landuse\": \"\", \n                    \"leisure\": \"\", \n                    \"man_made\": \"\", \n                    \"military\": \"\", \n                    \"natural\": \"\", \n                    \"office\": \"\", \n                    \"place\": \"\", \n                    \"power\": \"\", \n                    \"public_transport\": \"\", \n                    \"railway\": \"\", \n                    \"route\": \"\", \n                    \"shop\": \"\", \n                    \"sport\": \"\", \n                    \"telecom\": \"\", \n                    \"tourism\": \"\", \n                    \"waterway\": \"\" \n                },\n    \"geometry\": { \n                    \"type\": \"Point\", \n                    \"coordinates\": [ -8.6254, 41.1674 ]\n                } \n     }\n   ]\n} \n\n\nvar BUi = {overlay:\"BuildingUnits\", geojson:BuildingUnits, fit:true};\n\n\nvar SetupMAP = { \"command\": { \"layer\":\"Esri Satellite\",\n                               \"lat\":41.1664, \n                               \"lon\":-8.6234, \n                               \"zoom\":16,\n                               \"showlayer\":[\"BuildingUnits\",\"countries\"],\n                               \"hidelayer\":[\"Leaflet\"],\n                               \"hidelayermenu\":true,\n                               \"panlock\":true,\n                               \"zoomlock\":true,\n                               \"usermenu\":\"hide\",\n                               \"hiderightclick\":true,\n                               \"map\":BUi\n                          }\n            };\n\nSetupMAP={payload:SetupMAP};\n\nreturn SetupMAP;","outputs":1,"noerr":0,"x":680,"y":2180,"wires":[["dcd9010a.74a21"]]},{"id":"81e6d38a.ba7fb","type":"link in","z":"551be607.5d9aa8","name":"GA_START","links":["13bfca27.d090e6"],"x":275,"y":220,"wires":[["ad319f0c.ba262"]]},{"id":"6ee193eb.7f564c","type":"comment","z":"fc65fec6.42377","name":"BUk -  MAP REPRESENTATION AND SETUP OF BU","info":"","x":310,"y":100,"wires":[]},{"id":"eb0d1b9b.75a6c8","type":"inject","z":"4c6af78d.1f6d78","name":"","topic":"Museum","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":260,"wires":[["9cf53eaa.e0c94"]]},{"id":"9cf53eaa.e0c94","type":"http request","z":"4c6af78d.1f6d78","name":"","method":"GET","ret":"obj","url":"https://gist.githubusercontent.com/ryanbaumann/a7d970386ce59d11c16278b90dde094d/raw/8c384b4e418670a35dc054ab7da6638ff4073a69/indoor_3D_map_example.geojson","tls":"","x":290,"y":260,"wires":[["e0700976.d4f288"]]},{"id":"e0700976.d4f288","type":"function","z":"4c6af78d.1f6d78","name":"","func":"var m = {overlay:msg.topic, geojson:msg.payload, fit:true};\n\nmsg.payload = {command:{map:m, lat:41.86672, lon:-87.61751}};\n\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":260,"wires":[["685ed392.862d7c"]]},{"id":"685ed392.862d7c","type":"worldmap","z":"4c6af78d.1f6d78","name":"","lat":"","lon":"","zoom":"","layer":"","cluster":"","maxage":"","usermenu":"show","layers":"show","panit":"false","hiderightclick":"false","coords":"none","x":490,"y":160,"wires":[]},{"id":"4eb7a371.a03eec","type":"worldmap","z":"14e6b0a5.2fa43f","name":"","hiderightclick":"false","coords":"none","x":590,"y":260,"wires":[]},{"id":"cf88dcdf.72a9b","type":"inject","z":"14e6b0a5.2fa43f","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":160,"y":240,"wires":[["a3509d72.ae56f"]]},{"id":"a3509d72.ae56f","type":"function","z":"14e6b0a5.2fa43f","name":"Add person to map","func":"var thing = {\n    name:\"Hotel 1\", \n    lat:41.1665, \n    lon:-8.6234,\n    icon:\"hotel\",\n    iconColor:\"darkred\",\n    extrainfo:\"Hotel\"\n};\nmsg.payload = thing;\nreturn msg;","outputs":1,"noerr":0,"x":350,"y":260,"wires":[["4eb7a371.a03eec"]]},{"id":"41c3ec73.7bde74","type":"comment","z":"14e6b0a5.2fa43f","name":"Simple map - click inject to send point to map.","info":"Adds a map at http://(your-server-ip):1880/worldmap. \n\nThe `function` node creates an object with some basic properties required to add to a map.","x":290,"y":180,"wires":[]},{"id":"bca27a68.c50778","type":"function","z":"551be607.5d9aa8","name":"Haversine - Distance","func":"var haversine = global.get('haversine')\n\nvar GPSPoints=msg.payload;\n\nvar distance=haversine(GPSPoints.start,GPSPoints.end,{unit: 'meter'});\n\nGPSPoints={payload:GPSPoints};\n\ndistance={payload:distance};\nreturn [distance, GPSPoints];","outputs":2,"noerr":0,"x":1940,"y":2180,"wires":[["1dd8ccd1.5320c3"],["1c058dac.ee28e2"]]},{"id":"1dd8ccd1.5320c3","type":"debug","z":"551be607.5d9aa8","name":"Distance","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":2140,"y":2180,"wires":[]},{"id":"a743d28a.eb687","type":"inject","z":"551be607.5d9aa8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":1510,"y":2240,"wires":[["fc3a7a44.09ebc8"]]},{"id":"1c058dac.ee28e2","type":"debug","z":"551be607.5d9aa8","name":"GPS Data","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":2140,"y":2240,"wires":[]},{"id":"fc3a7a44.09ebc8","type":"ui_form","z":"551be607.5d9aa8","name":"GPS Data","label":"Distance Data","group":"74d0efb1.9fdec","order":4,"width":"8","height":"10","options":[{"label":"Start.Latitude","value":"SLatitude","type":"number","required":true,"rows":null},{"label":"Start.Longitude","value":"SLongitude","type":"number","required":true,"rows":null},{"label":"End.Latitude","value":"ELatitude","type":"number","required":true,"rows":null},{"label":"End.Longitude","value":"ELongitude","type":"number","required":true,"rows":null}],"formValue":{"SLatitude":"","SLongitude":"","ELatitude":"","ELongitude":""},"payload":"","submit":"submit","cancel":"cancel","topic":"Distance","x":1710,"y":2240,"wires":[["ca7491e5.76d6a"]]},{"id":"ca7491e5.76d6a","type":"function","z":"551be607.5d9aa8","name":"ReadDataFromForm","func":"var formData = msg.payload;\n\nvar GPSData = [];\n\nGPSData.push(formData.SLatitude);\nGPSData.push(formData.SLongitude);\nGPSData.push(formData.ELatitude);\nGPSData.push(formData.ELongitude);\n\nvar GPSPoints={\"start\": { \n                          latitude:formData.SLatitude,\n                          longitude:formData.SLongitude\n                        },\n                \"end\":{ \n                         latitude:formData.ELatitude,\n                         longitude:formData.ELongitude\n                }\n};\n\nGPSPoints={payload:GPSPoints};\nreturn GPSPoints;","outputs":1,"noerr":0,"x":1920,"y":2240,"wires":[["bca27a68.c50778"]]},{"id":"6202cceb.f6e764","type":"ping","z":"fa7fbb2c.b9a6e8","mode":"timed","name":"","host":"calendar.google.com","timer":"10","inputs":0,"x":201,"y":112.29861259460449,"wires":[["39188ba6.5c1824","1771f704.431a99","b8932eb2.fbb93","87c96ff3.7b224"]]},{"id":"80da8241.085ae","type":"ping","z":"fa7fbb2c.b9a6e8","mode":null,"name":"","host":"mail.google.com","timer":"10","inputs":0,"x":190.62152099609375,"y":182.35068321228027,"wires":[["39188ba6.5c1824","32a43880.4e0f38","fc93dcec.c3633","87c96ff3.7b224"]]},{"id":"a864f5f5.e34398","type":"ping","z":"fa7fbb2c.b9a6e8","mode":null,"name":"","host":"drive.google.com","timer":"10","inputs":0,"x":193.62152099609375,"y":294.3506832122803,"wires":[["39188ba6.5c1824","98739ed7.92119","e9de55fa.9847a8","87c96ff3.7b224"]]},{"id":"c6f78d57.1eb26","type":"ping","z":"fa7fbb2c.b9a6e8","name":"","host":"docs.google.com","timer":"10","inputs":0,"x":192.62152099609375,"y":397.3506832122803,"wires":[["39188ba6.5c1824","268c5cb4.5f4ab4","7768f631.d3e3d8","87c96ff3.7b224"]]},{"id":"39188ba6.5c1824","type":"debug","z":"fa7fbb2c.b9a6e8","name":"","active":true,"console":"false","complete":"false","x":544.5555877685547,"y":214.57639694213867,"wires":[]},{"id":"1771f704.431a99","type":"ui_gauge","z":"fa7fbb2c.b9a6e8","name":"Google Calendar","group":"13bd550e.1d882b","order":1,"width":"3","height":"3","gtype":"gage","title":"Google Calendar","label":"ms","format":"{{value}}","min":0,"max":"260","colors":["#00b500","#e6e600","#ca3838"],"x":568.5522308349609,"y":51,"wires":[]},{"id":"32a43880.4e0f38","type":"ui_gauge","z":"fa7fbb2c.b9a6e8","name":"Google Mail","group":"13bd550e.1d882b","order":2,"width":"3","height":"3","gtype":"gage","title":"Google Mail","label":"ms","format":"{{value}}","min":0,"max":"260","colors":["#00b500","#e6e600","#ca3838"],"x":545.6215057373047,"y":132.3506736755371,"wires":[]},{"id":"98739ed7.92119","type":"ui_gauge","z":"fa7fbb2c.b9a6e8","name":"Google Drive","group":"13bd550e.1d882b","order":3,"width":"3","height":"3","gtype":"gage","title":"Google Drive","label":"ms","format":"{{value}}","min":0,"max":"260","colors":["#00b500","#e6e600","#ca3838"],"x":543.6215057373047,"y":256.3506736755371,"wires":[]},{"id":"268c5cb4.5f4ab4","type":"ui_gauge","z":"fa7fbb2c.b9a6e8","name":"Google Docs","group":"13bd550e.1d882b","order":4,"width":"3","height":"3","gtype":"gage","title":"Google Docs","label":"ms","format":"{{value}}","min":0,"max":"260","colors":["#00b500","#e6e600","#ca3838"],"x":540.6215057373047,"y":338.3506736755371,"wires":[]},{"id":"426d2411.9b19ac","type":"ui_chart","z":"fa7fbb2c.b9a6e8","name":"","group":"83e769eb.48a6f8","order":0,"width":"18","height":"8","label":"","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"outputs":1,"x":664.0104217529297,"y":514.1701622009277,"wires":[[]]},{"id":"b8932eb2.fbb93","type":"ui_template","z":"fa7fbb2c.b9a6e8","group":"13bd550e.1d882b","name":"calendar.google.com","order":5,"width":"3","height":"1","format":"<style>\n #btn2 {\n -moz-border-radius: 10px;\n -webkit-border-radius: 10px;\n display: inline;\n}\n</style>\n\n<div id = \"btn2\" style=\"font-size:10px;width: 100px; margin:0 auto;height: 15px;padding-top:5px;\"\n ng-style=\"{'background-color': msg.payload === false ? 'red' : 'green'}\">\n <center>{{msg.payload === false ? 'DOWN' : '&nbsp;&nbsp;&nbsp;UP&nbsp;&nbsp;&nbsp;'}}</center>\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":577.0069427490234,"y":89.3819465637207,"wires":[[]]},{"id":"fc93dcec.c3633","type":"ui_template","z":"fa7fbb2c.b9a6e8","group":"13bd550e.1d882b","name":"mail.google.com/mail/u/0/","order":6,"width":"3","height":"1","format":"<style>\n #btn2 {\n -moz-border-radius: 10px;\n -webkit-border-radius: 10px;\n display: inline;\n}\n</style>\n\n<div id = \"btn2\" style=\"font-size:10px;width: 100px; margin:0 auto;height: 15px;padding-top:5px;\"\n ng-style=\"{'background-color': msg.payload === false ? 'red' : 'green'}\">\n <center>{{msg.payload === false ? 'DOWN' : '&nbsp;&nbsp;&nbsp;UP&nbsp;&nbsp;&nbsp;'}}</center>\n</div>\n\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":585.0034942626953,"y":173.3819694519043,"wires":[[]]},{"id":"e9de55fa.9847a8","type":"ui_template","z":"fa7fbb2c.b9a6e8","group":"13bd550e.1d882b","name":"drive.google.com","order":7,"width":"3","height":"1","format":"<style>\n #btn2 {\n -moz-border-radius: 10px;\n -webkit-border-radius: 10px;\n display: inline;\n}\n</style>\n\n<div id = \"btn2\" style=\"font-size:10px;width: 100px; margin:0 auto;height: 15px;padding-top:5px;\"\n ng-style=\"{'background-color': msg.payload === false ? 'red' : 'green'}\">\n <center>{{msg.payload === false ? 'DOWN' : '&nbsp;&nbsp;&nbsp;UP&nbsp;&nbsp;&nbsp;'}}</center>\n</div>\n\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":563.0104217529297,"y":298.39236068725586,"wires":[[]]},{"id":"7768f631.d3e3d8","type":"ui_template","z":"fa7fbb2c.b9a6e8","group":"13bd550e.1d882b","name":"docs.google.com","order":8,"width":"3","height":"1","format":"<style>\n #btn2 {\n -moz-border-radius: 10px;\n -webkit-border-radius: 10px;\n display: inline;\n}\n</style>\n\n<div id = \"btn2\" style=\"font-size:10px;width: 100px; margin:0 auto;height: 15px;padding-top:5px;\"\n ng-style=\"{'background-color': msg.payload === false ? 'red' : 'green'}\">\n <center>{{msg.payload === false ? 'DOWN' : '&nbsp;&nbsp;&nbsp;UP&nbsp;&nbsp;&nbsp;'}}</center>\n</div>\n\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":559.6215057373047,"y":385.35070419311523,"wires":[[]]},{"id":"87c96ff3.7b224","type":"function","z":"fa7fbb2c.b9a6e8","name":"","func":"if(msg.payload > 259){\n msg.payload = 260;\n}\nreturn msg;","outputs":1,"noerr":0,"x":469.22569274902344,"y":516.4617881774902,"wires":[["426d2411.9b19ac"]]},{"id":"5c59ee32.322ac","type":"exec","z":"4534bb98.fe4de4","command":"\"C:\\Program Files\\Wireshark\\tshark.exe\"","addpay":false,"append":"-i Wi-Fi -w C:\\Users\\manue\\capture-output.pcap","useSpawn":"true","timer":"60","oldrc":false,"name":"tshark capture","x":300,"y":140,"wires":[["984c803.eb6a88"],["ae26d2b.cc1973"],["185f320f.d96fee"]]},{"id":"faaec40d.6763c8","type":"inject","z":"4534bb98.fe4de4","name":"Capture","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":140,"wires":[["5c59ee32.322ac"]]},{"id":"984c803.eb6a88","type":"debug","z":"4534bb98.fe4de4","name":"STDout","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":660,"y":80,"wires":[]},{"id":"ae26d2b.cc1973","type":"debug","z":"4534bb98.fe4de4","name":"b","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":650,"y":140,"wires":[]},{"id":"185f320f.d96fee","type":"debug","z":"4534bb98.fe4de4","name":"c","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":650,"y":200,"wires":[]},{"id":"74bde7d1.9cc5e8","type":"exec","z":"4534bb98.fe4de4","command":"\"C:\\Program Files\\Wireshark\\tshark.exe\"","addpay":false,"append":"-r capture-output.pcap","useSpawn":"false","timer":"","oldrc":false,"name":"","x":380,"y":300,"wires":[["78ae62af.be77dc"],["e33675ca.96e2d8"],["10f2852c.c4ab3b"]]},{"id":"fd6589af.4edff8","type":"inject","z":"4534bb98.fe4de4","name":"Read","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":300,"wires":[["74bde7d1.9cc5e8"]]},{"id":"78ae62af.be77dc","type":"debug","z":"4534bb98.fe4de4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":680,"y":280,"wires":[]},{"id":"e33675ca.96e2d8","type":"debug","z":"4534bb98.fe4de4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":680,"y":340,"wires":[]},{"id":"10f2852c.c4ab3b","type":"debug","z":"4534bb98.fe4de4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":680,"y":400,"wires":[]},{"id":"aac0b9e2.6eaa08","type":"debug","z":"6e5a5564.0bea8c","name":"","active":true,"tosidebar":true,"console":false,"complete":"false","x":590,"y":280,"wires":[]},{"id":"976bd940.b28108","type":"inject","z":"6e5a5564.0bea8c","name":"","topic":"","payload":"Maria","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":170,"y":160,"wires":[["f6ede58f.6bd4b8"]]},{"id":"f6ede58f.6bd4b8","type":"ui_template","z":"6e5a5564.0bea8c","group":"c4b08f06.6f347","name":"testing payload","order":3,"width":"6","height":"6","format":"<h3>Testing dynamic scripts with Dashboard 2.0</h3>\n{{msg.payload}}\n\n\n<script>\n    (function(scope) {\n        console.log('Position 1');\n        console.dir(scope);\n        console.log(scope.msg);\n        scope.$watch('msg.payload', function(data) {\n            console.log('Position 2');\n            console.dir(data);\n        });\n    })(scope);\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":360,"y":120,"wires":[[]]},{"id":"c07d17e1.9b6da8","type":"inject","z":"6e5a5564.0bea8c","name":"","topic":"","payload":"Joana","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":190,"y":220,"wires":[["f6ede58f.6bd4b8","bd6a9e86.727ff"]]},{"id":"58c909f5.412a08","type":"debug","z":"13f967d7.460f48","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":830,"y":140,"wires":[]},{"id":"1587585f.7bedd8","type":"ui_template","z":"13f967d7.460f48","group":"d7ac243e.a930f8","name":"Mostra Tabela","order":1,"width":"12","height":"6","format":"<div layout=\"row\" layout-align=\"start center\">\n    <span flex><b>Data</b></span> \n    <span flex><b>Hora</b></span>\n    <span flex><b>Set Point Ar1</b></span> \n    <span flex><b>Set Point Ar2</b></span>\n    <span flex><b>Temperatura Ar1</b></span>\n    <span flex><b>Temperatura Ar2</b></span>\n</div>\n<div layout=\"row\" layout-align=\"start center\" ng-repeat=\"x in msg.payload | limitTo:20\">\n    <span flex>{{x.DATA}}</span>\n    <span flex style=\"color: green\">{{x.HORA}}</span>    \n    <span flex style=\"color: red\">{{x.SETPOINTAR1}}</span>\n    <span flex>{{x.SETPOINTAR2}}</span>\n    <span flex>{{x.TEMPERATURAAR1}}</span>\n    <span flex>{{x.TEMPERATURAAR2}}</span>\n    \n</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":820,"y":200,"wires":[[]]},{"id":"fb37a64e.a16388","type":"inject","z":"13f967d7.460f48","name":"Dataset","topic":"","payload":"[{\"DATA\":[51,48,47,48,52,47,50,48,49,57],\"HORA\":[49,48,58,50,49],\"SETPOINTAR1\":[51,48,46,48,48],\"SETPOINTAR2\":[50,50,46,48,48],\"TEMPERATURAAR1\":[50,55,46,53,48],\"TEMPERATURAAR2\":[49,55,46,55,48]},{\"DATA\":[51,48,47,48,52,47,50,48,49,57],\"HORA\":[49,49,58,50,49],\"SETPOINTAR1\":[51,50,46,53,53],\"SETPOINTAR2\":[49,50,46,52,48],\"TEMPERATURAAR1\":[49,55,46,55,56],\"TEMPERATURAAR2\":[50,55,46,49,48]},{\"DATA\":[48,51,47,48,53,47,50,48,49,57],\"HORA\":[49,49,58,53,56],\"SETPOINTAR1\":[51,49,46,48,48],\"SETPOINTAR2\":[50,51,46,48,48],\"TEMPERATURAAR1\":[50,57,46,53,48],\"TEMPERATURAAR2\":[52,55,46,55,48]}]","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":140,"wires":[["144930ed.61477f"]]},{"id":"13b5d29c.1508bd","type":"function","z":"13f967d7.460f48","name":"Array to Buffer","func":"msg.payload.DATA = Buffer.from(msg.payload.DATA);\nmsg.payload.SETPOINTAR1 = Buffer.from(msg.payload.SETPOINTAR1);\nmsg.payload.SETPOINTAR2 = Buffer.from(msg.payload.SETPOINTAR2);\nmsg.payload.TEMPERATURAAR1 = Buffer.from(msg.payload.TEMPERATURAAR1);\nmsg.payload.TEMPERATURAAR2 = Buffer.from(msg.payload.TEMPERATURAAR2);\n\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":140,"wires":[["d75b9f61.0bbe4"]]},{"id":"144930ed.61477f","type":"split","z":"13f967d7.460f48","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":210,"y":140,"wires":[["13b5d29c.1508bd"]]},{"id":"d75b9f61.0bbe4","type":"function","z":"13f967d7.460f48","name":"Buffer to String","func":"msg.payload.DATA = String.fromCharCode(...msg.payload.DATA);\nmsg.payload.HORA = String.fromCharCode(...msg.payload.HORA);\nmsg.payload.SETPOINTAR1 = String.fromCharCode(...msg.payload.SETPOINTAR1);\nmsg.payload.SETPOINTAR2 = String.fromCharCode(...msg.payload.SETPOINTAR2);\nmsg.payload.TEMPERATURAAR1 = String.fromCharCode(...msg.payload.TEMPERATURAAR1);\nmsg.payload.TEMPERATURAAR2 = String.fromCharCode(...msg.payload.TEMPERATURAAR2);\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":140,"wires":[["69e4f810.de5758"]]},{"id":"69e4f810.de5758","type":"join","z":"13f967d7.460f48","name":"","mode":"auto","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":690,"y":140,"wires":[["58c909f5.412a08","1587585f.7bedd8"]]},{"id":"4adcdd01.eaf984","type":"ui_template","z":"6d115eae.6e232","group":"c4b08f06.6f347","name":"","order":5,"width":0,"height":0,"format":"<!DOCTYPE html>\n<html>\n<body>\n    \n\n    <div>\n          <button id=\"btn1\" type=\"button\" class=\"button clear\" data-action=\"clear\">Clear</button>\n          <button id=\"btn2\" type=\"button\" class=\"button save\"  data-action=\"save\">Save</button>\n    </div>\n\n<md-button  id=\"btn1\" class=\"button save\" ng-click=\"send({topic:'clicked', payload:'Clear'})\">Clear</md-button>\n<md-button  id=\"btn2\" class=\"button save\" ng-click=\"send({topic:'clicked', payload:'Save'})\">Save</md-button>\n  \n  \n<script>\nvar x = document.getElementById(\"btn1\");\nx.addEventListener(\"click\", Function1);\n\nvar x = document.getElementById(\"btn2\");\nx.addEventListener(\"click\", Function2);\n\nfunction Function1() {\nalert (\"Clear\");\n}\n\n\nfunction Function2() {\nalert (\"Save\");\n}\n\n</script>\n\n</body>\n\n</html>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":400,"y":160,"wires":[["391bb900.909658"]]},{"id":"3a1b262d.e9902a","type":"ui_button","z":"6d115eae.6e232","name":"","group":"c4b08f06.6f347","order":6,"width":"2","height":"2","passthru":false,"label":"CLEAR","tooltip":"","color":"","bgcolor":"","icon":"","payload":"clear","payloadType":"str","topic":"","x":140,"y":160,"wires":[["4adcdd01.eaf984"]]},{"id":"6d264dac.f253c4","type":"ui_button","z":"6d115eae.6e232","name":"","group":"c4b08f06.6f347","order":6,"width":"2","height":"2","passthru":false,"label":"SAVE","tooltip":"","color":"","bgcolor":"","icon":"","payload":"save","payloadType":"str","topic":"","x":130,"y":200,"wires":[["4adcdd01.eaf984"]]},{"id":"391bb900.909658","type":"debug","z":"6d115eae.6e232","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":550,"y":160,"wires":[]},{"id":"889e14c8.47d1e8","type":"ui_template","z":0,"group":"c2a2c089.27f5a","name":"prova","order":7,"width":"0","height":"0","format":"<html>\n<form>\n <style>\n * {box-sizing: border-box;}\n\n/* Style the input container */\n.input-container {\n display: flex;\n width: 100%;\n margin-bottom: 15px;\n}\n\n/* Style the form icons */\n.icon {\n padding: 10px;\n background: dodgerblue;\n color: white;\n min-width: 50px;\n text-align: center;\n}\n\n/* Style the input fields */\n.input-field {\n width: 100%;\n padding: 10px;\n outline: none;\n}\n\n.input-field:focus {\n border: 2px solid dodgerblue;\n}\n\n/* Set a style for the submit button */\n.btn {\n background-color: dodgerblue;\n color: white;\n padding: 15px 20px;\n border: none;\n cursor: pointer;\n width: 100%;\n opacity: 0.9;\n}\n\n.btn:hover {\n opacity: 1;\n}\n </style>\n \n <h2>Register Form</h2>\n <div class=\"input-container\">\n <i class=\"fa fa-user icon\"></i>\n <input class=\"input-field\" type=\"text\" placeholder=\"Username\" name=\"usrnm\">\n </div>\n\n <div class=\"input-container\">\n <i class=\"fa fa-envelope icon\"></i>\n <input class=\"input-field\" type=\"text\" placeholder=\"Email\" name=\"email\">\n </div>\n\n <div class=\"input-container\">\n <i class=\"fa fa-key icon\"></i>\n <input class=\"input-field\" type=\"password\" placeholder=\"Password\" name=\"psw\">\n </div>\n\n <button type=\"submit\" class=\"btn\" ng-click=\"send({payload:'psw')\">Register</button>\n \n</form>\n</html>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":230,"y":220,"wires":[[]]},{"id":"269ed016.1d1b5","type":"ui_template","z":"e0de38a7.3e37b8","group":"e680548c.11e958","name":"","order":0,"width":0,"height":0,"format":"<h3>Testing template</h3>\n<p>{{msg.payload}}</p>\n\n<script>\n(function() {\n    var count = 0\n    function testit(msg,scope) {\n        count = count+1;\n        console.log(\"In testit \" + msg.payload + \"  count = \" + count);\n        scope.send({payload: \"from testit \" + msg.payload + \"  count = \" + count});\n    }\n    \n    (function(scope) {\n        scope.send({payload: \"preload\"});   // this gets sent when the view is opened in the browser\n        scope.$watch('msg', function(msg) {\n            if (msg) {\n                testit(msg, scope);\n            }\n        });\n    })(scope);\n})();\n</script>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":400,"y":180,"wires":[["95de817f.af785"]]},{"id":"9c583513.bbea68","type":"inject","z":"e0de38a7.3e37b8","name":"","topic":"","payload":"four","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":203,"y":180,"wires":[["269ed016.1d1b5"]]},{"id":"ab5d4937.0aa528","type":"ui_template","z":"e0de38a7.3e37b8","group":"e680548c.11e958","name":"myfunction","order":0,"width":0,"height":0,"format":"<h3>Testing template</h3>\n<p>{{msg.payload}}</p>\n<script>\n(function() {\n    var count = 0\n    function myfunction(msg,scope) {\n        count = count+1;\n        console.log(\"In myfunction \" + msg.payload + \"  count = \" + count);\n        scope.send({payload: \"from myfunction \" + msg.payload + \"  count = \" + count});\n    }\n    \n    (function(scope) {\n        scope.send({payload: \"preload\"});   // this gets sent when the view is opened in the browser\n        scope.$watch('msg', function(msg) {\n            if (msg) {\n                myfunction(msg, scope);\n            }\n        });\n    })(scope);\n})();\n</script>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":430.5,"y":292,"wires":[["19021302.ea3e8d"]]},{"id":"a0e1584a.d33478","type":"inject","z":"e0de38a7.3e37b8","name":"","topic":"","payload":"Two","payloadType":"str","repeat":"","crontab":"","once":false,"x":201.5,"y":293,"wires":[["ab5d4937.0aa528"]]},{"id":"95de817f.af785","type":"debug","z":"e0de38a7.3e37b8","name":"","active":false,"console":"false","complete":"false","x":629,"y":180,"wires":[]},{"id":"19021302.ea3e8d","type":"debug","z":"e0de38a7.3e37b8","name":"","active":true,"console":"false","complete":"false","x":633,"y":292,"wires":[]},{"id":"8a5873fa.045ad","type":"inject","z":"cf0b8c75.8bb3","name":"Go","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":"","x":150,"y":200,"wires":[["e723132b.bf7a5","c6d371df.442a2","48b30de3.482064","d4003fcc.331ae"]]},{"id":"e723132b.bf7a5","type":"function","z":"cf0b8c75.8bb3","name":"build array (2) random","func":"var x = [];\nvar companyStock = flow.get(\"companyData\") || x;\nvar arrayCompany = [\"Apple\",\"AT&T\",\"Berkshire Hathaway\",\"BP\",\"China National Petroleum\",\"CVS Health\",\"Daimler\",\"Exor\",\"Exxon Mobil\",\"General Motors\",\"Glencore\",\"McKesson\",\"Royal Dutch Shell\",\"Samsung Electronics\",\"Sinopec Group\",\"State Grid\",\"Toyota\",\"United Health\",\"Volkswagen Group\",\"Walmart\"];\nvar ixCompany = Math.floor(Math.random() * (20));\nvar stockPrice = Math.floor(Math.random() * (1000))/10;\nvar latest = [arrayCompany[ixCompany], stockPrice];\ncompanyStock.unshift(latest);\nif (companyStock.length > 10) {companyStock.pop();}\nflow.set(\"companyData\",companyStock);\nmsg.payload = companyStock;\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":200,"wires":[["500e21a.bc5ede"]]},{"id":"588b9d53.cfc644","type":"debug","z":"cf0b8c75.8bb3","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":630,"y":80,"wires":[]},{"id":"500e21a.bc5ede","type":"ui_template","z":"cf0b8c75.8bb3","group":"","name":"Two dimension array table","order":1,"width":"12","height":"10","format":"\n<table id=\"table\" border=\"1\">\n <tr>\n <th>Company</th> \n <th>Latest Price</th>\n </tr>\n <tbody>\n <tr ng-repeat=\"row in msg.payload\">\n <td ng-repeat=\"item in row\" >{{item}}</td>\n </tr>\n </tbody>\n</table>\n\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":390,"y":80,"wires":[["588b9d53.cfc644"]]},{"id":"8060afde.f56a2","type":"comment","z":"b0341a6e.43f0c8","name":"Form example Javascript","info":"","x":290,"y":140,"wires":[]},{"id":"3cb16258.4952ce","type":"ui_template","z":"e0de38a7.3e37b8","group":"e680548c.11e958","name":"","order":0,"width":0,"height":0,"format":"<h3>Testing template</h3>\n<p>{{msg.payload}}</p>\n\n\n\n<script>\n(function() {\n    var count = 0\n    function DoThings(msg,scope) {\n        count = count+1;\n        console.log(\"In testit \" + msg.payload + \"  count = \" + count);\n        scope.send({payload: \"from DoThings \" + msg.payload + \"  count = \" + count});\n    }\n    \n    (function(scope) {\n        scope.send({payload: \"preload\"});   // this gets sent when the view is opened in the browser\n        scope.$watch('msg', function(msg) {\n            if (msg) {\n                DoThings(msg, scope);\n            }\n        });\n    })(scope);\n})();\n</script>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":400,"y":400,"wires":[["8eea3e1a.638f1"]]},{"id":"a84cf642.f6cb38","type":"inject","z":"e0de38a7.3e37b8","name":"","topic":"2","payload":"four","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":170,"y":400,"wires":[["3cb16258.4952ce","3625b94b.bd5e16","d6c10c4b.fd737"]]},{"id":"8eea3e1a.638f1","type":"debug","z":"e0de38a7.3e37b8","name":"","active":false,"console":"false","complete":"false","x":629,"y":400,"wires":[]},{"id":"3625b94b.bd5e16","type":"ui_template","z":"e0de38a7.3e37b8","group":"e680548c.11e958","name":"Example_2","order":0,"width":0,"height":0,"format":"<div>{{msg.payload}}</div>\n\n<md-button ng-click=\"send({payload: 'Hello World'})\">\n    Click me to send a hello world\n</md-button>\n\n<md-slider ng-model=\"msg.payload\" ng-change=\"send(msg)\"></md-slider>\n\n<div flex layout=\"row\" layout-align=\"space-around center\">\n    <md-button ng-repeat=\"b in buttons\" class=\"md-icon-button\" ng-click=\"click(b)\">\n        <ng-md-icon icon=\"{{msg.payload[b.payload]?b.icon2:b.icon}}\"\n                    ng-style=\"{color: msg.payload[b.payload]?b.color2:b.color}\"></ng-md-icon>\n    </md-button>\n</div>\n\n<script>\n    scope.buttons = [{\n        icon: 'pause', color: 'black',\n        icon2: 'play_arrow', color2: 'red',\n        payload: 'play',\n    }, {\n        icon: 'alarm', color: 'black',\n        icon2: 'alarm', color2: 'red',\n        payload: 'alarm',\n    }];\n\n    scope.click = function(b) {\n        if (!this.msg) this.msg = {};\n        if (!this.msg.payload) this.msg.payload = {};\n        this.msg.payload[b.payload] = !this.msg.payload[b.payload];\n        this.send(this.msg);\n    }.bind(scope);\n</script>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":410,"y":520,"wires":[["ed6c8d1.488ad7"]]},{"id":"ed6c8d1.488ad7","type":"debug","z":"e0de38a7.3e37b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":600,"y":520,"wires":[]},{"id":"d6c10c4b.fd737","type":"ui_template","z":"e0de38a7.3e37b8","group":"e680548c.11e958","name":"Example_3","order":0,"width":0,"height":0,"format":"<style>\n    th {\n        text-decoration: underline;\n    }\n    .numeric {\n        text-align: right;\n        padding-right: 15px;\n    }\n</style>\n\n<table cellpadding=\"1\" border=\"1\" id=\"table1\" class=\"table-hover\"  style=\"width: 100%;\">\n    <thead>\n        <tr>\n    <th>value1</th>        \n    <th>value2</th>\n    <th>value3</th>\n    <th>value4</th>\n    <th>value5</th>\n    <th>value7</th>\n    <th>value8</th>\n    <th>value9</th>\n    <th>value10</th>\n    <th>value11</th>\n    <th>value12</th>\n    <th>value13</th>\n    <th>value14</th>\n    <th>value15</th>\n    <th>save</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr ng-repeat=\"row in msg.payload\" ng-dblclick=\"sendRow(row)\">\n            <td class=\"numeric\" bgcolor=gray>{{row.value1}}</td>\n            <td contenteditable=\"true\">{{row.value2}}</td>\n            <td contenteditable=\"true\">{{row.value3}}</td>\n            <td contenteditable=\"true\">{{row.value4}}</td>\n            <td contenteditable=\"true\">{{row.value5}}</td>\n            <td bgcolor=gray>{{row.value7}}</td>\n            <td contenteditable=\"true\">{{row.value8}}</td>\n            <td bgcolor=gray>{{row.value9}}</td>\n            <td bgcolor=gray>{{row.value10}}</td>\n            <td contenteditable=\"true\">{{row.value11}}</td>\n            <td bgcolor=gray>{{row.value12}}</td>\n            <td bgcolor=gray>{{row.value13}}</td>\n            <td contenteditable=\"true\">{{row.value14}}</td>\n            <td contenteditable=\"true\">{{row.value15}}</td>\n             <td>\n\n    <md-button ng-click=\"sendRow(row)\">Set</md-button>\n        </tr>\n    </tbody>\n</table>\n\n<script>\n(function($scope) {\n    $scope.sendRow = function(obj) {\n       $scope.send({ \"payload\": obj });\n        $scope.send({ \"payload\": (document.getElementById(\"table1\").rows[1].innerHTML) });\n        };\n})(scope);\n</script>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":410,"y":620,"wires":[[]]},{"id":"bd6a9e86.727ff","type":"ui_template","z":"6e5a5564.0bea8c","group":"c4b08f06.6f347","name":"testing payload 2","order":3,"width":"6","height":"6","format":"\n\n\n<button onMouseDown=\"SendMessage()\">SendVarToPayload</button>\n\n<script>\n    var theScope = scope;\n    var eventname = 'Manuel Baptista';\n    function SendMessage(){\n        theScope.send({payload:eventname+' turnoff'});\n    }\n</script>","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":390,"y":280,"wires":[["aac0b9e2.6eaa08"]]},{"id":"209c0d30.505482","type":"ui_text","z":"dfcdc1a6.19946","group":"c4b08f06.6f347","order":12,"width":4,"height":1,"name":"LinkedInfoTest","label":"","format":"{{msg.payload}}","layout":"row-left","x":560,"y":180,"wires":[]},{"id":"bbcd02cf.d8fd2","type":"switch","z":"dfcdc1a6.19946","name":"replySwitchTest","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ALE LINK: ","vt":"str"},{"t":"cont","v":"SCAN:","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":330,"y":260,"wires":[["209c0d30.505482"],["5c1aa8ed.153438"]]},{"id":"60f7d75.e0cd228","type":"debug","z":"dfcdc1a6.19946","name":"scanToggleOutputTest","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":740,"y":560,"wires":[]},{"id":"b01b291d.f18308","type":"ui_switch","z":"dfcdc1a6.19946","name":"testScan","label":"TESTScan","tooltip":"","group":"c4b08f06.6f347","order":1,"width":2,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"1","onvalueType":"str","onicon":"fa-spinner fa-pulse fa-2x fa-fw","oncolor":"red","offvalue":"0","offvalueType":"str","officon":"fa-spinner fa-2x fa-fw","offcolor":"green","x":600,"y":440,"wires":[["eb5e8b21.5de258"]]},{"id":"66b3b294.e437cc","type":"inject","z":"dfcdc1a6.19946","name":"SCAN ON","topic":"","payload":"SCAN: ON","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":240,"wires":[["bbcd02cf.d8fd2"]]},{"id":"2aecc712.ce9438","type":"inject","z":"dfcdc1a6.19946","name":"SCAN OFF","topic":"","payload":"SCAN: OFF","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":300,"wires":[["bbcd02cf.d8fd2"]]},{"id":"d2b6202.d9da0e","type":"debug","z":"dfcdc1a6.19946","name":"sstOnDebug","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":630,"y":300,"wires":[]},{"id":"67317195.2b6b4","type":"debug","z":"dfcdc1a6.19946","name":"sstOffDebug","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":630,"y":340,"wires":[]},{"id":"5c1aa8ed.153438","type":"function","z":"dfcdc1a6.19946","name":"","func":"context.set(\"scanon\", \"SCAN ON\\r\");\ncontext.set(\"scanoff\", \"SCAN OFF\\r\");\nnode.warn(\"payload:\" + msg.payload);\nif(msg.payload.includes(\"ON\"))\n{\n    msg.payload = \"1\";\n}\nelse\n{\n    msg.payload = \"0\";\n}\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":480,"wires":[["b01b291d.f18308","60f7d75.e0cd228"]]},{"id":"eb5e8b21.5de258","type":"change","z":"dfcdc1a6.19946","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"str","to":"scanon","tot":"flow"},{"t":"change","p":"payload","pt":"msg","from":"0","fromt":"str","to":"scanoff","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":480,"wires":[["60f7d75.e0cd228"]]},{"id":"ff68f507.9b0678","type":"inject","z":"dfcdc1a6.19946","name":"Rooms","topic":"","payload":"[{\"title\":\"Server\",\"icon\":\"https://upload.wikimedia.org/wikipedia/commons/7/73/Cell_phone_icon.svg\",\"menu\":[\"Google Home PVK\",\"Domoticz PVK RF\",\"Domoticz PVK ZW\",\"Domoticz OOS RF\",\"Domoticz OOS ZW\",\"Dashticz OOS SCREEN\",\"PINGER SERVICE\"],\"output\":{\"Google Home PVK\":[{\"obj\":1001,\"type\":\"device\",\"act\":\"On\"}],\"Domoticz PVK RF\":[{\"obj\":1002,\"type\":\"device\",\"act\":\"On\"}]}},{\"title\":\"OS Command\",\"icon\":\"https://upload.wikimedia.org/wikipedia/commons/7/73/Cell_phone_icon.svg\",\"menu\":[\"Herstarten van de server\",\"Herstarten van de domoticz service\"]},{\"title\":\"Devices xxxx\",\"icon\":\"https://upload.wikimedia.org/wikipedia/commons/7/73/Cell_phone_icon.svg\",\"menu\":[\"Lantaarn AAN\",\"Lantaarn UIT\",\"Twee lampen AAN\",\"Twee lampen UIT\",\"Avond huis AAN\",\"Avond UIT\",\"Service herstarten\",\"PVK update dashticz\",\"I\",\"J\",\"K\",\"L\",\"M\"]}]","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":660,"wires":[["3bc07962.21cc36"]]},{"id":"3bc07962.21cc36","type":"ui_list","z":"dfcdc1a6.19946","group":"c4b08f06.6f347","name":"","order":1,"width":"6","height":"5","lineType":"three","actionType":"menu","allowHTML":true,"outputs":1,"topic":"","x":310,"y":660,"wires":[["bd8409c6.f512e8","514a8af4.052ad4"]]},{"id":"bd8409c6.f512e8","type":"debug","z":"dfcdc1a6.19946","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":550,"y":660,"wires":[]},{"id":"514a8af4.052ad4","type":"function","z":"dfcdc1a6.19946","name":"","func":"var m = msg.payload.output[msg.payload.selected]\nreturn {payload:m};","outputs":1,"noerr":0,"x":430,"y":720,"wires":[["2c09e3d6.63536c"]]},{"id":"2c09e3d6.63536c","type":"debug","z":"dfcdc1a6.19946","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":720,"wires":[]},{"id":"c27da53.1565b58","type":"ui_list","z":"dfcdc1a6.19946","group":"c4b08f06.6f347","name":"","order":3,"width":"4","height":"7","lineType":"two","actionType":"check","allowHTML":false,"outputs":1,"topic":"","x":350,"y":820,"wires":[["67392d2.c4d88d4"]]},{"id":"bf3b3761.039098","type":"inject","z":"dfcdc1a6.19946","name":"Day of Week","topic":"","payload":"[{\"title\":\"Sunday\",\"isChecked\":true},{\"title\":\"Monday\"},{\"title\":\"Tuesday\"},{\"title\":\"Wednesday\"},{\"title\":\"Thursday\"},{\"title\":\"Friday\"},{\"title\":\"Saturday\",\"isChecked\":true}]","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":190,"y":820,"wires":[["c27da53.1565b58"]]},{"id":"67392d2.c4d88d4","type":"debug","z":"dfcdc1a6.19946","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":510,"y":820,"wires":[]},{"id":"c6d371df.442a2","type":"ui_template","z":"cf0b8c75.8bb3","group":"d7ac243e.a930f8","name":"Listbox 1","order":2,"width":0,"height":0,"format":"<!DOCTYPE html>\n\n<script> \n\nvar theScope = scope;\n\n\ndocument.getElementById('generate').onclick = function() {\n\n  var values = [\"dog\", \"cat\", \"parrot\", \"rabbit\"];\n\n  var select = document.createElement(\"select\");\n  select.name = \"pets\";\n  select.id = \"pets\"\n\n  for (const val of values) {\n    var option = document.createElement(\"option\");\n    option.value = val;\n    option.text = val.charAt(0).toUpperCase() + val.slice(1);\n    select.appendChild(option);\n  }\n\n  var label = document.createElement(\"label\");\n  label.innerHTML = \"Choose your pets: \"\n  label.htmlFor = \"pets\";\n\n  document.getElementById(\"container\").appendChild(label).appendChild(select);\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n    width: 600px; \n}\n</style>\n\n\n<body>\n\n    <div id=\"container\"></div>\n    <br>\n    <div>\n      <button id=\"generate\">Generate</button>\n    </div>\n  </body>\n\n\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":360,"y":340,"wires":[[]]},{"id":"48b30de3.482064","type":"ui_template","z":"cf0b8c75.8bb3","group":"d7ac243e.a930f8","name":"Listbox 2","order":2,"width":0,"height":0,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n        function getOption() { \n            selectElement =  \n                    document.querySelector('#select1'); \n                      \n            output = selectElement.value; \n  \n            document.querySelector('.output').textContent \n                    = output; \n        } \n    </script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n    width: 600px; \n}\n</style>\n\n\n<body>\n\n    <h1 style=\"color: green\"> \n        LIST BOX 2 \n    </h1> \n      \n    <b> \n        How to get selected value in dropdown \n        list using JavaScript? \n    </b> \n      \n    <p> \n        Select one from the given options: \n        <select id=\"select1\"> \n            <option value=\"free\">Free</option> \n            <option value=\"basic\">Basic</option> \n            <option value=\"premium\">Premium</option> \n        </select> \n    </p> \n      \n    <p> \n        The value of the option selected is: \n        <span class=\"output\"></span> \n    </p> \n      \n    <button onclick=\"getOption()\"> \n        Check option \n    </button> \n      \n  </body>\n\n\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":360,"y":400,"wires":[[]]},{"id":"d4003fcc.331ae","type":"ui_template","z":"cf0b8c75.8bb3","group":"d7ac243e.a930f8","name":"Listbox 3","order":2,"width":0,"height":0,"format":"<!DOCTYPE html>\n\n    <script>\n        var up = document.getElementById('geeks'); \n        var down = document.getElementById('gfg'); \n       \n        var select = document.getElementById(\"arr\"); \n        var elmts = [\"HTML\", \"CSS\", \"JS\", \"PHP\", \"jQuery\"]; \n        up.innerHTML = \"Click on the button to \" \n                    + \"perform the operation\"+ \n                    \".<br>Array - [\" + elmts + \"]\"; \n  \n        // Main function \n        function GFG_Fun() { \n            for (var i = 0; i < elmts.length; i++) { \n                var optn = elmts[i]; \n                var el = document.createElement(\"option\"); \n                el.textContent = optn; \n                el.value = optn; \n                select.appendChild(el); \n            } \n            down.innerHTML = \"Elements Added\"; \n        } \n    </script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n    width: 600px; \n}\n</style>\n\n\n<body style=\"text-align:center;\"> \n      \n    <h1 style=\"color:green;\">  \n        GeeksforGeeks  \n    </h1> \n      \n    <p id=\"geeks\" style= \n        \"font-size:20px; font-weight:bold\"> \n    </p> \n      \n    <select id=\"arr\"></select> \n      \n    <br><br> \n      \n    <button onclick=\"GFG_Fun();\"> \n        click here \n    </button> \n      \n    <p id=\"gfg\" style=\"font-size: 26px; \n        font-weight: bold;color: green;\"> \n    </p> \n      \n </body>\n\n\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":360,"y":460,"wires":[[]]},{"id":"3c2bb351.9e0e7c","type":"ui_template","z":"551be607.5d9aa8","group":"a01ebb60.af42d8","name":"GA - List Box All GA","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar Values;\nvar xIndex=0;\n\n\n//Select a GA to use in model\nfunction GA_Selection()\n{\n    Values.Selected = document.getElementById(\"select\").selectedIndex;\n    \n    theScope.send({payload:Values});\n    theScope.send({payload:Values});\n}\n\n\n// Resets for the first GA\nfunction GA_Init()\n{\n    \n     if (Values.Number>0)\n    {\n        document.getElementById(\"select\").selectedIndex = 0;\n        xIndex=0;\n\n        document.registration.idga.value=Values.GA[xIndex].ID_GA;\n        document.registration.TownCity.value=Values.GA[xIndex].TownCity;\n        document.registration.CountyStateProvince.value=Values.GA[xIndex].CountyStateProvince;\n        document.registration.Country.value=Values.GA[xIndex].Country;\n        document.registration.Environment.value=Values.GA[xIndex].Environment;\n        document.registration.GPS_Lat.value=Values.GA[xIndex].GPS_Lat;\n        document.registration.GPS_Lon.value=Values.GA[xIndex].GPS_Lon;\n        document.registration.Length.value=Values.GA[xIndex].A_Length;\n        document.registration.Width.value=Values.GA[xIndex].A_Width;\n        document.registration.Comments.value=Values.GA[xIndex].Comments;\n        \n    }\n   \n}\n\nfunction GA_Selected()\n{\n    //alert(\"SELECT GA\");\n    if (Values.Number>0)\n    {\n        document.getElementById(\"select\").selectedIndex = xIndex;\n\n        document.registration.idga.value=Values.GA[xIndex].ID_GA;\n        document.registration.TownCity.value=Values.GA[xIndex].TownCity;\n        document.registration.CountyStateProvince.value=Values.GA[xIndex].CountyStateProvince;\n        document.registration.Country.value=Values.GA[xIndex].Country;\n        document.registration.Environment.value=Values.GA[xIndex].Environment;\n        document.registration.GPS_Lat.value=Values.GA[xIndex].GPS_Lat;\n        document.registration.GPS_Lon.value=Values.GA[xIndex].GPS_Lon;\n        document.registration.Length.value=Values.GA[xIndex].A_Length;\n        document.registration.Width.value=Values.GA[xIndex].A_Width;\n        document.registration.Comments.value=Values.GA[xIndex].Comments;\n    }\n   \n}\n\n// Removes all elements in the dropdown GA list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in GA list\nfunction GAListSelEventItem() \n{\n  xIndex=document.getElementById(\"select\").selectedIndex;\n  \n  document.registration.idga.value=Values.GA[xIndex].ID_GA;\n  document.registration.TownCity.value=Values.GA[xIndex].TownCity;\n  document.registration.CountyStateProvince.value=Values.GA[xIndex].CountyStateProvince;\n  document.registration.Country.value=Values.GA[xIndex].Country;\n  document.registration.Environment.value=Values.GA[xIndex].Environment;\n  document.registration.GPS_Lat.value=Values.GA[xIndex].GPS_Lat;\n  document.registration.GPS_Lon.value=Values.GA[xIndex].GPS_Lon;\n  document.registration.Length.value=Values.GA[xIndex].A_Length;\n  document.registration.Width.value=Values.GA[xIndex].A_Width;\n  document.registration.Comments.value=Values.GA[xIndex].Comments;\n \n  \n  \n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select a Geographic Area</h1>\n\n<form id=\"registration\" name=\"registration\">\n    <ul>\n        <select id=\"select\" onchange=\"GAListSelEventItem()\" form=\"registration\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    Values=data;\n                    \n                    //Create Geographic Area List var sel\n                    var sel = document.getElementById(\"select\");\n                    \n                    //Previous remove all options in Geographic List\n                    removeOptions(document.getElementById(\"select\"));\n                    \n                    for (var i = 0; i < Values.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"GA \" + Values.GA[i].ID_GA + \" \" +Values.GA[i].Country+ \" \" +Values.GA[i].TownCity+ \" \" +Values.GA[i].Environment);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"GA \" + Values.GA[i].ID_GA + \" \" +Values.GA[i].Country+ \" \" +Values.GA[i].TownCity+ \" \" +Values.GA[i].Environment);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    GA_Selected();\n                 });\n            })(scope);\n          </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idga\">ID_GA</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.idga.value=Values.GA[0].ID_GA;\n                </script>\n                <input type=\"text\" id=\"idga\" name=\"idga\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"TownCity\">TownCity</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.TownCity.value=Values.GA[0].TownCity;\n                </script>\n                <input type=\"text\" id=\"TownCity\" name=\"TownCity\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"CountyStateProvince\">CountyProvince</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.CountyStateProvince.value=Values.GA[0].CountyStateProvince;\n                </script>\n                <input type=\"text\" id=\"CountyStateProvince\" name=\"CountyStateProvince\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Country\">Country</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Country.value=Values.GA[0].Country;\n                </script>\n                <input type=\"text\" id=\"Country\" name=\"Country\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Environment\">Environment</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Environment.value=Values.GA[0].Environment;\n                </script>\n                <input type=\"text\" id=\"Environment\" name=\"Environment\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.GPS_Lat.value=Values.GA[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" readOnly=\"readOnly\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.GPS_Lon.value=Values.GA[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Length\">Length</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Length.value=Values.GA[0].A_Length;\n                </script>\n                <input type=\"text\" id=\"Length\" name=\"Length\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Width\">Width</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Width.value=Values.GA[0].A_Width;\n                </script>\n                <input type=\"text\" id=\"Width\" name=\"Width\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Comments\">Comments</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Comments.value=Values.GA[0].Comments;\n                </script>\n              <textarea id=\"Comments\" name=\"Comments\" style=\"height:40px\" readOnly=\"readOnly\" form=\"registration\"></textarea>\n            </div>\n        </div>\n        \n        <div text-align=\"center\">\n        <p>\n            <button type=\"submit\" name=\"SELECT_GA\" onclick=\"GA_Selection()\"> SELECT </button>\n            <button type=\"submit\" name=\"RESET_GA\" onclick=\"GA_Init()\"> RESET </button>\n            \n        </p>\n        </div>\n    </ul>\n</form>\n</body>\n\n\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1880,"y":560,"wires":[["c098d28f.44755","fb1b8d56.1dc33"]]},{"id":"225d0dcd.981672","type":"ui_button","z":"f9cd24b0.e484f8","name":"","group":"9e285b51.9c50d8","order":0,"width":0,"height":0,"passthru":false,"label":"button1","color":"","bgcolor":"","icon":"","payload":"{\"group\":{\"hide\":[\"Home_Group_2\",\"Home_Group_3\"],\"show\":[\"Home_Group_1\"]}}","payloadType":"json","topic":"","x":120,"y":300,"wires":[["333a590b.1afe36"]]},{"id":"184b08ce.a29bf7","type":"ui_button","z":"f9cd24b0.e484f8","name":"","group":"9e285b51.9c50d8","order":0,"width":0,"height":0,"passthru":false,"label":"button2","color":"","bgcolor":"","icon":"","payload":"{\"group\":{\"hide\":[\"Home_Group_1\",\"Home_Group_3\"],\"show\":[\"Home_Group_2\"]}}","payloadType":"json","topic":"","x":120,"y":340,"wires":[["333a590b.1afe36"]]},{"id":"d5823ff5.9172e","type":"ui_button","z":"f9cd24b0.e484f8","name":"","group":"9e285b51.9c50d8","order":0,"width":0,"height":0,"passthru":false,"label":"button3","color":"","bgcolor":"","icon":"","payload":"{\"group\":{\"hide\":[\"Home_Group_1\",\"Home_Group_2\"],\"show\":[\"Home_Group_3\"]}}","payloadType":"json","topic":"","x":120,"y":380,"wires":[["333a590b.1afe36"]]},{"id":"1f08eb35.2775d5","type":"ui_gauge","z":"f9cd24b0.e484f8","name":"","group":"2d9c0c43.a900b4","order":0,"width":0,"height":0,"gtype":"gage","title":"Gauge","label":"units","format":"{{value}}","min":0,"max":10,"colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":670,"y":140,"wires":[]},{"id":"e72a063.6f392f8","type":"ui_template","z":"f9cd24b0.e484f8","group":"f8d80c1c.0f62b","name":"","order":0,"width":"6","height":"3","format":"This is the start group.<br/>\nPress button 2 to move to the next group.<br/>\nThen slide the slider.","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":680,"y":80,"wires":[[]]},{"id":"73084722.88b0b8","type":"ui_button","z":"f9cd24b0.e484f8","name":"","group":"9341d073.79928","order":2,"width":0,"height":0,"passthru":false,"label":"Reset","color":"","bgcolor":"","icon":"","payload":"{\"group\":{\"hide\":[\"Home_Group_2\",\"Home_Group_3\"],\"show\":[\"Home_Group_1\"]}}","payloadType":"json","topic":"","x":670,"y":240,"wires":[["333a590b.1afe36"]]},{"id":"333a590b.1afe36","type":"ui_ui_control","z":"f9cd24b0.e484f8","name":"","x":500,"y":380,"wires":[[]]},{"id":"2c5ce861.e2c4a8","type":"ui_slider","z":"f9cd24b0.e484f8","name":"","label":"slider","group":"2d9c0c43.a900b4","order":0,"width":0,"height":0,"passthru":false,"topic":"","min":0,"max":10,"step":1,"x":290,"y":60,"wires":[["1f08eb35.2775d5","fcc4b735.af1668"]]},{"id":"791c8821.2495f8","type":"ui_template","z":"f9cd24b0.e484f8","group":"9341d073.79928","name":"","order":1,"width":"6","height":"3","format":"Slider reached > 7 = Passed</br>\nHit Reset to go back to stage 1</br>\nOr wait 10 seconds.","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":680,"y":200,"wires":[[]]},{"id":"fcc4b735.af1668","type":"function","z":"f9cd24b0.e484f8","name":"","func":"if (msg.payload > 7) {\n    m2 = {payload : 0};\n    msg.payload = {\"group\":{\"hide\":[\"Home_Group_1\",\"Home_Group_2\"],\"show\":[\"Home_Group_3\"]}};\n    return [ m2, msg];\n}\nreturn null;","outputs":2,"noerr":0,"x":310,"y":180,"wires":[["2c5ce861.e2c4a8","1f08eb35.2775d5"],["fe1a73cb.6afca"]]},{"id":"4d3f6731.7d12f8","type":"inject","z":"f9cd24b0.e484f8","name":"","topic":"","payload":"{\"group\":{\"hide\":[\"Home_Group_2\",\"Home_Group_3\"],\"show\":[\"Home_Group_1\"]}}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":260,"wires":[["333a590b.1afe36"]]},{"id":"fe1a73cb.6afca","type":"trigger","z":"f9cd24b0.e484f8","op1":"","op2":"{\"group\":{\"hide\":[\"Home_Group_2\",\"Home_Group_3\"],\"show\":[\"Home_Group_1\"]}}","op1type":"pay","op2type":"json","duration":"10","extend":false,"units":"s","reset":"","bytopic":"all","name":"","x":390,"y":240,"wires":[["333a590b.1afe36"]]},{"id":"69718ce2.2263f4","type":"comment","z":"551be607.5d9aa8","name":"Geographic Area - MENU","info":"","x":370,"y":440,"wires":[]},{"id":"169a3268.896d4e","type":"ui_template","z":"b0341a6e.43f0c8","group":"74d0efb1.9fdec","name":"Geographic Area Input Form BASE","order":5,"width":"7","height":"12","format":"<!DOCTYPE html>\n\n<script> \n\nvar theScope = scope;\n\n//User ID_GA Validation\nfunction ID_GA_validation(id,min,max)\n{\n    var id_val = id.value;\n    if (id_val == 0 || id_val <= min || id_val > max)\n    {\n        window.alert(\"ID_GA should not be empty / be between \"+min+\" to \"+max+\" value=\"+id_val);\n        id.focus();\n        return false;\n    }\n    return true;\n}\n\n\n//Password validation\nfunction passid_validation(passid,mx,my)\n{\n    var passid_len = passid.value.length;\n    if (passid_len == 0 ||passid_len >= my || passid_len < mx)\n    {\n        alert(\"Password should not be empty / length be between \"+mx+\" to \"+my);\n        passid.focus();\n        return false;\n    }\n    return true;\n}\n\n\n//Name validation\nfunction allLetter(uname)\n{ \n    var letters = /^[A-Za-z]+$/;\n    if(uname.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Username must have alphabet characters only');\n        uname.focus();\n        return false;\n    }\n}\n\n\n//Address validation\nfunction alphanumeric(uadd)\n{ \n    var letters = /^[0-9a-zA-Z]+$/;\n    if(uadd.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('User address must have alphanumeric characters only');\n        uadd.focus();\n        return false;\n    }\n}\n\n//Environment validation\nfunction EnvironmentSelect(environment)\n{\n    if(environment.value == \"Default\")\n    {\n        alert('Select an environment from the list');\n        environment.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//TownCity validation\nfunction TownCitySelect(towncity)\n{\n    var letters = /^[0-9a-zA-Z]+$/;\n    if(towncity.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('TownCity must have alphanumeric characters only');\n        towncity.focus();\n        return false;\n    }\n}\n\n//CountyStateProvince validation\nfunction CountyStateProvinceSelect(countystateprovince)\n{\n    var letters = /^[0-9a-zA-Z]+$/;\n    if(countystateprovince.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('CountyStateProvince must have alphanumeric characters only');\n        countystateprovince.focus();\n        return false;\n    }\n}\n\n//Country validation\nfunction CountrySelect(country)\n{\n    if(country.value == \"Default\")\n    {\n        alert('Select a country from the list');\n        country.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//Zip Code Validation\nfunction allnumeric(uzip)\n{ \n    var numbers = /^[0-9]+$/;\n    if(uzip.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('ZIP code must have numeric characters only');\n        uzip.focus();\n        return false;\n    }\n}\n\n//e-mail Validation\nfunction ValidateEmail(uemail)\n{\n    var mailformat = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n    if(uemail.value.match(mailformat))\n    {\n        return true;\n    }\n    else\n    {\n        alert(\"You have entered an invalid email address!\");\n        uemail.focus();\n        return false;\n    }\n}\n\n//Gender Validation\nfunction validsex(umsex,ufsex)\n{\n    x=0;\n\n    if(umsex.checked) \n    {\n        x++;\n    } \n    if(ufsex.checked)\n    {\n        x++; \n    }\n    if(x==0)\n    {\n        alert('Select Male/Female');\n        umsex.focus();\n        return false;\n    }\n    else\n    {\n        alert('Form Successfully Submitted');\n        window.location.reload()\n        return true;\n    }\n}\n\n\nfunction formValidation()\n{\n    \n    var idga = document.registration.idga;\n    var passid = document.registration.passid;\n    var uname = document.registration.username;\n    var uadd = document.registration.address;\n    var environment = document.registration.environment;\n    var uzip = document.registration.zip;\n    var uemail = document.registration.email;\n    var umsex = document.registration.msex;\n    var ufsex = document.registration.fsex; \n\n    if(ID_GA_validation(idga,5,12))\n    {\n      if(passid_validation(passid,7,12))\n      {\n        if(allLetter(uname))\n        {\n         if(alphanumeric(uadd))\n         { \n          if(EnvironmentSelect(environment))\n          {\n           if(allnumeric(uzip))\n           {\n            if(ValidateEmail(uemail))\n            {\n             if(validsex(umsex,ufsex))\n             {\n                alert('sex ok');\n                theScope.send({payload:document.registration.idga.value+' - IDGA'});\n             }\n            } \n           }\n          } \n         }\n        }\n      }\n    }\n    return false;\n}\n\n\n\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\ninput[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: lightgreen;\n    border: none;\n    color: black;\n    padding: 8px 24px;\n    text-decoration: none;\n    font:bold 14px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n</style>\n\n\n<body onload=\"document.registration.userid.focus();\">\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;New Geographic Area</h1>\n<p style=\"color:black;font-size:16px;\">&nbsp;&nbsp;Use tab keys to move from one input field to the next.</p>\n\n<form name='registration' onSubmit=\"return formValidation();\">\n    <ul>\n        <li><label for=\"idga\">ID_GA &nbsp;&nbsp;&nbsp;&nbsp;:</label>\n        <input type=\"text\" name=\"idga\" value={{msg.payload}} size=\"20\" /></li>\n        \n        <li><label for=\"passid\">Password:</label>\n        <input type=\"password\" name=\"passid\" size=\"20\" /></li>\n        <li><label for=\"username\">Name &nbsp;&nbsp;&nbsp;&nbsp;:</label>\n        <input type=\"text\" name=\"username\" size=\"20\" /></li>\n        <li><label for=\"address\">Address&nbsp;&nbsp;:</label>\n        <input type=\"text\" name=\"address\" size=\"20\" /></li>\n        <li><label for=\"environment\">Environment&nbsp;&nbsp;:</label>\n        <select name=\"environment\">\n            <option selected=\"Urban\" size=\"20\" value=\"Default\">(Select an environment)</option>\n                <option value=\"Urban\">Urban</option>\n                <option value=\"Sub-Urban\">Sub-Urban</option>\n                <option value=\"Rural\">Rural</option>\n            </select></li>\n        <li><label for=\"zip\">ZIP Code:</label></li>\n        <li><input type=\"text\" name=\"zip\" /></li>\n        <li><label for=\"email\">Email:</label></li>\n        <li><input type=\"text\" name=\"email\" size=\"20\" /></li>\n        <li><label id=\"gender\">Sex:</label></li>\n        <li><input type=\"radio\" name=\"msex\" value=\"Male\" /><span>Male</span></li>\n        <li><input type=\"radio\" name=\"fsex\" value=\"Female\" /><span>Female</span></li>\n        <li><label>Language:</label></li>\n        <li><input type=\"checkbox\" name=\"en\" value=\"en\" checked /><span>English</span></li>\n        <li><input type=\"checkbox\" name=\"nonen\" value=\"noen\" /><span>Non English</span></li>\n        <li><label for=\"desc\">About:</label></li>\n        <li><textarea name=\"desc\" id=\"desc\"></textarea></li>\n        \n        <p><input type=\"submit\" value=\"SUBMIT\" name=\"SUBMIT\">      \n        <input type=\"reset\" value=\"Reset\" name=\"Reset\"></p>\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":320,"y":260,"wires":[[]]},{"id":"dba74d19.c7811","type":"comment","z":"551be607.5d9aa8","name":"GA - INSERT NEW GA IN GEO_Area_DB","info":"","x":1940,"y":760,"wires":[]},{"id":"4b596552.6cc85c","type":"function","z":"551be607.5d9aa8","name":"F GEO_Area_DB Read All Records","func":"var ReadAll_GA=msg.payload;\nvar GAList={};\n\nGAList.Number=msg.payload.length;\nGAList.Selected=0;\n\nGAList.GA=[]\n\nvar NextGA=1;\nvar i;\nfor (i = 0; i < msg.payload.length; i++) {\n    // do something with msg.payload[i]\n    GAList.GA.push({});\n    GAList.GA[i]['ID_GA'] = msg.payload[i].ID_GA;\n    \n    if (NextGA < (GAList.GA[i]['ID_GA']+1))\n            NextGA=GAList.GA[i]['ID_GA']+1;\n            \n    GAList.GA[i]['Environment'] = msg.payload[i].Environment;\n    GAList.GA[i]['TownCity'] = msg.payload[i].TownCity;\n    GAList.GA[i]['CountyStateProvince'] = msg.payload[i].CountyStateProvince;\n    GAList.GA[i]['Country'] = msg.payload[i].Country;\n    GAList.GA[i]['GPS_Lat'] = msg.payload[i].GPS_Lat;\n    GAList.GA[i]['GPS_Lon'] = msg.payload[i].GPS_Lon;\n    GAList.GA[i]['A_Length'] = msg.payload[i].A_Length;\n    GAList.GA[i]['A_Width'] = msg.payload[i].A_Width;\n    GAList.GA[i]['Comments'] = msg.payload[i].Comments;\n}\n\nGAList.NextIDGA=NextGA;     //Max (ID_GA) + 1;\n\nGAList={payload:GAList};\n\nreturn GAList;       ","outputs":1,"noerr":0,"x":1520,"y":560,"wires":[["3c2bb351.9e0e7c","3533fc96.8d9b54","b38aa4df.c16a08","787a4e94.5c747","da088886.5b4908","7a7f1298.84be9c"]]},{"id":"84eb3f09.c344c","type":"comment","z":"551be607.5d9aa8","name":"GA - LIST BOX OF ALL GA IN GEO_Area_DB","info":"","x":1950,"y":520,"wires":[]},{"id":"cfc78207.5542b","type":"comment","z":"551be607.5d9aa8","name":"GA - LIST GA Option","info":"","x":350,"y":560,"wires":[]},{"id":"696a0314.19615c","type":"comment","z":"551be607.5d9aa8","name":"GA - NEW GA Option","info":"","x":360,"y":820,"wires":[]},{"id":"b98b620a.10381","type":"comment","z":"551be607.5d9aa8","name":"GA - UPDATE GA Option","info":"","x":370,"y":1080,"wires":[]},{"id":"a2633c2c.30a","type":"comment","z":"551be607.5d9aa8","name":"GA - DELETE GA Option","info":"","x":370,"y":1320,"wires":[]},{"id":"fb13e8d5.96a618","type":"comment","z":"551be607.5d9aa8","name":"GA - Distance Measure between two GPS points","info":"","x":1620,"y":2180,"wires":[]},{"id":"98d6dc96.0da67","type":"function","z":"551be607.5d9aa8","name":"F GEO_Area_DB Insert new Record ","func":"var NewGeo = msg.payload.split(\";\")\n\nvar NewGeoJson = {}\n\nNewGeoJson.ID_GA=parseInt(NewGeo[0]);\nNewGeoJson.TownCity=NewGeo[1];\nNewGeoJson.CountyStateProvince=NewGeo[2];\nNewGeoJson.Country=NewGeo[3];\nNewGeoJson.Environment=NewGeo[4];\n\nNewGeoJson.GPS = {};\nNewGeoJson.GPS.Latitude=NewGeo[5];\nNewGeoJson.GPS.Longitude=NewGeo[6];\n\nNewGeoJson.Area = {};\nNewGeoJson.Area.Length=NewGeo[7];\nNewGeoJson.Area.Width=NewGeo[8];\n\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO GEO_Area_DB(ID_GA,Environment,TownCity,CountyStateProvince,Country,GPS_Lat, GPS_Lon, A_Length, A_Width, Comments ) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + NewGeoJson.Environment + \"\\\"\" + \", \" + \n    \"\\\"\" + NewGeoJson.TownCity + \"\\\"\" + \", \" + \n    \"\\\"\" + NewGeoJson.CountyStateProvince + \"\\\"\" + \", \" + \n    \"\\\"\" + NewGeoJson.Country + \"\\\"\" + \", \" + \n    \"\\\"\" + NewGeoJson.GPS.Latitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewGeoJson.GPS.Longitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewGeoJson.Area.Length + \"\\\"\" + \", \" +\n    \"\\\"\" + NewGeoJson.Area.Width + \"\\\"\" + \", \" +\n    \"\\\"\" + NewGeoJson.Area.Comments + \"\\\"\" + \")\"\n}\n\nNewGeoJson={payload:NewGeoJson};\n\nreturn [NewGeoJson, SQLInsert]","outputs":2,"noerr":0,"x":2430,"y":800,"wires":[["3a10e8e9.289a38"],["859214ed.2af618"]]},{"id":"e710b67e.8a8cf8","type":"sqlite","z":"551be607.5d9aa8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GEO_Area_DB","x":1220,"y":560,"wires":[["4b596552.6cc85c"]]},{"id":"e1332eb1.e4535","type":"function","z":"551be607.5d9aa8","name":"F SQL Geo_Area_DB SELECT ALL","func":"var SQLSELECTALL={\"topic\" : \"SELECT * FROM GEO_Area_DB\"};\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":960,"y":560,"wires":[["e710b67e.8a8cf8"]]},{"id":"859214ed.2af618","type":"sqlite","z":"551be607.5d9aa8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GEO_Area_DB","x":2780,"y":800,"wires":[["e1332eb1.e4535"]]},{"id":"3a10e8e9.289a38","type":"debug","z":"551be607.5d9aa8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2350,"y":760,"wires":[]},{"id":"2103666f.deb46a","type":"ui_ui_control","z":"551be607.5d9aa8","name":"","events":"connect","x":1080,"y":1080,"wires":[[]]},{"id":"787a4e94.5c747","type":"ui_template","z":"551be607.5d9aa8","group":"103f459e.bf2fca","name":"GA - Select in List Box GA To Delete","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar Values;\nvar sel;\nvar isel=-1;\n\n\n\n//Select a GA to delete\nfunction GA_Delete()\n{\n    var xIndex=document.getElementById(\"select\").selectedIndex;\n    Values.Selected=xIndex;\n    theScope.send({payload:Values});\n}\n\n\n// Resets for the first GA\nfunction GA_Init()\n{\n    if (Values.Number>0)\n    {\n        document.getElementById(\"select\").selectedIndex = \"0\";\n        \n        document.registration.idga.value=Values.GA[0].ID_GA;\n        document.registration.TownCity.value=Values.GA[0].TownCity;\n        document.registration.CountyStateProvince.value=Values.GA[0].CountyStateProvince;\n        document.registration.Country.value=Values.GA[0].Country;\n        document.registration.Environment.value=Values.GA[0].Environment;\n        document.registration.GPS_Lat.value=Values.GA[0].GPS_Lat;\n        document.registration.GPS_Lon.value=Values.GA[0].GPS_Lon;\n        document.registration.Length.value=Values.GA[0].A_Length;\n        document.registration.Width.value=Values.GA[0].A_Width;\n        document.registration.Comments.value=Values.GA[0].Comments;\n    }\n   \n}\n\n\n// Removes all elements in the dropdown GA list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in GA list\nfunction GAListSelEventItem() \n{\n  \n  var xIndex=document.getElementById(\"select\").selectedIndex;\n  \n  document.registration.idga.value=Values.GA[xIndex].ID_GA;\n  document.registration.TownCity.value=Values.GA[xIndex].TownCity;\n  \n  document.registration.CountyStateProvince.value=Values.GA[xIndex].CountyStateProvince;\n  document.registration.Country.value=Values.GA[xIndex].Country;\n  document.registration.Environment.value=Values.GA[xIndex].Environment;\n  document.registration.GPS_Lat.value=Values.GA[xIndex].GPS_Lat;\n  document.registration.GPS_Lon.value=Values.GA[xIndex].GPS_Lon;\n  document.registration.Length.value=Values.GA[xIndex].A_Length;\n  document.registration.Width.value=Values.GA[xIndex].A_Width;\n  document.registration.Comments.value=Values.GA[xIndex].Comments;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\ninput[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete a Geographic Area</h1>\n\n<form name='registration'>\n    <ul>\n        <select id=\"select\" onchange=\"GAListSelEventItem()\">\n            <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    Values=data;\n                    \n                    //Create Geographic Area List var sel\n                    var sel = document.getElementById(\"select\");\n                    \n                    //Previous remove all options in Geographic List\n                    sel.options.length = 0;\n                    removeOptions(document.getElementById('select'));\n                    \n                    for (var i = 0; i < Values.Number ; i++) \n                    {\n                       \n                            var option = document.createElement(\"option\");\n                            txt= document.createTextNode(\"GA \" + Values.GA[i].ID_GA + \" \" +Values.GA[i].Country+ \" \" +Values.GA[i].TownCity+ \" \" +Values.GA[i].Environment);\n                            option.appendChild(txt);\n                            option.setAttribute(\"value\",\"GA \" + Values.GA[i].ID_GA + \" \" +Values.GA[i].Country+ \" \" +Values.GA[i].TownCity+ \" \" +Values.GA[i].Environment);\n                            sel.insertBefore(option,sel.lastChild);\n                    }\n                    GA_Init();\n                 });\n            })(scope);\n        </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idga\">ID_GA</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.idga.value=Values.GA[0].ID_GA;\n                </script>\n                <input type=\"text\" id=\"idga\" name=\"idga\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"TownCity\">TownCity</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.TownCity.value=Values.GA[0].TownCity;\n                </script>\n                <input type=\"text\" id=\"TownCity\" name=\"TownCity\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"CountyStateProvince\">CountyProvince</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.CountyStateProvince.value=Values.GA[0].CountyStateProvince;\n                </script>\n                <input type=\"text\" id=\"CountyStateProvince\" name=\"CountyStateProvince\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Country\">Country</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Country.value=Values.GA[0].Country;\n                </script>\n                <input type=\"text\" id=\"Country\" name=\"Country\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Environment\">Environment</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Environment.value=Values.GA[0].Environment;\n                </script>\n                <input type=\"text\" id=\"Environment\" name=\"Environment\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.GPS_Lat.value=Values.GA[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.GPS_Lon.value=Values.GA[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Length\">Length</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Length.value=Values.GA[0].A_Length;\n                </script>\n                <input type=\"text\" id=\"Length\" name=\"Length\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Width\">Width</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Width.value=Values.GA[0].A_Width;\n                </script>\n                <input type=\"text\" id=\"Width\" name=\"Width\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Comments\">Comments</label>\n            </div>\n            <div class=\"col-75\">\n              <script>\n                    document.registration.Comments.value=Values.GA[xIndex].Comments;\n                </script>\n              <textarea id=\"Comments\" name=\"Comments\" style=\"height:40px\" readOnly=\"readOnly\"></textarea>\n            </div>\n        </div>\n        \n        <p><input type=\"button\" value=\"DELETE\" onclick=\"GA_Delete()\"> \n           <input type=\"button\" value=\"RESET\" onclick=\"GA_Init()\">\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1930,"y":1340,"wires":[["d77af002.c7da4","5c675b2e.56b8e4"]]},{"id":"d77af002.c7da4","type":"function","z":"551be607.5d9aa8","name":"F GEO_Area_DB Select Record to Delete","func":"var ListGA=msg.payload;\nvar index=ListGA.Selected;\n\nvar SQLDELETE={\"topic\" : \"DELETE FROM GEO_Area_DB WHERE ID_GA=\" + ListGA.GA[index].ID_GA};\n\nreturn [SQLDELETE, msg];","outputs":1,"noerr":0,"x":2440,"y":1340,"wires":[["a9915bb.63c08a8","a623f73e.5f3938"]]},{"id":"bc426632.f18588","type":"comment","z":"551be607.5d9aa8","name":"GA - DELETE A GA IN GEO_Area_DB","info":"","x":1930,"y":1300,"wires":[]},{"id":"a623f73e.5f3938","type":"sqlite","z":"551be607.5d9aa8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GEO_Area_DB","x":2800,"y":1340,"wires":[["e1332eb1.e4535"]]},{"id":"b38aa4df.c16a08","type":"ui_template","z":"551be607.5d9aa8","group":"1e4c832e.bcef7d","name":"GA - Select in List Box GA To UPDATE","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar Values;\n\n//Distance validation\nfunction LenghtWidthSelect(Distance)\n{ \n    var numbers = /^[+]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(Distance.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Distances must have numbers and . only');\n        Distance.focus();\n        return false;\n    }\n}\n\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//Environment validation\nfunction EnvironmentSelect(Environment)\n{\n    if(Environment.value == \"Default\")\n    {\n        alert('Select an environment from the list');\n        Environment.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//TownCity validation\nfunction TownCitySelect(TownCity)\n{\n    var letters = /^[0-9a-zA-Z]+$/;\n    if(TownCity.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('TownCity must have alphanumeric characters only');\n        TownCity.focus();\n        return false;\n    }\n}\n\n//CountyStateProvince validation\nfunction CountyStateProvinceSelect(CountyStateProvince)\n{\n    var letters = /^[0-9a-zA-Z]+$/;\n    if(CountyStateProvince.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('CountyStateProvince must have alphanumeric characters only');\n        CountyStateProvince.focus();\n        return false;\n    }\n}\n\n//Country validation\nfunction CountrySelect(Country)\n{\n    if(Country.value == \"Default\")\n    {\n        alert('Select a country from the list');\n        Country.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\nfunction UpdateValidation()\n{\n    \n    var xIndex=document.getElementById(\"select\").selectedIndex;\n    Values.Selected=xIndex;\n    \n    var idga = document.registration.idga;\n    var TownCity = document.registration.TownCity;\n    var CountyStateProvince = document.registration.CountyStateProvince;\n    var Country = document.registration.Country;\n    var Environment = document.registration.Environment;\n    var GPS_Lat = document.registration.GPS_Lat;\n    var GPS_Lon = document.registration.GPS_Lon;\n    var Length = document.registration.Length;\n    var Width = document.registration.Width;\n    var Comments = document.registration.Comments;\n    \n    if(TownCitySelect(TownCity))\n    {\n        if(CountyStateProvinceSelect(CountyStateProvince))\n        { \n          if(CountrySelect(Country))\n          {\n           if(EnvironmentSelect(Environment))\n           {\n            if(GPSCoordSelect(GPS_Lat))\n            {\n             if(GPSCoordSelect(GPS_Lon))\n             {\n                if(LenghtWidthSelect(Length))\n                {\n                    if(LenghtWidthSelect(Width))\n                    {\n                        Values.GA[xIndex].TownCity=document.registration.TownCity.value;\n                        Values.GA[xIndex].CountyStateProvince=document.registration.CountyStateProvince.value;\n                        Values.GA[xIndex].Country=document.registration.Country.value;\n                        Values.GA[xIndex].Environment=document.registration.Environment.value;\n                        Values.GA[xIndex].GPS_Lat=document.registration.GPS_Lat.value;\n                        Values.GA[xIndex].GPS_Lon=document.registration.GPS_Lon.value;\n                        Values.GA[xIndex].A_Length=document.registration.Length.value;\n                        Values.GA[xIndex].A_Width=document.registration.Width.value;\n                        Values.GA[xIndex].Comments = document.registration.Comments;\n                        \n                        theScope.send({payload:Values});\n                        //GA_Init();\n                    }\n                }\n             }\n            } \n           }\n          } \n        }\n        \n    }\n    return false;\n}\n\n// Resets for the first GA\nfunction GA_Init()\n{\n    if (Values.Number>0)\n    {\n        document.getElementById(\"select\").selectedIndex = \"0\";\n        \n        document.registration.idga.value=Values.GA[0].ID_GA;\n        document.registration.TownCity.value=Values.GA[0].TownCity;\n        document.registration.CountyStateProvince.value=Values.GA[0].CountyStateProvince;\n        document.registration.Country.value=Values.GA[0].Country;\n        document.registration.Environment.value=Values.GA[0].Environment;\n        document.registration.GPS_Lat.value=Values.GA[0].GPS_Lat;\n        document.registration.GPS_Lon.value=Values.GA[0].GPS_Lon;\n        document.registration.Length.value=Values.GA[0].A_Length;\n        document.registration.Width.value=Values.GA[0].A_Width;\n        document.registration.Comments.value=Values.GA[0].Comments;\n    }\n   \n}\n\n\n// Removes all elements in the dropdown GA list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in GA list\nfunction GAListSelEventItem() \n{\n  var xIndex=document.getElementById(\"select\").selectedIndex;\n  \n  document.registration.idga.value=Values.GA[xIndex].ID_GA;\n  document.registration.TownCity.value=Values.GA[xIndex].TownCity;\n  \n  document.registration.CountyStateProvince.value=Values.GA[xIndex].CountyStateProvince;\n  document.registration.Country.value=Values.GA[xIndex].Country;\n  document.registration.Environment.value=Values.GA[xIndex].Environment;\n  document.registration.GPS_Lat.value=Values.GA[xIndex].GPS_Lat;\n  document.registration.GPS_Lon.value=Values.GA[xIndex].GPS_Lon;\n  document.registration.Length.value=Values.GA[xIndex].A_Length;\n  document.registration.Width.value=Values.GA[xIndex].A_Width;\n  document.registration.Comments.value=Values.GA[xIndex].Comments;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\ninput[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update a Geographic Area</h1>\n\n<form name='registration' onSubmit=\"return UpdateValidation();\">\n    <ul>\n        <select id=\"select\" onchange=\"GAListSelEventItem()\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    Values=data;\n                    \n                    //Create Geographic Area List var sel\n                    var sel = document.getElementById(\"select\");\n                    \n                    //Previous remove all options in Geographic List\n                    removeOptions(document.getElementById('select'));\n                    \n                    for (var i = 0; i < Values.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"GA \" + Values.GA[i].ID_GA + \" \" +Values.GA[i].Country+ \" \" +Values.GA[i].TownCity+ \" \" +Values.GA[i].Environment);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"GA \" + Values.GA[i].ID_GA + \" \" +Values.GA[i].Country+ \" \" +Values.GA[i].TownCity+ \" \" +Values.GA[i].Environment);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    GA_Init();\n                 });\n            })(scope);\n          </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idga\">ID_GA</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.idga.value=Values.GA[0].ID_GA;\n                </script>\n                <input type=\"text\" id=\"idga\" name=\"idga\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"TownCity\">TownCity</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.TownCity.value=Values.GA[0].TownCity;\n                </script>\n                <input type=\"text\" id=\"TownCity\" name=\"TownCity\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"CountyStateProvince\">CountyProvince</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.CountyStateProvince.value=Values.GA[0].CountyStateProvince;\n                </script>\n                <input type=\"text\" id=\"CountyStateProvince\" name=\"CountyStateProvince\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Country\">Country</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Country\" name=\"Country\">\n                    <option value=\"Portugal\">Portugal</option>\n                    <option value=\"Spain\">Spain</option>\n                    <option value=\"France\">France</option>\n                    <option value=\"Germany\">Germany</option>\n                    <option value=\"Belgium\">Belgium</option>\n                    <option value=\"Danmark\">Danmark</option>\n                   <option value=\"Norway\">Norway</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Environment\">Environment</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Environment\" name=\"Environment\">\n                    <option value=\"Urban\">Urban</option>\n                    <option value=\"Sub-Urban\">Sub-Urban</option>\n                    <option value=\"Rural\">Rural</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.GPS_Lat.value=Values.GA[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.GPS_Lon.value=Values.GA[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Length\">Length</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Length.value=Values.GA[0].A_Length;\n                </script>\n                <input type=\"text\" id=\"Length\" name=\"Length\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Width\">Width</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Width.value=Values.GA[0].A_Width;\n                </script>\n                <input type=\"text\" id=\"Width\" name=\"Width\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Comments\">Comments</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registration.Comments.value=Values.GA[0].Comments;\n               </script>\n               <textarea id=\"Comments\" name=\"Comments\" style=\"height:40px\"></textarea>\n            </div>\n        </div>\n        \n        <p><input type=\"submit\" value=\"UPDATE\" name=\"SUBMIT\">\n         <input type=\"button\" value=\"RESET\" onclick=\"GA_Init()\">\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1930,"y":1080,"wires":[["e967f46b.938238","4291c63b.170728"]]},{"id":"e967f46b.938238","type":"function","z":"551be607.5d9aa8","name":"F GEO_Area_DB Select Record to UPDATE","func":"var ListGA=msg.payload;\nvar index=ListGA.Selected;\n\nvar SQLUPDATE={\"topic\" : \"UPDATE GEO_Area_DB SET \" +\n    \"ID_GA=\" + ListGA.GA[index].ID_GA + \", \" +\n    \"Environment=\" + \"\\\"\" + ListGA.GA[index].Environment + \"\\\"\" + \", \" + \n    \"TownCity=\" + \"\\\"\" + ListGA.GA[index].TownCity + \"\\\"\" + \", \" + \n    \"CountyStateProvince=\" + \"\\\"\" + ListGA.GA[index].CountyStateProvince + \"\\\"\" + \", \" + \n    \"Country=\" + \"\\\"\" + ListGA.GA[index].Country + \"\\\"\"  + \", \" + \n    \"GPS_Lat=\" + \"\\\"\" + ListGA.GA[index].GPS_Lat + \"\\\"\" + \", \" + \n    \"GPS_Lon=\" + \"\\\"\" + ListGA.GA[index].GPS_Lon + \"\\\"\" + \", \" + \n    \"A_Length=\" + \"\\\"\" + ListGA.GA[index].A_Length + \"\\\"\" + \", \" +\n    \"A_Width=\" + \"\\\"\" + ListGA.GA[index].A_Width + \"\\\"\" + \", \" +\n    \"Comments= \"+ \"\\\"\" + ListGA.GA[index].Comments + \"\\\"\" +\n\n    \"WHERE ID_GA=\" + ListGA.GA[index].ID_GA    \n};\n\nreturn [SQLUPDATE, msg];","outputs":1,"noerr":0,"x":2450,"y":1080,"wires":[["9299f008.4bccc","52b8a07.579a26"]]},{"id":"406520e9.a146b","type":"comment","z":"551be607.5d9aa8","name":"GA - UPDATE A GA IN GEO_Area_DB","info":"","x":1930,"y":1040,"wires":[]},{"id":"9299f008.4bccc","type":"sqlite","z":"551be607.5d9aa8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"GEO_Area_DB","x":2780,"y":1080,"wires":[["e1332eb1.e4535"]]},{"id":"21643057.4a4f9","type":"delay","z":0,"name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":590,"y":320,"wires":[["6b8abcaa.ff51f4","e84eb625.f61f28"]]},{"id":"6b8abcaa.ff51f4","type":"ui_template","z":0,"group":"6fa8bca9.53a094","name":"Batt_NEW","order":0,"width":0,"height":0,"format":"<div class=\"battery\">\n <div class=\"battery-level\" ></div>\n <div class=\"battery-text\"><p><span id=\"myMsg\"></span>%</p></div>\n</div>\n<!--\n<div class=\"battery\">\n <div class=\"battery-level warn\" style=\"width:18%;\"></div>\n</div>\n\n<div class=\"battery\">\n <div class=\"battery-level alert\" style=\"width:10%;\"></div>\n</div>\n-->\n\n<style>\n/*Initial Code By Mickael Novotny*/\n\n:root {\n --batt_lev: 50%;\n --batt_col: #30b455;\n}\n\nbody {\n padding: 25px 50px;\n}\n\n.battery {\n/* Battery outerwall*/\n border: 5px solid #333;\n width: 278px;\n height: 108px;\n padding: 4px;\n border-radius: 2px;\n position: relative;\n margin: 15px 0;\n} \n\n.battery::before {\n/* Battery Pole */\n content: '';\n height: 90px;\n width: 16px;\n background: #333;\n display: block;\n position: absolute;\n top: 7.5px;\n right: -16px;\n border-radius: 0 4px 4px 0;\n}\n\n.battery::after {\n/* Battery inner margins*/\n content: '';\n display: block;\n position: absolute;\n top: -3px;\n left: -3px;\n right: -3px;\n bottom: -3px;\n border: 6px solid #fff;\n border-radius: 2px;\n}\n\n\n.battery-level {\n/* battery level*/\n background: --batt_col; \n position: absolute;\n top: 0px;\n bottom: 0px;\n left: --batt_lev;\n}\n\n.battery-text{\n z-index:99;\n position: absolute;\n font-size:32px;\n top: 20px;\n left:120px;\n color:'';\n}\n\n.warn {\n background-color: #efaf13;\n}\n \n.alert {\n background-color: #e81309;\n} \n\n.alert::after {\n background-image: url('data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2232%22%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%3E%3Cg%3E%3C%2Fg%3E%20%3Cpath%20fill%3D%22%23e81309%22%20d%3D%22M17.927%2012l2.68-10.28c0.040-0.126%200.060-0.261%200.060-0.4%200-0.726-0.587-1.32-1.314-1.32-0.413%200-0.78%200.187-1.019%200.487l-13.38%2017.353c-0.18%200.227-0.287%200.513-0.287%200.827%200%200.733%200.6%201.333%201.333%201.333h8.073l-2.68%2010.28c-0.041%200.127-0.060%200.261-0.060%200.4%200.001%200.727%200.587%201.32%201.314%201.32%200.413%200%200.78-0.186%201.020-0.487l13.379-17.353c0.181-0.227%200.287-0.513%200.287-0.827%200-0.733-0.6-1.333-1.333-1.333h-8.073z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E'); \n background-repeat: no-repeat;\n background-size: 18px;\n height: 18px;\n width: 18px;\n margin: 6px 0 0 8px;\n content: '';\n display: inline-block;\n position: absolute;\n}\n\n}\n</style>\n\n\n<script>\n(function(scope) {\n scope.$watch('msg', function(msg) {\n // new message received\n document.getElementById(\"myMsg\").innerHTML = msg.payload;\n document.documentElement.style.setProperty(--batt_lev, msg.payload + '%');\n });\n})(scope);\n\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":770,"y":360,"wires":[[]]},{"id":"e84eb625.f61f28","type":"debug","z":0,"name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":760,"y":280,"wires":[]},{"id":"48d2c51c.0653bc","type":"inject","z":0,"name":"Trigger","topic":"","payload":"","payloadType":"date","repeat":"3","crontab":"","once":true,"onceDelay":0.1,"x":240,"y":320,"wires":[["6cdc0888.e000a8"]]},{"id":"6cdc0888.e000a8","type":"change","z":0,"name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload%100","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":400,"y":320,"wires":[["21643057.4a4f9"]]},{"id":"f59beb92.073098","type":"ui_template","z":0,"group":"74d0efb1.9fdec","name":"myTable","order":1,"width":30,"height":13,"format":"<style type=\"text/css\">\n.tg  {border-collapse:collapse;border-color:#ccc;border-spacing:0;margin:0px auto;}\n.tg td{background-color:#fff;border-color:#ccc;border-style:solid;border-width:1px;color:#333;\n  font-family:Arial, sans-serif;font-size:14px;overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg th{background-color:#f0f0f0;border-color:#ccc;border-style:solid;border-width:1px;color:#333;\n  font-family:Arial, sans-serif;font-size:14px;font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}\n.tg .tg-baqh{text-align:center;vertical-align:top}\n.tg .tg-0vih{background-color:#f9f9f9;font-weight:bold;text-align:center;vertical-align:top}\n.tg .tg-6t95{font-weight:bold;position:-webkit-sticky;position:sticky;text-align:center;top:-1px;vertical-align:top;\n  will-change:transform}\n.tg .tg-dzk6{background-color:#f9f9f9;text-align:center;vertical-align:top}\n.tg .tg-amwm{font-weight:bold;text-align:center;vertical-align:top}\n@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;margin: auto 0px;}}</style>\n<div class=\"tg-wrap\"><table class=\"tg\" style=\"undefined;table-layout: fixed; width: 1186px\" id=\"myTable\">\n<colgroup>\n<col style=\"width: 45px\">\n<col style=\"width: 60px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n<col style=\"width: 120px\">\n</colgroup>\n  <tr>\n    <th class=\"tg-6t95\">ID</th>\n    <th class=\"tg-6t95\">On/Off</th>\n    <th class=\"tg-6t95\">Monday</th>\n    <th class=\"tg-6t95\">Tuesday</th>\n    <th class=\"tg-6t95\">Wednesday</th>\n    <th class=\"tg-6t95\">Thursday</th>\n    <th class=\"tg-6t95\">Friday</th>\n    <th class=\"tg-6t95\">Saturday</th>\n    <th class=\"tg-6t95\">Sunday</th>\n    <th class=\"tg-6t95\">Holiday1</th>\n    <th class=\"tg-6t95\">Holiday2</th>\n  </tr>\n  <tr>\n    <td class=\"tg-0vih\">1</td>\n    <td class=\"tg-dzk6\">On</td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"mon1\" value=\"{{msg.payload[0]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"tue1\" value=\"{{msg.payload[1]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"wed1\" value=\"{{msg.payload[2]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"thu1\" value=\"{{msg.payload[3]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"fri1\" value=\"{{msg.payload[4]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sat1\" value=\"{{msg.payload[5]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sun1\" value=\"{{msg.payload[6]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol1_1\" value=\"{{msg.payload[7]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol2_1\" value=\"{{msg.payload[8]}}\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-amwm\">2</td>\n    <td class=\"tg-baqh\">Off</td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"mon2\" value=\"{{msg.payload[9]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"tue2\" value=\"{{msg.payload[10]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"wed2\" value=\"{{msg.payload[11]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"thu2\" value=\"{{msg.payload[12]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"fri2\" value=\"{{msg.payload[13]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sat2\" value=\"{{msg.payload[14]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sun2\" value=\"{{msg.payload[15]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol1_2\" value=\"{{msg.payload[16]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol2_2\" value=\"{{msg.payload[17]}}\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-0vih\">3</td>\n    <td class=\"tg-dzk6\">On</td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"mon3\" value=\"{{msg.payload[18]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"tue3\" value=\"{{msg.payload[19]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"wed3\" value=\"{{msg.payload[20]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"thu3\" value=\"{{msg.payload[21]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"fri3\" value=\"{{msg.payload[22]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sat3\" value=\"{{msg.payload[23]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sun3\" value=\"{{msg.payload[24]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol1_3\" value=\"{{msg.payload[25]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol2_3\" value=\"{{msg.payload[26]}}\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-amwm\">4</td>\n    <td class=\"tg-baqh\">Off</td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"mon4\" value=\"{{msg.payload[27]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"tue4\" value=\"{{msg.payload[28]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"wed4\" value=\"{{msg.payload[29]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"thu4\" value=\"{{msg.payload[30]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"fri4\" value=\"{{msg.payload[31]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sat4\" value=\"{{msg.payload[32]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sun4\" value=\"{{msg.payload[33]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol1_4\" value=\"{{msg.payload[34]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol2_4\" value=\"{{msg.payload[35]}}\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-0vih\">5</td>\n    <td class=\"tg-dzk6\">On</td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"mon5\" value=\"{{msg.payload[36]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"tue5\" value=\"{{msg.payload[37]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"wed5\" value=\"{{msg.payload[38]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"thu5\" value=\"{{msg.payload[39]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"fri5\" value=\"{{msg.payload[40]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sat5\" value=\"{{msg.payload[41]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sun5\" value=\"{{msg.payload[42]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol1_5\" value=\"{{msg.payload[43]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol2_5\" value=\"{{msg.payload[44]}}\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-amwm\">6</td>\n    <td class=\"tg-baqh\">Off</td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"mon6\" value=\"{{msg.payload[45]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"tue6\" value=\"{{msg.payload[46]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"wed6\" value=\"{{msg.payload[47]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"thu6\" value=\"{{msg.payload[48]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"fri6\" value=\"{{msg.payload[49]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sat6\" value=\"{{msg.payload[50]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sun6\" value=\"{{msg.payload[51]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol1_6\" value=\"{{msg.payload[52]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol2_6\" value=\"{{msg.payload[53]}}\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-0vih\">7</td>\n    <td class=\"tg-dzk6\">On</td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"mon7\" value=\"{{msg.payload[54]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"tue7\" value=\"{{msg.payload[55]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"wed7\" value=\"{{msg.payload[56]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"thu7\" value=\"{{msg.payload[57]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"fri7\" value=\"{{msg.payload[58]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sat7\" value=\"{{msg.payload[59]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"sun7\" value=\"{{msg.payload[60]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol1_7\" value=\"{{msg.payload[61]}}\"></td>\n    <td class=\"tg-dzk6\"><input type=\"time\" id=\"hol2_7\" value=\"{{msg.payload[62]}}\"></td>\n  </tr>\n  <tr>\n    <td class=\"tg-amwm\">8</td>\n    <td class=\"tg-baqh\">Off</td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"mon8\" value=\"{{msg.payload[63]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"tue8\" value=\"{{msg.payload[64]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"wed8\" value=\"{{msg.payload[65]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"thu8\" value=\"{{msg.payload[66]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"fri8\" value=\"{{msg.payload[67]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sat8\" value=\"{{msg.payload[68]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"sun8\" value=\"{{msg.payload[69]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol1_8\" value=\"{{msg.payload[70]}}\"></td>\n    <td class=\"tg-baqh\"><input type=\"time\" id=\"hol2_8\" value=\"{{msg.payload[71]}}\"></td>\n  </tr>\n</table>\n<br/>\n<br/>\n<p align=\"center\">\n    <label for=\"id_num\">Row to Add/Edit:  </label><input type=\"number\" id=\"id_num\" min=\"1\" max=\"8\" value=\"1\" style=\"width: 40px\">\n</p>    \n<p align=\"center\">\n    <label for=\"timeset\">Time to Add/Edit:   </label><input type=\"time\" id=\"timeset\">\n</p>\n<p align=\"center\">\n    <input type=\"button\" id=\"sa\" value=\"Set All\" onclick=\"setAll()\" />\n    <input type=\"button\" id=\"smf\" value=\"Set Mon-Fri\" onclick=\"setMonFri()\" />\n    <input type=\"button\" id=\"clrrow\" value=\"Clear Row\" onclick=\"clearRow()\" />\n    <input type=\"button\" id=\"clrall\" value=\"Clear All\" onclick=\"clearAll()\" />\n</p>\n<p align=\"center\">\n    <input type=\"button\" id=\"bt\" value=\"Save All Schedules\" onclick=\"saveTableData()\" />\n</p>\n<script>\n\ntheScope = scope;\n(function(scope) {\n    scope.$watch('msg', function(msg){\n    } );  \n})(scope);\n\nfunction saveTableData() {\n    var myTab = document.getElementById('myTable');\n    var numrows = document.getElementById('id_num').value;\n    var arrTbl = [];\n    for (i = 1; i < numrows; i++) {\n\n        // LOOP THROUGH EACH CELL OF THE CURENT ROW TO READ CELL VALUES.\n        for (var j = 1; j < 10; j++) {\n            if (j == 1) {\n                var dayVal = ('mon' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 2) {\n                var dayVal = ('tue' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 3) {\n                var dayVal = ('wed' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 4) {\n                var dayVal = ('thu' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 5) {\n                var dayVal = ('fri' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 6) {\n                var dayVal = ('sat' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 7) {\n                var dayVal = ('sun' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 8) {\n                var dayVal = ('hol1_' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            } else if (j == 9) {\n                var dayVal = ('hol2_' + i); \n                var timeVal = document.getElementById(dayVal).value;\n            }\n            arrTbl.push(timeVal);\n        }\n    }\n    theScope.send({payload:arrTbl});\n}\n\nfunction setAll() {\n    var idVal = document.getElementById('id_num').value;\n    var timeVal = document.getElementById('timeset').value;\n    document.getElementById('mon' + idVal).value = timeVal;\n    document.getElementById('tue' + idVal).value = timeVal;\n    document.getElementById('wed' + idVal).value = timeVal;\n    document.getElementById('thu' + idVal).value = timeVal;\n    document.getElementById('fri' + idVal).value = timeVal;\n    document.getElementById('sat' + idVal).value = timeVal;\n    document.getElementById('sun' + idVal).value = timeVal;\n    document.getElementById('hol1_' + idVal).value = timeVal;\n    document.getElementById('hol2_' + idVal).value = timeVal;\n    document.getElementById(\"id_num\").stepUp(1);\n}\nfunction setMonFri() {\n    var idVal = document.getElementById('id_num').value;\n    var timeVal = document.getElementById('timeset').value;\n    document.getElementById('mon' + idVal).value = timeVal;\n    document.getElementById('tue' + idVal).value = timeVal;\n    document.getElementById('wed' + idVal).value = timeVal;\n    document.getElementById('thu' + idVal).value = timeVal;\n    document.getElementById('fri' + idVal).value = timeVal;\n    document.getElementById(\"id_num\").stepUp(1);\n}\nfunction clearRow() {\n    var idVal = document.getElementById('id_num').value;\n    var timeVal = null;\n    document.getElementById('mon' + idVal).value = timeVal;\n    document.getElementById('tue' + idVal).value = timeVal;\n    document.getElementById('wed' + idVal).value = timeVal;\n    document.getElementById('thu' + idVal).value = timeVal;\n    document.getElementById('fri' + idVal).value = timeVal;\n    document.getElementById('sat' + idVal).value = timeVal;\n    document.getElementById('sun' + idVal).value = timeVal;\n    document.getElementById('hol1_' + idVal).value = timeVal;\n    document.getElementById('hol2_' + idVal).value = timeVal;\n}\nfunction clearAll() {\n    var timeVal = null;\n    for (i = 1; i < 9; i++) {\n    document.getElementById('mon' + i).value = timeVal;\n    document.getElementById('tue' + i).value = timeVal;\n    document.getElementById('wed' + i).value = timeVal;\n    document.getElementById('thu' + i).value = timeVal;\n    document.getElementById('fri' + i).value = timeVal;\n    document.getElementById('sat' + i).value = timeVal;\n    document.getElementById('sun' + i).value = timeVal;\n    document.getElementById('hol1_' + i).value = timeVal;\n    document.getElementById('hol2_' + i).value = timeVal;\n    }\n}\n</script>\n</div>","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":440,"y":420,"wires":[["cc3dfa46.e3e0f8"]]},{"id":"de180eff.62024","type":"function","z":0,"name":"","func":"var numFlow = flow.get(\"number_scheds\");\nvar flowNames = [];\nvar outputMsgs = [];\nfor (i=0; i < numFlow; i++) {\n    var x=i+1;\n    var scheds = ('sched' + x + '_name');\n    flowNames[i] = flow.get(scheds);\n}\nreturn { payload: flowNames };","outputs":1,"noerr":0,"x":390,"y":300,"wires":[["24c27cf4.43e434"]]},{"id":"24c27cf4.43e434","type":"change","z":0,"name":"","rules":[{"t":"set","p":"options","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":300,"wires":[["c3af36e9.3875e8"]]},{"id":"c3af36e9.3875e8","type":"ui_dropdown","z":0,"name":"","label":"Select Schedule","tooltip":"","place":"Select Schedule","group":"74d0efb1.9fdec","order":2,"width":6,"height":1,"passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"","x":740,"y":300,"wires":[["4d52e0a6.de968"]]},{"id":"26451eb0.7ae392","type":"inject","z":0,"name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":230,"y":300,"wires":[["de180eff.62024","eb56fe8f.759b4"]]},{"id":"b6acee67.65292","type":"function","z":0,"name":"","func":"msg.payload = flow.get(\"sched1_name\");\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":340,"wires":[["c3af36e9.3875e8"]]},{"id":"eb56fe8f.759b4","type":"delay","z":0,"name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":400,"y":340,"wires":[["b6acee67.65292"]]},{"id":"4d52e0a6.de968","type":"function","z":0,"name":"","func":"flow.set(\"curr_sched\", msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":890,"y":300,"wires":[["6925fbfa.d16514"]]},{"id":"aa47a27b.29aec","type":"function","z":0,"name":"","func":"var currSched = flow.get(\"curr_sched\");\nif (Array.isArray(msg.payload)) { // replace all tableData\n    tableData=(msg.payload); \n}\nflow.set(currSched,tableData);\n","outputs":1,"noerr":0,"x":710,"y":420,"wires":[[]]},{"id":"cc3dfa46.e3e0f8","type":"switch","z":0,"name":"","property":"payload","propertyType":"msg","rules":[{"t":"istype","v":"array","vt":"array"},{"t":"null"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":420,"wires":[["aa47a27b.29aec"],[]]},{"id":"6925fbfa.d16514","type":"function","z":0,"name":"","func":"var currSched = flow.get(\"curr_sched\");\nmsg.payload = flow.get(currSched);\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":420,"wires":[["f59beb92.073098"]]},{"id":"4a1d3712.5479d8","type":"debug","z":"551be607.5d9aa8","name":"Out","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":2570,"y":460,"wires":[]},{"id":"4291c63b.170728","type":"debug","z":"551be607.5d9aa8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2010,"y":1120,"wires":[]},{"id":"52b8a07.579a26","type":"debug","z":"551be607.5d9aa8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":2340,"y":1040,"wires":[]},{"id":"5c675b2e.56b8e4","type":"debug","z":"551be607.5d9aa8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1990,"y":1380,"wires":[]},{"id":"a9915bb.63c08a8","type":"debug","z":"551be607.5d9aa8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":2340,"y":1300,"wires":[]},{"id":"c098d28f.44755","type":"function","z":"551be607.5d9aa8","name":"F GA Selected Global","func":"var output = msg.payload;\nvar GeoArea=global.get('GeoArea')||0;\nglobal.set('GeoArea',output);\n\nGeoArea={payload:GeoArea};\nreturn GeoArea;\n","outputs":1,"noerr":0,"x":2320,"y":560,"wires":[["4a1d3712.5479d8","ef18881a.407f38","55af672.0acd698"]]},{"id":"79f80a7f.051454","type":"function","z":"551be607.5d9aa8","name":"Function - GEO AREA Map","func":"\nvar CoordGA=msg.payload;\n\n\nvar CommandMap={};\n\n\nvar SetupMAP = { \"command\": { \"layer\":\"Esri Satellite\",\n                               \"lat\":CoordGA.OrgLat, \n                               \"lon\":CoordGA.OrgLon, \n                               \"zoom\":15,\n                               \"pitch\":60,\n                               \"bearing\":90,\n                               \"hidelayer\":[\"Leaflet\"],\n                               \"hidelayermenu\":true,\n                               \"panlock\":false,\n                               \"zoomlock\":true,\n                               \"usermenu\":\"hide\",\n                               \"hiderightclick\":true,\n                               \"legend\": \"<b>Traffic Sources</b></br><i style=\\\"background: lightgreen\\\"></i>RU<br><i style=\\\"background: lightblue\\\"></i> BU<br><i style=\\\"background: orange\\\"></i> SCU<br>\",\n                               \n                               //button\n                               \"button\":{ \"name\":\"Geographic Area\",\n                                          \"icon\": \"fa-street-view\",\n                                          \"position\":\"bottomright\" \n                                        },\n                                        \n                                \n                               //deletes layers        \n                               \"map\":   {\"delete\":[ \"Watercolor\",\n                                                    \"ship nav\",\n                                                    \"Geographic Area\",\n                                                    \"heatmap\",\n                                                    \"Terrain\",\n                                                    \"Esri\",\n                                                    \"Esri Dark Grey\",\n                                                    \"Esri Ocean\",\n                                                    \"OSM grey\",\n                                                    \"UK OS 1900\",\n                                                    \"UK OS 1919-47\",\n                                                    \"UK OS Opendata\", \n                                                    \"Nat Geo\",\n                                                    \"roads\",\n                                                    \"day/night\",\n                                                    \"Leaflet\",\n                                                    \"railways\",\n                                                    \"public transport\"],\n                                          \"bounds\":[[\n                                                        [CoordGA.PointA_Lat,CoordGA.PointA_Lon],\n                                                        [CoordGA.PointC_Lat,CoordGA.PointC_Lon]\n                                              ]]\n                                        }\n                           },\n                  //inserts a Rectangular Geographic Area          \n                  \"name\": CoordGA.Legend,\n                  \"lat\": CoordGA.PointA_Lat,\n                  \"lon\": CoordGA.PointA_Lon,\n                  \"color\":\"brown\",\n                  \"area\": [ [\n                                [CoordGA.PointA_Lat,CoordGA.PointA_Lon],\n                                [CoordGA.PointB_Lat,CoordGA.PointB_Lon],\n                                [CoordGA.PointC_Lat,CoordGA.PointC_Lon],\n                                [CoordGA.PointD_Lat,CoordGA.PointD_Lon]\n                            ]\n                          ],\n                  \"layer\": \"Geographic Area\",\n                  \"extrainfo\":\"GA\",\n                  \"stroke\": true,\n                  \"fillColor\":\"brown\",\n                  \"fillOpacity\": 0.2,\n                  \"popped\":false,\n                  \"icon\":\"map-o\",\n                  \"clickable\": true \n                 \n                        \n                        \n            };\n\n\n\n\nSetupMAP={payload:SetupMAP};\nCommandMap={payload:CommandMap};\n\nreturn [SetupMAP,CommandMap];","outputs":2,"noerr":0,"x":3280,"y":260,"wires":[["fd316a41.cd9d68","9828eb5b.695a08"],[]]},{"id":"9828eb5b.695a08","type":"ui_worldmap","z":"551be607.5d9aa8","group":"f550cf14.3c4dc","order":1,"width":"8","height":9,"name":"Geographic Area","lat":"","lon":"","zoom":"","layer":"Esri Satellite","cluster":"16","maxage":"","usermenu":"hide","layers":"hide","panit":"false","panlock":"false","zoomlock":"true","hiderightclick":"true","coords":"deg","showgrid":"true","path":"/worldmap","x":3730,"y":260,"wires":[]},{"id":"fd316a41.cd9d68","type":"debug","z":"551be607.5d9aa8","name":"Fixed","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":3330,"y":320,"wires":[]},{"id":"88e16852.ab5d18","type":"worldmap in","z":"551be607.5d9aa8","name":"","path":"/worldmap","events":"all","x":3020,"y":640,"wires":[["6bc5068.e5909f8"]]},{"id":"6bc5068.e5909f8","type":"debug","z":"551be607.5d9aa8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":3230,"y":640,"wires":[]},{"id":"55af672.0acd698","type":"function","z":"551be607.5d9aa8","name":"F GA Rectangle GPS Coordinates","func":"var output = msg.payload;\n\n//var OrgLat=output.GA[output.Selected].GPS_Lat;\nvar OrgLat=56;\n\n//var OrgLon=output.GA[output.Selected].GPS_Lon;\nvar OrgLon=-9;\n\nvar Length=output.GA[output.Selected].A_Length;\n\nvar Width=output.GA[output.Selected].A_Width;\n\nvar alfa,alfadegrees;\nvar Hypotenusa;\n\nvar CoordGA={};\n\n//JavaScript function to calculate the destination point given start point latitude / longitude (numeric degrees), bearing (numeric degrees) and distance (in m).\n\n//Converts from degrees to radians\nfunction toRad(n) \n{\n    return n * Math.PI / 180;\n}\n\n//Converts from radians to degrees\nfunction toDeg(n) \n{\n    return n * 180 / Math.PI;\n}\n\nfunction destVincenty(lat1, lon1, brng, dist) \n{\n    var a = 6378137;\n    var b = 6356752.3142;\n    var f = 1 / 298.257223563; // WGS-84 ellipsiod\n\n    var s = dist;\n    var alpha1 = toRad(brng);\n    var sinAlpha1 = Math.sin(alpha1);\n    var cosAlpha1 = Math.cos(alpha1);\n\n    var tanU1 = (1 - f) * Math.tan(toRad(lat1));\n    var cosU1 = 1 / Math.sqrt((1 + tanU1 * tanU1));\n    var sinU1 = tanU1 * cosU1;\n\n    var sigma1 = Math.atan2(tanU1, cosAlpha1);\n    var sinAlpha = cosU1 * sinAlpha1;\n    var cosSqAlpha = 1 - sinAlpha * sinAlpha;\n\n    var uSq = cosSqAlpha * (a * a - b * b) / (b * b);\n    var A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));\n    var B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));\n\n    var sigma = s / (b * A);\n    var sigmaP = 2 * Math.PI;\n\n    while (Math.abs(sigma - sigmaP) > 1e-12) \n    {\n        var cos2SigmaM = Math.cos(2 * sigma1 + sigma);\n        var sinSigma = Math.sin(sigma);\n        var cosSigma = Math.cos(sigma);\n        var deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) - B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));\n        sigmaP = sigma;\n        sigma = s / (b * A) + deltaSigma;\n    }\n\n    var tmp = sinU1 * sinSigma - cosU1 * cosSigma * cosAlpha1;\n    var lat2 = Math.atan2(sinU1 * cosSigma + cosU1 * sinSigma * cosAlpha1, (1 - f) * Math.sqrt(sinAlpha * sinAlpha + tmp * tmp));\n\n    var lambda = Math.atan2(sinSigma * sinAlpha1, cosU1 * cosSigma - sinU1 * sinSigma * cosAlpha1);\n    var C = f / 16 * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));\n    var L = lambda - (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));\n    \n    var revAz = Math.atan2(sinAlpha, -tmp); // final bearing\n    \n    var destinity={};\n    destinity.Lat=toDeg(lat2);\n    destinity.Lon=lon1+toDeg(L);\n    \n    return destinity;\n  }\n\n\nCoordGA.OrgLat= OrgLat;\nCoordGA.OrgLon= OrgLon;\n\nCoordGA.Length=Length;\nCoordGA.Width=Width;\n\nalfa=Math.atan((Length/2)/(Width/2));\nalfadegrees=toDeg(alfa);\n\nHypotenusa=Math.sqrt(Math.pow(Length/2,2)+Math.pow(Width/2,2));\n\n//Rectangle Coordinates - GA under Study\n\nCoordGA.PointA_Lat=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,(-1)*alfadegrees,Hypotenusa).Lat; \nCoordGA.PointA_Lon=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,(-1)*alfadegrees,Hypotenusa).Lon;\n\nCoordGA.PointB_Lat=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,alfadegrees,Hypotenusa).Lat; \nCoordGA.PointB_Lon=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,alfadegrees,Hypotenusa).Lon;\n                                  \nCoordGA.PointC_Lat=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,alfadegrees+90,Hypotenusa).Lat; \nCoordGA.PointC_Lon=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,alfadegrees+90,Hypotenusa).Lon;\n\nCoordGA.PointD_Lat=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,alfadegrees+180,Hypotenusa).Lat; \nCoordGA.PointD_Lon=destVincenty(CoordGA.OrgLat,CoordGA.OrgLon,alfadegrees+180,Hypotenusa).Lon;\n\nCoordGA.PointE_Lat=CoordGA.PointA_Lat;\nCoordGA.PointE_Lon=CoordGA.PointA_Lon;\n\nCoordGA.Legend=\"GA \"+ output.GA[output.Selected].ID_GA + \" \" + \" \" +\n                    output.GA[output.Selected].Country + \" \" + \" \" +\n                    output.GA[output.Selected].TownCity + \" \" + \" \" +\n                    output.GA[output.Selected].Environment;\n\nCoordGA={payload:CoordGA};\nreturn CoordGA;","outputs":1,"noerr":0,"x":2580,"y":280,"wires":[["2060133.78461ec","79f80a7f.051454"]]},{"id":"2060133.78461ec","type":"debug","z":"551be607.5d9aa8","name":"Rectangle GPS Coordinates","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":2740,"y":200,"wires":[]},{"id":"3533fc96.8d9b54","type":"ui_template","z":"551be607.5d9aa8","group":"c31dab00.a5f578","name":"GA - New GA Input Form new","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar Values;\nvar NextIDGA;\n\n\n//User ID_GA Validation\nfunction ID_GA_validation(id,max)\n{\n    var id_val = id.value;\n    if (id_val == 0 || id_val > max)\n    {\n        window.alert(\"ID_GA should not be empty / be not higher than \"+max+\" value=\"+id_val);\n        id.focus();\n        return false;\n    }\n    return true;\n}\n\n//Distance validation\nfunction LenghtWidthSelect(Distance)\n{ \n    var numbers = /^[+]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(Distance.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Distances must have numbers and . only');\n        Distance.focus();\n        return false;\n    }\n}\n\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//Environment validation\nfunction EnvironmentSelect(Environment)\n{\n    if(Environment.value == \"Default\")\n    {\n        alert('Select an environment from the list');\n        Environment.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//TownCity validation\nfunction TownCitySelect(TownCity)\n{\n    var letters = /^[0-9a-zA-Z]+$/;\n    if(TownCity.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('TownCity must have alphanumeric characters only');\n        TownCity.focus();\n        return false;\n    }\n}\n\n//CountyStateProvince validation\nfunction CountyStateProvinceSelect(CountyStateProvince)\n{\n    var letters = /^[0-9a-zA-Z]+$/;\n    if(CountyStateProvince.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('CountyStateProvince must have alphanumeric characters only');\n        CountyStateProvince.focus();\n        return false;\n    }\n}\n\n//Country validation\nfunction CountrySelect(Country)\n{\n    if(Country.value == \"Default\")\n    {\n        alert('Select a country from the list');\n        Country.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n\n\n\nfunction GA_New()\n{\n    \n    //alert(\"FormValues\");\n    \n    var idga = document.registration.idga;\n    var TownCity = document.registration.TownCity;\n    var CountyStateProvince = document.registration.CountyStateProvince;\n    var Country = document.registration.Country;\n    var Environment = document.registration.Environment;\n    var GPS_Lat = document.registration.GPS_Lat;\n    var GPS_Lon = document.registration.GPS_Lon;\n    var Length = document.registration.Length;\n    var Width = document.registration.Width;\n    var Comments = document.registration.Comments;\n    \n    \n    var FormValues =\"\";\n    FormValues = FormValues + idga.value + \";\";\n    \n    if(TownCitySelect(TownCity))\n    {\n        FormValues = FormValues + TownCity.value + \";\";\n        if(CountyStateProvinceSelect(CountyStateProvince))\n        { \n            FormValues = FormValues + CountyStateProvince.value + \";\";\n            if(CountrySelect(Country))\n            {\n                FormValues = FormValues + Country.value + \";\";\n                if(EnvironmentSelect(Environment))\n                {\n                    FormValues = FormValues + Environment.value + \";\";\n                    if(GPSCoordSelect(GPS_Lat))\n                    {\n                        FormValues = FormValues + GPS_Lat.value + \"; \";\n                        if(GPSCoordSelect(GPS_Lon))\n                        {\n                            FormValues = FormValues + GPS_Lon.value + \";\";\n                            if(LenghtWidthSelect(Length))\n                            {\n                                FormValues = FormValues + Length.value + \";\";\n                                if(LenghtWidthSelect(Width))\n                                {\n                                    FormValues = FormValues + Width.value + \";\";\n                                    FormValues = FormValues + Comments.value;\n                                    theScope.send({payload:FormValues});\n                                }\n                            }\n                        }\n                    } \n                }\n            } \n        }\n        \n    }\n    return false;\n}\n\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\ninput[type=\"submit\"]{\n   /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"reset\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert a Geographic Area</h1>\n<p></p>\n<form name='registration' onSubmit=\"return GA_New();\">\n        <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    Values=data;\n                    NextIDGA=data.NextIDGA;\n                 });\n            })(scope);\n          </script>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idga\">ID_GA</label>\n            </div>\n            <div class=\"col-75\">\n               <input type=\"text\" id=\"idga\" name=\"idga\" value={{msg.payload.NextIDGA}} readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"TownCity\">TownCity</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"TownCity\" name=\"TownCity\" placeholder=\"TownCity..\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"CountyStateProvince\">CountyProvince</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"CountyStateProvince\" name=\"CountyStateProvince\" placeholder=\"CountyStateProvince...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Country\">Country</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Country\" name=\"Country\">\n                    <option value=\"Portugal\">Portugal</option>\n                    <option value=\"Spain\">Spain</option>\n                    <option value=\"France\">France</option>\n                    <option value=\"Germany\">Germany</option>\n                    <option value=\"Belgium\">Belgium</option>\n                    <option value=\"Danmark\">Danmark</option>\n                    <option value=\"Norway\">Norway</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Environment\">Environment</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Environment\" name=\"Environment\">\n                    <option value=\"Urban\">Urban</option>\n                    <option value=\"Sub-Urban\">Sub-Urban</option>\n                    <option value=\"Rural\">Rural</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" placeholder=\"GPS_Lat..\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" placeholder=\"GPS_Lon..\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Length\">Length</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Length\" name=\"Length\" placeholder=\"Length..\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Width\">Width</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Width\" name=\"Width\" placeholder=\"Width..\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Comments\">Comments</label>\n            </div>\n            <div class=\"col-75\">\n              <textarea id=\"Comments\" name=\"Comments\" style=\"height:40px\"></textarea>\n            </div>\n        </div>\n        \n        <p><input type=\"submit\" value=\"INSERT\" name=\"SUBMIT\">\n        <input type=\"reset\" value=\"RESET\" name=\"RESET\"></p>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1910,"y":800,"wires":[["98d6dc96.0da67"]]},{"id":"fb1b8d56.1dc33","type":"debug","z":"551be607.5d9aa8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1870,"y":620,"wires":[]},{"id":"b1a83f57.a5eef","type":"inject","z":"fc65fec6.42377","name":"New Building","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":230,"y":1980,"wires":[["55b97e15.e28a1"]]},{"id":"55b97e15.e28a1","type":"function","z":"fc65fec6.42377","name":"Add Building","func":"var thing = {\n    name:\"Hotel 1\", \n    lat:41.1665, \n    lon:-8.6234,\n    icon:\"hotel\",\n    iconColor:\"darkred\",\n    extrainfo:\"Hotel\",\n    layer:\"BuildingUnits\"\n};\nmsg.payload = thing;\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":1980,"wires":[[]]},{"id":"4772f1a6.b50fe","type":"comment","z":"551be607.5d9aa8","name":"GA - Selected GA Map Representation","info":"","x":2730,"y":160,"wires":[]},{"id":"3f6adb27.d0d194","type":"inject","z":"596fa7a0.139bc8","name":"New BU","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":200,"y":3440,"wires":[["b6176acb.774808"]]},{"id":"b6176acb.774808","type":"function","z":"596fa7a0.139bc8","name":"F Add Building Unit","func":"var thing = {\n    name:\"Hotel 1\", \n    lat:41.1675, \n    lon:-8.6244,\n    icon:\"hotel\",\n    iconColor:\"darkblue\",\n    extrainfo:\"Hotel\",\n    layer:\"Buiding Units\"\n};\nmsg.payload = thing;\nreturn msg;","outputs":1,"noerr":0,"x":430,"y":3440,"wires":[[]]},{"id":"b3e8b675.769d58","type":"inject","z":"596fa7a0.139bc8","name":"New RU","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":"","x":200,"y":3520,"wires":[["ae303f57.f1923"]]},{"id":"ae303f57.f1923","type":"function","z":"596fa7a0.139bc8","name":"F Add Residential Unit","func":"var thing = {\n    name:\"Residential Unit\", \n    lat:41.1655, \n    lon:-8.6224,\n    icon:\"home\",\n    iconColor:\"Lightgreen\",\n    extrainfo:\"House 1\",\n    layer:\"Residential Units\"\n};\nmsg.payload = thing;\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":3520,"wires":[[]]},{"id":"ad39db62.157f28","type":"function","z":"596fa7a0.139bc8","name":"F Draw GA from GPS Coordinates","func":"var GEAreaCoordinates=msg.payload;\n\nvar geo = { \"type\": \"FeatureCollection\",\n\"features\": [\n  {\n    \"type\": \"Feature\",\n    \"properties\": {\n      \"color\": \"rgb(0,0,255)\",\n      \"roofColor\": \"rgb(128,128,255)\",\n      \"height\": 20,\n      \"minHeight\": 0\n    },\n    \"geometry\": {\n      \"type\": \"Polygon\",\n      \"coordinates\": [\n        [\n        [-8.6234,41.1664],\n        [-8.6250,41.1664],\n        [-8.6250,41.1650],\n        [-8.6234,41.1650],\n        [-8.6234,41.1664]\n        ]\n      ]\n    }\n  }\n]\n}\n\nvar m = {overlay:\"Building Units\", geojson:geo, fit:true};\nmsg.payload = {command:{map:m, lat:41.1655, lon:-8.6224}};\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":3600,"wires":[[]]},{"id":"9ac78534.01f9c8","type":"inject","z":"596fa7a0.139bc8","name":"New BU Advanced Geojason 1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":3600,"wires":[["ad39db62.157f28"]]},{"id":"cfe82bf0.5cf4c8","type":"function","z":"596fa7a0.139bc8","name":"F Add Building Unit Advanced 2","func":"var geojsonFeature = \n{\n    \"type\": \"FeatureCollection\",\n    \"features\":[\n        {\n            \"type\": \"Feature\",\n            \"properties\": {\n                            \"name\": \"Hotel\",\n                            \"amenity\": \"Building Unit\",\n                            \"popupContent\": \"This is where the Rockies play!\",\n                            \"icon\":'/logo_UA.png',\n                            \"iconColor\":\"Lightgreen\",\n                            \"extrainfo\":\"HOTEL\"\n                        },\n            \"geometry\": {\n                            \"type\": \"Point\",\n                            \"coordinates\": [-8.6244, 41.1685]\n                        }\n        },\n        {\n            \"type\": \"Feature\",\n            \"properties\": {\n                            \"name\": \"Hospital\",\n                            \"amenity\": \"Building Unit\",\n                            \"popupContent\": \"This is where the Rockies play!\",\n                            \"icon\":\"hospital\",\n                            \"iconColor\":\"Lightgreen\",\n                            \"extrainfo\":\"HOSPITAL\"\n                        },\n            \"geometry\": {\n                            \"type\": \"Point\",\n                            \"coordinates\": [-8.6238, 41.1675]\n                        }  \n    }]\n}\nvar m = {overlay:\"Building Units\", geojson:geojsonFeature, fit:true};\nmsg.payload = {command:{map:m, lat:41.1665, lon:-8.6234}};\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":3760,"wires":[[]]},{"id":"4023962a.d800f8","type":"inject","z":"596fa7a0.139bc8","name":"New BU Advanced Geojason 2","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":550,"y":3760,"wires":[["cfe82bf0.5cf4c8"]]},{"id":"19937f2d.977681","type":"inject","z":"596fa7a0.139bc8","name":"New BU Advanced Geojason 2","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":250,"y":3880,"wires":[["f5bfcb58.285d38"]]},{"id":"f5bfcb58.285d38","type":"function","z":"596fa7a0.139bc8","name":"F GA Rectangle GPS Coordinates","func":"\nvar OrgLat= 41.1665;\nvar OrgLon=-8.6238;\n\nvar Length=1000;\nvar Width=1000;\n\nvar CoordGA={};\n\n//JavaScript function to calculate the destination point given start point latitude / longitude (numeric degrees), bearing (numeric degrees) and distance (in m).\n\n//Converts from degrees to radians\nfunction toRad(n) \n{\n    return n * Math.PI / 180;\n}\n\n//Converts from radians to degrees\nfunction toDeg(n) \n{\n    return n * 180 / Math.PI;\n}\n\nfunction destVincenty(lat1, lon1, brng, dist) \n{\n    var a = 6378137;\n    var b = 6356752.3142;\n    var f = 1 / 298.257223563; // WGS-84 ellipsiod\n\n    var s = dist;\n    var alpha1 = toRad(brng);\n    var sinAlpha1 = Math.sin(alpha1);\n    var cosAlpha1 = Math.cos(alpha1);\n\n    var tanU1 = (1 - f) * Math.tan(toRad(lat1));\n    var cosU1 = 1 / Math.sqrt((1 + tanU1 * tanU1));\n    var sinU1 = tanU1 * cosU1;\n\n    var sigma1 = Math.atan2(tanU1, cosAlpha1);\n    var sinAlpha = cosU1 * sinAlpha1;\n    var cosSqAlpha = 1 - sinAlpha * sinAlpha;\n\n    var uSq = cosSqAlpha * (a * a - b * b) / (b * b);\n    var A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));\n    var B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));\n\n    var sigma = s / (b * A);\n    var sigmaP = 2 * Math.PI;\n\n    while (Math.abs(sigma - sigmaP) > 1e-12) \n    {\n        var cos2SigmaM = Math.cos(2 * sigma1 + sigma);\n        var sinSigma = Math.sin(sigma);\n        var cosSigma = Math.cos(sigma);\n        var deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) - B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));\n        sigmaP = sigma;\n        sigma = s / (b * A) + deltaSigma;\n    }\n\n    var tmp = sinU1 * sinSigma - cosU1 * cosSigma * cosAlpha1;\n    var lat2 = Math.atan2(sinU1 * cosSigma + cosU1 * sinSigma * cosAlpha1, (1 - f) * Math.sqrt(sinAlpha * sinAlpha + tmp * tmp));\n\n    var lambda = Math.atan2(sinSigma * sinAlpha1, cosU1 * cosSigma - sinU1 * sinSigma * cosAlpha1);\n    var C = f / 16 * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));\n    var L = lambda - (1 - C) * f * sinAlpha * (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));\n    \n    var revAz = Math.atan2(sinAlpha, -tmp); // final bearing\n    \n    var destinity={};\n    destinity.Lat=toDeg(lat2);\n    destinity.Lon=lon1+toDeg(L);\n    \n    return destinity;\n  }\n\n\nCoordGA.OrgLat= OrgLat;\nCoordGA.OrgLon=OrgLon;\n\nCoordGA.Length=Length;\nCoordGA.Width=Width;\n\nCoordGA.PointA_Lat=CoordGA.OrgLat;\nCoordGA.PointA_Lon=CoordGA.OrgLon;\n\nCoordGA.PointB_Lat=CoordGA.OrgLat; \nCoordGA.PointB_Lon=destVincenty(CoordGA.OrgLat, CoordGA.OrgLon,90,CoordGA.Length).Lon;\n                                  \nCoordGA.PointC_Lat=destVincenty(CoordGA.PointB_Lat,CoordGA.PointB_Lon,180,CoordGA.Width).Lat; \nCoordGA.PointC_Lon=CoordGA.PointB_Lon;\n\nCoordGA.PointD_Lat=CoordGA.PointC_Lat; \nCoordGA.PointD_Lon=destVincenty(CoordGA.PointC_Lat, CoordGA.PointC_Lon,270,CoordGA.Length).Lon;\n\nCoordGA.PointE_Lat=CoordGA.PointA_Lat;\nCoordGA.PointE_Lon=CoordGA.PointA_Lon;\n\nCoordGA={payload:CoordGA};\nreturn CoordGA;","outputs":1,"noerr":0,"x":600,"y":3880,"wires":[["43a4275f.ce25d8","c95edefe.c174e"]]},{"id":"43a4275f.ce25d8","type":"debug","z":"596fa7a0.139bc8","name":"GPS Coordinates","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":530,"y":3960,"wires":[]},{"id":"c95edefe.c174e","type":"function","z":"596fa7a0.139bc8","name":"F Draw GA from GPS Coordinates","func":"var CoordGA=msg.payload;\n\nvar GeoArea = { \"type\": \"FeatureCollection\",\n                \"features\": [ {       \"type\": \"Feature\",\n                                \"properties\": {     \"color\": \"rgb(0,255,0)\",\n                                                \"roofColor\": \"rgb(128,128,255)\",\n                                                     \"name\": \"Geographic Area\",\n                                                  \"amenity\": \"Building Unit\",\n                                             \"popupContent\": \"This is the Area under study\",\n                                                     //\"icon\":'/logo_UA.png',\n                                                \"iconColor\":\"Lightgreen\",\n                                                \"extrainfo\":\"Country: Town\"\n                                              },\n                                  \"geometry\": {      \"type\": \"Polygon\",\n                                              \"coordinates\": [ [\n                                                                    [CoordGA.PointA_Lon,CoordGA.PointA_Lat],\n                                                                    [CoordGA.PointB_Lon,CoordGA.PointB_Lat],\n                                                                    [CoordGA.PointC_Lon,CoordGA.PointC_Lat],\n                                                                    [CoordGA.PointD_Lon,CoordGA.PointD_Lat],\n                                                                    [CoordGA.PointE_Lon,CoordGA.PointE_Lat]\n                                                                ]\n                                                              ]\n                                              }\n                               }\n                            ]\n               }\n               \n               \n\nvar OnMap = {overlay:\"Geographic Area\", geojson:GeoArea, fit:true};\n\nmsg.payload = { command:{ map:OnMap, \n                          lat:41.1655, \n                          lon:-8.6224\n                        }\n              };\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":3860,"wires":[["b2039072.4055a"]]},{"id":"b2039072.4055a","type":"debug","z":"596fa7a0.139bc8","name":"GA Rectangle Coordinates","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1070,"y":3960,"wires":[]},{"id":"ba229a23.6f1818","type":"comment","z":"596fa7a0.139bc8","name":"RUi -  MAP REPRESENTATION AND SETUP OF RU","info":"This example shows how to embed the Worldmap \ninto a template node within the `node-red-dashboard`\n\nThe first flow creates a dashboard button that \ngenerates a randon position, with the required \nicon, and passes that to the worldmap. The\nmap is configured to automatically pan to the\nposition of any point that arrives.\n\nThe second flow initialise the dashboard template\nwith the initial map and sets it to a more square shape\nby adjusting the height.","x":310,"y":100,"wires":[]},{"id":"fe4cf17e.e8fc9","type":"comment","z":"596fa7a0.139bc8","name":"Residential Units - MENU","info":"","x":230,"y":520,"wires":[]},{"id":"ef18881a.407f38","type":"link out","z":"551be607.5d9aa8","name":"SELECT_GA","links":["b2368dcb.a90f7","ba78208b.d1f7f","d26b6b5c.320168"],"x":2595,"y":560,"wires":[]},{"id":"a2793d9b.fd335","type":"comment","z":"fc65fec6.42377","name":"Building Units - MENU","info":"","x":220,"y":500,"wires":[]},{"id":"412ef974.498fa8","type":"comment","z":"134bc9b.a104536","name":"SCUm -  MAP REPRESENTATION AND SETUP OF SCU","info":"","x":310,"y":100,"wires":[]},{"id":"b2368dcb.a90f7","type":"link in","z":"134bc9b.a104536","name":"Start_Title","links":["13bfca27.d090e6","ef18881a.407f38"],"x":115,"y":160,"wires":[[]]},{"id":"82b066e3.ce2788","type":"comment","z":"134bc9b.a104536","name":"Smart City Units - MENU","info":"","x":210,"y":560,"wires":[]},{"id":"8927a0ee.4410d","type":"comment","z":"596fa7a0.139bc8","name":"GA - LIST RU Option","info":"","x":220,"y":720,"wires":[]},{"id":"1aa957d7.b33148","type":"ui_template","z":"596fa7a0.139bc8","group":"8b71180d.2fa408","name":"GA - List Box All RU","order":6,"width":"9","height":"9","format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar RUValues;\nvar RUxIndex=0;\n\n\n//Select a RU to use in model\nfunction RU_Selection()\n{\n    RUValues.Selected = document.getElementById(\"selectRU\").selectedIndex;\n    \n    theScope.send({payload:RUValues});\n    theScope.send({payload:RUValues});\n}\n\n\n// Resets for the first RU\nfunction RU_Init()\n{\n    \n     if (RUValues.Number>0)\n    {\n        document.getElementById(\"selectRU\").selectedIndex = 0;\n        RUxIndex=0;\n\n        document.registrationRU.idru.value=RUValues.RU[RUxIndex].ID_RU;\n        document.registrationRU.Topology.value=RUValues.RU[RUxIndex].Topology;\n        document.registrationRU.Description.value=RUValues.RU[RUxIndex].Description;\n        document.registrationRU.NInHabitants.value=RUValues.RU[RUxIndex].NInHabitantes;\n        document.registrationRU.AreaLocality.value=RUValues.RU[RUxIndex].AreaLocality;\n        document.registrationRU.ZipPostCode.value=RUValues.RU[RUxIndex].ZipPostCode;\n        document.registrationRU.Street.value=RUValues.RU[RUxIndex].Street;\n        document.registrationRU.DoorNumber.value=RUValues.RU[RUxIndex].DoorNumber;\n        document.registrationRU.GPS_Lat.value=RUValues.RU[RUxIndex].GPS_Lat;\n        document.registrationRU.GPS_Lon.value=RUValues.RU[RUxIndex].GPS_Lon;\n        document.registrationRU.OtherInfo.value=RUValues.RU[RUxIndex].OtherInfo;\n        \n    }\n   \n}\n\nfunction RU_Selected()\n{\n     //alert(\"SELECT RU\");\n     if (RUValues.Number>0)\n    {\n        document.getElementById(\"selectRU\").selectedIndex = RUxIndex;\n\n        document.registrationRU.idru.value=RUValues.RU[RUxIndex].ID_RU;\n        document.registrationRU.Topology.value=RUValues.RU[RUxIndex].Topology;\n        document.registrationRU.Description.value=RUValues.RU[RUxIndex].Description;\n        document.registrationRU.NInHabitants.value=RUValues.RU[RUxIndex].NInHabitantes;\n        document.registrationRU.AreaLocality.value=RUValues.RU[RUxIndex].AreaLocality;\n        document.registrationRU.ZipPostCode.value=RUValues.RU[RUxIndex].ZipPostCode;\n        document.registrationRU.Street.value=RUValues.RU[RUxIndex].Street;\n        document.registrationRU.DoorNumber.value=RUValues.RU[RUxIndex].DoorNumber;\n        document.registrationRU.GPS_Lat.value=RUValues.RU[RUxIndex].GPS_Lat;\n        document.registrationRU.GPS_Lon.value=RUValues.RU[RUxIndex].GPS_Lon;\n        document.registrationRU.OtherInfo.value=RUValues.RU[RUxIndex].OtherInfo;\n    }\n   \n}\n\n// RU List is empty\nfunction RU_Empty()\n{\n        document.registrationRU.idru.value=\"\";\n        document.registrationRU.Topology.value=\"\";\n        document.registrationRU.Description.value=\"\";\n        document.registrationRU.NInHabitants.value=\"\";\n        document.registrationRU.AreaLocality.value=\"\";\n        document.registrationRU.ZipPostCode.value=\"\";\n        document.registrationRU.Street.value=\"\";\n        document.registrationRU.DoorNumber.value=\"\";\n        document.registrationRU.GPS_Lat.value=\"\";\n        document.registrationRU.GPS_Lon.value=\"\";\n        document.registrationRU.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown RU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in RU list\nfunction RUListSelEventItem() \n{\n  RUxIndex=document.getElementById(\"selectRU\").selectedIndex;\n  \n  document.registrationRU.idru.value=RUValues.RU[RUxIndex].ID_RU;\n  document.registrationRU.Topology.value=RUValues.RU[RUxIndex].Topology;\n  document.registrationRU.Description.value=RUValues.RU[RUxIndex].Description;\n  document.registrationRU.NInHabitants.value=RUValues.RU[RUxIndex].NInHabitantes;\n  document.registrationRU.AreaLocality.value=RUValues.RU[RUxIndex].AreaLocality;\n  document.registrationRU.ZipPostCode.value=RUValues.RU[RUxIndex].ZipPostCode;\n  document.registrationRU.Street.value=RUValues.RU[RUxIndex].Street;\n  document.registrationRU.DoorNumber.value=RUValues.RU[RUxIndex].DoorNumber;\n  document.registrationRU.GPS_Lat.value=RUValues.RU[RUxIndex].GPS_Lat;\n  document.registrationRU.GPS_Lon.value=RUValues.RU[RUxIndex].GPS_Lon;\n  document.registrationRU.OtherInfo.value=RUValues.RU[RUxIndex].OtherInfo;\n  \n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n     /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select a Residential Unit</h1>\n\n<form id=\"registrationRU\" name=\"registrationRU\">\n    <ul>\n        <select id=\"selectRU\" onchange=\"RUListSelEventItem()\" form=\"registrationRU\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    RUValues=data;\n                    \n                    //Create Residential Units List var sel\n                    var sel = document.getElementById(\"selectRU\");\n                    \n                    //Previous remove all options in Residentil Units List\n                    removeOptions(document.getElementById(\"selectRU\"));\n                    \n                    for (var i = 0; i < RUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"RU \" + RUValues.RU[i].ID_RU + \" \" +RUValues.RU[i].Topology+ \" \" +RUValues.RU[i].AreaLocality+ \" \" +RUValues.RU[i].Street+ \" \" +RUValues.RU[i].DoorNumber);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"RU \" + RUValues.RU[i].ID_RU + \" \" +RUValues.RU[i].Topology+ \" \" +RUValues.RU[i].AreaLocality+ \" \" +RUValues.RU[i].Street+ \" \" +RUValues.RU[i].DoorNumber);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    if (RUValues.Number>0)\n                        RU_Selected();\n                    else\n                    {\n                        RU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Residential Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Residential Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n          </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idru\">ID_RU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.idru.value=RUValues.RU[0].ID_RU;\n                </script>\n                <input type=\"text\" id=\"idru\" name=\"idru\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Topology\">Topology</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.Topology.value=RUValues.RU[0].Topology;\n                </script>\n                <input type=\"text\" id=\"Topology\" name=\"Topology\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.Description.value=RUValues.RU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"NInHabitants\">NInHabitants</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.NInHabitants.value=RUValues.RU[0].NInHabitantes;\n                </script>\n                <input type=\"text\" id=\"NInHabitants\" name=\"NInHabitants\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.Street.value=RUValues.RU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.DoorNumber.value=RUValues.RU[0].DoorNumber;\n                </script>\n                <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.AreaLocality.value=RUValues.RU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.ZipPostCode.value=RUValues.RU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.GPS_Lat.value=RUValues.RU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.GPS_Lon.value=RUValues.RU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.OtherInfo.value=RUValues.RU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\" readOnly=\"readOnly\" ></textarea>\n            </div>\n        </div>\n    \n        <p>\n            <button type=\"submit\" name=\"SELECT_RU\" onclick=\"RU_Selection()\"> SELECT </button>\n            <button type=\"submit\" name=\"RESET_RU\"  onclick=\"RU_Init()\"> RESET </button>\n        </p>\n        \n    </ul>\n</form>\n</body>\n\n\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1920,"y":720,"wires":[["4a51b0a4.59be6"]]},{"id":"3e798553.a0235a","type":"comment","z":"596fa7a0.139bc8","name":"GA - NEW RU Option","info":"","x":220,"y":960,"wires":[]},{"id":"4b57512b.c356","type":"comment","z":"596fa7a0.139bc8","name":"GA - UPDATE RU Option","info":"","x":230,"y":1260,"wires":[]},{"id":"98312f0f.e8156","type":"comment","z":"596fa7a0.139bc8","name":"GA - DELETE RU Option","info":"","x":230,"y":1560,"wires":[]},{"id":"c8516edb.510e8","type":"comment","z":"596fa7a0.139bc8","name":"GA - LIST BOX OF ALL RU IN GEO_Area_DB","info":"","x":1990,"y":680,"wires":[]},{"id":"39289eb1.9d96f2","type":"comment","z":"596fa7a0.139bc8","name":"GA - INSERT NEW RU IN GEO_Area_DB","info":"","x":1980,"y":980,"wires":[]},{"id":"c93b3e4.9796ec","type":"comment","z":"596fa7a0.139bc8","name":"GA - UPDATE A RU IN GEO_Area_DB","info":"","x":1970,"y":1320,"wires":[]},{"id":"b4811b45.48e3e8","type":"comment","z":"596fa7a0.139bc8","name":"GA - DELETE A RU IN GEO_Area_DB","info":"","x":1970,"y":1720,"wires":[]},{"id":"910c2c25.de8a8","type":"function","z":"596fa7a0.139bc8","name":"F RUnitDB in ID_GA SELECT ALL","func":"var GAIDSel =global.get('GeoArea');\n\n\n//var SQLSELECTALL={\"topic\" : \"SELECT * FROM RUnit_DB\"};\n\n//var output = msg.payload.title.split(\" \");\n\nvar SQLSELECTALL={\"topic\" : \"SELECT * FROM RUnit_DB WHERE ID_GA=\" + GAIDSel.GA[GAIDSel.Selected].ID_GA };\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":740,"y":720,"wires":[["a7d6da16.482008","8bf0e72e.564108"]]},{"id":"a7d6da16.482008","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":800,"y":660,"wires":[]},{"id":"8bf0e72e.564108","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"RUnit_DB","x":1100,"y":720,"wires":[["2e26c11e.6b1ede","2597d7c6.3e13a8"]]},{"id":"2e26c11e.6b1ede","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1130,"y":660,"wires":[]},{"id":"2597d7c6.3e13a8","type":"function","z":"596fa7a0.139bc8","name":"F RUnit_DB Read All Records","func":"var ReadAll_RU=msg.payload;\nvar NRU=global.get('NRU');\n\nvar RUList={};\n\nRUList.Number=msg.payload.length;\nRUList.Selected=0;\n\nRUList.RU=[];\n\nvar i;\nfor (i = 0; i < msg.payload.length; i++) {\n    // do something with msg.payload[i]\n    RUList.RU.push({});\n    RUList.RU[i]['ID_RU'] = msg.payload[i].ID_RU;\n    RUList.RU[i]['ID_GA'] = msg.payload[i].ID_GA;\n    RUList.RU[i]['Topology'] = msg.payload[i].Topology;\n    RUList.RU[i]['AreaLocality'] = msg.payload[i].AreaLocality;\n    RUList.RU[i]['ZipPostCode'] = msg.payload[i].ZipPostCode;\n    RUList.RU[i]['Street'] = msg.payload[i].Street;\n    RUList.RU[i]['DoorNumber'] = msg.payload[i].DoorNumber;\n    RUList.RU[i]['GPS_Lat'] = msg.payload[i].GPS_Lat;\n    RUList.RU[i]['GPS_Lon'] = msg.payload[i].GPS_Lon;\n    RUList.RU[i]['Description'] = msg.payload[i].Description;\n    RUList.RU[i]['NInHabitantes'] = msg.payload[i].NInHabitantes;\n    RUList.RU[i]['OtherInfo'] = msg.payload[i].OtherInfo;\n}\n\nRUList.NextIDRU=NRU;     //Max (ID_RU) + 1;\nRUList={payload:RUList};\n\nreturn RUList;       ","outputs":1,"noerr":0,"x":1410,"y":720,"wires":[["be747187.12a2f","1aa957d7.b33148","dbbc1654.a76ee8","e9097440.c6a368","512ab88.5216548","de87777a.9765c8"]]},{"id":"be747187.12a2f","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1520,"y":660,"wires":[]},{"id":"591b0de1.ba8024","type":"ui_ui_control","z":"596fa7a0.139bc8","name":"","x":860,"y":1120,"wires":[[]]},{"id":"4a51b0a4.59be6","type":"function","z":"596fa7a0.139bc8","name":"F RU Selected Global","func":"var output = msg.payload;\nvar RUSelected=global.get('RUSelected')||0;\nglobal.set('RUSelected',output);\n\nRUSelected={payload:RUSelected};\nreturn RUSelected;\n","outputs":1,"noerr":0,"x":2300,"y":720,"wires":[["f40c5986.26a918","747f2108.21b77"]]},{"id":"f40c5986.26a918","type":"debug","z":"596fa7a0.139bc8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2330,"y":760,"wires":[]},{"id":"fe220c0a.9e33a","type":"comment","z":"3f6b092a.4e0e46","name":"MENU - ECOSYSTEM","info":"","x":280,"y":280,"wires":[]},{"id":"f17c2cd8.c21ba","type":"ui_button","z":"3f6b092a.4e0e46","name":"Geographical Areas","group":"49f47f03.1fe74","order":2,"width":"4","height":1,"passthru":true,"label":"<font size=2>Geographical Areas","tooltip":"Geographical Area - Setup","color":"white","bgcolor":"black","icon":"fa-lg fa-globe","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"]}}","payloadType":"json","topic":"GA","x":430,"y":420,"wires":[["a48af61c.e9dbc8","74b0f185.9cdd7"]],"outputLabels":["Geographical Area"]},{"id":"9fe0325f.305ea","type":"ui_button","z":"3f6b092a.4e0e46","name":"Residential Units","group":"49f47f03.1fe74","order":4,"width":"4","height":1,"passthru":true,"label":"<font size=2>Residential Units","tooltip":"Residential Units - Setup","color":"white","bgcolor":"black","icon":"fa-lg fa-home","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\"]}}","payloadType":"json","topic":"RU","x":430,"y":660,"wires":[["a48af61c.e9dbc8"]]},{"id":"2b6376a4.04a0ba","type":"ui_button","z":"3f6b092a.4e0e46","name":"Building Units","group":"49f47f03.1fe74","order":6,"width":"4","height":1,"passthru":true,"label":"<font size=2>Building Units","tooltip":"Building Units - Setup","color":"white","bgcolor":"black","icon":"business","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\"]}}","payloadType":"json","topic":"BU","x":420,"y":900,"wires":[["a48af61c.e9dbc8"]]},{"id":"6f172322.cb3d8c","type":"ui_button","z":"3f6b092a.4e0e46","name":"Smart City Units","group":"49f47f03.1fe74","order":8,"width":"4","height":1,"passthru":true,"label":"<font size=2>SmartCity Units","tooltip":"Smart City Units - Setup","color":"white","bgcolor":"black","icon":"traffic","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\"]}}","payloadType":"json","topic":"SCU","x":420,"y":1140,"wires":[["a48af61c.e9dbc8"]]},{"id":"301ea050.7086","type":"ui_button","z":"fe161492.f410e8","name":"","group":"95a24b60.84f328","order":0,"width":"3","height":"3","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-male bigIcon","payload":"","payloadType":"str","topic":"","x":550,"y":200,"wires":[[]]},{"id":"7a9b4c8e.74f8f4","type":"ui_template","z":"fe161492.f410e8","group":"1bbcc124.d8ae8f","name":"icon style","order":1,"width":0,"height":0,"format":"<style>\n    .bigIcon{\n        font-size:4em;\n        transition: 1s;\n    }\n    .bigIcon.red{\n        color:red;\n    }\n    \n</style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"global","x":560,"y":140,"wires":[[]]},{"id":"b4e55ffd.0c476","type":"inject","z":"fe161492.f410e8","name":"inject","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":180,"wires":[[]]},{"id":"44c4db16.309a04","type":"inject","z":"fe161492.f410e8","name":"inject","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":220,"wires":[[]]},{"id":"b0676480.dcc968","type":"change","z":"fe161492.f410e8","name":"","rules":[{"t":"set","p":"ui_control.icon","pt":"msg","to":"fa-male bigIcon","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":180,"wires":[["301ea050.7086"]]},{"id":"c795a466.a52d68","type":"change","z":"fe161492.f410e8","name":"","rules":[{"t":"set","p":"ui_control.icon","pt":"msg","to":"fa-male bigIcon red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":220,"wires":[["301ea050.7086"]]},{"id":"41aa6838.ab1e28","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"blue","order":4,"width":"2","height":"2","format":"\n<md-button class=\"vibrate filled touched bigfont rounded\" style=\"background-color:#2980b9\"   ng-click=\"send({payload: 'Hello World'})\"> \n    Blue<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":310,"y":180,"wires":[[]]},{"id":"5fe02000.891ff","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"red","order":2,"width":"2","height":"2","format":"\n<md-button class=\"vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\" ng-click=\"send({payload: 'Hello World'})\"> \n    Red<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":310,"y":100,"wires":[[]]},{"id":"e422a1f4.ed8f7","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"green","order":3,"width":"2","height":"2","format":"\n<md-button class=\"filled touched bigfont rounded vibrate\" style=\"background-color:#27ae60\" ng-click=\"send({payload: 'Hello World'})\"> \n    Green<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":310,"y":140,"wires":[[]]},{"id":"a6599a3b.909a38","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"","order":5,"width":"2","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#16a085\"   ng-click=\"send({payload: 'Hello World'})\"> \n    Blue<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":320,"y":260,"wires":[[]]},{"id":"808cbf86.6ebdf","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"","order":6,"width":"2","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#e67e22\" ng-click=\"send({payload: 'Hello World'})\"> \n    Red<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":320,"y":220,"wires":[[]]},{"id":"73b480ab.4fb83","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"on","order":7,"width":"1","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#34495e\" ng-click=\"send({payload: 'Hello World'})\"> \n    On\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":310,"y":300,"wires":[[]]},{"id":"d277ae42.cd5a2","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"off","order":8,"width":"1","height":"1","format":"\n<md-button class=\"vibrate filled touched smallfont rounded\" style=\"background-color:#8e44ad\" ng-click=\"send({payload: 'Hello World'})\"> \n    Off\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"x":310,"y":340,"wires":[[]]},{"id":"ad731a19.b35528","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"stuff","order":0,"width":"0","height":"0","format":"<style>\n  .filled { \n      height: 100% !important;\n\n      padding: 0 !important;\n      margin: 0 !important;\n  }\n  .nr-dashboard-template {\n      padding: 0;\n      margin: 0;\n  }\n  \n  .rounded {\n  border-radius: 12px 12px 12px 12px;\n}\n \n   .bigfont {\n  font-size: 18px;\n}\n\n   .smallfont {\n  font-size: 12px;\n}\n  \n</style>\n\n<script>\n$('.vibrate').on('click', function() {\n  navigator.vibrate(100);\n});\n\nfunction restore_bg(x) {\n            $(this).css(\"background-color\", x);\n    };\n\n$('.touched').on('mousedown', function() {\n    \n    var x= $(this).css(\"background-color\");\n    $(this).css(\"background-color\", \"yellow\");\n    \n    setTimeout(restore_bg.bind(this,x),100);\n    navigator.vibrate(80);\n    });\n    \n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":190,"y":100,"wires":[[]]},{"id":"fe92be4d.1f74b","type":"ui_template","z":"31b60bf0.54d7e4","group":"bbe286b2.689498","name":"red","order":2,"width":"2","height":"2","format":"\n<md-button class=\"vibrate filled touched bigfont rounded\" style=\"background-color:#c0392b\" ng-click=\"send({payload: 'Hello World'})\"> \n    Red<br/>button\n</md-button> \n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":510,"y":100,"wires":[[]]},{"id":"a48af61c.e9dbc8","type":"ui_ui_control","z":"3f6b092a.4e0e46","name":"","events":"connect","x":1080,"y":760,"wires":[[]]},{"id":"ad319f0c.ba262","type":"ui_button","z":"551be607.5d9aa8","name":"LIST GA","group":"723bdd3.55caf24","order":2,"width":"4","height":1,"passthru":true,"label":"List all of GA","tooltip":"List all the records","color":"black","bgcolor":"white","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\"]}}","payloadType":"json","topic":"LIST","x":560,"y":560,"wires":[["e1332eb1.e4535","2103666f.deb46a"]]},{"id":"d8614593.1cc9b8","type":"ui_button","z":"551be607.5d9aa8","name":"NEW GA","group":"723bdd3.55caf24","order":5,"width":"4","height":1,"passthru":false,"label":"Insert a new GA","tooltip":"Inserts a new record","color":"black","bgcolor":"white","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\"]}}","payloadType":"json","topic":"NEW","x":560,"y":820,"wires":[["e1332eb1.e4535","2103666f.deb46a"]]},{"id":"3eb970c5.6de89","type":"ui_button","z":"551be607.5d9aa8","name":"UPDATE GA","group":"723bdd3.55caf24","order":8,"width":"4","height":1,"passthru":true,"label":"Update a GA","tooltip":"Updates a record","color":"black","bgcolor":"white","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\"]}}","payloadType":"json","topic":"UPDATE","x":570,"y":1080,"wires":[["e1332eb1.e4535","2103666f.deb46a"]]},{"id":"3ae0e41f.e25fec","type":"ui_button","z":"551be607.5d9aa8","name":"DELETE GA","group":"723bdd3.55caf24","order":11,"width":"4","height":1,"passthru":true,"label":"Delete a GA","tooltip":"Deletes a record","color":"black","bgcolor":"white","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\"]}}","payloadType":"json","topic":"DELETE","x":570,"y":1320,"wires":[["e1332eb1.e4535","2103666f.deb46a"]]},{"id":"cb09db44.fe9ac8","type":"ui_button","z":"596fa7a0.139bc8","name":"LIST RU","group":"623cc13a.2b101","order":2,"width":"4","height":1,"passthru":true,"label":"List all of RU","tooltip":"List all the records","color":"black","bgcolor":"lightgreen","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\"]}}","payloadType":"json","topic":"LIST","x":420,"y":720,"wires":[["910c2c25.de8a8","591b0de1.ba8024"]]},{"id":"17e4ccdd.ef4173","type":"ui_button","z":"596fa7a0.139bc8","name":"NEW RU","group":"623cc13a.2b101","order":5,"width":"4","height":1,"passthru":true,"label":"Insert a new RU","tooltip":"Inserts a new record","color":"black","bgcolor":"lightgreen","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\"]}}","payloadType":"json","topic":"NEW","x":420,"y":960,"wires":[["910c2c25.de8a8","98558cc5.3458d","591b0de1.ba8024"]]},{"id":"bd1a5328.5eba1","type":"link in","z":"551be607.5d9aa8","name":"Write in GA","links":["7685e9c3.ed1de8","d71c08db.aa4628","d775cb2b.b69848"],"x":3615,"y":200,"wires":[["9828eb5b.695a08"]]},{"id":"747f2108.21b77","type":"function","z":"596fa7a0.139bc8","name":"F Show Selected Residential Unit","func":"\nvar RU_GA = msg.payload;\n\nvar RU_Sel=msg.payload.Selected;\n\nvar thing = {\n    name:\"Residential Unit \"+msg.payload.RU[RU_Sel].ID_RU+\" in GA \"+ msg.payload.RU[RU_Sel].ID_GA , \n    lat: msg.payload.RU[RU_Sel].GPS_Lat,\n    lon: msg.payload.RU[RU_Sel].GPS_Lon,\n    icon:\"home\",\n    iconColor:\"Lightgreen\",\n    draggable: true,\n    //tooltip:\"RU \"+ msg.payload.RU[RU_Sel].ID_RU,\n    extrainfo:\"Residential Unit \"+ msg.payload.RU[RU_Sel].ID_RU,\n    layer:\"Residential Units\"\n};\nthing={payload:thing};\nreturn thing;","outputs":1,"noerr":0,"x":2780,"y":720,"wires":[["d775cb2b.b69848","935dc506.6a51d8"]]},{"id":"ccc88136.4815d","type":"function","z":"596fa7a0.139bc8","name":"F Add Building Unit Advanced 2","func":"var geojsonFeature = \n{\n    \"type\": \"FeatureCollection\",\n    \"features\":[\n        {\n            \"type\": \"Feature\",\n            \"properties\": {\n                            \"name\": \"Hotel\",\n                            \"amenity\": \"Building Unit\",\n                            \"extrainfo\":\"HOTEL\",\n                            \"marker-color\": \"#8f3838\",\n                            \"marker-size\": \"medium\",\n                            \"marker-symbol\": \"building\",\n                            \"address\": \"Rua das Batatas\",\n                            \"popupContent\": \"<h1>Hotel WELLNESS</h1><p>Rua das Batatas<br />                             LANGTON LONG BLANDFORD<br />                             DT11 8BU<br />                             tel: 070 8132 5179                         </p>\",\n                            \"stroke\": \"#555555\",\n                            \"stroke-opacity\": \"1.0\",\n                            \"stroke-width\": 2,\n                             \"fill\": \"#555555\",\n                            \"fill-opacity\": 0.5\n                        },\n            \"geometry\": {\n                            \"type\": \"Point\",\n                            \"coordinates\": [-8.6451, 40.6462]\n                        }\n        },\n        {\n            \"type\": \"Feature\",\n            \"properties\": {\n                            \"name\": \"Hospital\",\n                            \"amenity\": \"Building Unit\",\n                            \"popupContent\": \"This is where the Rockies play!\",\n                            \"icon\":\"hospital\",\n                            \"iconColor\":\"Lightgreen\",\n                            \"extrainfo\":\"HOSPITAL\"\n                        },\n            \"geometry\": {\n                            \"type\": \"Point\",\n                            \"coordinates\": [-8.6238, 41.1675]\n                        }  \n    }]\n}\nvar m = {overlay:\"Building Units\", geojson:geojsonFeature, fit:true};\nmsg.payload = {command:{map:m, lat:41.1665, lon:-8.6234}};\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":3540,"wires":[[]]},{"id":"d775cb2b.b69848","type":"link out","z":"596fa7a0.139bc8","name":"RULink2MAP","links":["bd1a5328.5eba1"],"x":3235,"y":560,"wires":[]},{"id":"935dc506.6a51d8","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2850,"y":760,"wires":[]},{"id":"a8a7339d.65c75","type":"ui_button","z":"596fa7a0.139bc8","name":"UPDATE RU","group":"623cc13a.2b101","order":8,"width":"4","height":1,"passthru":true,"label":"Update a RU","tooltip":"Updates a record","color":"black","bgcolor":"lightgreen","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\"]}}","payloadType":"json","topic":"UPDATE","x":430,"y":1260,"wires":[["591b0de1.ba8024","910c2c25.de8a8"]]},{"id":"d2c2b168.01e23","type":"ui_button","z":"596fa7a0.139bc8","name":"DELETE RU","group":"623cc13a.2b101","order":11,"width":"4","height":1,"passthru":true,"label":"Delete a RU","tooltip":"Deletes a record","color":"black","bgcolor":"lightgreen","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\"]}}","payloadType":"json","topic":"DELETE","x":430,"y":1560,"wires":[["591b0de1.ba8024","910c2c25.de8a8"]]},{"id":"dbbc1654.a76ee8","type":"ui_template","z":"596fa7a0.139bc8","group":"ae845518.bf1bb8","name":"GA - New RU Input Form new","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar RUValues;\nvar idga;\nvar NextIDRU;\n\n\n//RU DoorNumber validation\nfunction DoorNumberSelect(DoorNumber)\n{ \n    var letters = /^[0-9a-zA-Z]+$/;\n    if(DoorNumber.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('DoorNumber must have alphanumeric characters only');\n        DoorNumber.focus();\n        return false;\n    }\n}\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//RU ZipPostCode validation\nfunction ZipPostCodeSelect(ZipPostCode)\n{\n    var numbers = /(^\\d{4}$)|(^\\d{4}-\\d{3}$)/;\n    if(ZipPostCode.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('ZipPostCode must have 2 groups of 4/3 numbers separated by -');\n        ZipPostCode.focus();\n        return false;\n    }\n}\n\n//RU Topology validation\nfunction TopologySelect(Topology)\n{\n    if(Topology.value == \"Default\")\n    {\n        alert('Select a Topology from the list');\n        Topology.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//RU AreaLocality validation\nfunction AreaLocalityeSelect(AreaLocality)\n{\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(AreaLocality.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('AreaLocality must have alphanumeric characters only');\n        AreaLocality.focus();\n        return false;\n    }\n}\n\n//RU Street validation\nfunction StreetSelect(Street)\n{\n    //var letters = /^[0-9a-zA-Z]+$/;\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(Street.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Street must have alphanumeric characters only');\n        Street.focus();\n        return false;\n    }\n}\n\n\n\nfunction RU_New()\n{\n    \n    var idru = document.registrationRU.idru;\n    var Topology = document.registrationRU.Topology;\n    var Description = document.registrationRU.Description;\n    var NInHabitants = document.registrationRU.NInHabitants;\n    var Street = document.registrationRU.Street;\n    var DoorNumber = document.registrationRU.DoorNumber;\n    var AreaLocality = document.registrationRU.AreaLocality;\n    var ZipPostCode = document.registrationRU.ZipPostCode;\n    var RGPS_Lat = document.registrationRU.RGPS_Lat;\n    var RGPS_Lon = document.registrationRU.RGPS_Lon;\n    var OtherInfo = document.registrationRU.OtherInfo;\n    \n    var RUFormValues =\"\";\n    RUFormValues = RUFormValues + idru.value + \";\" + idga +\";\"\n    \n    if(TopologySelect(Topology))\n    {\n        RUFormValues = RUFormValues + Topology.value + \";\";\n        RUFormValues = RUFormValues + Description.value + \";\";\n        RUFormValues = RUFormValues + NInHabitants.value + \";\";\n        \n        if(StreetSelect(Street))\n        { \n            RUFormValues = RUFormValues + Street.value + \";\";\n            if(DoorNumberSelect(DoorNumber))\n            {\n                RUFormValues = RUFormValues + DoorNumber.value + \";\";\n                if(AreaLocalityeSelect(AreaLocality))\n                {\n                   RUFormValues = RUFormValues + AreaLocality.value + \";\";\n                   if(ZipPostCodeSelect(ZipPostCode))\n                    {\n                        RUFormValues = RUFormValues + ZipPostCode.value + \"; \";\n                        \n                        if(GPSCoordSelect(RGPS_Lat))\n                        {\n                            RUFormValues = RUFormValues + RGPS_Lat.value + \";\";\n                            if(GPSCoordSelect(RGPS_Lon))\n                            {\n                                RUFormValues = RUFormValues + RGPS_Lon.value + \";\";\n                                RUFormValues = RUFormValues + OtherInfo.value;\n                                \n                                theScope.send({payload:RUFormValues});\n                                \n                            }\n                        }\n                    }\n                }\n            } \n        }\n        \n    }\n    return false;\n}\n\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n   /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"reset\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert a Residential Unit</h1>\n<p></p>\n<form id=\"registrationRU\" name=\"registrationRU\">\n        <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    RUValues=data;\n                    idga=data.RU[0].ID_GA;\n                    NextIDRU=data.NextIDRU;\n                 });\n            })(scope);\n          </script>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idru\">ID_RU</label>\n            </div>\n            <div class=\"col-75\">\n                <input type=\"text\" id=\"idru\" name=\"idru\" value={{msg.payload.NextIDRU+1}} readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Topology\">Topology</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Topology\" name=\"Topology\">\n                    <option value=\"V0\">V0</option>\n                    <option value=\"V1\">V1</option>\n                    <option value=\"V2\">V2</option>\n                    <option value=\"V3\">V3</option>\n                    <option value=\"V4\">V5</option>\n                    <option value=\"V6\">V7</option>\n                    <option value=\"V8\">V8</option>\n                    <option value=\"V9\">V9</option>\n                    <option value=\"V1x\">V1x</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Description\" name=\"Description\" placeholder=\"Description...\">\n            </div>\n        </div>\n        \n         <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"NInHabitants\">NInHabitants</label>\n            </div>\n            <div class=\"col-75\">\n               <input type=\"text\" id=\"NInHabitants\" name=\"NInHabitants\" value=0 readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Street\" name=\"Street\" placeholder=\"Street...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\" placeholder=\"DoorNumber...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" placeholder=\"AreaLocality...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" placeholder=\"ZipPostCode...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"RGPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"RGPS_Lat\" name=\"RGPS_Lat\" placeholder=\"GPS_Lat..\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"RGPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"RGPS_Lon\" name=\"RGPS_Lon\" placeholder=\"GPS_Lon..\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:40px\"></textarea>\n            </div>\n        </div>\n        \n        <p>\n            <button type=\"submit\" name=\"INSERT_RU\" onclick=\"RU_New()\">INSERT </button>\n            <input type=\"reset\" value=\"RESET\" name=\"RESET_RU\">\n        </p>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1950,"y":1020,"wires":[["3912751f.3ab24a","d9c4ea92.04d4e8"]]},{"id":"e9097440.c6a368","type":"ui_template","z":"596fa7a0.139bc8","group":"988e157b.5e0748","name":"GA - Select in List Box RU To UPDATE","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar RUValues;\n\n//RU DoorNumber validation\nfunction DoorNumberSelect(DoorNumber)\n{ \n    var letters = /^[0-9a-zA-Z]+$/;\n    if(DoorNumber.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('DoorNumber must have alphanumeric characters only');\n        DoorNumber.focus();\n        return false;\n    }\n}\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//RU ZipPostCode validation\nfunction ZipPostCodeSelect(ZipPostCode)\n{\n    var numbers = /(^\\d{4}$)|(^\\d{4}-\\d{3}$)/;\n    if(ZipPostCode.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('ZipPostCode must have 2 groups of 4/3 numbers separated by -');\n        ZipPostCode.focus();\n        return false;\n    }\n}\n\n//RU Topology validation\nfunction TopologySelect(Topology)\n{\n    if(Topology.value == \"Default\")\n    {\n        alert('Select a Topology from the list');\n        Topology.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//RU AreaLocality validation\nfunction AreaLocalityeSelect(AreaLocality)\n{\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(AreaLocality.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('AreaLocality must have alphanumeric characters only');\n        AreaLocality.focus();\n        return false;\n    }\n}\n\n//RU Street validation\nfunction StreetSelect(Street)\n{\n    //var letters = /^[0-9a-zA-Z]+$/;\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(Street.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Street must have alphanumeric characters only');\n        Street.focus();\n        return false;\n    }\n}\n\n\nfunction RUUpdateValidation()\n{\n    var RUxIndex=document.getElementById(\"selectRU\").selectedIndex;\n    RUValues.Selected=RUxIndex;\n    \n    var idru = document.registrationRU_Update.idru;\n    var Topology = document.registrationRU_Update.Topology;\n    var Description = document.registrationRU_Update.Description;\n    var NInHabitants = document.registrationRU_Update.NInHabitants;\n    var Street = document.registrationRU_Update.Street;\n    var DoorNumber = document.registrationRU_Update.DoorNumber;\n    var AreaLocality = document.registrationRU_Update.AreaLocality;\n    var ZipPostCode = document.registrationRU_Update.ZipPostCode;\n    var GPS_Lat = document.registrationRU_Update.GPS_Lat;\n    var GPS_Lon = document.registrationRU_Update.GPS_Lon;\n    var OtherInfo = document.registrationRU_Update.OtherInfo;\n    \n    if(TopologySelect(Topology))\n    {\n        if(StreetSelect(Street))\n        { \n            if(DoorNumberSelect(DoorNumber))\n            {\n                if(AreaLocalityeSelect(AreaLocality))\n                {\n                   if(ZipPostCodeSelect(ZipPostCode))\n                    {\n                        if(GPSCoordSelect(GPS_Lat))\n                        {\n                            if(GPSCoordSelect(GPS_Lon))\n                            {\n                    \n                                RUValues.RU[RUxIndex].Topology=document.registrationRU_Update.Topology.value;\n                                RUValues.RU[RUxIndex].Description=document.registrationRU_Update.Description.value;\n                                RUValues.RU[RUxIndex].NInHabitantes=document.registrationRU_Update.NInHabitants.value;\n                                RUValues.RU[RUxIndex].Street=document.registrationRU_Update.Street.value;\n                                RUValues.RU[RUxIndex].DoorNumber=document.registrationRU_Update.DoorNumber.value;\n                                RUValues.RU[RUxIndex].AreaLocality=document.registrationRU_Update.AreaLocality.value;\n                                RUValues.RU[RUxIndex].ZipPostCode=document.registrationRU_Update.ZipPostCode.value;\n                                RUValues.RU[RUxIndex].GPS_Lat=document.registrationRU_Update.GPS_Lat.value;\n                                RUValues.RU[RUxIndex].GPS_Lon=document.registrationRU_Update.GPS_Lon.value;\n                                RUValues.RU[RUxIndex].OtherInfo = document.registrationRU_Update.OtherInfo.value;\n                                \n                                theScope.send({payload:RUValues});\n                            }\n                        }\n                    }\n                }\n            } \n        }\n        \n    }\n    return false;\n}\n\n// Resets for the first RU\nfunction RU_Init()\n{\n    if (RUValues.Number>0)\n    {\n        document.getElementById(\"selectRU\").selectedIndex = 0;\n        RUxIndex=0;\n\n        document.registrationRU_Update.idru.value=RUValues.RU[RUxIndex].ID_RU;\n        document.registrationRU_Update.Topology.value=RUValues.RU[RUxIndex].Topology;\n        document.registrationRU_Update.Description.value=RUValues.RU[RUxIndex].Description;\n        document.registrationRU_Update.NInHabitants.value=RUValues.RU[RUxIndex].NInHabitantes;\n        document.registrationRU_Update.Street.value=RUValues.RU[RUxIndex].Street;\n        document.registrationRU_Update.DoorNumber.value=RUValues.RU[RUxIndex].DoorNumber;\n        document.registrationRU_Update.AreaLocality.value=RUValues.RU[RUxIndex].AreaLocality;\n        document.registrationRU_Update.ZipPostCode.value=RUValues.RU[RUxIndex].ZipPostCode;\n        document.registrationRU_Update.GPS_Lat.value=RUValues.RU[RUxIndex].GPS_Lat;\n        document.registrationRU_Update.GPS_Lon.value=RUValues.RU[RUxIndex].GPS_Lon;\n        document.registrationRU_Update.OtherInfo.value=RUValues.RU[RUxIndex].OtherInfo;\n        \n    }\n   \n}\n\n// RU List is empty\nfunction RU_Empty()\n{\n        document.registrationRU_Update.idru.value=\"\";\n        document.registrationRU_Update.Topology.value=\"\";\n        document.registrationRU_Update.Description.value=\"\";\n        document.registrationRU_Update.NInHabitants.value=\"\";\n        document.registrationRU_Update.AreaLocality.value=\"\";\n        document.registrationRU_Update.ZipPostCode.value=\"\";\n        document.registrationRU_Update.Street.value=\"\";\n        document.registrationRU_Update.DoorNumber.value=\"\";\n        document.registrationRU_Update.GPS_Lat.value=\"\";\n        document.registrationRU_Update.GPS_Lon.value=\"\";\n        document.registrationRU_Update.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown RU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in RU list\nfunction RUListSelEventItem() \n{\n  RUxIndex=document.getElementById(\"selectRU\").selectedIndex;\n  \n  document.registrationRU_Update.idru.value=RUValues.RU[RUxIndex].ID_RU;\n  document.registrationRU_Update.Topology.value=RUValues.RU[RUxIndex].Topology;\n  document.registrationRU_Update.Description.value=RUValues.RU[RUxIndex].Description;\n  document.registrationRU_Update.NInHabitants.value=RUValues.RU[RUxIndex].NInHabitantes;\n  document.registrationRU_Update.Street.value=RUValues.RU[RUxIndex].Street;\n  document.registrationRU_Update.DoorNumber.value=RUValues.RU[RUxIndex].DoorNumber;\n  document.registrationRU_Update.AreaLocality.value=RUValues.RU[RUxIndex].AreaLocality;\n  document.registrationRU_Update.ZipPostCode.value=RUValues.RU[RUxIndex].ZipPostCode;\n  document.registrationRU_Update.GPS_Lat.value=RUValues.RU[RUxIndex].GPS_Lat;\n  document.registrationRU_Update.GPS_Lon.value=RUValues.RU[RUxIndex].GPS_Lon;\n  document.registrationRU_Update.OtherInfo.value=RUValues.RU[RUxIndex].OtherInfo;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update a Residential Unit</h1>\n\n<form id=\"registrationRU_Update\" name=\"registrationRU_Update\">\n    <ul>\n        <select id=\"selectRU\" onchange=\"RUListSelEventItem()\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    RUValues=data;\n                    \n                    //Create Geographic Area List var sel\n                    var sel = document.getElementById(\"selectRU\");\n                    \n                    //Previous remove all options in Geographic List\n                    removeOptions(document.getElementById(\"selectRU\"));\n                    \n                    for (var i = 0; i < RUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"RU \" + RUValues.RU[i].ID_RU + \" \" +RUValues.RU[i].Topology+ \" \" +RUValues.RU[i].AreaLocality+ \" \" +RUValues.RU[i].Street+ \" \" +RUValues.RU[i].DoorNumber);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"RU \" + RUValues.RU[i].ID_RU + \" \" +RUValues.RU[i].Topology+ \" \" +RUValues.RU[i].AreaLocality+ \" \" +RUValues.RU[i].Street+ \" \" +RUValues.RU[i].DoorNumber);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    if (RUValues.Number>0)\n                        RU_Init();\n                    else\n                    {\n                        RU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Residential Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Residential Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n          </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idru\">ID_RU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.idru.value=RUValues.RU[0].ID_RU;\n                </script>\n                <input type=\"text\" id=\"idru\" name=\"idru\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Topology\">Topology</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Topology\" name=\"Topology\">\n                    <option value=\"V0\">V0</option>\n                    <option value=\"V1\">V1</option>\n                    <option value=\"V2\">V2</option>\n                    <option value=\"V3\">V3</option>\n                    <option value=\"V4\">V5</option>\n                    <option value=\"V6\">V7</option>\n                    <option value=\"V8\">V8</option>\n                    <option value=\"V9\">V9</option>\n                    <option value=\"V1x\">V1x</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.Description.value=RUValues.RU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"NInHabitants\">NInHabitants</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.NInHabitants.value=RUValues.RU[0].NInHabitantes;\n                </script>\n               <input type=\"text\" id=\"NInHabitants\" name=\"NInHabitants\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.Street.value=RUValues.RU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.DoorNumber.value=RUValues.RU[0].DoorNumber;\n                </script>\n                <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.AreaLocality.value=RUValues.RU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.ZipPostCode.value=RUValues.RU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.GPS_Lat.value=RUValues.RU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.GPS_Lon.value=RUValues.RU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Update.OtherInfo.value=RUValues.RU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\"></textarea>\n            </div>\n        </div>\n        \n        <p>\n            <button type=\"submit\" name=\"UPDATE_RU\" onclick=\"RUUpdateValidation()\"> UPDATE </button>\n            <button type=\"submit\" name=\"RESET_RU\"  onclick=\"RU_Init()\"> RESET </button>\n        </p>\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1970,"y":1360,"wires":[["e1bbd8a8.3d8678","f24aa1c3.c222e"]]},{"id":"512ab88.5216548","type":"ui_template","z":"596fa7a0.139bc8","group":"fc1b2ddf.cc37b","name":"GA - Select in List Box RU To Delete","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar RUValues;\nvar sel;\nvar isel=-1;\n\n\n\n//Select a RU to delete\nfunction RU_Delete()\n{\n    var xIndex=document.getElementById(\"selectRUDEL\").selectedIndex;\n    RUValues.Selected=xIndex;\n    \n    theScope.send({payload:RUValues});\n}\n\n\n// Resets for the first RU\nfunction RU_Init()\n{\n    if (RUValues.Number>0)\n    {\n        document.getElementById(\"selectRUDEL\").selectedIndex = 0;\n        RUxIndex=0;\n\n        document.registrationRU_Delete.idru.value=RUValues.RU[RUxIndex].ID_RU;\n        document.registrationRU_Delete.Topology.value=RUValues.RU[RUxIndex].Topology;\n        document.registrationRU_Delete.Description.value=RUValues.RU[RUxIndex].Description;\n        document.registrationRU_Delete.NInHabitants.value=RUValues.RU[RUxIndex].NInHabitantes;\n        document.registrationRU_Delete.Street.value=RUValues.RU[RUxIndex].Street;\n        document.registrationRU_Delete.DoorNumber.value=RUValues.RU[RUxIndex].DoorNumber;\n        document.registrationRU_Delete.AreaLocality.value=RUValues.RU[RUxIndex].AreaLocality;\n        document.registrationRU_Delete.ZipPostCode.value=RUValues.RU[RUxIndex].ZipPostCode;\n        document.registrationRU_Delete.GPS_Lat.value=RUValues.RU[RUxIndex].GPS_Lat;\n        document.registrationRU_Delete.GPS_Lon.value=RUValues.RU[RUxIndex].GPS_Lon;\n        document.registrationRU_Delete.OtherInfo.value=RUValues.RU[RUxIndex].OtherInfo;\n        \n    }\n   \n}\n\n// RU List is empty\nfunction RU_Empty()\n{\n        document.registrationRU_Delete.idru.value=\"\";\n        document.registrationRU_Delete.Topology.value=\"\";\n        document.registrationRU_Delete.Description.value=\"\";\n        document.registrationRU_Delete.NInHabitants.value=\"\";\n        document.registrationRU_Delete.AreaLocality.value=\"\";\n        document.registrationRU_Delete.ZipPostCode.value=\"\";\n        document.registrationRU_Delete.Street.value=\"\";\n        document.registrationRU_Delete.DoorNumber.value=\"\";\n        document.registrationRU_Delete.GPS_Lat.value=\"\";\n        document.registrationRU_Delete.GPS_Lon.value=\"\";\n        document.registrationRU_Delete.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown RU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in RU list\nfunction RUListSelEventItem() \n{\n  \n  var RUxIndex=document.getElementById(\"selectRUDEL\").selectedIndex;\n  \n  document.registrationRU_Delete.idru.value=RUValues.RU[RUxIndex].ID_RU;\n  document.registrationRU_Delete.Topology.value=RUValues.RU[RUxIndex].Topology;\n  document.registrationRU_Delete.Description.value=RUValues.RU[RUxIndex].Description;\n  document.registrationRU_Delete.NInHabitants.value=RUValues.RU[RUxIndex].NInHabitantes;\n  document.registrationRU_Delete.Street.value=RUValues.RU[RUxIndex].Street;\n  document.registrationRU_Delete.DoorNumber.value=RUValues.RU[RUxIndex].DoorNumber;\n  document.registrationRU_Delete.AreaLocality.value=RUValues.RU[RUxIndex].AreaLocality;\n  document.registrationRU_Delete.ZipPostCode.value=RUValues.RU[RUxIndex].ZipPostCode;\n  document.registrationRU_Delete.GPS_Lat.value=RUValues.RU[RUxIndex].GPS_Lat;\n  document.registrationRU_Delete.GPS_Lon.value=RUValues.RU[RUxIndex].GPS_Lon;\n  document.registrationRU_Delete.OtherInfo.value=RUValues.RU[RUxIndex].OtherInfo;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\ninput[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete a Residential Unit</h1>\n\n<form id=\"registrationRU_Delete\" name=\"registrationRU_Delete\">\n    <ul>\n        <select id=\"selectRUDEL\" onchange=\"RUListSelEventItem()\">\n            <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    RUValues=data;\n                    \n                    //Create Geographic Area List var sel\n                    var sel = document.getElementById(\"selectRUDEL\");\n                    \n                    //Previous remove all options in Geographic List\n                    sel.options.length = 0;\n                    removeOptions(document.getElementById('selectRUDEL'));\n                    \n                    for (var i = 0; i < RUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"RU \" + RUValues.RU[i].ID_RU + \" \" +RUValues.RU[i].Topology+ \" \" +RUValues.RU[i].AreaLocality+ \" \" +RUValues.RU[i].Street+ \" \" +RUValues.RU[i].DoorNumber);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"RU \" + RUValues.RU[i].ID_RU + \" \" +RUValues.RU[i].Topology+ \" \" +RUValues.RU[i].AreaLocality+ \" \" +RUValues.RU[i].Street+ \" \" +RUValues.RU[i].DoorNumber);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    \n                    if (RUValues.Number>0)\n                        RU_Init();\n                    else\n                    {\n                        RU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Residential Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Residential Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n        </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idru\">ID_RU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.idru.value=RUValues.RU[0].ID_RU;\n                </script>\n                <input type=\"text\" id=\"idru\" name=\"idru\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Topology\">Topology</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU.Topology.value=RUValues.RU[0].Topology;\n                </script>\n                <input type=\"text\" id=\"Topology\" name=\"Topology\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.Description.value=RUValues.RU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"NInHabitants\">NInHabitants</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.NInHabitants.value=RUValues.RU[0].NInHabitantes;\n                </script>\n               <input type=\"text\" id=\"NInHabitants\" name=\"NInHabitants\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.Street.value=RUValues.RU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.DoorNumber.value=RUValues.RU[0].DoorNumber;\n                </script>\n                <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.AreaLocality.value=RUValues.RU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.ZipPostCode.value=RUValues.RU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.GPS_Lat.value=RUValues.RU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" readOnly=\"readOnly\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.GPS_Lon.value=RUValues.RU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationRU_Delete.OtherInfo.value=RUValues.RU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\" readOnly=\"readOnly\"></textarea>\n            </div>\n        </div>\n        \n        <p><input type=\"button\" value=\"DELETE\" onclick=\"RU_Delete()\"> \n           <input type=\"button\" value=\"RESET\" onclick=\"RU_Init()\">\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1970,"y":1760,"wires":[["1785a3c1.1f064c","dfbd07ca.892158"]]},{"id":"64791c69.149e84","type":"comment","z":"fc65fec6.42377","name":"GA - LIST BU Option","info":"","x":210,"y":700,"wires":[]},{"id":"f06dc1c5.87035","type":"comment","z":"fc65fec6.42377","name":"GA - NEW BU Option","info":"","x":220,"y":960,"wires":[]},{"id":"82617a2d.6979e8","type":"comment","z":"fc65fec6.42377","name":"GA - UPDATE BU Option","info":"","x":230,"y":1320,"wires":[]},{"id":"fcd3a7e.b2a4958","type":"comment","z":"fc65fec6.42377","name":"GA - DELETE BU Option","info":"","x":230,"y":1620,"wires":[]},{"id":"aa1e6ea6.e764f","type":"ui_button","z":"fc65fec6.42377","name":"LIST BU","group":"b7370dda.4ff4c","order":2,"width":"4","height":1,"passthru":true,"label":"List all of BU","tooltip":"List all the records","color":"black","bgcolor":"lightblue","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\"]}}","payloadType":"json","topic":"LIST","x":440,"y":700,"wires":[["e2edd61.6f1a828","2f474fdd.a704b"]]},{"id":"85f3314b.6d6eb","type":"ui_button","z":"fc65fec6.42377","name":"NEW BU","group":"b7370dda.4ff4c","order":5,"width":"4","height":1,"passthru":true,"label":"Insert a new BU","tooltip":"Inserts a new record","color":"black","bgcolor":"lightblue","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\"]}}","payloadType":"json","topic":"NEW","x":440,"y":960,"wires":[["e2edd61.6f1a828","2f474fdd.a704b","5f73449e.13f32c"]]},{"id":"f14891bd.5a6a7","type":"ui_button","z":"fc65fec6.42377","name":"UPDATE BU","group":"b7370dda.4ff4c","order":8,"width":"4","height":1,"passthru":true,"label":"Update a BU","tooltip":"Updates a record","color":"black","bgcolor":"lightblue","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\"]}}","payloadType":"json","topic":"UPDATE","x":450,"y":1320,"wires":[["e2edd61.6f1a828","2f474fdd.a704b"]]},{"id":"58128459.fa2b0c","type":"ui_button","z":"fc65fec6.42377","name":"DELETE BU","group":"b7370dda.4ff4c","order":11,"width":"4","height":1,"passthru":true,"label":"Delete a BU","tooltip":"Deletes a record","color":"black","bgcolor":"lightblue","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\"]}}","payloadType":"json","topic":"DELETE","x":450,"y":1620,"wires":[["e2edd61.6f1a828","2f474fdd.a704b"]]},{"id":"e2edd61.6f1a828","type":"ui_ui_control","z":"fc65fec6.42377","name":"","x":800,"y":1100,"wires":[[]]},{"id":"2f474fdd.a704b","type":"function","z":"fc65fec6.42377","name":"F BUnitDB in ID_GA SELECT ALL","func":"var GAIDSel =global.get('GeoArea');\n\nvar SQLSELECTALL={\"topic\" : \"SELECT * FROM BUnit_DB WHERE ID_GA=\" + GAIDSel.GA[GAIDSel.Selected].ID_GA };\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":800,"y":700,"wires":[["73e6d685.e6c778","d132668b.7fa4f8"]]},{"id":"73e6d685.e6c778","type":"sqlite","z":"fc65fec6.42377","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"BUnit_DB","x":1120,"y":700,"wires":[["a36292ac.97651","7ce93eff.539f1"]]},{"id":"a36292ac.97651","type":"function","z":"fc65fec6.42377","name":"F BUnit_DB Read All Records","func":"var ReadAll_BU=msg.payload;\nvar NBU=global.get('NBU');\n\nvar BUList={};\n\nBUList.Number=msg.payload.length;\nBUList.Selected=0;\n\nBUList.BU=[]\n\nvar i;\nfor (i = 0; i < msg.payload.length; i++) {\n    // do something with msg.payload[i]\n    BUList.BU.push({});\n    BUList.BU[i]['ID_BU'] = msg.payload[i].ID_BU;\n    BUList.BU[i]['ID_GA'] = msg.payload[i].ID_GA;\n    BUList.BU[i]['Category'] = msg.payload[i].Category;\n    BUList.BU[i]['Description'] = msg.payload[i].Description;\n    BUList.BU[i]['FloorsAboveGround'] = msg.payload[i].FloorsAboveGround;\n    BUList.BU[i]['FloorsBelowGround'] = msg.payload[i].FloorsBelowGround;\n    BUList.BU[i]['AreaLocality'] = msg.payload[i].AreaLocality;\n    BUList.BU[i]['ZipPostCode'] = msg.payload[i].ZipPostCode;\n    BUList.BU[i]['Street'] = msg.payload[i].Street;\n    BUList.BU[i]['DoorNumber'] = msg.payload[i].DoorNumber;\n    BUList.BU[i]['GPS_Lat'] = msg.payload[i].GPS_Lat;\n    BUList.BU[i]['GPS_Lon'] = msg.payload[i].GPS_Lon;\n    BUList.BU[i]['OtherInfo'] = msg.payload[i].OtherInfo;\n}\n\nBUList.NextIDBU=NBU;     //Max (ID_BU) + 1;\n\nBUList={payload:BUList};\n\nreturn BUList;       ","outputs":1,"noerr":0,"x":1410,"y":700,"wires":[["2aa5a70f.d2ad68","70f664dc.4fe4ac","8e98454a.dfb138","7ca8add1.cd81b4","5238f85c.b162e8","3f6fb3db.09523c"]]},{"id":"d132668b.7fa4f8","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"topic","targetType":"msg","x":860,"y":740,"wires":[]},{"id":"7ce93eff.539f1","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1130,"y":740,"wires":[]},{"id":"2aa5a70f.d2ad68","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1450,"y":740,"wires":[]},{"id":"3912751f.3ab24a","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2230,"y":880,"wires":[]},{"id":"e1bbd8a8.3d8678","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2030,"y":1400,"wires":[]},{"id":"1785a3c1.1f064c","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2010,"y":1800,"wires":[]},{"id":"d9c4ea92.04d4e8","type":"function","z":"596fa7a0.139bc8","name":"F RUnit_DB Insert new Record ","func":"var NewRU = msg.payload.split(\";\")\n\nvar NewRUJson = {}\n\nNewRUJson.ID_RU=parseInt(NewRU[0]);\nNewRUJson.ID_GA=parseInt(NewRU[1]);\n\nNewRUJson.Topology=NewRU[2];\nNewRUJson.Description=NewRU[3];\nNewRUJson.NInHabitantes=parseInt(NewRU[4]);\nNewRUJson.Street=NewRU[5];\nNewRUJson.DoorNumber=NewRU[6];\nNewRUJson.AreaLocality=NewRU[7];\nNewRUJson.ZipPostCode=NewRU[8];\n\nNewRUJson.GPS = {};\nNewRUJson.GPS.Latitude=NewRU[9];\nNewRUJson.GPS.Longitude=NewRU[10];\nNewRUJson.OtherInfo=NewRU[11];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO RUnit_DB(ID_RU,ID_GA,Topology,Description,NInHabitantes,Street,DoorNumber,AreaLocality,ZipPostCode, GPS_Lat, GPS_Lon, OtherInfo) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + NewRUJson.ID_GA + \"\\\"\" + \", \" +\n    \"\\\"\" + NewRUJson.Topology + \"\\\"\" + \", \" + \n    \"\\\"\" + NewRUJson.Description + \"\\\"\" + \", \" + \n    \"\\\"\" + NewRUJson.NInHabitantes + \"\\\"\" + \", \" + \n    \"\\\"\" + NewRUJson.Street + \"\\\"\" + \", \" + \n    \"\\\"\" + NewRUJson.DoorNumber + \"\\\"\" + \", \" +\n    \"\\\"\" + NewRUJson.AreaLocality + \"\\\"\" + \", \" +\n    \"\\\"\" + NewRUJson.ZipPostCode + \"\\\"\" + \", \" +\n    \"\\\"\" + NewRUJson.GPS.Latitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewRUJson.GPS.Longitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewRUJson.OtherInfo + \"\\\"\" + \")\"\n}\n\nNewRUJson={payload:NewRUJson};\n\nreturn [NewRUJson, SQLInsert]","outputs":2,"noerr":0,"x":2310,"y":1020,"wires":[["b78b23e8.2ee7e","656a03d8.b60e9c"],["616364a8.26c3fc"]]},{"id":"b78b23e8.2ee7e","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":2370,"y":1060,"wires":[]},{"id":"656a03d8.b60e9c","type":"function","z":"596fa7a0.139bc8","name":"F Show a New Residential Unit","func":"\nvar NEW_RU = msg.payload;\n\nvar RU_Sel=msg.payload.Selected;\n\nvar thing = {\n    name:\"Residential Unit \"+ NEW_RU.ID_RU, \n    lat: msg.payload.GPS.Latitude,\n    lon: msg.payload.GPS.Longitude,\n    icon:\"home\",\n    iconColor:\"Lightgreen\",\n    extrainfo:\"Residential Unit \"+ NEW_RU.ID_RU,\n    layer:\"Residential Units\"\n};\nthing={payload:thing};\nreturn thing;","outputs":1,"noerr":0,"x":3010,"y":1000,"wires":[["dc730f26.a8479","d775cb2b.b69848"]]},{"id":"dc730f26.a8479","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":3070,"y":1040,"wires":[]},{"id":"98558cc5.3458d","type":"function","z":"596fa7a0.139bc8","name":"F RUnitDB SELECT ALL","func":"var SQLSELECTALL={\"topic\" : \"SELECT * FROM RUnit_DB\"};\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":860,"y":960,"wires":[["6b175191.5f6ff"]]},{"id":"6b175191.5f6ff","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"RUnit_DB","x":1100,"y":960,"wires":[["ac9fcb30.fddd08"]]},{"id":"ac9fcb30.fddd08","type":"function","z":"596fa7a0.139bc8","name":"F RUnit_DB Number of Records","func":"var output = msg.payload.length;\nvar NRU=global.get('NRU')||0;\nglobal.set('NRU',output);\n\nNRU={payload:NRU};\nreturn NRU;","outputs":1,"noerr":0,"x":1410,"y":960,"wires":[["deee871a.751ae8"]]},{"id":"deee871a.751ae8","type":"debug","z":"596fa7a0.139bc8","name":"NRU","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1540,"y":1120,"wires":[]},{"id":"616364a8.26c3fc","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"RUnit_DB","x":2760,"y":1040,"wires":[["910c2c25.de8a8"]]},{"id":"f24aa1c3.c222e","type":"function","z":"596fa7a0.139bc8","name":"F RUnit_DB Select Record to UPDATE","func":"var ListRU=msg.payload;\nvar index=ListRU.Selected;\n\nvar SQLUPDATE={\"topic\" : \"UPDATE RUnit_DB SET \" +\n    \"ID_RU=\" + ListRU.RU[index].ID_RU + \", \" +\n    \"ID_GA=\" + ListRU.RU[index].ID_GA + \", \" +\n    \"Topology=\" + \"\\\"\" + ListRU.RU[index].Topology + \"\\\"\" + \", \" + \n    \"Description=\" + \"\\\"\" + ListRU.RU[index].Description + \"\\\"\" + \", \" + \n    \"NInHabitantes=\" + \"\\\"\" + parseInt(ListRU.RU[index].NInHabitantes) + \"\\\"\"  + \", \" + \n    \"Street=\" + \"\\\"\" + ListRU.RU[index].Street + \"\\\"\"  + \", \" + \n    \"DoorNumber=\" + \"\\\"\" + ListRU.RU[index].DoorNumber + \"\\\"\"  + \", \" + \n    \"AreaLocality=\" + \"\\\"\" + ListRU.RU[index].AreaLocality + \"\\\"\"  + \", \" + \n    \"ZipPostCode=\" + \"\\\"\" + ListRU.RU[index].ZipPostCode + \"\\\"\"  + \", \" +\n    \"GPS_Lat=\" + \"\\\"\" + ListRU.RU[index].GPS_Lat + \"\\\"\" + \", \" + \n    \"GPS_Lon=\" + \"\\\"\" + ListRU.RU[index].GPS_Lon + \"\\\"\" + \", \" + \n    \"OtherInfo= \"+ \"\\\"\" + ListRU.RU[index].OtherInfo + \"\\\"\" +\n\n    \"WHERE ID_RU=\" + ListRU.RU[index].ID_RU    \n};\n\nListRU={payload:ListRU};\nreturn [ListRU, SQLUPDATE];","outputs":2,"noerr":0,"x":2390,"y":1360,"wires":[["3c4f04d7.d17a7c"],["b9c81117.6da1d"]]},{"id":"3c4f04d7.d17a7c","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2470,"y":1400,"wires":[]},{"id":"b9c81117.6da1d","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"RUnit_DB","x":2740,"y":1360,"wires":[["910c2c25.de8a8"]]},{"id":"dfbd07ca.892158","type":"function","z":"596fa7a0.139bc8","name":" F RUnit_DB Select Record to Delete","func":"var ListRU=msg.payload;\nvar index=ListRU.Selected;\n\nvar SQLDELETE={\"topic\" : \"DELETE FROM RUnit_DB WHERE ID_RU=\" +\n                          ListRU.RU[index].ID_RU +\n                          \" AND ID_GA=\" + ListRU.RU[index].ID_GA };\n\nreturn [SQLDELETE, msg];","outputs":1,"noerr":0,"x":2410,"y":1760,"wires":[["85e21683.e86d48","6ebf4f90.b2fe5"]]},{"id":"85e21683.e86d48","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2470,"y":1800,"wires":[]},{"id":"6ebf4f90.b2fe5","type":"sqlite","z":"596fa7a0.139bc8","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"RUnit_DB","x":2760,"y":1760,"wires":[["910c2c25.de8a8"]]},{"id":"70f664dc.4fe4ac","type":"ui_template","z":"fc65fec6.42377","group":"237cdb7e.849494","name":"GA - List Box All BU","order":6,"width":"9","height":"9","format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar BUValues;\nvar BUxIndex=0;\n\n\n//Select a BU to use in model\nfunction BU_Selection()\n{\n    BUValues.Selected = document.getElementById(\"selectBU\").selectedIndex;\n    \n    theScope.send({payload:BUValues});\n    theScope.send({payload:BUValues});\n}\n\n\n// Resets for the first BU\nfunction BU_Init()\n{\n    \n     if (BUValues.Number>0)\n    {\n        document.getElementById(\"selectBU\").selectedIndex = 0;\n        BUxIndex=0;\n\n        document.registrationBU.idru.value=BUValues.BU[BUxIndex].ID_BU;\n        document.registrationBU.Category.value=BUValues.BU[BUxIndex].Category;\n        document.registrationBU.Description.value=BUValues.BU[BUxIndex].Description;\n        document.registrationBU.FloorsAboveGround.value=BUValues.BU[BUxIndex].FloorsAboveGround;\n        document.registrationBU.FloorsBelowGround.value=BUValues.BU[BUxIndex].FloorsBelowGround;\n        document.registrationBU.Street.value=BUValues.BU[BUxIndex].Street;\n        document.registrationBU.DoorNumber.value=BUValues.BU[BUxIndex].DoorNumber;\n        document.registrationBU.AreaLocality.value=BUValues.BU[BUxIndex].AreaLocality;\n        document.registrationBU.ZipPostCode.value=BUValues.BU[BUxIndex].ZipPostCode;\n        document.registrationBU.GPS_Lat.value=BUValues.BU[BUxIndex].GPS_Lat;\n        document.registrationBU.GPS_Lon.value=BUValues.BU[BUxIndex].GPS_Lon;\n        document.registrationBU.OtherInfo.value=BUValues.BU[BUxIndex].OtherInfo;\n        \n    }\n   \n}\n\nfunction BU_Selected()\n{\n     //alert(\"SELECT BU\");\n     if (BUValues.Number>0)\n    {\n        document.getElementById(\"selectBU\").selectedIndex = BUxIndex;\n\n        document.registrationBU.idbu.value=BUValues.BU[BUxIndex].ID_BU;\n        document.registrationBU.Category.value=BUValues.BU[BUxIndex].Category;\n        document.registrationBU.Description.value=BUValues.BU[BUxIndex].Description;\n        document.registrationBU.FloorsAboveGround.value=BUValues.BU[BUxIndex].FloorsAboveGround;\n        document.registrationBU.FloorsBelowGround.value=BUValues.BU[BUxIndex].FloorsBelowGround;\n        document.registrationBU.Street.value=BUValues.BU[BUxIndex].Street;\n        document.registrationBU.DoorNumber.value=BUValues.BU[BUxIndex].DoorNumber;\n        document.registrationBU.AreaLocality.value=BUValues.BU[BUxIndex].AreaLocality;\n        document.registrationBU.ZipPostCode.value=BUValues.BU[BUxIndex].ZipPostCode;\n        document.registrationBU.GPS_Lat.value=BUValues.BU[BUxIndex].GPS_Lat;\n        document.registrationBU.GPS_Lon.value=BUValues.BU[BUxIndex].GPS_Lon;\n        document.registrationBU.OtherInfo.value=BUValues.BU[BUxIndex].OtherInfo;\n    }\n   \n}\n\n// BU List is empty\nfunction BU_Empty()\n{\n        document.registrationBU.idbu.value=\"\";\n        document.registrationBU.Category.value=\"\";\n        document.registrationBU.Description.value=\"\";\n        document.registrationBU.FloorsAboveGround.value=0;\n        document.registrationBU.FloorsBelowGround.value=0;\n        document.registrationBU.Street.value=\"\";\n        document.registrationBU.DoorNumber.value=\"\";\n        document.registrationBU.AreaLocality.value=\"\";\n        document.registrationBU.ZipPostCode.value=\"\";\n        document.registrationBU.GPS_Lat.value=\"\";\n        document.registrationBU.GPS_Lon.value=\"\";\n        document.registrationBU.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown BU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in BU list\nfunction BUListSelEventItem() \n{\n  BUxIndex=document.getElementById(\"selectBU\").selectedIndex;\n  \n  document.registrationBU.idbu.value=BUValues.BU[BUxIndex].ID_BU;\n  document.registrationBU.Category.value=BUValues.BU[BUxIndex].Category;\n  document.registrationBU.Description.value=BUValues.BU[BUxIndex].Description;\n  document.registrationBU.FloorsAboveGround.value=BUValues.BU[BUxIndex].FloorsAboveGround;\n  document.registrationBU.FloorsBelowGround.value=BUValues.BU[BUxIndex].FloorsBelowGround;\n  document.registrationBU.Street.value=BUValues.BU[BUxIndex].Street;\n  document.registrationBU.DoorNumber.value=BUValues.BU[BUxIndex].DoorNumber;\n  document.registrationBU.AreaLocality.value=BUValues.BU[BUxIndex].AreaLocality;\n  document.registrationBU.ZipPostCode.value=BUValues.BU[BUxIndex].ZipPostCode;\n  document.registrationBU.GPS_Lat.value=BUValues.BU[BUxIndex].GPS_Lat;\n  document.registrationBU.GPS_Lon.value=BUValues.BU[BUxIndex].GPS_Lon;\n  document.registrationBU.OtherInfo.value=BUValues.BU[BUxIndex].OtherInfo;\n  \n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n     /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 3px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 3px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select a Building Unit</h1>\n\n<form id=\"registrationBU\" name=\"registrationBU\">\n    <ul>\n        <select id=\"selectBU\" onchange=\"BUListSelEventItem()\" form=\"registrationBU\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    BUValues=data;\n                    \n                    //Create BU List var sel\n                    var sel = document.getElementById(\"selectBU\");\n                    \n                    //Previous remove all options in BU Units List\n                    removeOptions(document.getElementById(\"selectBU\"));\n                    \n                    for (var i = 0; i < BUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"BU \" + BUValues.BU[i].ID_BU + \" \" +BUValues.BU[i].Category+ \" \" +BUValues.BU[i].AreaLocality+ \" \" +BUValues.BU[i].Street+ \" \" +BUValues.BU[i].DoorNumber);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"BU \" + BUValues.BU[i].ID_BU + \" \" +BUValues.BU[i].Category+ \" \" +BUValues.BU[i].AreaLocality+ \" \" +BUValues.BU[i].Street+ \" \" +BUValues.BU[i].DoorNumber);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    if (BUValues.Number>0)\n                        BU_Selected();\n                    else\n                    {\n                        BU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Building Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Building Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n          </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idbu\">ID_BU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.idbu.value=BUValues.BU[0].ID_BU;\n                </script>\n                <input type=\"text\" id=\"idbu\" name=\"idbu\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.Category.value=BUValues.BU[0].Category;\n                </script>\n                <input type=\"text\" id=\"Category\" name=\"Category\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.Description.value=BUValues.BU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsAboveGround\">FloorsAbGround</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.FloorsAboveGround.value=BUValues.BU[0].FloorsAboveGround;\n                </script>\n                <input type=\"text\" id=\"FloorsAboveGround\" name=\"FloorsAboveGround\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsBelowGround\">FloorsBeGround</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.FloorsBelowGround.value=BUValues.BU[0].FloorsBelowGround;\n                </script>\n                <input type=\"text\" id=\"FloorsBelowGround\" name=\"FloorsBelowGround\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.Street.value=BUValues.BU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.DoorNumber.value=BUValues.BU[0].DoorNumber;\n                </script>\n                <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.AreaLocality.value=BUValues.BU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.ZipPostCode.value=BUValues.BU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.GPS_Lat.value=BUValues.BU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.GPS_Lon.value=BUValues.BU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.OtherInfo.value=BUValues.BU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\" readOnly=\"readOnly\" ></textarea>\n            </div>\n        </div>\n    \n        <p>\n            <button type=\"submit\" name=\"SELECT_BU\" onclick=\"BU_Selection()\"> SELECT </button>\n            <button type=\"submit\" name=\"RESET_BU\"  onclick=\"BU_Init()\"> RESET </button>\n        </p>\n        \n    </ul>\n</form>\n</body>\n\n\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1820,"y":700,"wires":[["d6a82bf.5e38ed8"]]},{"id":"9fc195a9.c30ec8","type":"comment","z":"fc65fec6.42377","name":"GA - LIST BOX OF ALL BU IN GEO_Area_DB","info":"","x":1890,"y":660,"wires":[]},{"id":"8e98454a.dfb138","type":"ui_template","z":"fc65fec6.42377","group":"ab90e8f7.e57908","name":"GA - New BU Input Form new","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar BUValues;\nvar idga;\nvar NextIDBU;\n\n\n//BU DoorNumber validation\nfunction DoorNumberSelect(DoorNumber)\n{ \n    var letters = /^[0-9a-zA-Z]+$/;\n    if(DoorNumber.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('DoorNumber must have alphanumeric characters only');\n        DoorNumber.focus();\n        return false;\n    }\n}\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//BU ZipPostCode validation\nfunction ZipPostCodeSelect(ZipPostCode)\n{\n    var numbers = /(^\\d{4}$)|(^\\d{4}-\\d{3}$)/;\n    if(ZipPostCode.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('ZipPostCode must have 2 groups of 4/3 numbers separated by -');\n        ZipPostCode.focus();\n        return false;\n    }\n}\n\n//BU Topology validation\nfunction CategorySelect(Category)\n{\n    if(Category.value == \"Default\")\n    {\n        alert('Select a Category from the list');\n        Category.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//BU AreaLocality validation\nfunction AreaLocalityeSelect(AreaLocality)\n{\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(AreaLocality.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('AreaLocality must have alphanumeric characters only');\n        AreaLocality.focus();\n        return false;\n    }\n}\n\n//BU Street validation\nfunction StreetSelect(Street)\n{\n    //var letters = /^[0-9a-zA-Z]+$/;\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(Street.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Street must have alphanumeric characters only');\n        Street.focus();\n        return false;\n    }\n}\n\n\n\nfunction BU_New()\n{\n    \n    var idbu = document.registrationBU.idbu;\n    var Category = document.registrationBU.Category;\n    var Description = document.registrationBU.Description;\n    var FloorsAboveGround = document.registrationBU.FloorsAboveGround;\n    var FloorsBelowGround = document.registrationBU.FloorsBelowGround;\n    var Street = document.registrationBU.Street;\n    var DoorNumber = document.registrationBU.DoorNumber;\n    var AreaLocality = document.registrationBU.AreaLocality;\n    var ZipPostCode = document.registrationBU.ZipPostCode;\n    var BGPS_Lat = document.registrationBU.BGPS_Lat;\n    var BGPS_Lon = document.registrationBU.BGPS_Lon;\n    var OtherInfo = document.registrationBU.OtherInfo;\n    \n    var BUFormValues =\"\";\n    BUFormValues = BUFormValues + idbu.value + \";\" + idga +\";\"\n    \n    if(CategorySelect(Category))\n    {\n        BUFormValues = BUFormValues + Category.value + \";\";\n        BUFormValues = BUFormValues + Description.value + \";\";\n        BUFormValues = BUFormValues + FloorsAboveGround.value + \";\";\n        BUFormValues = BUFormValues + FloorsBelowGround.value + \";\";\n        \n        if(StreetSelect(Street))\n        { \n            BUFormValues = BUFormValues + Street.value + \";\";\n            if(DoorNumberSelect(DoorNumber))\n            {\n                BUFormValues = BUFormValues + DoorNumber.value + \";\";\n                if(AreaLocalityeSelect(AreaLocality))\n                {\n                   BUFormValues = BUFormValues + AreaLocality.value + \";\";\n                   if(ZipPostCodeSelect(ZipPostCode))\n                    {\n                        BUFormValues = BUFormValues + ZipPostCode.value + \"; \";\n                        \n                        if(GPSCoordSelect(BGPS_Lat))\n                        {\n                            BUFormValues = BUFormValues + BGPS_Lat.value + \";\";\n                            if(GPSCoordSelect(BGPS_Lon))\n                            {\n                                BUFormValues = BUFormValues + BGPS_Lon.value + \";\";\n                                BUFormValues = BUFormValues + OtherInfo.value;\n                                \n                                theScope.send({payload:BUFormValues});\n                                \n                            }\n                        }\n                    }\n                }\n            } \n        }\n        \n    }\n    return false;\n}\n\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n   /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"reset\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 3px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 3px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert a Building Unit</h1>\n<p></p>\n<form id=\"registrationBU\" name=\"registrationBU\">\n        <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    BUValues=data;\n                    idga=data.BU[0].ID_GA;\n                    NextIDBU=data.NextIDBU;\n                 });\n            })(scope);\n          </script>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idbu\">ID_BU</label>\n            </div>\n            <div class=\"col-75\">\n                <input type=\"text\" id=\"idbu\" name=\"idbu\" value={{msg.payload.NextIDBU+1}} readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Category\" name=\"Category\">\n                    <option value=\"Residential\">Residential</option>\n                    <option value=\"Retail and Offices\">Retail and Offices</option>\n                    <option value=\"Accomodation\">Accomodation</option>\n                    <option value=\"Health and Nurse\">Health and Nurse</option>\n                    <option value=\"Educational\">Educational</option>\n                    <option value=\"Government\">Government</option>\n                    <option value=\"Others\">Others</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Description\" name=\"Description\" placeholder=\"Description...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsAboveGround\">FloorsAboveGround</label>\n            </div>\n            <div class=\"col-75\">\n               <input type=\"text\" id=\"FloorsAboveGround\" name=\"FloorsAboveGround\" value=1>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsBelowGround\">FloorsBelowGround</label>\n            </div>\n            <div class=\"col-75\">\n               <input type=\"text\" id=\"FloorsBelowGround\" name=\"FloorsBelowGround\" value=0>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Street\" name=\"Street\" placeholder=\"Street...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\" placeholder=\"DoorNumber...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" placeholder=\"AreaLocality...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" placeholder=\"ZipPostCode...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"BGPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"BGPS_Lat\" name=\"BGPS_Lat\" placeholder=\"GPS_Lat..\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"BGPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"BGPS_Lon\" name=\"BGPS_Lon\" placeholder=\"GPS_Lon..\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:40px\"></textarea>\n            </div>\n        </div>\n        \n        <p>\n            <button type=\"submit\" name=\"INSERT_BU\" onclick=\"BU_New()\">INSERT </button>\n            <input type=\"reset\" value=\"RESET\" name=\"RESET_BU\">\n        </p>\n</form>\n</body\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1850,"y":980,"wires":[["2d659c27.3d8ba4","6adaa471.16911c"]]},{"id":"d3dd3a8e.941c48","type":"comment","z":"fc65fec6.42377","name":"GA - INSERT NEW BU IN GEO_Area_DB","info":"","x":1880,"y":940,"wires":[]},{"id":"7ca8add1.cd81b4","type":"ui_template","z":"fc65fec6.42377","group":"1954b0a7.6a811f","name":"GA - Select in List Box BU To UPDATE","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar BUValues;\n\n//BU DoorNumber validation\nfunction DoorNumberSelect(DoorNumber)\n{ \n    var letters = /^[0-9a-zA-Z]+$/;\n    if(DoorNumber.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('DoorNumber must have alphanumeric characters only');\n        DoorNumber.focus();\n        return false;\n    }\n}\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//BU ZipPostCode validation\nfunction ZipPostCodeSelect(ZipPostCode)\n{\n    var numbers = /(^\\d{4}$)|(^\\d{4}-\\d{3}$)/;\n    if(ZipPostCode.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('ZipPostCode must have 2 groups of 4/3 numbers separated by -');\n        ZipPostCode.focus();\n        return false;\n    }\n}\n\n//BU Category validation\nfunction CategorySelect(Category)\n{\n    if(Category.value == \"Default\")\n    {\n        alert('Select a Category from the list');\n        Category.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//BU AreaLocality validation\nfunction AreaLocalityeSelect(AreaLocality)\n{\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(AreaLocality.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('AreaLocality must have alphanumeric characters only');\n        AreaLocality.focus();\n        return false;\n    }\n}\n\n//BU Street validation\nfunction StreetSelect(Street)\n{\n    //var letters = /^[0-9a-zA-Z]+$/;\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(Street.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Street must have alphanumeric characters only');\n        Street.focus();\n        return false;\n    }\n}\n\n\nfunction BUUpdateValidation()\n{\n    var BUxIndex=document.getElementById(\"selectBU\").selectedIndex;\n    BUValues.Selected=BUxIndex;\n    \n    var idbu = document.registrationBU.idbu;\n    var Category = document.registrationBU.Category;\n    var Description = document.registrationBU.Description;\n    var FloorsAboveGround = document.registrationBU.FloorsAboveGround;\n    var FloorsBelowGround = document.registrationBU.FloorsBelowGround;\n    var Street = document.registrationBU.Street;\n    var DoorNumber = document.registrationBU.DoorNumber;\n    var AreaLocality = document.registrationBU.AreaLocality;\n    var ZipPostCode = document.registrationBU.ZipPostCode;\n    var GPS_Lat = document.registrationBU.GPS_Lat;\n    var GPS_Lon = document.registrationBU.GPS_Lon;\n    var OtherInfo = document.registrationBU.OtherInfo;\n    \n    if(CategorySelect(Category))\n    {\n        if(StreetSelect(Street))\n        { \n            if(DoorNumberSelect(DoorNumber))\n            {\n                if(AreaLocalityeSelect(AreaLocality))\n                {\n                   if(ZipPostCodeSelect(ZipPostCode))\n                    {\n                        if(GPSCoordSelect(GPS_Lat))\n                        {\n                            if(GPSCoordSelect(GPS_Lon))\n                            {\n                                BUValues.BU[BUxIndex].Category=document.registrationBU.Category.value;\n                                BUValues.BU[BUxIndex].Description=document.registrationBU.Description.value;\n                                BUValues.BU[BUxIndex].FloorsAboveGround=document.registrationBU.FloorsAboveGround.value;\n                                BUValues.BU[BUxIndex].FloorsBelowGround=document.registrationBU.FloorsBelowGround.value;\n                                BUValues.BU[BUxIndex].Street=document.registrationBU.Street.value;\n                                BUValues.BU[BUxIndex].DoorNumber=document.registrationBU.DoorNumber.value;\n                                BUValues.BU[BUxIndex].AreaLocality=document.registrationBU.AreaLocality.value;\n                                BUValues.BU[BUxIndex].ZipPostCode=document.registrationBU.ZipPostCode.value;\n                                BUValues.BU[BUxIndex].GPS_Lat=document.registrationBU.GPS_Lat.value;\n                                BUValues.BU[BUxIndex].GPS_Lon=document.registrationBU.GPS_Lon.value;\n                                BUValues.BU[BUxIndex].OtherInfo = document.registrationBU.OtherInfo.value;\n                                theScope.send({payload:BUValues});\n                            }\n                        }\n                    }\n                }\n            } \n        }\n        \n    }\n    return false;\n}\n\n// Resets for the first BU\nfunction BU_Init()\n{\n    if (BUValues.Number>0)\n    {\n        document.getElementById(\"selectBU\").selectedIndex = 0;\n        BUxIndex=0;\n\n        document.registrationBU.idbu.value=BUValues.BU[BUxIndex].ID_BU;\n        document.registrationBU.Category.value=BUValues.BU[BUxIndex].Category;\n        document.registrationBU.Description.value=BUValues.BU[BUxIndex].Description;\n        document.registrationBU.FloorsAboveGround.value=BUValues.BU[BUxIndex].FloorsAboveGround;\n        document.registrationBU.FloorsBelowGround.value=BUValues.BU[BUxIndex].FloorsBelowGround;\n        document.registrationBU.Street.value=BUValues.BU[BUxIndex].Street;\n        document.registrationBU.DoorNumber.value=BUValues.BU[BUxIndex].DoorNumber;\n        document.registrationBU.AreaLocality.value=BUValues.BU[BUxIndex].AreaLocality;\n        document.registrationBU.ZipPostCode.value=BUValues.BU[BUxIndex].ZipPostCode;\n        document.registrationBU.GPS_Lat.value=BUValues.BU[BUxIndex].GPS_Lat;\n        document.registrationBU.GPS_Lon.value=BUValues.BU[BUxIndex].GPS_Lon;\n        document.registrationBU.OtherInfo.value=BUValues.BU[BUxIndex].OtherInfo;\n    }\n}\n\n// BU List is empty\nfunction BU_Empty()\n{\n        document.registrationBU.idbu.value=\"\";\n        document.registrationBU.Category.value=\"\";\n        document.registrationBU.Description.value=\"\";\n        document.registrationBU.FloorsAboveGround.value=0;\n        document.registrationBU.FloorsBelowGround.value=0;\n        document.registrationBU.Street.value=\"\";\n        document.registrationBU.DoorNumber.value=\"\";\n        document.registrationBU.AreaLocality.value=\"\";\n        document.registrationBU.ZipPostCode.value=\"\";\n        document.registrationBU.GPS_Lat.value=\"\";\n        document.registrationBU.GPS_Lon.value=\"\";\n        document.registrationBU.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown BU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in BU list\nfunction BUListSelEventItem() \n{\n  BUxIndex=document.getElementById(\"selectBU\").selectedIndex;\n  \n  document.registrationBU.idbu.value=BUValues.BU[BUxIndex].ID_BU;\n  document.registrationBU.Category.value=BUValues.BU[BUxIndex].Category;\n  document.registrationBU.Description.value=BUValues.BU[BUxIndex].Description;\n  document.registrationBU.FloorsAboveGround.value=BUValues.BU[BUxIndex].FloorsAboveGround;\n  document.registrationBU.FloorsBelowGround.value=BUValues.BU[BUxIndex].FloorsBelowGround;\n  document.registrationBU.Street.value=BUValues.BU[BUxIndex].Street;\n  document.registrationBU.DoorNumber.value=BUValues.BU[BUxIndex].DoorNumber;\n  document.registrationBU.AreaLocality.value=BUValues.BU[BUxIndex].AreaLocality;\n  document.registrationBU.ZipPostCode.value=BUValues.BU[BUxIndex].ZipPostCode;\n  document.registrationBU.GPS_Lat.value=BUValues.BU[BUxIndex].GPS_Lat;\n  document.registrationBU.GPS_Lon.value=BUValues.BU[BUxIndex].GPS_Lon;\n  document.registrationBU.OtherInfo.value=BUValues.BU[BUxIndex].OtherInfo;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 3px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 3px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n<body>\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update a Building Unit</h1>\n\n<form id=\"registrationBU\" name=\"registrationBU\">\n    <ul>\n        <select id=\"selectBU\" onchange=\"BUListSelEventItem()\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    BUValues=data;\n                    \n                    //Create a BU List var sel\n                    var sel = document.getElementById(\"selectBU\");\n                    \n                    //Previous remove all options in BU List\n                    removeOptions(document.getElementById(\"selectBU\"));\n                    \n                    for (var i = 0; i < BUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"BU \" + BUValues.BU[i].ID_BU + \" \" +BUValues.BU[i].Category+ \" \" +BUValues.BU[i].AreaLocality+ \" \" +BUValues.BU[i].Street+ \" \" +BUValues.BU[i].DoorNumber);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"BU \" + BUValues.BU[i].ID_BU + \" \" +BUValues.BU[i].Category+ \" \" +BUValues.BU[i].AreaLocality+ \" \" +BUValues.BU[i].Street+ \" \" +BUValues.BU[i].DoorNumber);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    if (BUValues.Number>0)\n                        BU_Init();\n                    else\n                    {\n                        BU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Building Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Building Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n          </script>\n        </select>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idbu\">ID_BU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.idbu.value=BUValues.BU[0].ID_BU;\n                </script>\n                <input type=\"text\" id=\"idbu\" name=\"idbu\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n              <select id=\"Category\" name=\"Category\">\n                 <option value=\"Residential\">Residential</option>\n                 <option value=\"Retail and Offices\">Retail and Offices</option>\n                 <option value=\"Accomodation\">Accomodation</option>\n                 <option value=\"Health and Nurse\">Health and Nurse</option>\n                 <option value=\"Educational\">Educational</option>\n                 <option value=\"Government\">Government</option>\n                 <option value=\"Others\">Others</option>\n              </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.Description.value=BUValues.BU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsAboveGround\">FloorsAbGround</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.FloorsAboveGround.value=BUValues.BU[0].FloorsAboveGround;\n                </script>\n                <input type=\"text\" id=\"FloorsAboveGround\" name=\"FloorsAboveGround\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsBelowGround\">FloorsBeGround</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.FloorsBelowGround.value=BUValues.BU[0].FloorsBelowGround;\n                </script>\n                <input type=\"text\" id=\"FloorsBelowGround\" name=\"FloorsBelowGround\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.Street.value=BUValues.BU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.DoorNumber.value=BUValues.BU[0].DoorNumber;\n                </script>\n                <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.AreaLocality.value=BUValues.BU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.ZipPostCode.value=BUValues.BU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.GPS_Lat.value=BUValues.BU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.GPS_Lon.value=BUValues.BU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU.OtherInfo.value=BUValues.BU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\"></textarea>\n            </div>\n        </div>\n        <p>\n            <button type=\"submit\" name=\"UPDATE_BU\" onclick=\"BUUpdateValidation()\"> UPDATE </button>\n            <button type=\"submit\" name=\"RESET_BU\"  onclick=\"BU_Init()\"> RESET </button>\n        </p>\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1870,"y":1280,"wires":[["749d78e1.545c18","a60bdfdd.e2a18"]]},{"id":"9b41f703.c4c858","type":"comment","z":"fc65fec6.42377","name":"GA - UPDATE A BU IN GEO_Area_DB","info":"","x":1870,"y":1240,"wires":[]},{"id":"5238f85c.b162e8","type":"ui_template","z":"fc65fec6.42377","group":"f5293b95.631198","name":"GA - Select in List Box BU To Delete","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar BUValues;\nvar sel;\nvar isel=-1;\n\n\n\n//Select a BU to delete\nfunction BU_Delete()\n{\n    var xIndex=document.getElementById(\"selectBUDEL\").selectedIndex;\n    BUValues.Selected=xIndex;\n    \n    theScope.send({payload:BUValues});\n}\n\n\n// Resets for the first BU\nfunction BU_Init()\n{\n    if (BUValues.Number>0)\n    {\n        document.getElementById(\"selectBUDEL\").selectedIndex = 0;\n        BUxIndex=0;\n\n        document.registrationBU_Delete.idbu.value=BUValues.BU[BUxIndex].ID_BU;\n        document.registrationBU_Delete.Category.value=BUValues.BU[BUxIndex].Category;\n        document.registrationBU_Delete.Description.value=BUValues.BU[BUxIndex].Description;\n        document.registrationBU_Delete.FloorsAboveGround.value=BUValues.BU[BUxIndex].FloorsAboveGround;\n        document.registrationBU_Delete.FloorsBelowGround.value=BUValues.BU[BUxIndex].FloorsBelowGround;\n        document.registrationBU_Delete.Street.value=BUValues.BU[BUxIndex].Street;\n        document.registrationBU_Delete.DoorNumber.value=BUValues.BU[BUxIndex].DoorNumber;\n        document.registrationBU_Delete.AreaLocality.value=BUValues.BU[BUxIndex].AreaLocality;\n        document.registrationBU_Delete.ZipPostCode.value=BUValues.BU[BUxIndex].ZipPostCode;\n        document.registrationBU_Delete.GPS_Lat.value=BUValues.BU[BUxIndex].GPS_Lat;\n        document.registrationBU_Delete.GPS_Lon.value=BUValues.BU[BUxIndex].GPS_Lon;\n        document.registrationBU_Delete.OtherInfo.value=BUValues.BU[BUxIndex].OtherInfo;\n        \n    }\n   \n}\n\n// BU List is empty\nfunction BU_Empty()\n{\n        document.registrationBU_Delete.idbu.value=\"\";\n        document.registrationBU_Delete.Category.value=\"\";\n        document.registrationBU_Delete.Description.value=\"\";\n        document.registrationBU_Delete.FloorsAboveGround.value=0;\n        document.registrationBU_Delete.FloorsBelowGround.value=0;\n        document.registrationBU_Delete.Street.value=\"\";\n        document.registrationBU_Delete.DoorNumber.value=\"\";\n        document.registrationBU_Delete.AreaLocality.value=\"\";\n        document.registrationBU_Delete.ZipPostCode.value=\"\";\n        document.registrationBU_Delete.GPS_Lat.value=\"\";\n        document.registrationBU_Delete.GPS_Lon.value=\"\";\n        document.registrationBU_Delete.OtherInfo.value=\"\";\n}\n\n\n// Removes all elements in the dropdown BU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in BU list\nfunction BUListSelEventItem() \n{\n  var BUxIndex=document.getElementById(\"selectBUDEL\").selectedIndex;\n  \n  document.registrationBU_Delete.idbu.value=BUValues.BU[BUxIndex].ID_BU;\n  document.registrationBU_Delete.Category.value=BUValues.BU[BUxIndex].Category;\n  document.registrationBU_Delete.Description.value=BUValues.BU[BUxIndex].Description;\n  document.registrationBU_Delete.FloorsAboveGround.value=BUValues.BU[BUxIndex].FloorsAboveGround;\n  document.registrationBU_Delete.FloorsBelowGround.value=BUValues.BU[BUxIndex].FloorsBelowGround;\n  document.registrationBU_Delete.Street.value=BUValues.BU[BUxIndex].Street;\n  document.registrationBU_Delete.DoorNumber.value=BUValues.BU[BUxIndex].DoorNumber;\n  document.registrationBU_Delete.AreaLocality.value=BUValues.BU[BUxIndex].AreaLocality;\n  document.registrationBU_Delete.ZipPostCode.value=BUValues.BU[BUxIndex].ZipPostCode;\n  document.registrationBU_Delete.GPS_Lat.value=BUValues.BU[BUxIndex].GPS_Lat;\n  document.registrationBU_Delete.GPS_Lon.value=BUValues.BU[BUxIndex].GPS_Lon;\n  document.registrationBU_Delete.OtherInfo.value=BUValues.BU[BUxIndex].OtherInfo;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\ninput[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 3px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 3px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete a Building Unit</h1>\n\n<form id=\"registrationBU_Delete\" name=\"registrationBU_Delete\">\n    <ul>\n        <select id=\"selectBUDEL\" onchange=\"BUListSelEventItem()\">\n            <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    BUValues=data;\n                    \n                    //Create Geographic Area List var sel\n                    var sel = document.getElementById(\"selectBUDEL\");\n                    \n                    //Previous remove all options in Geographic List\n                    sel.options.length = 0;\n                    removeOptions(document.getElementById('selectBUDEL'));\n                    \n                    for (var i = 0; i < BUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"BU \" + BUValues.BU[i].ID_BU + \" \" +BUValues.BU[i].Category+ \" \" +BUValues.BU[i].AreaLocality+ \" \" +BUValues.BU[i].Street+ \" \" +BUValues.BU[i].DoorNumber);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"BU \" + BUValues.BU[i].ID_BU + \" \" +BUValues.BU[i].Category+ \" \" +BUValues.BU[i].AreaLocality+ \" \" +BUValues.BU[i].Street+ \" \" +BUValues.BU[i].DoorNumber);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    \n                    if (BUValues.Number>0)\n                        BU_Init();\n                    else\n                    {\n                        BU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Building Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Building Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n        </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idbu\">ID_BU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.idbu.value=BUValues.BU[0].ID_BU;\n                </script>\n                <input type=\"text\" id=\"idbu\" name=\"idbu\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.Category.value=BUValues.BU[0].Category;\n                </script>\n                <input type=\"text\" id=\"Category\" name=\"Category\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.Description.value=BUValues.BU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsAboveGround\">FloorsAbGround</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.FloorsAboveGround.value=BUValues.BU[0].FloorsAboveGround;\n                </script>\n                <input type=\"text\" id=\"FloorsAboveGround\" name=\"FloorsAboveGround\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"FloorsBelowGround\">FloorsBeGround</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.FloorsBelowGround.value=BUValues.BU[0].FloorsBelowGround;\n                </script>\n                <input type=\"text\" id=\"FloorsBelowGround\" name=\"FloorsBelowGround\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.Street.value=BUValues.BU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"DoorNumber\">DoorNumber</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.DoorNumber.value=BUValues.BU[0].DoorNumber;\n                </script>\n                <input type=\"text\" id=\"DoorNumber\" name=\"DoorNumber\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.AreaLocality.value=BUValues.BU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.ZipPostCode.value=BUValues.BU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.GPS_Lat.value=BUValues.BU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.GPS_Lon.value=BUValues.BU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationBU_Delete.OtherInfo.value=BUValues.BU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\" readOnly=\"readOnly\" ></textarea>\n            </div>\n        </div>\n        \n        <p><input type=\"button\" value=\"DELETE\" onclick=\"BU_Delete()\"> \n           <input type=\"button\" value=\"RESET\" onclick=\"BU_Init()\">\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1870,"y":1640,"wires":[["2bd41312.9831cc","2d4fdb5b.67f294"]]},{"id":"a26a7e6e.98d6d","type":"comment","z":"fc65fec6.42377","name":"GA - DELETE A BU IN GEO_Area_DB","info":"","x":1870,"y":1600,"wires":[]},{"id":"d6a82bf.5e38ed8","type":"function","z":"fc65fec6.42377","name":"F BU Selected Global","func":"var output = msg.payload;\nvar BUSelected=global.get('BUSelected')||0;\nglobal.set('BUSelected',output);\n\nBUSelected={payload:BUSelected};\nreturn BUSelected;","outputs":1,"noerr":0,"x":2180,"y":700,"wires":[["64bfc30d.5b558c","dbc509fe.c54b48"]]},{"id":"64bfc30d.5b558c","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2190,"y":740,"wires":[]},{"id":"dbc509fe.c54b48","type":"function","z":"fc65fec6.42377","name":"F Show Selected Building Unit","func":"\nvar BU_GA = msg.payload;\n\nvar BU_Sel=msg.payload.Selected;\n\nvar thing = {\n    name:\"Building Unit \"+msg.payload.BU[BU_Sel].ID_BU+\" in GA \"+ msg.payload.BU[BU_Sel].ID_GA , \n    lat: msg.payload.BU[BU_Sel].GPS_Lat,\n    lon: msg.payload.BU[BU_Sel].GPS_Lon,\n    icon:\"building\",\n    iconColor:\"Lightblue\",\n    draggable: true,\n    extrainfo:\"Building Unit \"+ msg.payload.BU[BU_Sel].ID_BU,\n    layer:\"Building Units\"\n};\nthing={payload:thing};\nreturn thing;","outputs":1,"noerr":0,"x":2610,"y":700,"wires":[["e6606fc5.00ffe","7685e9c3.ed1de8"]]},{"id":"e6606fc5.00ffe","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2650,"y":740,"wires":[]},{"id":"7685e9c3.ed1de8","type":"link out","z":"fc65fec6.42377","name":"BULink2MAP","links":["bd1a5328.5eba1"],"x":3015,"y":520,"wires":[]},{"id":"2d659c27.3d8ba4","type":"function","z":"fc65fec6.42377","name":"F BUnit_DB Insert new Record ","func":"var NewBU = msg.payload.split(\";\")\n\nvar NewBUJson = {}\n\nNewBUJson.ID_BU=parseInt(NewBU[0]);\nNewBUJson.ID_GA=parseInt(NewBU[1]);\n\nNewBUJson.Category=NewBU[2];\nNewBUJson.Description=NewBU[3];\nNewBUJson.FloorsAboveGround=parseInt(NewBU[4]);\nNewBUJson.FloorsBelowGround=parseInt(NewBU[5]);\nNewBUJson.Street=NewBU[6];\nNewBUJson.DoorNumber=NewBU[7];\nNewBUJson.AreaLocality=NewBU[8];\nNewBUJson.ZipPostCode=NewBU[9];\n\nNewBUJson.GPS = {};\nNewBUJson.GPS.Latitude=NewBU[10];\nNewBUJson.GPS.Longitude=NewBU[11];\nNewBUJson.OtherInfo=NewBU[12];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO BUnit_DB(ID_BU,ID_GA,Category,Description,FloorsAboveGround,FloorsBelowGround,Street,DoorNumber,AreaLocality,ZipPostCode, GPS_Lat, GPS_Lon, OtherInfo) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + NewBUJson.ID_GA + \"\\\"\" + \", \" +\n    \"\\\"\" + NewBUJson.Category + \"\\\"\" + \", \" + \n    \"\\\"\" + NewBUJson.Description + \"\\\"\" + \", \" + \n    \"\\\"\" + NewBUJson.FloorsAboveGround + \"\\\"\" + \", \" + \n    \"\\\"\" + NewBUJson.FloorsBelowGround + \"\\\"\" + \", \" + \n    \"\\\"\" + NewBUJson.Street + \"\\\"\" + \", \" + \n    \"\\\"\" + NewBUJson.DoorNumber + \"\\\"\" + \", \" +\n    \"\\\"\" + NewBUJson.AreaLocality + \"\\\"\" + \", \" +\n    \"\\\"\" + NewBUJson.ZipPostCode + \"\\\"\" + \", \" +\n    \"\\\"\" + NewBUJson.GPS.Latitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewBUJson.GPS.Longitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewBUJson.OtherInfo + \"\\\"\" + \")\"\n}\n\nNewBUJson={payload:NewBUJson};\n\nreturn [NewBUJson, SQLInsert]","outputs":2,"noerr":0,"x":2210,"y":980,"wires":[["58050454.b258cc","42211c76.704b54"],["7c4dbea4.34bf3"]]},{"id":"6adaa471.16911c","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1910,"y":1020,"wires":[]},{"id":"5f73449e.13f32c","type":"function","z":"fc65fec6.42377","name":"F BUnitDB SELECT ALL","func":"var SQLSELECTALL={\"topic\" : \"SELECT * FROM BUnit_DB\"};\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":870,"y":960,"wires":[["7d4c298d.b40eb8"]]},{"id":"7d4c298d.b40eb8","type":"sqlite","z":"fc65fec6.42377","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"BUnit_DB","x":1120,"y":960,"wires":[["a5ac1047.21347"]]},{"id":"a5ac1047.21347","type":"function","z":"fc65fec6.42377","name":"F BUnit_DB Number of Records","func":"var output = msg.payload.length;\nvar NBU=global.get('NBU')||0;\nglobal.set('NBU',output);\n\nNBU={payload:NBU};\nreturn NBU;","outputs":1,"noerr":0,"x":1410,"y":960,"wires":[["fa74bd2c.d3a7c"]]},{"id":"fa74bd2c.d3a7c","type":"debug","z":"fc65fec6.42377","name":"NBU","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1470,"y":1020,"wires":[]},{"id":"7c4dbea4.34bf3","type":"sqlite","z":"fc65fec6.42377","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"BUnit_DB","x":2520,"y":920,"wires":[["2f474fdd.a704b"]]},{"id":"58050454.b258cc","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2250,"y":1020,"wires":[]},{"id":"42211c76.704b54","type":"function","z":"fc65fec6.42377","name":"F Show a New Building Unit","func":"\nvar NEW_BU = msg.payload;\n\nvar BU_Sel=msg.payload.Selected;\n\nvar thing = {\n    name:\"Building Unit \"+ NEW_BU.ID_BU + \" in \"+ NEW_BU.ID_GA, \n    lat: msg.payload.GPS.Latitude,\n    lon: msg.payload.GPS.Longitude,\n    icon:\"building\",\n    iconColor:\"Lightblue\",\n    extrainfo:\"Building Unit \"+ NEW_BU.ID_BU,\n    layer:\"Building Units\"\n};\nthing={payload:thing};\nreturn thing;","outputs":1,"noerr":0,"x":2760,"y":980,"wires":[["1f56819c.9b21fe","7685e9c3.ed1de8"]]},{"id":"1f56819c.9b21fe","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2700,"y":1040,"wires":[]},{"id":"749d78e1.545c18","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1950,"y":1320,"wires":[]},{"id":"a60bdfdd.e2a18","type":"function","z":"fc65fec6.42377","name":"F BUnit_DB Select Record to UPDATE","func":"var ListBU=msg.payload;\nvar index=ListBU.Selected;\n\nvar SQLUPDATE={\"topic\" : \"UPDATE BUnit_DB SET \" +\n    \"ID_BU=\" + ListBU.BU[index].ID_BU + \", \" +\n    \"ID_GA=\" + ListBU.BU[index].ID_GA + \", \" +\n    \"Category=\" + \"\\\"\" + ListBU.BU[index].Category + \"\\\"\" + \", \" + \n    \"Description=\" + \"\\\"\" + ListBU.BU[index].Description + \"\\\"\" + \", \" + \n    \"FloorsAboveGround=\" + \"\\\"\" + parseInt(ListBU.BU[index].FloorsAboveGround) + \"\\\"\"  + \", \" + \n    \"FloorsBelowGround=\" + \"\\\"\" + parseInt(ListBU.BU[index].FloorsBelowGround) + \"\\\"\"  + \", \" +\n    \"Street=\" + \"\\\"\" + ListBU.BU[index].Street + \"\\\"\"  + \", \" + \n    \"DoorNumber=\" + \"\\\"\" + ListBU.BU[index].DoorNumber + \"\\\"\"  + \", \" + \n    \"AreaLocality=\" + \"\\\"\" + ListBU.BU[index].AreaLocality + \"\\\"\"  + \", \" + \n    \"ZipPostCode=\" + \"\\\"\" + ListBU.BU[index].ZipPostCode + \"\\\"\"  + \", \" +\n    \"GPS_Lat=\" + \"\\\"\" + ListBU.BU[index].GPS_Lat + \"\\\"\" + \", \" + \n    \"GPS_Lon=\" + \"\\\"\" + ListBU.BU[index].GPS_Lon + \"\\\"\" + \", \" + \n    \"OtherInfo= \"+ \"\\\"\" + ListBU.BU[index].OtherInfo + \"\\\"\" +\n\n    \"WHERE ID_BU=\" + ListBU.BU[index].ID_BU    \n};\n\nreturn [SQLUPDATE, msg];","outputs":1,"noerr":0,"x":2310,"y":1280,"wires":[["a0665f3c.c6173","7afeed01.598be4"]]},{"id":"a0665f3c.c6173","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2370,"y":1320,"wires":[]},{"id":"7afeed01.598be4","type":"sqlite","z":"fc65fec6.42377","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"BUnit_DB","x":2560,"y":1220,"wires":[["2f474fdd.a704b"]]},{"id":"2bd41312.9831cc","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1950,"y":1680,"wires":[]},{"id":"2d4fdb5b.67f294","type":"function","z":"fc65fec6.42377","name":" F BUnit_DB Select Record to Delete","func":"var ListBU=msg.payload;\nvar index=ListBU.Selected;\n\nvar SQLDELETE={\"topic\" : \"DELETE FROM BUnit_DB WHERE ID_BU=\" +\n                          ListBU.BU[index].ID_BU +\n                          \" AND ID_GA=\" + ListBU.BU[index].ID_GA };\n\nreturn [SQLDELETE, msg];","outputs":1,"noerr":0,"x":2310,"y":1640,"wires":[["bcfc7543.a1a958","e3ecf1b5.7a514"]]},{"id":"bcfc7543.a1a958","type":"debug","z":"fc65fec6.42377","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2370,"y":1680,"wires":[]},{"id":"e3ecf1b5.7a514","type":"sqlite","z":"fc65fec6.42377","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"BUnit_DB","x":2560,"y":1580,"wires":[["2f474fdd.a704b"]]},{"id":"9a1578ee.8059f8","type":"comment","z":"134bc9b.a104536","name":"SCU - LIST BU Option","info":"","x":200,"y":720,"wires":[]},{"id":"5ce07ce.a7abe84","type":"ui_button","z":"134bc9b.a104536","name":"LIST SCU","group":"30a28807.0997f8","order":2,"width":"4","height":1,"passthru":true,"label":"List all of SCU","tooltip":"List all the records","color":"black","bgcolor":"orange","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\"]}}","payloadType":"json","topic":"LIST","x":440,"y":720,"wires":[["5633dccb.09ecf4","a278201b.a4c42"]]},{"id":"257602bd.cf953e","type":"ui_button","z":"134bc9b.a104536","name":"NEW SCU","group":"30a28807.0997f8","order":5,"width":"4","height":1,"passthru":true,"label":"Insert a new SCU","tooltip":"Inserts a new record","color":"black","bgcolor":"orange","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\"]}}","payloadType":"json","topic":"NEW","x":450,"y":1060,"wires":[["5633dccb.09ecf4","1b73cab1.452d15","a278201b.a4c42"]]},{"id":"b637652d.68a8a8","type":"ui_button","z":"134bc9b.a104536","name":"UPDATE SCU","group":"30a28807.0997f8","order":8,"width":"4","height":1,"passthru":true,"label":"Update a SCU","tooltip":"Updates a record","color":"black","bgcolor":"orange","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\"]}}","payloadType":"json","topic":"UPDATE","x":460,"y":1400,"wires":[["5633dccb.09ecf4","a278201b.a4c42"]]},{"id":"8534b02d.6607b","type":"ui_button","z":"134bc9b.a104536","name":"DELETE SCU","group":"30a28807.0997f8","order":11,"width":"4","height":1,"passthru":true,"label":"Delete a SCU","tooltip":"Deletes a record","color":"black","bgcolor":"orange","icon":"","payload":"{\"group\":{\"hide\":[\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_RU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_GA\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_BU\",\"ECOSYSTEM_CHARACTERIZATION_GA_LIST_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_NEW_SCU\",\"ECOSYSTEM_CHARACTERIZATION_GA_UPDATE_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_RU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_BU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_SCU\",\"ECOSYSTEM_CHARACTERIZATION_ECO_MENU_GA\"],\"show\":[\"ECOSYSTEM_CHARACTERIZATION_GA_DELETE_SCU\"]}}","payloadType":"json","topic":"DELETE","x":460,"y":1760,"wires":[["5633dccb.09ecf4","a278201b.a4c42"]]},{"id":"5633dccb.09ecf4","type":"ui_ui_control","z":"134bc9b.a104536","name":"","x":980,"y":1240,"wires":[[]]},{"id":"8f7293f1.f64c4","type":"comment","z":"134bc9b.a104536","name":"SCU - NEW BU Option","info":"","x":200,"y":1060,"wires":[]},{"id":"a1b30811.31b678","type":"comment","z":"134bc9b.a104536","name":"SCU - UPDATE BU Option","info":"","x":210,"y":1400,"wires":[]},{"id":"118f6c7f.8c3234","type":"comment","z":"134bc9b.a104536","name":"SCU - DELETE BU Option","info":"","x":230,"y":1760,"wires":[]},{"id":"a278201b.a4c42","type":"function","z":"134bc9b.a104536","name":"F BUnitDB in ID_GA SELECT ALL","func":"var GAIDSel =global.get('GeoArea');\n\nvar SQLSELECTALL={\"topic\" : \"SELECT * FROM SCUnit_DB WHERE ID_GA=\" + GAIDSel.GA[GAIDSel.Selected].ID_GA };\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":780,"y":720,"wires":[["cb038c2d.b137a","65ba2627.ecd328"]]},{"id":"cb038c2d.b137a","type":"sqlite","z":"134bc9b.a104536","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"SCUnit_DB","x":1090,"y":720,"wires":[["4923155.5305fec","45d231f8.3742a"]]},{"id":"65ba2627.ecd328","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":850,"y":760,"wires":[]},{"id":"4923155.5305fec","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1090,"y":760,"wires":[]},{"id":"45d231f8.3742a","type":"function","z":"134bc9b.a104536","name":"F SCUnit_DB Read All Records","func":"var ReadAll_SCU=msg.payload;\nvar NSCU=global.get('NSCU');\n\nvar SCUList={};\n\nSCUList.Number=msg.payload.length;\nSCUList.Selected=0;\n\nSCUList.SCU=[]\n\nvar i;\nfor (i = 0; i < msg.payload.length; i++) {\n    // do something with msg.payload[i]\n    SCUList.SCU.push({});\n    SCUList.SCU[i]['ID_SCU'] = msg.payload[i].ID_SCU;\n    SCUList.SCU[i]['ID_GA'] = msg.payload[i].ID_GA;\n    SCUList.SCU[i]['Category'] = msg.payload[i].Category;\n    SCUList.SCU[i]['Description'] = msg.payload[i].Description;\n    SCUList.SCU[i]['AreaLocality'] = msg.payload[i].AreaLocality;\n    SCUList.SCU[i]['ZipPostCode'] = msg.payload[i].ZipPostCode;\n    SCUList.SCU[i]['Street'] = msg.payload[i].Street;\n    SCUList.SCU[i]['GPS_Lat'] = msg.payload[i].GPS_Lat;\n    SCUList.SCU[i]['GPS_Lon'] = msg.payload[i].GPS_Lon;\n    SCUList.SCU[i]['OtherInfo'] = msg.payload[i].OtherInfo;\n}\n\nSCUList.NextIDSCU=NSCU;     //Max (ID_SCU) + 1;\n\nSCUList={payload:SCUList};\n\nreturn SCUList;       ","outputs":1,"noerr":0,"x":1370,"y":720,"wires":[["104dc583.72a8ea","8373baf4.f86798","3818a00e.e57df","f8bc578f.becfe8","1d9adcad.959223","7fc5a3cb.684a7c"]]},{"id":"104dc583.72a8ea","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1410,"y":760,"wires":[]},{"id":"1b73cab1.452d15","type":"function","z":"134bc9b.a104536","name":"F SCUnitDB SELECT ALL","func":"var SQLSELECTALL={\"topic\" : \"SELECT * FROM SCUnit_DB\"};\n\nreturn SQLSELECTALL","outputs":1,"noerr":0,"x":750,"y":1060,"wires":[["c9d13bdb.67cdf8"]]},{"id":"c9d13bdb.67cdf8","type":"sqlite","z":"134bc9b.a104536","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"SCUnit_DB","x":1070,"y":1060,"wires":[["ecf03f0c.59d2f"]]},{"id":"ecf03f0c.59d2f","type":"function","z":"134bc9b.a104536","name":"F SCUnit_DB Number of Records","func":"var output = msg.payload.length;\nvar NSCU=global.get('NSCU')||0;\nglobal.set('NSCU',output);\n\nNSCU={payload:NSCU};\nreturn NSCU;","outputs":1,"noerr":0,"x":1360,"y":1060,"wires":[["5c5cff13.7ca52"]]},{"id":"5c5cff13.7ca52","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1410,"y":1100,"wires":[]},{"id":"edf534ae.ae4a18","type":"comment","z":"134bc9b.a104536","name":"GA - LIST BOX OF ALL SCU IN GEO_Area_DB","info":"","x":2020,"y":680,"wires":[]},{"id":"8373baf4.f86798","type":"ui_template","z":"134bc9b.a104536","group":"279aaefd.44b5b2","name":"GA - List Box All SCU","order":6,"width":"9","height":"9","format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar SCUValues;\nvar SCUxIndex=0;\n\n\n//Select a SCU to use in model\nfunction SCU_Selection()\n{\n    SCUValues.Selected = document.getElementById(\"selectSCU\").selectedIndex;\n    \n    theScope.send({payload:SCUValues});\n    theScope.send({payload:SCUValues});\n}\n\n\n// Resets for the first SCU\nfunction SCU_Init()\n{\n    \n     if (SCUValues.Number>0)\n    {\n        document.getElementById(\"selectSCU\").selectedIndex = 0;\n        SCUxIndex=0;\n\n        document.registrationSCU.idscu.value=SCUValues.SCU[SCUxIndex].ID_SCU;\n        document.registrationSCU.Category.value=SCUValues.SCU[SCUxIndex].Category;\n        document.registrationSCU.Description.value=SCUValues.SCU[SCUxIndex].Description;\n        document.registrationSCU.Street.value=SCUValues.SCU[SCUxIndex].Street;\n        document.registrationSCU.AreaLocality.value=SCUValues.SCU[SCUxIndex].AreaLocality;\n        document.registrationSCU.ZipPostCode.value=SCUValues.SCU[SCUxIndex].ZipPostCode;\n        document.registrationSCU.GPS_Lat.value=SCUValues.SCU[SCUxIndex].GPS_Lat;\n        document.registrationSCU.GPS_Lon.value=SCUValues.SCU[SCUxIndex].GPS_Lon;\n        document.registrationSCU.OtherInfo.value=SCUValues.SCU[SCUxIndex].OtherInfo;\n        \n    }\n   \n}\n\nfunction SCU_Selected()\n{\n     if (SCUValues.Number>0)\n    {\n        document.getElementById(\"selectSCU\").selectedIndex = SCUxIndex;\n\n        document.registrationSCU.idscu.value=SCUValues.SCU[SCUxIndex].ID_SCU;\n        document.registrationSCU.Category.value=SCUValues.SCU[SCUxIndex].Category;\n        document.registrationSCU.Description.value=SCUValues.SCU[SCUxIndex].Description;\n        document.registrationSCU.Street.value=SCUValues.SCU[SCUxIndex].Street;\n        document.registrationSCU.AreaLocality.value=SCUValues.SCU[SCUxIndex].AreaLocality;\n        document.registrationSCU.ZipPostCode.value=SCUValues.SCU[SCUxIndex].ZipPostCode;\n        document.registrationSCU.GPS_Lat.value=SCUValues.SCU[SCUxIndex].GPS_Lat;\n        document.registrationSCU.GPS_Lon.value=SCUValues.SCU[SCUxIndex].GPS_Lon;\n        document.registrationSCU.OtherInfo.value=SCUValues.SCU[SCUxIndex].OtherInfo;\n    }\n   \n}\n\n// SCU List is empty\nfunction SCU_Empty()\n{\n        document.registrationSCU.idscu.value=\"\";\n        document.registrationSCU.Category.value=\"\";\n        document.registrationSCU.Description.value=\"\";\n        document.registrationSCU.Street.value=\"\";\n        document.registrationSCU.AreaLocality.value=\"\";\n        document.registrationSCU.ZipPostCode.value=\"\";\n        document.registrationSCU.GPS_Lat.value=\"\";\n        document.registrationSCU.GPS_Lon.value=\"\";\n        document.registrationSCU.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown SCU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in SCU list\nfunction SCUListSelEventItem() \n{\n  SCUxIndex=document.getElementById(\"selectSCU\").selectedIndex;\n  \n  document.registrationSCU.idscu.value=SCUValues.SCU[SCUxIndex].ID_SCU;\n  document.registrationSCU.Category.value=SCUValues.SCU[SCUxIndex].Category;\n  document.registrationSCU.Description.value=SCUValues.SCU[SCUxIndex].Description;\n  document.registrationSCU.Street.value=SCUValues.SCU[SCUxIndex].Street;\n  document.registrationSCU.AreaLocality.value=SCUValues.SCU[SCUxIndex].AreaLocality;\n  document.registrationSCU.ZipPostCode.value=SCUValues.SCU[SCUxIndex].ZipPostCode;\n  document.registrationSCU.GPS_Lat.value=SCUValues.SCU[SCUxIndex].GPS_Lat;\n  document.registrationSCU.GPS_Lon.value=SCUValues.SCU[SCUxIndex].GPS_Lon;\n  document.registrationSCU.OtherInfo.value=SCUValues.SCU[SCUxIndex].OtherInfo;\n  \n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n     /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 6px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 6px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select a Smart City Unit</h1>\n\n<form id=\"registrationSCU\" name=\"registrationSCU\">\n    <ul>\n        <select id=\"selectSCU\" onchange=\"SCUListSelEventItem()\" form=\"registrationSCU\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    SCUValues=data;\n                    \n                    //Create SC List var sel\n                    var sel = document.getElementById(\"selectSCU\");\n                    \n                    //Previous remove all options in SCU Units List\n                    removeOptions(document.getElementById(\"selectSCU\"));\n                    \n                    for (var i = 0; i < SCUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"SCU \" + SCUValues.SCU[i].ID_SCU + \" \" +SCUValues.SCU[i].Category+ \" \" +SCUValues.SCU[i].AreaLocality+ \" \" +SCUValues.SCU[i].Street);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"SCU \" + SCUValues.SCU[i].ID_SCU + \" \" +SCUValues.SCU[i].Category+ \" \" +SCUValues.SCU[i].AreaLocality+ \" \" +SCUValues.SCU[i].Street);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                   \n                    if (SCUValues.Number>0)\n                        SCU_Selected();\n                    else\n                    {\n                        SCU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Smart City Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Smart City Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n          </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idscu\">ID_SCU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.idscu.value=SCUValues.SCU[0].ID_SCU;\n                </script>\n                <input type=\"text\" id=\"idscu\" name=\"idscu\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.Category.value=SCUValues.SCU[0].Category;\n                </script>\n                <input type=\"text\" id=\"Category\" name=\"Category\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.Description.value=SCUValues.SCU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.Street.value=SCUValues.SCU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.AreaLocality.value=SCUValues.SCU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.ZipPostCode.value=SCUValues.SCU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.GPS_Lat.value=SCUValues.SCU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.GPS_Lon.value=SCUValues.SCU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU.OtherInfo.value=SCUValues.SCU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\" readOnly=\"readOnly\" ></textarea>\n            </div>\n        </div>\n    \n        <p>\n            <button type=\"submit\" name=\"SELECT_SCU\" onclick=\"SCU_Selection()\"> SELECT </button>\n            <button type=\"submit\" name=\"RESET_SCU\"  onclick=\"SCU_Init()\"> RESET </button>\n        </p>\n        \n    </ul>\n</form>\n</body>\n\n\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1940,"y":720,"wires":[["ec4dc0bb.2c0f6","a5ceabab.60f368"]]},{"id":"ec4dc0bb.2c0f6","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1970,"y":760,"wires":[]},{"id":"ff2ed6d7.169928","type":"comment","z":"134bc9b.a104536","name":"GA - INSERT NEW SCU IN GEO_Area_DB","info":"","x":2000,"y":1020,"wires":[]},{"id":"3818a00e.e57df","type":"ui_template","z":"134bc9b.a104536","group":"cfeeaec7.88b23","name":"GA - New SCU Input Form new","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar SCUValues;\nvar idga;\nvar NextIDSCU;\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//SCU ZipPostCode validation\nfunction ZipPostCodeSelect(ZipPostCode)\n{\n    var numbers = /(^\\d{4}$)|(^\\d{4}-\\d{3}$)/;\n    if(ZipPostCode.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('ZipPostCode must have 2 groups of 4/3 numbers separated by -');\n        ZipPostCode.focus();\n        return false;\n    }\n}\n\n//SCU Category validation\nfunction CategorySelect(Category)\n{\n    if(Category.value == \"Default\")\n    {\n        alert('Select a Category from the list');\n        Category.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//SCU AreaLocality validation\nfunction AreaLocalityeSelect(AreaLocality)\n{\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(AreaLocality.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('AreaLocality must have alphanumeric characters only');\n        AreaLocality.focus();\n        return false;\n    }\n}\n\n//SCU Street validation\nfunction StreetSelect(Street)\n{\n    //var letters = /^[0-9a-zA-Z]+$/;\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(Street.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Street must have alphanumeric characters only');\n        Street.focus();\n        return false;\n    }\n}\n\n\n\nfunction SCU_New()\n{\n    \n    var idscu = document.registrationSCU.idscu;\n    var Category = document.registrationSCU.Category;\n    var Description = document.registrationSCU.Description;\n    var Street = document.registrationSCU.Street;\n    var AreaLocality = document.registrationSCU.AreaLocality;\n    var ZipPostCode = document.registrationSCU.ZipPostCode;\n    var GPS_Lat = document.registrationSCU.GPS_Lat;\n    var GPS_Lon = document.registrationSCU.GPS_Lon;\n    var OtherInfo = document.registrationSCU.OtherInfo;\n    \n    var SCUFormValues =\"\";\n    SCUFormValues = SCUFormValues + idscu.value + \";\"+ idga +\";\"\n    \n    if(CategorySelect(Category))\n    {\n        SCUFormValues = SCUFormValues + Category.value + \";\";\n        SCUFormValues = SCUFormValues + Description.value + \";\";\n        \n        if(StreetSelect(Street))\n        { \n            SCUFormValues = SCUFormValues + Street.value + \";\";\n                if(AreaLocalityeSelect(AreaLocality))\n                {\n                   SCUFormValues = SCUFormValues + AreaLocality.value + \";\";\n                   if(ZipPostCodeSelect(ZipPostCode))\n                    {\n                        SCUFormValues = SCUFormValues + ZipPostCode.value + \"; \";\n                        \n                        if(GPSCoordSelect(GPS_Lat))\n                        {\n                            SCUFormValues = SCUFormValues + GPS_Lat.value + \";\";\n                            if(GPSCoordSelect(GPS_Lon))\n                            {\n                                SCUFormValues = SCUFormValues + GPS_Lon.value + \";\";\n                                SCUFormValues = SCUFormValues + OtherInfo.value;\n                        \n                                theScope.send({payload:SCUFormValues});\n                                \n                            }\n                        }\n                    }\n                }\n        }\n        \n    }\n    return false;\n}\n\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n   /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"reset\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 3px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 3px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Insert a Smart City Unit</h1>\n<p></p>\n<form id=\"registrationSCU\" name=\"registrationSCU\">\n        <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    SCUValues=data;\n                    idga=data.SCU[0].ID_GA;\n                    NextISCU=data.NextISCU;\n                 });\n            })(scope);\n          </script>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idscu\">ID_SCU</label>\n            </div>\n            <div class=\"col-75\">\n                <input type=\"text\" id=\"idscu\" name=\"idscu\" value={{msg.payload.NextIDSCU+1}} readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n                <select id=\"Category\" name=\"Category\">\n                    <option value=\"Street Lighting\">Street Lighting</option>\n                    <option value=\"Public Spaces Lighting\">Public Spaces Lighting</option>\n                    <option value=\"Others\">Others</option>\n                </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Description\" name=\"Description\" placeholder=\"Description...\">\n            </div>\n        </div>\n        \n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"Street\" name=\"Street\" placeholder=\"Street...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" placeholder=\"AreaLocality...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" placeholder=\"ZipPostCode...\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" placeholder=\"GPS_Lat..\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n              <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" placeholder=\"GPS_Lon..\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:40px\"></textarea>\n            </div>\n        </div>\n        \n        <p>\n            <button type=\"submit\" name=\"INSERT_SCU\" onclick=\"SCU_New()\">INSERT </button>\n            <input type=\"reset\" value=\"RESET\" name=\"RESET_SCU\">\n        </p>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1970,"y":1060,"wires":[["22cec37f.31b6bc","93532b27.f26938"]]},{"id":"22cec37f.31b6bc","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1990,"y":1100,"wires":[]},{"id":"c04dc5f6.cdc6b8","type":"comment","z":"134bc9b.a104536","name":"GA - UPDATE A SCU IN GEO_Area_DB","info":"","x":1970,"y":1380,"wires":[]},{"id":"f8bc578f.becfe8","type":"ui_template","z":"134bc9b.a104536","group":"63679516.c45aac","name":"GA - Select in List Box SCU To UPDATE","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar SCUValues;\n\n//GPS validation\nfunction GPSCoordSelect(GPS_x)\n{ \n    var numbers = /^[+-]?\\d{1,3}(?:\\.\\d{3})*(?:.\\d+)?$/;\n    if(GPS_x.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('GPS Coord must have numbers and . or - only');\n        GPS_x.focus();\n        return false;\n    }\n}\n\n//SCU ZipPostCode validation\nfunction ZipPostCodeSelect(ZipPostCode)\n{\n    var numbers = /(^\\d{4}$)|(^\\d{4}-\\d{3}$)/;\n    if(ZipPostCode.value.match(numbers))\n    {\n        return true;\n    }\n    else\n    {\n        alert('ZipPostCode must have 2 groups of 4/3 numbers separated by -');\n        ZipPostCode.focus();\n        return false;\n    }\n}\n\n//SCU Category validation\nfunction CategorySelect(Category)\n{\n    if(Category.value == \"Default\")\n    {\n        alert('Select a Category from the list');\n        Category.focus();\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n}\n\n//SCU AreaLocality validation\nfunction AreaLocalityeSelect(AreaLocality)\n{\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(AreaLocality.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('AreaLocality must have alphanumeric characters only');\n        AreaLocality.focus();\n        return false;\n    }\n}\n\n//SCU Street validation\nfunction StreetSelect(Street)\n{\n    //var letters = /^[0-9a-zA-Z]+$/;\n    var letters = /^[A-Za-z0-9 _ .]*[A-Za-z0-9][A-Za-z0-9 _ .]*$/;\n    if(Street.value.match(letters))\n    {\n        return true;\n    }\n    else\n    {\n        alert('Street must have alphanumeric characters only');\n        Street.focus();\n        return false;\n    }\n}\n\n\nfunction SCUpdateValidation()\n{\n    var SCUxIndex=document.getElementById(\"selectUSCU\").selectedIndex;\n    SCUValues.Selected=SCUxIndex;\n    \n    var idscu = document.registrationUSCU.idscu;\n    var Category = document.registrationUSCU.Category;\n    var Description = document.registrationUSCU.Description;\n    var Street = document.registrationUSCU.Street;\n    var AreaLocality = document.registrationUSCU.AreaLocality;\n    var ZipPostCode = document.registrationUSCU.ZipPostCode;\n    var GPS_Lat = document.registrationUSCU.GPS_Lat;\n    var GPS_Lon = document.registrationUSCU.GPS_Lon;\n    var OtherInfo = document.registrationUSCU.OtherInfo;\n    \n    if(CategorySelect(Category))\n    {\n        if(StreetSelect(Street))\n        { \n                if(AreaLocalityeSelect(AreaLocality))\n                {\n                   if(ZipPostCodeSelect(ZipPostCode))\n                    {\n                        if(GPSCoordSelect(GPS_Lat))\n                        {\n                            if(GPSCoordSelect(GPS_Lon))\n                            {\n                                SCUValues.SCU[SCUxIndex].Category=document.registrationUSCU.Category.value;\n                                SCUValues.SCU[SCUxIndex].Description=document.registrationUSCU.Description.value;\n                                SCUValues.SCU[SCUxIndex].Street=document.registrationUSCU.Street.value;\n                                SCUValues.SCU[SCUxIndex].AreaLocality=document.registrationUSCU.AreaLocality.value;\n                                SCUValues.SCU[SCUxIndex].ZipPostCode=document.registrationUSCU.ZipPostCode.value;\n                                SCUValues.SCU[SCUxIndex].GPS_Lat=document.registrationUSCU.GPS_Lat.value;\n                                SCUValues.SCU[SCUxIndex].GPS_Lon=document.registrationUSCU.GPS_Lon.value;\n                                SCUValues.SCU[SCUxIndex].OtherInfo = document.registrationUSCU.OtherInfo.value;\n                                theScope.send({payload:SCUValues});\n                            }\n                        }\n                    }\n                }\n             \n        }\n        \n    }\n    return false;\n}\n\n// Resets for the first SCU\nfunction SCU_Init()\n{\n    if (SCUValues.Number>0)\n    {\n        document.getElementById(\"selectUSCU\").selectedIndex = 0;\n        SCUxIndex=0;\n\n        document.registrationUSCU.idscu.value=SCUValues.SCU[SCUxIndex].ID_SCU;\n        document.registrationUSCU.Category.value=SCUValues.SCU[SCUxIndex].Category;\n        document.registrationUSCU.Description.value=SCUValues.SCU[SCUxIndex].Description;\n        document.registrationUSCU.Street.value=SCUValues.SCU[SCUxIndex].Street;\n        document.registrationUSCU.AreaLocality.value=SCUValues.SCU[SCUxIndex].AreaLocality;\n        document.registrationUSCU.ZipPostCode.value=SCUValues.SCU[SCUxIndex].ZipPostCode;\n        document.registrationUSCU.GPS_Lat.value=SCUValues.SCU[SCUxIndex].GPS_Lat;\n        document.registrationUSCU.GPS_Lon.value=SCUValues.SCU[SCUxIndex].GPS_Lon;\n        document.registrationUSCU.OtherInfo.value=SCUValues.SCU[SCUxIndex].OtherInfo;\n    }\n}\n\n// SCU List is empty\nfunction SCU_Empty()\n{\n        document.registrationUSCU.idscu.value=\"\";\n        document.registrationUSCU.Category.value=\"\";\n        document.registrationUSCU.Description.value=\"\";\n        document.registrationUSCU.Street.value=\"\";\n        document.registrationUSCU.AreaLocality.value=\"\";\n        document.registrationUSCU.ZipPostCode.value=\"\";\n        document.registrationUSCU.GPS_Lat.value=\"\";\n        document.registrationUSCU.GPS_Lon.value=\"\";\n        document.registrationUSCU.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown SCU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in SCU list\nfunction SCUListSelEventItem() \n{\n  SCUxIndex=document.getElementById(\"selectUSCU\").selectedIndex;\n  \n  document.registrationUSCU.idscu.value=SCUValues.SCU[SCUxIndex].ID_SCU;\n  document.registrationUSCU.Category.value=SCUValues.SCU[SCUxIndex].Category;\n  document.registrationUSCU.Description.value=SCUValues.SCU[SCUxIndex].Description;\n  document.registrationUSCU.Street.value=SCUValues.SCU[SCUxIndex].Street;\n  document.registrationUSCU.AreaLocality.value=SCUValues.SCU[SCUxIndex].AreaLocality;\n  document.registrationUSCU.ZipPostCode.value=SCUValues.SCU[SCUxIndex].ZipPostCode;\n  document.registrationUSCU.GPS_Lat.value=SCUValues.SCU[SCUxIndex].GPS_Lat;\n  document.registrationUSCU.GPS_Lon.value=SCUValues.SCU[SCUxIndex].GPS_Lon;\n  document.registrationUSCU.OtherInfo.value=SCUValues.SCU[SCUxIndex].OtherInfo;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\nbutton[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 3px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 3px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n<body>\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update a Smart City Unit</h1>\n\n<form id=\"registrationUSCU\" name=\"registrationUSCU\">\n    <ul>\n        <select id=\"selectUSCU\" onchange=\"SCUListSelEventItem()\" form=\"registrationUSCU\">\n          <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    SCUValues=data;\n                \n                    //Create a SCU List var sel\n                    var sel = document.getElementById(\"selectUSCU\");\n                    \n                    //Previous remove all options in SCU List\n                    removeOptions(document.getElementById(\"selectUSCU\"));\n                    \n                    for (var i = 0; i < SCUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"SCU \" + SCUValues.SCU[i].ID_SCU + \" \" +SCUValues.SCU[i].Category+ \" \" +SCUValues.SCU[i].AreaLocality+ \" \" +SCUValues.SCU[i].Street);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"SCU \" + SCUValues.SCU[i].ID_SCU + \" \" +SCUValues.SCU[i].Category+ \" \" +SCUValues.SCU[i].AreaLocality+ \" \" +SCUValues.SCU[i].Street);\n                        sel.insertBefore(option,sel.lastChild);\n                        \n                    }\n                    \n                    if (SCUValues.Number>0)\n                        SCU_Init();\n                    else\n                    {\n                        SCU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Smart City Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Smart City Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n          </script>\n        </select>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idscu\">ID_SCU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.idscu.value=SCUValues.SCU[0].ID_SCU;\n                </script>\n                <input type=\"text\" id=\"idscu\" name=\"idscu\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n              <select id=\"Category\" name=\"Category\">\n                 <option value=\"Street Lighting\">Street Lighting </option>\n                 <option value=\"Public Spaces Lighting\">Public Spaces Lighting </option>\n                 <option value=\"Others\">Others</option>\n              </select>\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.Description.value=SCUValues.SCU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.Street.value=SCUValues.SCU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.AreaLocality.value=SCUValues.SCU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.ZipPostCode.value=SCUValues.SCU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.GPS_Lat.value=SCUValues.SCU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\">\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.GPS_Lon.value=SCUValues.SCU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationUSCU.OtherInfo.value=SCUValues.SCU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\"></textarea>\n            </div>\n        </div>\n        <p>\n            <button type=\"submit\" name=\"UPDATE_USCU\" onclick=\"SCUpdateValidation()\"> UPDATE </button>\n            <button type=\"submit\" name=\"RESET_USCU\"  onclick=\"SCU_Init()\"> RESET </button>\n        </p>\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1980,"y":1420,"wires":[["745b2fba.5b3c4","cab86606.5a76a8"]]},{"id":"745b2fba.5b3c4","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2030,"y":1460,"wires":[]},{"id":"2752e80.2e47f18","type":"comment","z":"134bc9b.a104536","name":"GA - DELETE A SCU IN GEO_Area_DB","info":"","x":1970,"y":1740,"wires":[]},{"id":"1d9adcad.959223","type":"ui_template","z":"134bc9b.a104536","group":"31518d3c.806fd2","name":"GA - Select in List Box SCU To Delete","order":1,"width":9,"height":9,"format":"<!DOCTYPE html>\n\n<script type=\"text/javascript\"> \n\nvar theScope = scope;\nvar SCUValues;\nvar sel;\nvar isel=-1;\n\n\n\n//Select a SCU to delete\nfunction SCU_Delete()\n{\n    var xIndex=document.getElementById(\"selectSCUDEL\").selectedIndex;\n    SCUValues.Selected=xIndex;\n    \n    theScope.send({payload:SCUValues});\n}\n\n\n// Resets for the first SCU\nfunction SCU_Init()\n{\n    if (RUValues.Number>0)\n    {\n        document.getElementById(\"selectSCUDEL\").selectedIndex = 0;\n        SCUxIndex=0;\n\n        document.registrationSCU_Delete.idscu.value=SCUValues.SCU[SCUxIndex].ID_SCU;\n        document.registrationSCU_Delete.Category.value=SCUValues.SCU[SCUxIndex].Category;\n        document.registrationSCU_Delete.Description.value=SCUValues.SCU[SCUxIndex].Description;\n        document.registrationSCU_Delete.Street.value=SCUValues.SCU[SCUxIndex].Street;\n        document.registrationSCU_Delete.AreaLocality.value=SCUValues.SCU[SCUxIndex].AreaLocality;\n        document.registrationSCU_Delete.ZipPostCode.value=SCUValues.SCU[SCUxIndex].ZipPostCode;\n        document.registrationSCU_Delete.GPS_Lat.value=SCUValues.SCU[SCUxIndex].GPS_Lat;\n        document.registrationSCU_Delete.GPS_Lon.value=SCUValues.SCU[SCUxIndex].GPS_Lon;\n        document.registrationSCU_Delete.OtherInfo.value=SCUValues.SCU[SCUxIndex].OtherInfo;\n        \n    }\n   \n}\n\n// SCU List is empty\nfunction SCU_Empty()\n{\n        document.registrationSCU_Delete.idscu.value=\"\";\n        document.registrationSCU_Delete.Category.value=\"\";\n        document.registrationSCU_Delete.Description.value=\"\";\n        document.registrationSCU_Delete.Street.value=\"\";\n        document.registrationSCU_Delete.AreaLocality.value=\"\";\n        document.registrationSCU_Delete.ZipPostCode.value=\"\";\n        document.registrationSCU_Delete.GPS_Lat.value=\"\";\n        document.registrationSCU_Delete.GPS_Lon.value=\"\";\n        document.registrationSCU_Delete.OtherInfo.value=\"\";\n}\n\n// Removes all elements in the dropdown SCU list\nfunction removeOptions(selectElement) {\n   var i, L = selectElement.options.length - 1;\n   for(i = L; i >= 0; i--) {\n      selectElement.remove(i);\n   }\n}\n\n\n// Responds to a selection event in SCU list\nfunction SCUListSelEventItem() \n{\n  var SCUxIndex=document.getElementById(\"selectSCUDEL\").selectedIndex;\n  \n  document.registrationSCU_Delete.idbu.value=SCUValues.SCU[SCUxIndex].ID_SCU;\n  document.registrationSCU_Delete.Category.value=SCUValues.SCU[SCUxIndex].Category;\n  document.registrationSCU_Delete.Description.value=SCUValues.SCU[SCUxIndex].Description;\n  document.registrationSCU_Delete.Street.value=SCUValues.SCU[SCUxIndex].Street;\n  document.registrationSCU_Delete.AreaLocality.value=SCUValues.SCU[SCUxIndex].AreaLocality;\n  document.registrationSCU_Delete.ZipPostCode.value=SCUValues.SCU[SCUxIndex].ZipPostCode;\n  document.registrationSCU_Delete.GPS_Lat.value=SCUValues.SCU[SCUxIndex].GPS_Lat;\n  document.registrationSCU_Delete.GPS_Lon.value=SCUValues.SCU[SCUxIndex].GPS_Lon;\n  document.registrationSCU_Delete.OtherInfo.value=SCUValues.SCU[SCUxIndex].OtherInfo;\n}\n\n</script> \n\n<style>\n   \nform {                                         \n    margin: 0 auto; \n\n}\n\ninput[type=text], select, textarea {\n  width: 100%;\n  padding: 1px;\n  border: 1px solid #ccc;\n  font: 14px  'trebuchet MS';\n  resize: vertical;\n}\n\nlabel {\n  padding: 1px 1px 1px 0;\n  font: 14px 'trebuchet MS';\n  display: inline-block;\n}\n\ninput[type=\"submit\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\ninput[type=\"button\"]{\n    /* change these properties to whatever you want */\n    background-color: white;\n    border: 2px solid #555555;\n    color: black;\n    padding: 6px 24px;\n    width: 47%;\n    text-decoration: none;\n    display: inline-block;\n    font:bold 13px  'trebuchet MS';\n    margin: 4px 2px;\n    cursor: pointer;\n}\n\n.col-25 {\n  float: left;\n  width: 40%;\n  margin-top: 3px;\n}\n\n.col-75 {\n  float: left;\n  width: 60%;\n  margin-top: 3px;\n}\n\n/* Clear floats after the columns */\n.row:after {\n  content: \"\";\n  display: table;\n  clear: both;\n}\n\n/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */\n@media screen and (max-width: 600px) {\n  .col-25, .col-75, input[type=submit] {\n    width: 100%;\n    margin-top: 0;\n  }\n}\n\n\n</style>\n\n\n<body>\n\n<h1 style=\"text-align:left;color:black;font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete a Smart City Unit</h1>\n\n<form id=\"registrationSCU_Delete\" name=\"registrationSCU_Delete\">\n    <ul>\n        <select id=\"selectSCUDEL\" onchange=\"SCUListSelEventItem()\">\n            <script>\n            (function(scope) {\n                 scope.$watch('msg.payload', function(data) \n                 {\n                    SCUValues=data;\n                    \n                    //Create Geographic Area List var sel\n                    var sel = document.getElementById(\"selectSCUDEL\");\n                    \n                    //Previous remove all options in Geographic List\n                    sel.options.length = 0;\n                    removeOptions(document.getElementById('selectSCUDEL'));\n                    \n                    for (var i = 0; i < SCUValues.Number ; i++) \n                    {\n                        var option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"SCU \" + SCUValues.SCU[i].ID_SCU + \" \" +SCUValues.SCU[i].Category+ \" \" +SCUValues.SCU[i].AreaLocality+ \" \" +SCUValues.SCU[i].Street);\n                        option.appendChild(txt);\n                        option.setAttribute(\"value\",\"SCU \" + SCUValues.SCU[i].ID_SCU + \" \" +SCUValues.SCU[i].Category+ \" \" +SCUValues.SCU[i].AreaLocality+ \" \" +SCUValues.SCU[i].Street);\n                        sel.insertBefore(option,sel.lastChild);\n                    }\n                    \n                    if (SCUValues.Number>0)\n                        SCU_Init();\n                    else\n                    {\n                        SCU_Empty();\n                        var def_option = document.createElement(\"option\");\n                        txt= document.createTextNode(\"Smart City Units - Empty\");\n                        def_option.appendChild(txt);\n                        def_option.setAttribute(\"value\",\"Smart City Units - Empty\");\n                        sel.insertBefore(def_option,sel.lastChild);\n                    }\n                 });\n            })(scope);\n        </script>\n        </select>\n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"idscu\">ID_SCU</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.idscu.value=SCUValues.SCU[0].ID_SCU;\n                </script>\n                <input type=\"text\" id=\"idscu\" name=\"idscu\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Category\">Category</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.Category.value=SCUValues.SCU[0].Category;\n                </script>\n                <input type=\"text\" id=\"Category\" name=\"Category\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"Description\">Description</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.Description.value=SCUValues.SCU[0].Description;\n                </script>\n                <input type=\"text\" id=\"Description\" name=\"Description\" readOnly=\"readOnly\">\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"Street\">Street</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.Street.value=SCUValues.SCU[0].Street;\n                </script>\n                <input type=\"text\" id=\"Street\" name=\"Street\" readOnly=\"readOnly\" >  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"AreaLocality\">AreaLocality</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.AreaLocality.value=SCUValues.SCU[0].AreaLocality;\n                </script>\n                <input type=\"text\" id=\"AreaLocality\" name=\"AreaLocality\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n                <label for=\"ZipPostCode\">ZipPostCode</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.ZipPostCode.value=SCUValues.SCU[0].ZipPostCode;\n                </script>\n                <input type=\"text\" id=\"ZipPostCode\" name=\"ZipPostCode\" readOnly=\"readOnly\">  \n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lat\">GPS_Lat</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.GPS_Lat.value=SCUValues.SCU[0].GPS_Lat;\n                </script>\n                <input type=\"text\" id=\"GPS_Lat\" name=\"GPS_Lat\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n            \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"GPS_Lon\">GPS_Lon</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.GPS_Lon.value=SCUValues.SCU[0].GPS_Lon;\n                </script>\n                <input type=\"text\" id=\"GPS_Lon\" name=\"GPS_Lon\" readOnly=\"readOnly\" >\n            </div>\n        </div>\n        \n        <div class=\"row\">\n            <div class=\"col-25\">\n              <label for=\"OtherInfo\">OtherInfo</label>\n            </div>\n            <div class=\"col-75\">\n                <script>\n                    document.registrationSCU_Delete.OtherInfo.value=SCUValues.SCU[0].OtherInfo;\n                </script>\n              <textarea id=\"OtherInfo\" name=\"OtherInfo\" style=\"height:20px\" readOnly=\"readOnly\" ></textarea>\n            </div>\n        </div>\n        \n        <p><input type=\"button\" value=\"DELETE\" onclick=\"SCU_Delete()\"> \n           <input type=\"button\" value=\"RESET\" onclick=\"SCU_Init()\">\n    </ul>\n</form>\n</body>\n\n","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1970,"y":1780,"wires":[["bddb97d1.41fa48","f4dad8c1.e7ed68"]]},{"id":"a5ceabab.60f368","type":"function","z":"134bc9b.a104536","name":"F SCU Selected Global","func":"var output = msg.payload;\nvar SCUSelected=global.get('SCUSelected')||0;\nglobal.set('SCUSelected',output);\n\nSCUSelected={payload:SCUSelected};\nreturn SCUSelected;","outputs":1,"noerr":0,"x":2370,"y":720,"wires":[["3107d506.4e308a","72dd69ed.67bc28"]]},{"id":"3107d506.4e308a","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2430,"y":760,"wires":[]},{"id":"410deb82.824d84","type":"onvif-discovery","z":"4e38d7b0.f70e08","name":"","timeout":5,"separate":true,"x":370,"y":220,"wires":[["5233ff44.31b4e"]]},{"id":"b2ff9960.7b5048","type":"inject","z":"4e38d7b0.f70e08","name":"Start searching","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":220,"wires":[[]]},{"id":"5233ff44.31b4e","type":"debug","z":"4e38d7b0.f70e08","name":"Onvif devices","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":570,"y":220,"wires":[]},{"id":"616a0e45.5e3bb","type":"onvif-imaging","z":0,"name":"Camera IP","deviceConfig":"d168db24.228648","profile":"","action":"getSettings","x":550,"y":160,"wires":[["729280cd.56e4"]]},{"id":"759c3fa9.197d4","type":"inject","z":0,"name":"Get imaging settings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":160,"wires":[["4193a48d.f89d3c"]]},{"id":"729280cd.56e4","type":"debug","z":0,"name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":750,"y":160,"wires":[]},{"id":"4193a48d.f89d3c","type":"change","z":0,"name":"","rules":[{"t":"set","p":"action","pt":"msg","to":"getImagingSettings","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":160,"wires":[["616a0e45.5e3bb"]]},{"id":"287c1e37.d1cba2","type":"inject","z":0,"name":"Set imaging settings","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":220,"wires":[["a03ca794.0616f8"]]},{"id":"a03ca794.0616f8","type":"change","z":0,"name":"","rules":[{"t":"set","p":"action","pt":"msg","to":"setImagingSettings","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"{}","tot":"json"},{"t":"set","p":"payload.brightness","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"payload.colorSaturation","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"payload.contrast","pt":"msg","to":"60","tot":"num"},{"t":"set","p":"payload.sharpness","pt":"msg","to":"60","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":220,"wires":[["616a0e45.5e3bb"]]},{"id":"bddb97d1.41fa48","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2030,"y":1820,"wires":[]},{"id":"93532b27.f26938","type":"function","z":"134bc9b.a104536","name":"F SCUnit_DB Insert new Record ","func":"var NewSCU = msg.payload.split(\";\")\n\nvar NewSCUJson = {}\n\nNewSCUJson.ID_SCU=parseInt(NewSCU[0]);\nNewSCUJson.ID_GA=parseInt(NewSCU[1]);\n\nNewSCUJson.Category=NewSCU[2];\nNewSCUJson.Description=NewSCU[3];\nNewSCUJson.Street=NewSCU[4];\nNewSCUJson.AreaLocality=NewSCU[5];\nNewSCUJson.ZipPostCode=NewSCU[6];\n\nNewSCUJson.GPS = {};\nNewSCUJson.GPS.Latitude=NewSCU[7];\nNewSCUJson.GPS.Longitude=NewSCU[8];\nNewSCUJson.OtherInfo=NewSCU[9];\n\nvar SQLInsert={\n    \"topic\" : \"INSERT INTO SCUnit_DB(ID_SCU,ID_GA,Category,Description,Street,AreaLocality,ZipPostCode, GPS_Lat, GPS_Lon, OtherInfo) VALUES (\" + \n    \"NULL\" + \", \" + \n    \"\\\"\" + NewSCUJson.ID_GA + \"\\\"\" + \", \" +\n    \"\\\"\" + NewSCUJson.Category + \"\\\"\" + \", \" + \n    \"\\\"\" + NewSCUJson.Description + \"\\\"\" + \", \" + \n    \"\\\"\" + NewSCUJson.Street + \"\\\"\" + \", \" + \n    \"\\\"\" + NewSCUJson.AreaLocality + \"\\\"\" + \", \" +\n    \"\\\"\" + NewSCUJson.ZipPostCode + \"\\\"\" + \", \" +\n    \"\\\"\" + NewSCUJson.GPS.Latitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewSCUJson.GPS.Longitude + \"\\\"\" + \", \" +\n    \"\\\"\" + NewSCUJson.OtherInfo + \"\\\"\" + \")\"\n}\n\nNewSCUJson={payload:NewSCUJson};\n\nreturn [NewSCUJson, SQLInsert]","outputs":2,"noerr":0,"x":2350,"y":1060,"wires":[["b543dee6.439f4","fd1d6fe6.d9a51"],["89470c4f.482ab"]]},{"id":"b543dee6.439f4","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2390,"y":1100,"wires":[]},{"id":"89470c4f.482ab","type":"sqlite","z":"134bc9b.a104536","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"SCUnit_DB","x":2650,"y":1020,"wires":[["a278201b.a4c42"]]},{"id":"d71c08db.aa4628","type":"link out","z":"134bc9b.a104536","name":"SCULink2MAP","links":["bd1a5328.5eba1"],"x":3075,"y":560,"wires":[]},{"id":"fd1d6fe6.d9a51","type":"function","z":"134bc9b.a104536","name":"F Show a New Smart City Unit","func":"\nvar NEW_SCU = msg.payload;\n\nvar SCU_Sel=msg.payload.Selected;\n\nvar thing = {\n    name:\"Smart City Unit \"+ NEW_SCU.ID_SCU + \" in GA\"+ NEW_SCU.ID_GA, \n    lat: msg.payload.GPS.Latitude,\n    lon: msg.payload.GPS.Longitude,\n    icon:\"laptop\",\n    iconColor:\"orange\",\n    extrainfo:\"Smart City Unit \"+ NEW_SCU.ID_SCU,\n    layer:\"Smart City Units\"\n};\nthing={payload:thing};\nreturn thing;","outputs":1,"noerr":0,"x":2890,"y":1060,"wires":[["1f4067ef.b9cc78","d71c08db.aa4628"]]},{"id":"1f4067ef.b9cc78","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2910,"y":1100,"wires":[]},{"id":"72dd69ed.67bc28","type":"function","z":"134bc9b.a104536","name":"F Show Selected Smart City Unit","func":"\nvar SCU_GA = msg.payload;\n\nvar SCU_Sel=msg.payload.Selected;\n\nvar thing = {\n    name:\"Smart City Unit \"+msg.payload.SCU[SCU_Sel].ID_SCU+\" in GA \"+ msg.payload.SCU[SCU_Sel].ID_GA , \n    lat: msg.payload.SCU[SCU_Sel].GPS_Lat,\n    lon: msg.payload.SCU[SCU_Sel].GPS_Lon,\n    icon:\"laptop\",\n    iconColor:\"Orange\",\n    draggable: true,\n    extrainfo:\"Smart City Unit \"+ msg.payload.SCU[SCU_Sel].ID_SCU,\n    layer:\"Smart City Units\"\n};\nthing={payload:thing};\nreturn thing;","outputs":1,"noerr":0,"x":2780,"y":720,"wires":[["73e7a7b9.163bb8","d71c08db.aa4628"]]},{"id":"73e7a7b9.163bb8","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2810,"y":760,"wires":[]},{"id":"da088886.5b4908","type":"function","z":"551be607.5d9aa8","name":"F First GA Selected","func":"var output = msg.payload;\noutput.Selected=0\nvar GeoArea=global.get('GeoArea')||0;\nglobal.set('GeoArea',output);\n\nGeoArea={payload:GeoArea};\nreturn GeoArea;","outputs":1,"noerr":0,"x":1870,"y":280,"wires":[["5dfc0dbe.419754","55af672.0acd698"]]},{"id":"5dfc0dbe.419754","type":"debug","z":"551be607.5d9aa8","name":"Reset First GA","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1900,"y":320,"wires":[]},{"id":"7a7f1298.84be9c","type":"debug","z":"551be607.5d9aa8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1540,"y":480,"wires":[]},{"id":"167f40e8.9aab4f","type":"comment","z":"551be607.5d9aa8","name":"GA - First Time GA Selected","info":"","x":1900,"y":240,"wires":[]},{"id":"74b0f185.9cdd7","type":"link out","z":"3f6b092a.4e0e46","name":"To GA List","links":["49765178.d112e","fb12106a.3bd1"],"x":855,"y":420,"wires":[]},{"id":"cab86606.5a76a8","type":"function","z":"134bc9b.a104536","name":"F SCUnit_DB Select Record to UPDATE","func":"var ListSCU=msg.payload;\nvar index=ListSCU.Selected;\n\nvar SQLUPDATE={\"topic\" : \"UPDATE SCUnit_DB SET \" +\n    \"ID_SCU=\" + ListSCU.SCU[index].ID_SCU + \", \" +\n    \"ID_GA=\" + ListSCU.SCU[index].ID_GA + \", \" +\n    \"Category=\" + \"\\\"\" + ListSCU.SCU[index].Category + \"\\\"\" + \", \" + \n    \"Description=\" + \"\\\"\" + ListSCU.SCU[index].Description + \"\\\"\" + \", \" + \n    \"Street=\" + \"\\\"\" + ListSCU.SCU[index].Street + \"\\\"\"  + \", \" + \n    \"AreaLocality=\" + \"\\\"\" + ListSCU.SCU[index].AreaLocality + \"\\\"\"  + \", \" + \n    \"ZipPostCode=\" + \"\\\"\" + ListSCU.SCU[index].ZipPostCode + \"\\\"\"  + \", \" +\n    \"GPS_Lat=\" + \"\\\"\" + ListSCU.SCU[index].GPS_Lat + \"\\\"\" + \", \" + \n    \"GPS_Lon=\" + \"\\\"\" + ListSCU.SCU[index].GPS_Lon + \"\\\"\" + \", \" + \n    \"OtherInfo= \"+ \"\\\"\" + ListSCU.SCU[index].OtherInfo + \"\\\"\" +\n\n    \"WHERE ID_SCU=\" + ListSCU.SCU[index].ID_SCU    \n};\n\nreturn [SQLUPDATE, msg];","outputs":1,"noerr":0,"x":2400,"y":1420,"wires":[["628d31b3.2a68e","94606a85.1bc538"]]},{"id":"628d31b3.2a68e","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2470,"y":1460,"wires":[]},{"id":"94606a85.1bc538","type":"sqlite","z":"134bc9b.a104536","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"SCUnit_DB","x":2710,"y":1420,"wires":[["a278201b.a4c42"]]},{"id":"f4dad8c1.e7ed68","type":"function","z":"134bc9b.a104536","name":" F SCUnit_DB Select Record to Delete","func":"var ListSCU=msg.payload;\nvar index=ListSCU.Selected;\n\nvar SQLDELETE={\"topic\" : \"DELETE FROM SCUnit_DB WHERE ID_SCU=\" +\n                          ListSCU.SCU[index].ID_SCU +\n                          \" AND ID_GA=\" + ListSCU.SCU[index].ID_GA };\n\nreturn [SQLDELETE, msg];","outputs":1,"noerr":0,"x":2390,"y":1780,"wires":[["f2f1e5e5.bd6788","ce397355.1d6d"]]},{"id":"f2f1e5e5.bd6788","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2470,"y":1820,"wires":[]},{"id":"ce397355.1d6d","type":"sqlite","z":"134bc9b.a104536","mydb":"93835667.e67c88","sqlquery":"msg.topic","sql":"","name":"SCUnit_DB","x":2710,"y":1780,"wires":[["a278201b.a4c42"]]},{"id":"de87777a.9765c8","type":"function","z":"596fa7a0.139bc8","name":"F Show All Residential Units","func":"//Represents all RU after an update\n\nvar ListRU_GA = msg.payload;\nvar RU_Selected=msg.payload.Selected;\n\n//var RUnitsGA={};\nvar j;\n\nvar RUnitsGA=[];\n\nRUnitsGA['command']={clear:\"Building Units\" };\n\nfor (j = 0; j < msg.payload.Number; j++) \n{\n     RUnitsGA.push({});\n     RUnitsGA[j]['name'] = \"Residential Unit \"+msg.payload.RU[j].ID_RU+\" in GA \"+ msg.payload.RU[j].ID_GA;\n     RUnitsGA[j]['lat'] =msg.payload.RU[j].GPS_Lat;\n     RUnitsGA[j]['lon'] =msg.payload.RU[j].GPS_Lon;\n     RUnitsGA[j]['icon'] =\"home\";\n     RUnitsGA[j]['iconColor'] =\"Lightgreen\";\n     RUnitsGA[j]['draggable'] =true;\n     RUnitsGA[j]['extrainfo'] =\"Residential Unit \"+ msg.payload.RU[j].ID_RU;\n     RUnitsGA[j]['layer'] =\"Residential Units\";\n}\n\nRUnitsGA={payload:RUnitsGA};\nreturn RUnitsGA;","outputs":1,"noerr":0,"x":1940,"y":560,"wires":[["d775cb2b.b69848","3df8eded.75f202"]]},{"id":"3f6fb3db.09523c","type":"function","z":"fc65fec6.42377","name":"F Show All Building Units","func":"//Represents all BU after an update\n\nvar ListBU_GA = msg.payload;\nvar BU_Selected=msg.payload.Selected;\n\n//var RUnitsGA={};\nvar j;\n\nvar BUnitsGA=[];\nfor (j = 0; j < msg.payload.Number; j++) \n{\n     BUnitsGA.push({});\n     BUnitsGA[j]['name'] = \"Building Unit \"+msg.payload.BU[j].ID_BU+\" in GA \"+ msg.payload.BU[j].ID_GA;\n     BUnitsGA[j]['lat'] =msg.payload.BU[j].GPS_Lat;\n     BUnitsGA[j]['lon'] =msg.payload.BU[j].GPS_Lon;\n     BUnitsGA[j]['icon'] =\"building\";\n     BUnitsGA[j]['iconColor'] =\"Lightblue\";\n     BUnitsGA[j]['draggable'] =true;\n     BUnitsGA[j]['extrainfo'] =\"Building Unit \"+ msg.payload.BU[j].ID_BU;\n     BUnitsGA[j]['layer'] =\"Building Units\";\n}\n\nBUnitsGA={payload:BUnitsGA};\nreturn BUnitsGA;","outputs":1,"noerr":0,"x":1830,"y":520,"wires":[["7685e9c3.ed1de8"]]},{"id":"7fc5a3cb.684a7c","type":"function","z":"134bc9b.a104536","name":"F Show All Smart City Units","func":"//Represents all SCU after an update\n\nvar ListSCU_GA = msg.payload;\nvar SCU_Selected=msg.payload.Selected;\n\nvar j;\n\nvar SCUnitsGA=[];\nfor (j = 0; j < msg.payload.Number; j++) \n{\n     SCUnitsGA.push({});\n     SCUnitsGA[j]['name'] = \"Smart City Unit \"+msg.payload.SCU[j].ID_SCU+\" in GA \"+ msg.payload.SCU[j].ID_GA;\n     SCUnitsGA[j]['lat'] =msg.payload.SCU[j].GPS_Lat;\n     SCUnitsGA[j]['lon'] =msg.payload.SCU[j].GPS_Lon;\n     SCUnitsGA[j]['icon'] =\"laptop\";\n     SCUnitsGA[j]['iconColor'] =\"Orange\";\n     SCUnitsGA[j]['draggable'] =true;\n     SCUnitsGA[j]['extrainfo'] =\"Smart City Unit \"+ msg.payload.SCU[j].ID_SCU;\n     SCUnitsGA[j]['layer'] =\"Smart City Units\";\n}\n\nSCUnitsGA={payload:SCUnitsGA};\n\nreturn SCUnitsGA;","outputs":1,"noerr":0,"x":1960,"y":560,"wires":[["d71c08db.aa4628","a7687bfe.dd7a58"]]},{"id":"a7687bfe.dd7a58","type":"debug","z":"134bc9b.a104536","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2010,"y":600,"wires":[]},{"id":"3df8eded.75f202","type":"debug","z":"596fa7a0.139bc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1970,"y":600,"wires":[]},{"id":"f30bb362.fb0d7","type":"smart-plug","z":"69ea4f25.65d09","name":"Plug - Living Room Light","device":"192.168.1.100","interval":"500","eventInterval":"500","x":330,"y":60,"wires":[["509e3ab2.c08c34"]]},{"id":"581a457b.f5e11c","type":"inject","z":"69ea4f25.65d09","name":"","topic":"","payload":"on","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":220,"wires":[["f30bb362.fb0d7"]]},{"id":"509e3ab2.c08c34","type":"debug","z":"69ea4f25.65d09","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":570,"y":60,"wires":[]},{"id":"463fe79.21cc518","type":"inject","z":"69ea4f25.65d09","name":"","topic":"","payload":"off","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":180,"wires":[["f30bb362.fb0d7"]]},{"id":"e117ba12.4368c8","type":"cronplus","z":"b008dbc8.7e8528","name":"","outputField":"payload","timeZone":"","persistDynamic":false,"commandResponseMsgOutput":"output1","outputs":1,"options":[],"x":500,"y":1500,"wires":[["f2df43a0.305df"]]},{"id":"296ccfec.643ca","type":"function","z":"b008dbc8.7e8528","name":"Event_Generator","func":"var Event_Generator = {};\n\nEvent_Generator.command= \"add\";\nEvent_Generator.name= \"every 6\";\nEvent_Generator.expression= \"*/6 * * * * * *\";\nEvent_Generator.expressionType= \"cron\";\nEvent_Generator.payloadType= \"default\";\n\nEvent_Generator={payload:Event_Generator};\n\nreturn Event_Generator;","outputs":1,"noerr":0,"x":230,"y":1500,"wires":[["e117ba12.4368c8"]]},{"id":"4fb38e99.4c404","type":"inject","z":"b008dbc8.7e8528","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":1440,"wires":[["296ccfec.643ca"]]},{"id":"f2df43a0.305df","type":"debug","z":"b008dbc8.7e8528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":490,"y":1440,"wires":[]},{"id":"43b4dd3c.6757f4","type":"function","z":"b008dbc8.7e8528","name":"F SET_STATE () (ETMP --> PPkl)","func":"var Mqtt_Payload = {};\n\nvar Aux_msg={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nAux_msg.Date=year+'.'+month+'.'+day;\nAux_msg.Time=hour+':'+minute+':'+second;\n\nglobal.set('gvBU_t',1);\nvar BU_t=global.get('gvBU_t'); //global variable gvBU_t\nglobal.set('gvBU_k',1);\nvar BU_k=global.get('gvBU_k'); //global variable gvBU_k\nglobal.set('gvPP_l',3);\nvar PP_l=global.get('gvPP_l'); //global variable gvPP_l\n\n\nMqtt_Payload.PP_tkl = BU_t.toString()+BU_k.toString()+PP_l.toString();\nMqtt_Payload.CMD_TYPE= \"SET_STATE\";\nMqtt_Payload.STATE=\"True\";\nMqtt_Payload.NAPLIANCES=3;\nMqtt_Payload.DATE = Aux_msg.Date;\nMqtt_Payload.TIME = Aux_msg.Time;\nMqtt_Payload.Appliances = [];\n\nvar i;\nfor (i = 0; i < Mqtt_Payload.NAPLIANCES; i++) {\n  Mqtt_Payload.Appliances.push({});\n  Mqtt_Payload.Appliances[i]['j'] = i+1;\n  Mqtt_Payload.Appliances[i]['STATE'] = \"ON\";\n  Mqtt_Payload.Appliances[i]['VALUE'] = 0;\n}\n\nMqtt_Payload={payload:Mqtt_Payload};\n\nreturn Mqtt_Payload;","outputs":1,"noerr":0,"x":320,"y":260,"wires":[["4a077ccb.969ea4"]]},{"id":"4815b8f2.d85c48","type":"function","z":"b008dbc8.7e8528","name":"F REQUEST_STATE () (ETMP --> PPkl)","func":"var Mqtt_Payload = {};\n\nvar Aux_msg={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nAux_msg.Date=year+'.'+month+'.'+day;\nAux_msg.Time=hour+':'+minute+':'+second;\n\nglobal.set('gvBU_t',1);\nvar BU_t=global.get('gvBU_t'); //global variable gvBU_t\nglobal.set('gvBU_k',1);\nvar BU_k=global.get('gvBU_k'); //global variable gvBU_k\nglobal.set('gvPP_l',1);\nvar PP_l=global.get('gvPP_l'); //global variable gvPP_l\n\n\nMqtt_Payload.PP_tkl = BU_t.toString()+BU_k.toString()+PP_l.toString();\nMqtt_Payload.CMD_TYPE= \"REQUEST_STATE\";\nMqtt_Payload.STATE=\"True\";\nMqtt_Payload.NAPLIANCES=3;\nMqtt_Payload.DATE = Aux_msg.Date;\nMqtt_Payload.TIME = Aux_msg.Time;\nMqtt_Payload.Appliances = [];\n\nvar i;\nfor (i = 0; i < Mqtt_Payload.NAPLIANCES; i++) {\n  Mqtt_Payload.Appliances.push({});\n  Mqtt_Payload.Appliances[i]['j'] = i+1;\n}\n\nMqtt_Payload={payload:Mqtt_Payload};\n\nreturn Mqtt_Payload;","outputs":1,"noerr":0,"x":340,"y":480,"wires":[["fd1a4392.1f54d"]]},{"id":"51642ab6.393144","type":"comment","z":"b008dbc8.7e8528","name":"F SET_STATE() OPERATION  (ETMP --> PPkl)","info":"","x":260,"y":220,"wires":[]},{"id":"7e1312cf.47052c","type":"comment","z":"b008dbc8.7e8528","name":"F REQUEST_STATE() OPERATION (ETMP --> PPkl)","info":"","x":280,"y":440,"wires":[]},{"id":"4a077ccb.969ea4","type":"mqtt out","z":"b008dbc8.7e8528","name":"ETMP MQTT BROKER","topic":"PPkl/BAkl/AMC/AP","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":830,"y":260,"wires":[]},{"id":"fd1a4392.1f54d","type":"mqtt out","z":"b008dbc8.7e8528","name":"ETMP MQTT BROKER","topic":"PPkl/BAkl/AMC/AP","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":830,"y":480,"wires":[]},{"id":"e07605c7.1037e8","type":"comment","z":"b008dbc8.7e8528","name":"MQTT Publish --> ETMP Broker","info":"","x":850,"y":220,"wires":[]},{"id":"f7cc7256.b823c","type":"comment","z":"b008dbc8.7e8528","name":"MQTT Publish --> ETMP Broker","info":"","x":850,"y":440,"wires":[]},{"id":"92f77da.e75488","type":"mqtt in","z":"b008dbc8.7e8528","name":"ETMP MQTT BROKER","topic":"PPkl/BAkl/AMC/AP","qos":"2","datatype":"auto","broker":"cb7c4e4.778afb","x":280,"y":80,"wires":[["a2cfc3ba.40916","88aaf8e4.c7dbc8"]]},{"id":"a2cfc3ba.40916","type":"json","z":"b008dbc8.7e8528","name":"","property":"payload","action":"","pretty":false,"x":490,"y":80,"wires":[["1ed6456b.4e735b"]]},{"id":"1ed6456b.4e735b","type":"debug","z":"b008dbc8.7e8528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":670,"y":80,"wires":[]},{"id":"94013541.e2d748","type":"inject","z":"b008dbc8.7e8528","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":300,"wires":[["43b4dd3c.6757f4","53802ff4.0f15f"]]},{"id":"f2fd0bff.25caa8","type":"inject","z":"b008dbc8.7e8528","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":520,"wires":[["4815b8f2.d85c48"]]},{"id":"e2bda6ba.9ce818","type":"function","z":"b008dbc8.7e8528","name":"F CONFIRM_MS() (ETMP --> PPkl)","func":"var Mqtt_Payload = {};\n\nvar Aux_msg={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nAux_msg.Date=year+'.'+month+'.'+day;\nAux_msg.Time=hour+':'+minute+':'+second;\n\nglobal.set('gvBU_t',1);\nvar BU_t=global.get('gvBU_t'); //global variable gvBU_t\nglobal.set('gvBU_k',1);\nvar BU_k=global.get('gvBU_k'); //global variable gvBU_k\nglobal.set('gvPP_l',1);\nvar PP_l=global.get('gvPP_l'); //global variable gvPP_l\n\n\nMqtt_Payload.PP_tkl = BU_t.toString()+BU_k.toString()+PP_l.toString();\nMqtt_Payload.CMD_TYPE= \"CONFIRM_MS\";\nMqtt_Payload.STATE=\"True\";\nMqtt_Payload.NAPLIANCES=3;\nMqtt_Payload.DATE = Aux_msg.Date;\nMqtt_Payload.TIME = Aux_msg.Time;\nMqtt_Payload.Appliances = [];\n\nvar i;\nfor (i = 0; i < Mqtt_Payload.NAPLIANCES; i++) {\n  Mqtt_Payload.Appliances.push({});\n  Mqtt_Payload.Appliances[i]['j'] = i+1;\n  Mqtt_Payload.Appliances[i]['CONFIRMED_MS'] = \"OK\";\n}\n\nMqtt_Payload={payload:Mqtt_Payload};\n\nreturn Mqtt_Payload;","outputs":1,"noerr":0,"x":320,"y":700,"wires":[["2b675864.b87318"]]},{"id":"f82b1e94.f5ead","type":"comment","z":"b008dbc8.7e8528","name":"F CONFIRM_MS() OPERATION (ETMP --> PPkl) - (Request_State())","info":"","x":330,"y":660,"wires":[]},{"id":"2b675864.b87318","type":"mqtt out","z":"b008dbc8.7e8528","name":"ETMP MQTT BROKER","topic":"PPkl/BAkl/AMC/AP","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":830,"y":700,"wires":[]},{"id":"63f47562.0cbffc","type":"comment","z":"b008dbc8.7e8528","name":"MQTT Publish","info":"","x":790,"y":660,"wires":[]},{"id":"4b62a408.97f7fc","type":"inject","z":"b008dbc8.7e8528","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":740,"wires":[["e2bda6ba.9ce818"]]},{"id":"816f1d87.51cfb","type":"comment","z":"b008dbc8.7e8528","name":"What is published in ETMP","info":"","x":290,"y":20,"wires":[]},{"id":"bf1d6959.613118","type":"function","z":"b008dbc8.7e8528","name":"F CONFIRM_ALARM() (ETMP --> PPkl)","func":"var Mqtt_Payload = {};\n\nvar Aux_msg={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nAux_msg.Date=year+'.'+month+'.'+day;\nAux_msg.Time=hour+':'+minute+':'+second;\n\nglobal.set('gvBU_t',1);\nvar BU_t=global.get('gvBU_t'); //global variable gvBU_t\nglobal.set('gvBU_k',1);\nvar BU_k=global.get('gvBU_k'); //global variable gvBU_k\nglobal.set('gvPP_l',1);\nvar PP_l=global.get('gvPP_l'); //global variable gvPP_l\n\n\nMqtt_Payload.PP_tkl = BU_t.toString()+BU_k.toString()+PP_l.toString();\nMqtt_Payload.CMD_TYPE= \"CONFIRM_ALARM\";\nMqtt_Payload.STATE=\"True\";\nMqtt_Payload.NAPLIANCES=3;\nMqtt_Payload.DATE = Aux_msg.Date;\nMqtt_Payload.TIME = Aux_msg.Time;\nMqtt_Payload.Appliances = [];\n\nvar i;\nfor (i = 0; i < Mqtt_Payload.NAPLIANCES; i++) {\n  Mqtt_Payload.Appliances.push({});\n  Mqtt_Payload.Appliances[i]['j'] = i+1;\n  Mqtt_Payload.Appliances[i]['CONFIRMED'] = \"OK\";\n}\n\nMqtt_Payload={payload:Mqtt_Payload};\n\nreturn Mqtt_Payload;","outputs":1,"noerr":0,"x":340,"y":920,"wires":[["9f497a86.a6c328"]]},{"id":"63777ba5.61fd44","type":"comment","z":"b008dbc8.7e8528","name":"F CONFIRM_ALARM() OPERATION (ETMP --> PPkl) - (Alarm Received)","info":"","x":340,"y":880,"wires":[]},{"id":"9f497a86.a6c328","type":"mqtt out","z":"b008dbc8.7e8528","name":"ETMP MQTT BROKER","topic":"PPkl/BAkl/AMC/AP","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":830,"y":920,"wires":[]},{"id":"8e6e2ae5.123dc8","type":"comment","z":"b008dbc8.7e8528","name":"MQTT Publish","info":"","x":790,"y":880,"wires":[]},{"id":"586a3a93.425a44","type":"inject","z":"b008dbc8.7e8528","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":960,"wires":[["bf1d6959.613118"]]},{"id":"b017a5c3.789098","type":"function","z":"b008dbc8.7e8528","name":"F CONFIRM_EVENT() (ETMP --> PPkl)","func":"var Mqtt_Payload = {};\n\nvar Aux_msg={};\n\nvar now     = new Date(); \nvar hour    = now.getHours();\nvar minute  = now.getMinutes();\nvar second  = now.getSeconds();\nvar day     = now.getDate();\nvar month   = now.getMonth()+1;\nvar year    = now.getFullYear();\n\nif(hour.toString().length == 1)\n  hour = '0'+hour;\nif(minute.toString().length == 1) \n  minute = '0'+minute;\n  \nAux_msg.Date=year+'.'+month+'.'+day;\nAux_msg.Time=hour+':'+minute+':'+second;\n\nglobal.set('gvBU_t',1);\nvar BU_t=global.get('gvBU_t'); //global variable gvBU_t\nglobal.set('gvBU_k',1);\nvar BU_k=global.get('gvBU_k'); //global variable gvBU_k\nglobal.set('gvPP_l',1);\nvar PP_l=global.get('gvPP_l'); //global variable gvPP_l\n\n\nMqtt_Payload.PP_tkl = BU_t.toString()+BU_k.toString()+PP_l.toString();\nMqtt_Payload.CMD_TYPE= \"CONFIRM_EVENT\";\nMqtt_Payload.STATE=\"True\";\nMqtt_Payload.NAPLIANCES=3;\nMqtt_Payload.DATE = Aux_msg.Date;\nMqtt_Payload.TIME = Aux_msg.Time;\nMqtt_Payload.Appliances = [];\n\nvar i;\nfor (i = 0; i < Mqtt_Payload.NAPLIANCES; i++) {\n  Mqtt_Payload.Appliances.push({});\n  Mqtt_Payload.Appliances[i]['j'] = i+1;\n  Mqtt_Payload.Appliances[i]['CONFIRMED'] = \"OK\";\n}\n\nMqtt_Payload={payload:Mqtt_Payload};\n\nreturn Mqtt_Payload;","outputs":1,"noerr":0,"x":340,"y":1180,"wires":[["8f8fe871.d80418"]]},{"id":"72bdc2d.ab4783c","type":"comment","z":"b008dbc8.7e8528","name":"F CONFIRM_EVENT() OPERATION (ETMP --> PPkl) (Event Received)","info":"","x":330,"y":1140,"wires":[]},{"id":"8f8fe871.d80418","type":"mqtt out","z":"b008dbc8.7e8528","name":"ETMP MQTT BROKER","topic":"PPkl/BAkl/AMC/AP","qos":"2","retain":"true","broker":"cb7c4e4.778afb","x":830,"y":1180,"wires":[]},{"id":"41997593.3871fc","type":"comment","z":"b008dbc8.7e8528","name":"MQTT Publish","info":"","x":790,"y":1140,"wires":[]},{"id":"344ca5f5.80716a","type":"inject","z":"b008dbc8.7e8528","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":1220,"wires":[["b017a5c3.789098"]]},{"id":"db27407e.7c62","type":"mqtt in","z":"92ee3c55.ae59d","name":"PPkl_Broker","topic":"fileark/f/homeautomation","qos":"0","datatype":"auto","broker":"eebc56dd.db9f28","x":150,"y":120,"wires":[["7b74eb1b.0eb354","2252c42.5427a3c"]]},{"id":"2252c42.5427a3c","type":"debug","z":"92ee3c55.ae59d","name":"Debug","active":true,"console":"false","complete":"payload","x":670,"y":120,"wires":[]},{"id":"f414a85a.393d18","type":"mqtt out","z":"92ee3c55.ae59d","name":"ETMP_BROKER","topic":"","qos":"0","retain":"false","broker":"cb7c4e4.778afb","x":710,"y":200,"wires":[]},{"id":"7b74eb1b.0eb354","type":"function","z":"92ee3c55.ae59d","name":"Forward Messages","func":"if (msg.payload == \"OpenGarageDoor\")  {\n   return {topic:'GarageDoor/',payload:'OpenGarageDoor'}; } \n   \nif (msg.payload == \"CloseGarageDoor\")  {\n   return {topic:'GarageDoor/',payload:'CloseGarageDoor'}; }\n   \nif (msg.payload == \"RingDinnerBell\")  {\n   return {topic:'DoorBell',payload:'Chime5'}; }\n\nif (msg.payload == \"GarageACON\")  {\n   return {topic:'Garage/AC',payload:'On'}; } \n\nif (msg.payload == \"GarageACOFF\")  {\n   return {topic:'Garage/AC',payload:'Off'}; } \n   \nif (msg.payload == \"GarageLightOn\")  {\n   return {topic:'Garage/Light',payload:'On'}; } \n\nif (msg.payload == \"GarageLightOff\")  {\n   return {topic:'Garage/Light',payload:'Off'}; }    ","outputs":1,"noerr":0,"x":390,"y":200,"wires":[["f414a85a.393d18","2252c42.5427a3c"]]},{"id":"2c773f8e.837e9","type":"comment","z":"92ee3c55.ae59d","name":"Bridging example mqtt","info":"","x":380,"y":80,"wires":[]},{"id":"88aaf8e4.c7dbc8","type":"debug","z":"b008dbc8.7e8528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":500,"y":140,"wires":[]},{"id":"cf97ee8b.6575a","type":"mqtt in","z":"b008dbc8.7e8528","name":"","topic":"ETMP/audio","qos":"2","datatype":"auto","broker":"cb7c4e4.778afb","x":310,"y":1560,"wires":[["c7920b52.f44ec8","b355c816.24ca08"]]},{"id":"c7920b52.f44ec8","type":"debug","z":"b008dbc8.7e8528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":500,"y":1560,"wires":[]},{"id":"b355c816.24ca08","type":"ui_audio","z":"b008dbc8.7e8528","name":"","group":"2845d045.110d4","voice":"pt-PT","always":true,"x":510,"y":1640,"wires":[]},{"id":"53802ff4.0f15f","type":"node-red-my-local-ip","z":"b008dbc8.7e8528","name":"","x":460,"y":360,"wires":[["c0e9421.be9f2c"]]},{"id":"c0e9421.be9f2c","type":"debug","z":"b008dbc8.7e8528","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":660,"y":380,"wires":[]}]